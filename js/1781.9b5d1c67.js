(self["webpackChunkilpi_administracao_frontend_vue3"]=self["webpackChunkilpi_administracao_frontend_vue3"]||[]).push([[1781],{3725:function(){"use strict";"function"!==typeof Object.assign&&(Object.assign=function(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];if(!e)throw TypeError("Cannot convert undefined or null to object");for(var r=function(t){t&&Object.keys(t).forEach((function(n){return e[n]=t[n]}))},i=0,o=t;i<o.length;i++){var s=o[i];r(s)}return e})},1567:function(e,t,n){var r=n(9531),i=n(8606),o=r(i,"DataView");e.exports=o},4762:function(e,t,n){var r=n(4473),i=n(1297),o=n(5576),s=n(3388),a=n(1916);function l(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype["delete"]=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},6202:function(e,t,n){var r=n(9065),i=n(8513),o=n(9496),s=n(9804),a=n(6316);function l(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype["delete"]=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},7546:function(e,t,n){var r=n(9531),i=n(8606),o=r(i,"Map");e.exports=o},3066:function(e,t,n){var r=n(6281),i=n(2353),o=n(984),s=n(9276),a=n(3612);function l(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}l.prototype.clear=r,l.prototype["delete"]=i,l.prototype.get=o,l.prototype.has=s,l.prototype.set=a,e.exports=l},7525:function(e,t,n){var r=n(9531),i=n(8606),o=r(i,"Promise");e.exports=o},2288:function(e,t,n){var r=n(9531),i=n(8606),o=r(i,"Set");e.exports=o},1676:function(e,t,n){n(4114);var r=n(3066),i=n(6421),o=n(2550);function s(e){var t=-1,n=null==e?0:e.length;this.__data__=new r;while(++t<n)this.add(e[t])}s.prototype.add=s.prototype.push=i,s.prototype.has=o,e.exports=s},1068:function(e,t,n){var r=n(6202),i=n(6039),o=n(6323),s=n(2626),a=n(5926),l=n(5102);function c(e){var t=this.__data__=new r(e);this.size=t.size}c.prototype.clear=i,c.prototype["delete"]=o,c.prototype.get=s,c.prototype.has=a,c.prototype.set=l,e.exports=c},7874:function(e,t,n){var r=n(8606),i=r.Symbol;e.exports=i},3559:function(e,t,n){var r=n(8606),i=r.Uint8Array;e.exports=i},7382:function(e,t,n){var r=n(9531),i=n(8606),o=r(i,"WeakMap");e.exports=o},4391:function(e){function t(e,t){var n=-1,r=null==e?0:e.length,i=0,o=[];while(++n<r){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}e.exports=t},857:function(e,t,n){n(4114);var r=n(7305),i=n(5219),o=n(5366),s=n(317),a=n(7744),l=n(9562),c=Object.prototype,u=c.hasOwnProperty;function h(e,t){var n=o(e),c=!n&&i(e),h=!n&&!c&&s(e),d=!n&&!c&&!h&&l(e),f=n||c||h||d,p=f?r(e.length,String):[],g=p.length;for(var m in e)!t&&!u.call(e,m)||f&&("length"==m||h&&("offset"==m||"parent"==m)||d&&("buffer"==m||"byteLength"==m||"byteOffset"==m)||a(m,g))||p.push(m);return p}e.exports=h},2297:function(e){function t(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}e.exports=t},1281:function(e){function t(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}e.exports=t},9386:function(e,t,n){var r=n(6061);function i(e,t){var n=e.length;while(n--)if(r(e[n][0],t))return n;return-1}e.exports=i},1268:function(e,t,n){var r=n(2297),i=n(5366);function o(e,t,n){var o=t(e);return i(e)?o:r(o,n(e))}e.exports=o},9315:function(e,t,n){var r=n(7874),i=n(38),o=n(5677),s="[object Null]",a="[object Undefined]",l=r?r.toStringTag:void 0;function c(e){return null==e?void 0===e?a:s:l&&l in Object(e)?i(e):o(e)}e.exports=c},8843:function(e,t,n){var r=n(9315),i=n(5091),o="[object Arguments]";function s(e){return i(e)&&r(e)==o}e.exports=s},9231:function(e,t,n){var r=n(6817),i=n(5091);function o(e,t,n,s,a){return e===t||(null==e||null==t||!i(e)&&!i(t)?e!==e&&t!==t:r(e,t,n,s,o,a))}e.exports=o},6817:function(e,t,n){var r=n(1068),i=n(8478),o=n(797),s=n(3534),a=n(710),l=n(5366),c=n(317),u=n(9562),h=1,d="[object Arguments]",f="[object Array]",p="[object Object]",g=Object.prototype,m=g.hasOwnProperty;function v(e,t,n,g,v,y){var b=l(e),w=l(t),x=b?f:a(e),k=w?f:a(t);x=x==d?p:x,k=k==d?p:k;var _=x==p,O=k==p,S=x==k;if(S&&c(e)){if(!c(t))return!1;b=!0,_=!1}if(S&&!_)return y||(y=new r),b||u(e)?i(e,t,n,g,v,y):o(e,t,x,n,g,v,y);if(!(n&h)){var E=_&&m.call(e,"__wrapped__"),C=O&&m.call(t,"__wrapped__");if(E||C){var T=E?e.value():e,A=C?t.value():t;return y||(y=new r),v(T,A,n,g,y)}}return!!S&&(y||(y=new r),s(e,t,n,g,v,y))}e.exports=v},1976:function(e,t,n){var r=n(4823),i=n(3223),o=n(9692),s=n(2530),a=/[\\^$.*+?()[\]{}|]/g,l=/^\[object .+?Constructor\]$/,c=Function.prototype,u=Object.prototype,h=c.toString,d=u.hasOwnProperty,f=RegExp("^"+h.call(d).replace(a,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function p(e){if(!o(e)||i(e))return!1;var t=r(e)?f:l;return t.test(s(e))}e.exports=p},658:function(e,t,n){var r=n(9315),i=n(9851),o=n(5091),s="[object Arguments]",a="[object Array]",l="[object Boolean]",c="[object Date]",u="[object Error]",h="[object Function]",d="[object Map]",f="[object Number]",p="[object Object]",g="[object RegExp]",m="[object Set]",v="[object String]",y="[object WeakMap]",b="[object ArrayBuffer]",w="[object DataView]",x="[object Float32Array]",k="[object Float64Array]",_="[object Int8Array]",O="[object Int16Array]",S="[object Int32Array]",E="[object Uint8Array]",C="[object Uint8ClampedArray]",T="[object Uint16Array]",A="[object Uint32Array]",D={};function M(e){return o(e)&&i(e.length)&&!!D[r(e)]}D[x]=D[k]=D[_]=D[O]=D[S]=D[E]=D[C]=D[T]=D[A]=!0,D[s]=D[a]=D[b]=D[l]=D[w]=D[c]=D[u]=D[h]=D[d]=D[f]=D[p]=D[g]=D[m]=D[v]=D[y]=!1,e.exports=M},8659:function(e,t,n){n(4114);var r=n(9426),i=n(6409),o=Object.prototype,s=o.hasOwnProperty;function a(e){if(!r(e))return i(e);var t=[];for(var n in Object(e))s.call(e,n)&&"constructor"!=n&&t.push(n);return t}e.exports=a},7305:function(e){function t(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}e.exports=t},4276:function(e){function t(e){return function(t){return e(t)}}e.exports=t},4032:function(e){function t(e,t){return e.has(t)}e.exports=t},3886:function(e,t,n){var r=n(8606),i=r["__core-js_shared__"];e.exports=i},8478:function(e,t,n){n(4114);var r=n(1676),i=n(1281),o=n(4032),s=1,a=2;function l(e,t,n,l,c,u){var h=n&s,d=e.length,f=t.length;if(d!=f&&!(h&&f>d))return!1;var p=u.get(e),g=u.get(t);if(p&&g)return p==t&&g==e;var m=-1,v=!0,y=n&a?new r:void 0;u.set(e,t),u.set(t,e);while(++m<d){var b=e[m],w=t[m];if(l)var x=h?l(w,b,m,t,e,u):l(b,w,m,e,t,u);if(void 0!==x){if(x)continue;v=!1;break}if(y){if(!i(t,(function(e,t){if(!o(y,t)&&(b===e||c(b,e,n,l,u)))return y.push(t)}))){v=!1;break}}else if(b!==w&&!c(b,w,n,l,u)){v=!1;break}}return u["delete"](e),u["delete"](t),v}e.exports=l},797:function(e,t,n){var r=n(7874),i=n(3559),o=n(6061),s=n(8478),a=n(7830),l=n(1764),c=1,u=2,h="[object Boolean]",d="[object Date]",f="[object Error]",p="[object Map]",g="[object Number]",m="[object RegExp]",v="[object Set]",y="[object String]",b="[object Symbol]",w="[object ArrayBuffer]",x="[object DataView]",k=r?r.prototype:void 0,_=k?k.valueOf:void 0;function O(e,t,n,r,k,O,S){switch(n){case x:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case w:return!(e.byteLength!=t.byteLength||!O(new i(e),new i(t)));case h:case d:case g:return o(+e,+t);case f:return e.name==t.name&&e.message==t.message;case m:case y:return e==t+"";case p:var E=a;case v:var C=r&c;if(E||(E=l),e.size!=t.size&&!C)return!1;var T=S.get(e);if(T)return T==t;r|=u,S.set(e,t);var A=s(E(e),E(t),r,k,O,S);return S["delete"](e),A;case b:if(_)return _.call(e)==_.call(t)}return!1}e.exports=O},3534:function(e,t,n){var r=n(2329),i=1,o=Object.prototype,s=o.hasOwnProperty;function a(e,t,n,o,a,l){var c=n&i,u=r(e),h=u.length,d=r(t),f=d.length;if(h!=f&&!c)return!1;var p=h;while(p--){var g=u[p];if(!(c?g in t:s.call(t,g)))return!1}var m=l.get(e),v=l.get(t);if(m&&v)return m==t&&v==e;var y=!0;l.set(e,t),l.set(t,e);var b=c;while(++p<h){g=u[p];var w=e[g],x=t[g];if(o)var k=c?o(x,w,g,t,e,l):o(w,x,g,e,t,l);if(!(void 0===k?w===x||a(w,x,n,o,l):k)){y=!1;break}b||(b="constructor"==g)}if(y&&!b){var _=e.constructor,O=t.constructor;_==O||!("constructor"in e)||!("constructor"in t)||"function"==typeof _&&_ instanceof _&&"function"==typeof O&&O instanceof O||(y=!1)}return l["delete"](e),l["delete"](t),y}e.exports=a},6903:function(e,t,n){var r="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g;e.exports=r},2329:function(e,t,n){var r=n(1268),i=n(9915),o=n(8987);function s(e){return r(e,o,i)}e.exports=s},6636:function(e,t,n){var r=n(3883);function i(e,t){var n=e.__data__;return r(t)?n["string"==typeof t?"string":"hash"]:n.map}e.exports=i},9531:function(e,t,n){var r=n(1976),i=n(8619);function o(e,t){var n=i(e,t);return r(n)?n:void 0}e.exports=o},38:function(e,t,n){var r=n(7874),i=Object.prototype,o=i.hasOwnProperty,s=i.toString,a=r?r.toStringTag:void 0;function l(e){var t=o.call(e,a),n=e[a];try{e[a]=void 0;var r=!0}catch(l){}var i=s.call(e);return r&&(t?e[a]=n:delete e[a]),i}e.exports=l},9915:function(e,t,n){var r=n(4391),i=n(7770),o=Object.prototype,s=o.propertyIsEnumerable,a=Object.getOwnPropertySymbols,l=a?function(e){return null==e?[]:(e=Object(e),r(a(e),(function(t){return s.call(e,t)})))}:i;e.exports=l},710:function(e,t,n){n(6573),n(8100),n(7936);var r=n(1567),i=n(7546),o=n(7525),s=n(2288),a=n(7382),l=n(9315),c=n(2530),u="[object Map]",h="[object Object]",d="[object Promise]",f="[object Set]",p="[object WeakMap]",g="[object DataView]",m=c(r),v=c(i),y=c(o),b=c(s),w=c(a),x=l;(r&&x(new r(new ArrayBuffer(1)))!=g||i&&x(new i)!=u||o&&x(o.resolve())!=d||s&&x(new s)!=f||a&&x(new a)!=p)&&(x=function(e){var t=l(e),n=t==h?e.constructor:void 0,r=n?c(n):"";if(r)switch(r){case m:return g;case v:return u;case y:return d;case b:return f;case w:return p}return t}),e.exports=x},8619:function(e){function t(e,t){return null==e?void 0:e[t]}e.exports=t},4473:function(e,t,n){var r=n(6849);function i(){this.__data__=r?r(null):{},this.size=0}e.exports=i},1297:function(e){function t(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}e.exports=t},5576:function(e,t,n){var r=n(6849),i="__lodash_hash_undefined__",o=Object.prototype,s=o.hasOwnProperty;function a(e){var t=this.__data__;if(r){var n=t[e];return n===i?void 0:n}return s.call(t,e)?t[e]:void 0}e.exports=a},3388:function(e,t,n){var r=n(6849),i=Object.prototype,o=i.hasOwnProperty;function s(e){var t=this.__data__;return r?void 0!==t[e]:o.call(t,e)}e.exports=s},1916:function(e,t,n){var r=n(6849),i="__lodash_hash_undefined__";function o(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=r&&void 0===t?i:t,this}e.exports=o},7744:function(e){var t=9007199254740991,n=/^(?:0|[1-9]\d*)$/;function r(e,r){var i=typeof e;return r=null==r?t:r,!!r&&("number"==i||"symbol"!=i&&n.test(e))&&e>-1&&e%1==0&&e<r}e.exports=r},3883:function(e){function t(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}e.exports=t},3223:function(e,t,n){var r=n(3886),i=function(){var e=/[^.]+$/.exec(r&&r.keys&&r.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function o(e){return!!i&&i in e}e.exports=o},9426:function(e){var t=Object.prototype;function n(e){var n=e&&e.constructor,r="function"==typeof n&&n.prototype||t;return e===r}e.exports=n},9065:function(e){function t(){this.__data__=[],this.size=0}e.exports=t},8513:function(e,t,n){var r=n(9386),i=Array.prototype,o=i.splice;function s(e){var t=this.__data__,n=r(t,e);if(n<0)return!1;var i=t.length-1;return n==i?t.pop():o.call(t,n,1),--this.size,!0}e.exports=s},9496:function(e,t,n){var r=n(9386);function i(e){var t=this.__data__,n=r(t,e);return n<0?void 0:t[n][1]}e.exports=i},9804:function(e,t,n){var r=n(9386);function i(e){return r(this.__data__,e)>-1}e.exports=i},6316:function(e,t,n){n(4114);var r=n(9386);function i(e,t){var n=this.__data__,i=r(n,e);return i<0?(++this.size,n.push([e,t])):n[i][1]=t,this}e.exports=i},6281:function(e,t,n){var r=n(4762),i=n(6202),o=n(7546);function s(){this.size=0,this.__data__={hash:new r,map:new(o||i),string:new r}}e.exports=s},2353:function(e,t,n){var r=n(6636);function i(e){var t=r(this,e)["delete"](e);return this.size-=t?1:0,t}e.exports=i},984:function(e,t,n){var r=n(6636);function i(e){return r(this,e).get(e)}e.exports=i},9276:function(e,t,n){var r=n(6636);function i(e){return r(this,e).has(e)}e.exports=i},3612:function(e,t,n){var r=n(6636);function i(e,t){var n=r(this,e),i=n.size;return n.set(e,t),this.size+=n.size==i?0:1,this}e.exports=i},7830:function(e){function t(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}e.exports=t},6849:function(e,t,n){var r=n(9531),i=r(Object,"create");e.exports=i},6409:function(e,t,n){var r=n(8230),i=r(Object.keys,Object);e.exports=i},770:function(e,t,n){e=n.nmd(e);var r=n(6903),i=t&&!t.nodeType&&t,o=i&&e&&!e.nodeType&&e,s=o&&o.exports===i,a=s&&r.process,l=function(){try{var e=o&&o.require&&o.require("util").types;return e||a&&a.binding&&a.binding("util")}catch(t){}}();e.exports=l},5677:function(e){var t=Object.prototype,n=t.toString;function r(e){return n.call(e)}e.exports=r},8230:function(e){function t(e,t){return function(n){return e(t(n))}}e.exports=t},8606:function(e,t,n){var r=n(6903),i="object"==typeof self&&self&&self.Object===Object&&self,o=r||i||Function("return this")();e.exports=o},6421:function(e){var t="__lodash_hash_undefined__";function n(e){return this.__data__.set(e,t),this}e.exports=n},2550:function(e){function t(e){return this.__data__.has(e)}e.exports=t},1764:function(e){function t(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}e.exports=t},6039:function(e,t,n){var r=n(6202);function i(){this.__data__=new r,this.size=0}e.exports=i},6323:function(e){function t(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}e.exports=t},2626:function(e){function t(e){return this.__data__.get(e)}e.exports=t},5926:function(e){function t(e){return this.__data__.has(e)}e.exports=t},5102:function(e,t,n){n(4114);var r=n(6202),i=n(7546),o=n(3066),s=200;function a(e,t){var n=this.__data__;if(n instanceof r){var a=n.__data__;if(!i||a.length<s-1)return a.push([e,t]),this.size=++n.size,this;n=this.__data__=new o(a)}return n.set(e,t),this.size=n.size,this}e.exports=a},2530:function(e){var t=Function.prototype,n=t.toString;function r(e){if(null!=e){try{return n.call(e)}catch(t){}try{return e+""}catch(t){}}return""}e.exports=r},6061:function(e){function t(e,t){return e===t||e!==e&&t!==t}e.exports=t},5219:function(e,t,n){var r=n(8843),i=n(5091),o=Object.prototype,s=o.hasOwnProperty,a=o.propertyIsEnumerable,l=r(function(){return arguments}())?r:function(e){return i(e)&&s.call(e,"callee")&&!a.call(e,"callee")};e.exports=l},5366:function(e){var t=Array.isArray;e.exports=t},8465:function(e,t,n){var r=n(4823),i=n(9851);function o(e){return null!=e&&i(e.length)&&!r(e)}e.exports=o},317:function(e,t,n){e=n.nmd(e);var r=n(8606),i=n(3236),o=t&&!t.nodeType&&t,s=o&&e&&!e.nodeType&&e,a=s&&s.exports===o,l=a?r.Buffer:void 0,c=l?l.isBuffer:void 0,u=c||i;e.exports=u},8567:function(e,t,n){var r=n(9231);function i(e,t){return r(e,t)}e.exports=i},4823:function(e,t,n){var r=n(9315),i=n(9692),o="[object AsyncFunction]",s="[object Function]",a="[object GeneratorFunction]",l="[object Proxy]";function c(e){if(!i(e))return!1;var t=r(e);return t==s||t==a||t==o||t==l}e.exports=c},9851:function(e){var t=9007199254740991;function n(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=t}e.exports=n},9692:function(e){function t(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}e.exports=t},5091:function(e){function t(e){return null!=e&&"object"==typeof e}e.exports=t},9562:function(e,t,n){var r=n(658),i=n(4276),o=n(770),s=o&&o.isTypedArray,a=s?i(s):r;e.exports=a},8987:function(e,t,n){var r=n(857),i=n(8659),o=n(8465);function s(e){return o(e)?r(e):i(e)}e.exports=s},8626:function(e,t,n){var r;e=n.nmd(e),n(4114),n(6573),n(8100),n(7936),function(){var i,o="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",l="Expected a function",c="Invalid `variable` option passed into `_.template`",u="__lodash_hash_undefined__",h=500,d="__lodash_placeholder__",f=1,p=2,g=4,m=1,v=2,y=1,b=2,w=4,x=8,k=16,_=32,O=64,S=128,E=256,C=512,T=30,A="...",D=800,M=16,F=1,R=2,P=3,I=1/0,L=9007199254740991,$=17976931348623157e292,N=NaN,j=4294967295,B=j-1,V=j>>>1,q=[["ary",S],["bind",y],["bindKey",b],["curry",x],["curryRight",k],["flip",C],["partial",_],["partialRight",O],["rearg",E]],z="[object Arguments]",H="[object Array]",W="[object AsyncFunction]",Q="[object Boolean]",U="[object Date]",Y="[object DOMException]",X="[object Error]",Z="[object Function]",G="[object GeneratorFunction]",K="[object Map]",J="[object Number]",ee="[object Null]",te="[object Object]",ne="[object Promise]",re="[object Proxy]",ie="[object RegExp]",oe="[object Set]",se="[object String]",ae="[object Symbol]",le="[object Undefined]",ce="[object WeakMap]",ue="[object WeakSet]",he="[object ArrayBuffer]",de="[object DataView]",fe="[object Float32Array]",pe="[object Float64Array]",ge="[object Int8Array]",me="[object Int16Array]",ve="[object Int32Array]",ye="[object Uint8Array]",be="[object Uint8ClampedArray]",we="[object Uint16Array]",xe="[object Uint32Array]",ke=/\b__p \+= '';/g,_e=/\b(__p \+=) '' \+/g,Oe=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Se=/&(?:amp|lt|gt|quot|#39);/g,Ee=/[&<>"']/g,Ce=RegExp(Se.source),Te=RegExp(Ee.source),Ae=/<%-([\s\S]+?)%>/g,De=/<%([\s\S]+?)%>/g,Me=/<%=([\s\S]+?)%>/g,Fe=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Re=/^\w*$/,Pe=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Ie=/[\\^$.*+?()[\]{}|]/g,Le=RegExp(Ie.source),$e=/^\s+/,Ne=/\s/,je=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Be=/\{\n\/\* \[wrapped with (.+)\] \*/,Ve=/,? & /,qe=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,ze=/[()=,{}\[\]\/\s]/,He=/\\(\\)?/g,We=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,Qe=/\w*$/,Ue=/^[-+]0x[0-9a-f]+$/i,Ye=/^0b[01]+$/i,Xe=/^\[object .+?Constructor\]$/,Ze=/^0o[0-7]+$/i,Ge=/^(?:0|[1-9]\d*)$/,Ke=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Je=/($^)/,et=/['\n\r\u2028\u2029\\]/g,tt="\\ud800-\\udfff",nt="\\u0300-\\u036f",rt="\\ufe20-\\ufe2f",it="\\u20d0-\\u20ff",ot=nt+rt+it,st="\\u2700-\\u27bf",at="a-z\\xdf-\\xf6\\xf8-\\xff",lt="\\xac\\xb1\\xd7\\xf7",ct="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",ut="\\u2000-\\u206f",ht=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",dt="A-Z\\xc0-\\xd6\\xd8-\\xde",ft="\\ufe0e\\ufe0f",pt=lt+ct+ut+ht,gt="['’]",mt="["+tt+"]",vt="["+pt+"]",yt="["+ot+"]",bt="\\d+",wt="["+st+"]",xt="["+at+"]",kt="[^"+tt+pt+bt+st+at+dt+"]",_t="\\ud83c[\\udffb-\\udfff]",Ot="(?:"+yt+"|"+_t+")",St="[^"+tt+"]",Et="(?:\\ud83c[\\udde6-\\uddff]){2}",Ct="[\\ud800-\\udbff][\\udc00-\\udfff]",Tt="["+dt+"]",At="\\u200d",Dt="(?:"+xt+"|"+kt+")",Mt="(?:"+Tt+"|"+kt+")",Ft="(?:"+gt+"(?:d|ll|m|re|s|t|ve))?",Rt="(?:"+gt+"(?:D|LL|M|RE|S|T|VE))?",Pt=Ot+"?",It="["+ft+"]?",Lt="(?:"+At+"(?:"+[St,Et,Ct].join("|")+")"+It+Pt+")*",$t="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",Nt="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",jt=It+Pt+Lt,Bt="(?:"+[wt,Et,Ct].join("|")+")"+jt,Vt="(?:"+[St+yt+"?",yt,Et,Ct,mt].join("|")+")",qt=RegExp(gt,"g"),zt=RegExp(yt,"g"),Ht=RegExp(_t+"(?="+_t+")|"+Vt+jt,"g"),Wt=RegExp([Tt+"?"+xt+"+"+Ft+"(?="+[vt,Tt,"$"].join("|")+")",Mt+"+"+Rt+"(?="+[vt,Tt+Dt,"$"].join("|")+")",Tt+"?"+Dt+"+"+Ft,Tt+"+"+Rt,Nt,$t,bt,Bt].join("|"),"g"),Qt=RegExp("["+At+tt+ot+ft+"]"),Ut=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Yt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Xt=-1,Zt={};Zt[fe]=Zt[pe]=Zt[ge]=Zt[me]=Zt[ve]=Zt[ye]=Zt[be]=Zt[we]=Zt[xe]=!0,Zt[z]=Zt[H]=Zt[he]=Zt[Q]=Zt[de]=Zt[U]=Zt[X]=Zt[Z]=Zt[K]=Zt[J]=Zt[te]=Zt[ie]=Zt[oe]=Zt[se]=Zt[ce]=!1;var Gt={};Gt[z]=Gt[H]=Gt[he]=Gt[de]=Gt[Q]=Gt[U]=Gt[fe]=Gt[pe]=Gt[ge]=Gt[me]=Gt[ve]=Gt[K]=Gt[J]=Gt[te]=Gt[ie]=Gt[oe]=Gt[se]=Gt[ae]=Gt[ye]=Gt[be]=Gt[we]=Gt[xe]=!0,Gt[X]=Gt[Z]=Gt[ce]=!1;var Kt={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss","Ā":"A","Ă":"A","Ą":"A","ā":"a","ă":"a","ą":"a","Ć":"C","Ĉ":"C","Ċ":"C","Č":"C","ć":"c","ĉ":"c","ċ":"c","č":"c","Ď":"D","Đ":"D","ď":"d","đ":"d","Ē":"E","Ĕ":"E","Ė":"E","Ę":"E","Ě":"E","ē":"e","ĕ":"e","ė":"e","ę":"e","ě":"e","Ĝ":"G","Ğ":"G","Ġ":"G","Ģ":"G","ĝ":"g","ğ":"g","ġ":"g","ģ":"g","Ĥ":"H","Ħ":"H","ĥ":"h","ħ":"h","Ĩ":"I","Ī":"I","Ĭ":"I","Į":"I","İ":"I","ĩ":"i","ī":"i","ĭ":"i","į":"i","ı":"i","Ĵ":"J","ĵ":"j","Ķ":"K","ķ":"k","ĸ":"k","Ĺ":"L","Ļ":"L","Ľ":"L","Ŀ":"L","Ł":"L","ĺ":"l","ļ":"l","ľ":"l","ŀ":"l","ł":"l","Ń":"N","Ņ":"N","Ň":"N","Ŋ":"N","ń":"n","ņ":"n","ň":"n","ŋ":"n","Ō":"O","Ŏ":"O","Ő":"O","ō":"o","ŏ":"o","ő":"o","Ŕ":"R","Ŗ":"R","Ř":"R","ŕ":"r","ŗ":"r","ř":"r","Ś":"S","Ŝ":"S","Ş":"S","Š":"S","ś":"s","ŝ":"s","ş":"s","š":"s","Ţ":"T","Ť":"T","Ŧ":"T","ţ":"t","ť":"t","ŧ":"t","Ũ":"U","Ū":"U","Ŭ":"U","Ů":"U","Ű":"U","Ų":"U","ũ":"u","ū":"u","ŭ":"u","ů":"u","ű":"u","ų":"u","Ŵ":"W","ŵ":"w","Ŷ":"Y","ŷ":"y","Ÿ":"Y","Ź":"Z","Ż":"Z","Ž":"Z","ź":"z","ż":"z","ž":"z","Ĳ":"IJ","ĳ":"ij","Œ":"Oe","œ":"oe","ŉ":"'n","ſ":"s"},Jt={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},en={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},tn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},nn=parseFloat,rn=parseInt,on="object"==typeof n.g&&n.g&&n.g.Object===Object&&n.g,sn="object"==typeof self&&self&&self.Object===Object&&self,an=on||sn||Function("return this")(),ln=t&&!t.nodeType&&t,cn=ln&&e&&!e.nodeType&&e,un=cn&&cn.exports===ln,hn=un&&on.process,dn=function(){try{var e=cn&&cn.require&&cn.require("util").types;return e||hn&&hn.binding&&hn.binding("util")}catch(t){}}(),fn=dn&&dn.isArrayBuffer,pn=dn&&dn.isDate,gn=dn&&dn.isMap,mn=dn&&dn.isRegExp,vn=dn&&dn.isSet,yn=dn&&dn.isTypedArray;function bn(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function wn(e,t,n,r){var i=-1,o=null==e?0:e.length;while(++i<o){var s=e[i];t(r,s,n(s),e)}return r}function xn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!1===t(e[n],n,e))break;return e}function kn(e,t){var n=null==e?0:e.length;while(n--)if(!1===t(e[n],n,e))break;return e}function _n(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(!t(e[n],n,e))return!1;return!0}function On(e,t){var n=-1,r=null==e?0:e.length,i=0,o=[];while(++n<r){var s=e[n];t(s,n,e)&&(o[i++]=s)}return o}function Sn(e,t){var n=null==e?0:e.length;return!!n&&$n(e,t,0)>-1}function En(e,t,n){var r=-1,i=null==e?0:e.length;while(++r<i)if(n(t,e[r]))return!0;return!1}function Cn(e,t){var n=-1,r=null==e?0:e.length,i=Array(r);while(++n<r)i[n]=t(e[n],n,e);return i}function Tn(e,t){var n=-1,r=t.length,i=e.length;while(++n<r)e[i+n]=t[n];return e}function An(e,t,n,r){var i=-1,o=null==e?0:e.length;r&&o&&(n=e[++i]);while(++i<o)n=t(n,e[i],i,e);return n}function Dn(e,t,n,r){var i=null==e?0:e.length;r&&i&&(n=e[--i]);while(i--)n=t(n,e[i],i,e);return n}function Mn(e,t){var n=-1,r=null==e?0:e.length;while(++n<r)if(t(e[n],n,e))return!0;return!1}var Fn=Vn("length");function Rn(e){return e.split("")}function Pn(e){return e.match(qe)||[]}function In(e,t,n){var r;return n(e,(function(e,n,i){if(t(e,n,i))return r=n,!1})),r}function Ln(e,t,n,r){var i=e.length,o=n+(r?1:-1);while(r?o--:++o<i)if(t(e[o],o,e))return o;return-1}function $n(e,t,n){return t===t?fr(e,t,n):Ln(e,jn,n)}function Nn(e,t,n,r){var i=n-1,o=e.length;while(++i<o)if(r(e[i],t))return i;return-1}function jn(e){return e!==e}function Bn(e,t){var n=null==e?0:e.length;return n?Wn(e,t)/n:N}function Vn(e){return function(t){return null==t?i:t[e]}}function qn(e){return function(t){return null==e?i:e[t]}}function zn(e,t,n,r,i){return i(e,(function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)})),n}function Hn(e,t){var n=e.length;e.sort(t);while(n--)e[n]=e[n].value;return e}function Wn(e,t){var n,r=-1,o=e.length;while(++r<o){var s=t(e[r]);s!==i&&(n=n===i?s:n+s)}return n}function Qn(e,t){var n=-1,r=Array(e);while(++n<e)r[n]=t(n);return r}function Un(e,t){return Cn(t,(function(t){return[t,e[t]]}))}function Yn(e){return e?e.slice(0,vr(e)+1).replace($e,""):e}function Xn(e){return function(t){return e(t)}}function Zn(e,t){return Cn(t,(function(t){return e[t]}))}function Gn(e,t){return e.has(t)}function Kn(e,t){var n=-1,r=e.length;while(++n<r&&$n(t,e[n],0)>-1);return n}function Jn(e,t){var n=e.length;while(n--&&$n(t,e[n],0)>-1);return n}function er(e,t){var n=e.length,r=0;while(n--)e[n]===t&&++r;return r}var tr=qn(Kt),nr=qn(Jt);function rr(e){return"\\"+tn[e]}function ir(e,t){return null==e?i:e[t]}function or(e){return Qt.test(e)}function sr(e){return Ut.test(e)}function ar(e){var t,n=[];while(!(t=e.next()).done)n.push(t.value);return n}function lr(e){var t=-1,n=Array(e.size);return e.forEach((function(e,r){n[++t]=[r,e]})),n}function cr(e,t){return function(n){return e(t(n))}}function ur(e,t){var n=-1,r=e.length,i=0,o=[];while(++n<r){var s=e[n];s!==t&&s!==d||(e[n]=d,o[i++]=n)}return o}function hr(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=e})),n}function dr(e){var t=-1,n=Array(e.size);return e.forEach((function(e){n[++t]=[e,e]})),n}function fr(e,t,n){var r=n-1,i=e.length;while(++r<i)if(e[r]===t)return r;return-1}function pr(e,t,n){var r=n+1;while(r--)if(e[r]===t)return r;return r}function gr(e){return or(e)?br(e):Fn(e)}function mr(e){return or(e)?wr(e):Rn(e)}function vr(e){var t=e.length;while(t--&&Ne.test(e.charAt(t)));return t}var yr=qn(en);function br(e){var t=Ht.lastIndex=0;while(Ht.test(e))++t;return t}function wr(e){return e.match(Ht)||[]}function xr(e){return e.match(Wt)||[]}var kr=function e(t){t=null==t?an:_r.defaults(an.Object(),t,_r.pick(an,Yt));var n=t.Array,r=t.Date,Ne=t.Error,qe=t.Function,tt=t.Math,nt=t.Object,rt=t.RegExp,it=t.String,ot=t.TypeError,st=n.prototype,at=qe.prototype,lt=nt.prototype,ct=t["__core-js_shared__"],ut=at.toString,ht=lt.hasOwnProperty,dt=0,ft=function(){var e=/[^.]+$/.exec(ct&&ct.keys&&ct.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}(),pt=lt.toString,gt=ut.call(nt),mt=an._,vt=rt("^"+ut.call(ht).replace(Ie,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),yt=un?t.Buffer:i,bt=t.Symbol,wt=t.Uint8Array,xt=yt?yt.allocUnsafe:i,kt=cr(nt.getPrototypeOf,nt),_t=nt.create,Ot=lt.propertyIsEnumerable,St=st.splice,Et=bt?bt.isConcatSpreadable:i,Ct=bt?bt.iterator:i,Tt=bt?bt.toStringTag:i,At=function(){try{var e=Us(nt,"defineProperty");return e({},"",{}),e}catch(t){}}(),Dt=t.clearTimeout!==an.clearTimeout&&t.clearTimeout,Mt=r&&r.now!==an.Date.now&&r.now,Ft=t.setTimeout!==an.setTimeout&&t.setTimeout,Rt=tt.ceil,Pt=tt.floor,It=nt.getOwnPropertySymbols,Lt=yt?yt.isBuffer:i,$t=t.isFinite,Nt=st.join,jt=cr(nt.keys,nt),Bt=tt.max,Vt=tt.min,Ht=r.now,Wt=t.parseInt,Qt=tt.random,Ut=st.reverse,Kt=Us(t,"DataView"),Jt=Us(t,"Map"),en=Us(t,"Promise"),tn=Us(t,"Set"),on=Us(t,"WeakMap"),sn=Us(nt,"create"),ln=on&&new on,cn={},hn=Fa(Kt),dn=Fa(Jt),Fn=Fa(en),Rn=Fa(tn),qn=Fa(on),fr=bt?bt.prototype:i,br=fr?fr.valueOf:i,wr=fr?fr.toString:i;function kr(e){if(Su(e)&&!lu(e)&&!(e instanceof Cr)){if(e instanceof Er)return e;if(ht.call(e,"__wrapped__"))return Pa(e)}return new Er(e)}var Or=function(){function e(){}return function(t){if(!Ou(t))return{};if(_t)return _t(t);e.prototype=t;var n=new e;return e.prototype=i,n}}();function Sr(){}function Er(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=i}function Cr(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=j,this.__views__=[]}function Tr(){var e=new Cr(this.__wrapped__);return e.__actions__=is(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=is(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=is(this.__views__),e}function Ar(){if(this.__filtered__){var e=new Cr(this);e.__dir__=-1,e.__filtered__=!0}else e=this.clone(),e.__dir__*=-1;return e}function Dr(){var e=this.__wrapped__.value(),t=this.__dir__,n=lu(e),r=t<0,i=n?e.length:0,o=Ks(0,i,this.__views__),s=o.start,a=o.end,l=a-s,c=r?a:s-1,u=this.__iteratees__,h=u.length,d=0,f=Vt(l,this.__takeCount__);if(!n||!r&&i==l&&f==l)return jo(e,this.__actions__);var p=[];e:while(l--&&d<f){c+=t;var g=-1,m=e[c];while(++g<h){var v=u[g],y=v.iteratee,b=v.type,w=y(m);if(b==R)m=w;else if(!w){if(b==F)continue e;break e}}p[d++]=m}return p}function Mr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Fr(){this.__data__=sn?sn(null):{},this.size=0}function Rr(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}function Pr(e){var t=this.__data__;if(sn){var n=t[e];return n===u?i:n}return ht.call(t,e)?t[e]:i}function Ir(e){var t=this.__data__;return sn?t[e]!==i:ht.call(t,e)}function Lr(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=sn&&t===i?u:t,this}function $r(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Nr(){this.__data__=[],this.size=0}function jr(e){var t=this.__data__,n=ui(t,e);if(n<0)return!1;var r=t.length-1;return n==r?t.pop():St.call(t,n,1),--this.size,!0}function Br(e){var t=this.__data__,n=ui(t,e);return n<0?i:t[n][1]}function Vr(e){return ui(this.__data__,e)>-1}function qr(e,t){var n=this.__data__,r=ui(n,e);return r<0?(++this.size,n.push([e,t])):n[r][1]=t,this}function zr(e){var t=-1,n=null==e?0:e.length;this.clear();while(++t<n){var r=e[t];this.set(r[0],r[1])}}function Hr(){this.size=0,this.__data__={hash:new Mr,map:new(Jt||$r),string:new Mr}}function Wr(e){var t=Ws(this,e)["delete"](e);return this.size-=t?1:0,t}function Qr(e){return Ws(this,e).get(e)}function Ur(e){return Ws(this,e).has(e)}function Yr(e,t){var n=Ws(this,e),r=n.size;return n.set(e,t),this.size+=n.size==r?0:1,this}function Xr(e){var t=-1,n=null==e?0:e.length;this.__data__=new zr;while(++t<n)this.add(e[t])}function Zr(e){return this.__data__.set(e,u),this}function Gr(e){return this.__data__.has(e)}function Kr(e){var t=this.__data__=new $r(e);this.size=t.size}function Jr(){this.__data__=new $r,this.size=0}function ei(e){var t=this.__data__,n=t["delete"](e);return this.size=t.size,n}function ti(e){return this.__data__.get(e)}function ni(e){return this.__data__.has(e)}function ri(e,t){var n=this.__data__;if(n instanceof $r){var r=n.__data__;if(!Jt||r.length<s-1)return r.push([e,t]),this.size=++n.size,this;n=this.__data__=new zr(r)}return n.set(e,t),this.size=n.size,this}function ii(e,t){var n=lu(e),r=!n&&au(e),i=!n&&!r&&fu(e),o=!n&&!r&&!i&&Bu(e),s=n||r||i||o,a=s?Qn(e.length,it):[],l=a.length;for(var c in e)!t&&!ht.call(e,c)||s&&("length"==c||i&&("offset"==c||"parent"==c)||o&&("buffer"==c||"byteLength"==c||"byteOffset"==c)||sa(c,l))||a.push(c);return a}function oi(e){var t=e.length;return t?e[yo(0,t-1)]:i}function si(e,t){return Aa(is(e),mi(t,0,e.length))}function ai(e){return Aa(is(e))}function li(e,t,n){(n!==i&&!iu(e[t],n)||n===i&&!(t in e))&&pi(e,t,n)}function ci(e,t,n){var r=e[t];ht.call(e,t)&&iu(r,n)&&(n!==i||t in e)||pi(e,t,n)}function ui(e,t){var n=e.length;while(n--)if(iu(e[n][0],t))return n;return-1}function hi(e,t,n,r){return ki(e,(function(e,i,o){t(r,e,n(e),o)})),r}function di(e,t){return e&&os(t,kh(t),e)}function fi(e,t){return e&&os(t,_h(t),e)}function pi(e,t,n){"__proto__"==t&&At?At(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}function gi(e,t){var r=-1,o=t.length,s=n(o),a=null==e;while(++r<o)s[r]=a?i:mh(e,t[r]);return s}function mi(e,t,n){return e===e&&(n!==i&&(e=e<=n?e:n),t!==i&&(e=e>=t?e:t)),e}function vi(e,t,n,r,o,s){var a,l=t&f,c=t&p,u=t&g;if(n&&(a=o?n(e,r,o,s):n(e)),a!==i)return a;if(!Ou(e))return e;var h=lu(e);if(h){if(a=ta(e),!l)return is(e,a)}else{var d=Gs(e),m=d==Z||d==G;if(fu(e))return Yo(e,l);if(d==te||d==z||m&&!o){if(a=c||m?{}:na(e),!l)return c?as(e,fi(a,e)):ss(e,di(a,e))}else{if(!Gt[d])return o?e:{};a=ra(e,d,l)}}s||(s=new Kr);var v=s.get(e);if(v)return v;s.set(e,a),$u(e)?e.forEach((function(r){a.add(vi(r,t,n,r,e,s))})):Eu(e)&&e.forEach((function(r,i){a.set(i,vi(r,t,n,i,e,s))}));var y=u?c?Bs:js:c?_h:kh,b=h?i:y(e);return xn(b||e,(function(r,i){b&&(i=r,r=e[i]),ci(a,i,vi(r,t,n,i,e,s))})),a}function yi(e){var t=kh(e);return function(n){return bi(n,e,t)}}function bi(e,t,n){var r=n.length;if(null==e)return!r;e=nt(e);while(r--){var o=n[r],s=t[o],a=e[o];if(a===i&&!(o in e)||!s(a))return!1}return!0}function wi(e,t,n){if("function"!=typeof e)throw new ot(l);return Sa((function(){e.apply(i,n)}),t)}function xi(e,t,n,r){var i=-1,o=Sn,a=!0,l=e.length,c=[],u=t.length;if(!l)return c;n&&(t=Cn(t,Xn(n))),r?(o=En,a=!1):t.length>=s&&(o=Gn,a=!1,t=new Xr(t));e:while(++i<l){var h=e[i],d=null==n?h:n(h);if(h=r||0!==h?h:0,a&&d===d){var f=u;while(f--)if(t[f]===d)continue e;c.push(h)}else o(t,d,r)||c.push(h)}return c}kr.templateSettings={escape:Ae,evaluate:De,interpolate:Me,variable:"",imports:{_:kr}},kr.prototype=Sr.prototype,kr.prototype.constructor=kr,Er.prototype=Or(Sr.prototype),Er.prototype.constructor=Er,Cr.prototype=Or(Sr.prototype),Cr.prototype.constructor=Cr,Mr.prototype.clear=Fr,Mr.prototype["delete"]=Rr,Mr.prototype.get=Pr,Mr.prototype.has=Ir,Mr.prototype.set=Lr,$r.prototype.clear=Nr,$r.prototype["delete"]=jr,$r.prototype.get=Br,$r.prototype.has=Vr,$r.prototype.set=qr,zr.prototype.clear=Hr,zr.prototype["delete"]=Wr,zr.prototype.get=Qr,zr.prototype.has=Ur,zr.prototype.set=Yr,Xr.prototype.add=Xr.prototype.push=Zr,Xr.prototype.has=Gr,Kr.prototype.clear=Jr,Kr.prototype["delete"]=ei,Kr.prototype.get=ti,Kr.prototype.has=ni,Kr.prototype.set=ri;var ki=us(Mi),_i=us(Fi,!0);function Oi(e,t){var n=!0;return ki(e,(function(e,r,i){return n=!!t(e,r,i),n})),n}function Si(e,t,n){var r=-1,o=e.length;while(++r<o){var s=e[r],a=t(s);if(null!=a&&(l===i?a===a&&!ju(a):n(a,l)))var l=a,c=s}return c}function Ei(e,t,n,r){var o=e.length;n=Yu(n),n<0&&(n=-n>o?0:o+n),r=r===i||r>o?o:Yu(r),r<0&&(r+=o),r=n>r?0:Xu(r);while(n<r)e[n++]=t;return e}function Ci(e,t){var n=[];return ki(e,(function(e,r,i){t(e,r,i)&&n.push(e)})),n}function Ti(e,t,n,r,i){var o=-1,s=e.length;n||(n=oa),i||(i=[]);while(++o<s){var a=e[o];t>0&&n(a)?t>1?Ti(a,t-1,n,r,i):Tn(i,a):r||(i[i.length]=a)}return i}var Ai=hs(),Di=hs(!0);function Mi(e,t){return e&&Ai(e,t,kh)}function Fi(e,t){return e&&Di(e,t,kh)}function Ri(e,t){return On(t,(function(t){return xu(e[t])}))}function Pi(e,t){t=Ho(t,e);var n=0,r=t.length;while(null!=e&&n<r)e=e[Ma(t[n++])];return n&&n==r?e:i}function Ii(e,t,n){var r=t(e);return lu(e)?r:Tn(r,n(e))}function Li(e){return null==e?e===i?le:ee:Tt&&Tt in nt(e)?Ys(e):ba(e)}function $i(e,t){return e>t}function Ni(e,t){return null!=e&&ht.call(e,t)}function ji(e,t){return null!=e&&t in nt(e)}function Bi(e,t,n){return e>=Vt(t,n)&&e<Bt(t,n)}function Vi(e,t,r){var o=r?En:Sn,s=e[0].length,a=e.length,l=a,c=n(a),u=1/0,h=[];while(l--){var d=e[l];l&&t&&(d=Cn(d,Xn(t))),u=Vt(d.length,u),c[l]=!r&&(t||s>=120&&d.length>=120)?new Xr(l&&d):i}d=e[0];var f=-1,p=c[0];e:while(++f<s&&h.length<u){var g=d[f],m=t?t(g):g;if(g=r||0!==g?g:0,!(p?Gn(p,m):o(h,m,r))){l=a;while(--l){var v=c[l];if(!(v?Gn(v,m):o(e[l],m,r)))continue e}p&&p.push(m),h.push(g)}}return h}function qi(e,t,n,r){return Mi(e,(function(e,i,o){t(r,n(e),i,o)})),r}function zi(e,t,n){t=Ho(t,e),e=xa(e,t);var r=null==e?e:e[Ma(ol(t))];return null==r?i:bn(r,e,n)}function Hi(e){return Su(e)&&Li(e)==z}function Wi(e){return Su(e)&&Li(e)==he}function Qi(e){return Su(e)&&Li(e)==U}function Ui(e,t,n,r,i){return e===t||(null==e||null==t||!Su(e)&&!Su(t)?e!==e&&t!==t:Yi(e,t,n,r,Ui,i))}function Yi(e,t,n,r,i,o){var s=lu(e),a=lu(t),l=s?H:Gs(e),c=a?H:Gs(t);l=l==z?te:l,c=c==z?te:c;var u=l==te,h=c==te,d=l==c;if(d&&fu(e)){if(!fu(t))return!1;s=!0,u=!1}if(d&&!u)return o||(o=new Kr),s||Bu(e)?Is(e,t,n,r,i,o):Ls(e,t,l,n,r,i,o);if(!(n&m)){var f=u&&ht.call(e,"__wrapped__"),p=h&&ht.call(t,"__wrapped__");if(f||p){var g=f?e.value():e,v=p?t.value():t;return o||(o=new Kr),i(g,v,n,r,o)}}return!!d&&(o||(o=new Kr),$s(e,t,n,r,i,o))}function Xi(e){return Su(e)&&Gs(e)==K}function Zi(e,t,n,r){var o=n.length,s=o,a=!r;if(null==e)return!s;e=nt(e);while(o--){var l=n[o];if(a&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}while(++o<s){l=n[o];var c=l[0],u=e[c],h=l[1];if(a&&l[2]){if(u===i&&!(c in e))return!1}else{var d=new Kr;if(r)var f=r(u,h,c,e,t,d);if(!(f===i?Ui(h,u,m|v,r,d):f))return!1}}return!0}function Gi(e){if(!Ou(e)||ha(e))return!1;var t=xu(e)?vt:Xe;return t.test(Fa(e))}function Ki(e){return Su(e)&&Li(e)==ie}function Ji(e){return Su(e)&&Gs(e)==oe}function eo(e){return Su(e)&&_u(e.length)&&!!Zt[Li(e)]}function to(e){return"function"==typeof e?e:null==e?Dd:"object"==typeof e?lu(e)?ao(e[0],e[1]):so(e):zd(e)}function no(e){if(!fa(e))return jt(e);var t=[];for(var n in nt(e))ht.call(e,n)&&"constructor"!=n&&t.push(n);return t}function ro(e){if(!Ou(e))return ya(e);var t=fa(e),n=[];for(var r in e)("constructor"!=r||!t&&ht.call(e,r))&&n.push(r);return n}function io(e,t){return e<t}function oo(e,t){var r=-1,i=uu(e)?n(e.length):[];return ki(e,(function(e,n,o){i[++r]=t(e,n,o)})),i}function so(e){var t=Qs(e);return 1==t.length&&t[0][2]?ga(t[0][0],t[0][1]):function(n){return n===e||Zi(n,e,t)}}function ao(e,t){return la(e)&&pa(t)?ga(Ma(e),t):function(n){var r=mh(n,e);return r===i&&r===t?yh(n,e):Ui(t,r,m|v)}}function lo(e,t,n,r,o){e!==t&&Ai(t,(function(s,a){if(o||(o=new Kr),Ou(s))co(e,t,a,n,lo,r,o);else{var l=r?r(_a(e,a),s,a+"",e,t,o):i;l===i&&(l=s),li(e,a,l)}}),_h)}function co(e,t,n,r,o,s,a){var l=_a(e,n),c=_a(t,n),u=a.get(c);if(u)li(e,n,u);else{var h=s?s(l,c,n+"",e,t,a):i,d=h===i;if(d){var f=lu(c),p=!f&&fu(c),g=!f&&!p&&Bu(c);h=c,f||p||g?lu(l)?h=l:hu(l)?h=is(l):p?(d=!1,h=Yo(c,!0)):g?(d=!1,h=Jo(c,!0)):h=[]:Pu(c)||au(c)?(h=l,au(l)?h=Gu(l):Ou(l)&&!xu(l)||(h=na(c))):d=!1}d&&(a.set(c,h),o(h,c,r,s,a),a["delete"](c)),li(e,n,h)}}function uo(e,t){var n=e.length;if(n)return t+=t<0?n:0,sa(t,n)?e[t]:i}function ho(e,t,n){t=t.length?Cn(t,(function(e){return lu(e)?function(t){return Pi(t,1===e.length?e[0]:e)}:e})):[Dd];var r=-1;t=Cn(t,Xn(Hs()));var i=oo(e,(function(e,n,i){var o=Cn(t,(function(t){return t(e)}));return{criteria:o,index:++r,value:e}}));return Hn(i,(function(e,t){return ts(e,t,n)}))}function fo(e,t){return po(e,t,(function(t,n){return yh(e,n)}))}function po(e,t,n){var r=-1,i=t.length,o={};while(++r<i){var s=t[r],a=Pi(e,s);n(a,s)&&Oo(o,Ho(s,e),a)}return o}function go(e){return function(t){return Pi(t,e)}}function mo(e,t,n,r){var i=r?Nn:$n,o=-1,s=t.length,a=e;e===t&&(t=is(t)),n&&(a=Cn(e,Xn(n)));while(++o<s){var l=0,c=t[o],u=n?n(c):c;while((l=i(a,u,l,r))>-1)a!==e&&St.call(a,l,1),St.call(e,l,1)}return e}function vo(e,t){var n=e?t.length:0,r=n-1;while(n--){var i=t[n];if(n==r||i!==o){var o=i;sa(i)?St.call(e,i,1):Lo(e,i)}}return e}function yo(e,t){return e+Pt(Qt()*(t-e+1))}function bo(e,t,r,i){var o=-1,s=Bt(Rt((t-e)/(r||1)),0),a=n(s);while(s--)a[i?s:++o]=e,e+=r;return a}function wo(e,t){var n="";if(!e||t<1||t>L)return n;do{t%2&&(n+=e),t=Pt(t/2),t&&(e+=e)}while(t);return n}function xo(e,t){return Ea(wa(e,t,Dd),e+"")}function ko(e){return oi(Vh(e))}function _o(e,t){var n=Vh(e);return Aa(n,mi(t,0,n.length))}function Oo(e,t,n,r){if(!Ou(e))return e;t=Ho(t,e);var o=-1,s=t.length,a=s-1,l=e;while(null!=l&&++o<s){var c=Ma(t[o]),u=n;if("__proto__"===c||"constructor"===c||"prototype"===c)return e;if(o!=a){var h=l[c];u=r?r(h,c,l):i,u===i&&(u=Ou(h)?h:sa(t[o+1])?[]:{})}ci(l,c,u),l=l[c]}return e}var So=ln?function(e,t){return ln.set(e,t),e}:Dd,Eo=At?function(e,t){return At(e,"toString",{configurable:!0,enumerable:!1,value:Ed(t),writable:!0})}:Dd;function Co(e){return Aa(Vh(e))}function To(e,t,r){var i=-1,o=e.length;t<0&&(t=-t>o?0:o+t),r=r>o?o:r,r<0&&(r+=o),o=t>r?0:r-t>>>0,t>>>=0;var s=n(o);while(++i<o)s[i]=e[i+t];return s}function Ao(e,t){var n;return ki(e,(function(e,r,i){return n=t(e,r,i),!n})),!!n}function Do(e,t,n){var r=0,i=null==e?r:e.length;if("number"==typeof t&&t===t&&i<=V){while(r<i){var o=r+i>>>1,s=e[o];null!==s&&!ju(s)&&(n?s<=t:s<t)?r=o+1:i=o}return i}return Mo(e,t,Dd,n)}function Mo(e,t,n,r){var o=0,s=null==e?0:e.length;if(0===s)return 0;t=n(t);var a=t!==t,l=null===t,c=ju(t),u=t===i;while(o<s){var h=Pt((o+s)/2),d=n(e[h]),f=d!==i,p=null===d,g=d===d,m=ju(d);if(a)var v=r||g;else v=u?g&&(r||f):l?g&&f&&(r||!p):c?g&&f&&!p&&(r||!m):!p&&!m&&(r?d<=t:d<t);v?o=h+1:s=h}return Vt(s,B)}function Fo(e,t){var n=-1,r=e.length,i=0,o=[];while(++n<r){var s=e[n],a=t?t(s):s;if(!n||!iu(a,l)){var l=a;o[i++]=0===s?0:s}}return o}function Ro(e){return"number"==typeof e?e:ju(e)?N:+e}function Po(e){if("string"==typeof e)return e;if(lu(e))return Cn(e,Po)+"";if(ju(e))return wr?wr.call(e):"";var t=e+"";return"0"==t&&1/e==-I?"-0":t}function Io(e,t,n){var r=-1,i=Sn,o=e.length,a=!0,l=[],c=l;if(n)a=!1,i=En;else if(o>=s){var u=t?null:As(e);if(u)return hr(u);a=!1,i=Gn,c=new Xr}else c=t?[]:l;e:while(++r<o){var h=e[r],d=t?t(h):h;if(h=n||0!==h?h:0,a&&d===d){var f=c.length;while(f--)if(c[f]===d)continue e;t&&c.push(d),l.push(h)}else i(c,d,n)||(c!==l&&c.push(d),l.push(h))}return l}function Lo(e,t){return t=Ho(t,e),e=xa(e,t),null==e||delete e[Ma(ol(t))]}function $o(e,t,n,r){return Oo(e,t,n(Pi(e,t)),r)}function No(e,t,n,r){var i=e.length,o=r?i:-1;while((r?o--:++o<i)&&t(e[o],o,e));return n?To(e,r?0:o,r?o+1:i):To(e,r?o+1:0,r?i:o)}function jo(e,t){var n=e;return n instanceof Cr&&(n=n.value()),An(t,(function(e,t){return t.func.apply(t.thisArg,Tn([e],t.args))}),n)}function Bo(e,t,r){var i=e.length;if(i<2)return i?Io(e[0]):[];var o=-1,s=n(i);while(++o<i){var a=e[o],l=-1;while(++l<i)l!=o&&(s[o]=xi(s[o]||a,e[l],t,r))}return Io(Ti(s,1),t,r)}function Vo(e,t,n){var r=-1,o=e.length,s=t.length,a={};while(++r<o){var l=r<s?t[r]:i;n(a,e[r],l)}return a}function qo(e){return hu(e)?e:[]}function zo(e){return"function"==typeof e?e:Dd}function Ho(e,t){return lu(e)?e:la(e,t)?[e]:Da(Ju(e))}var Wo=xo;function Qo(e,t,n){var r=e.length;return n=n===i?r:n,!t&&n>=r?e:To(e,t,n)}var Uo=Dt||function(e){return an.clearTimeout(e)};function Yo(e,t){if(t)return e.slice();var n=e.length,r=xt?xt(n):new e.constructor(n);return e.copy(r),r}function Xo(e){var t=new e.constructor(e.byteLength);return new wt(t).set(new wt(e)),t}function Zo(e,t){var n=t?Xo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function Go(e){var t=new e.constructor(e.source,Qe.exec(e));return t.lastIndex=e.lastIndex,t}function Ko(e){return br?nt(br.call(e)):{}}function Jo(e,t){var n=t?Xo(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function es(e,t){if(e!==t){var n=e!==i,r=null===e,o=e===e,s=ju(e),a=t!==i,l=null===t,c=t===t,u=ju(t);if(!l&&!u&&!s&&e>t||s&&a&&c&&!l&&!u||r&&a&&c||!n&&c||!o)return 1;if(!r&&!s&&!u&&e<t||u&&n&&o&&!r&&!s||l&&n&&o||!a&&o||!c)return-1}return 0}function ts(e,t,n){var r=-1,i=e.criteria,o=t.criteria,s=i.length,a=n.length;while(++r<s){var l=es(i[r],o[r]);if(l){if(r>=a)return l;var c=n[r];return l*("desc"==c?-1:1)}}return e.index-t.index}function ns(e,t,r,i){var o=-1,s=e.length,a=r.length,l=-1,c=t.length,u=Bt(s-a,0),h=n(c+u),d=!i;while(++l<c)h[l]=t[l];while(++o<a)(d||o<s)&&(h[r[o]]=e[o]);while(u--)h[l++]=e[o++];return h}function rs(e,t,r,i){var o=-1,s=e.length,a=-1,l=r.length,c=-1,u=t.length,h=Bt(s-l,0),d=n(h+u),f=!i;while(++o<h)d[o]=e[o];var p=o;while(++c<u)d[p+c]=t[c];while(++a<l)(f||o<s)&&(d[p+r[a]]=e[o++]);return d}function is(e,t){var r=-1,i=e.length;t||(t=n(i));while(++r<i)t[r]=e[r];return t}function os(e,t,n,r){var o=!n;n||(n={});var s=-1,a=t.length;while(++s<a){var l=t[s],c=r?r(n[l],e[l],l,n,e):i;c===i&&(c=e[l]),o?pi(n,l,c):ci(n,l,c)}return n}function ss(e,t){return os(e,Xs(e),t)}function as(e,t){return os(e,Zs(e),t)}function ls(e,t){return function(n,r){var i=lu(n)?wn:hi,o=t?t():{};return i(n,e,Hs(r,2),o)}}function cs(e){return xo((function(t,n){var r=-1,o=n.length,s=o>1?n[o-1]:i,a=o>2?n[2]:i;s=e.length>3&&"function"==typeof s?(o--,s):i,a&&aa(n[0],n[1],a)&&(s=o<3?i:s,o=1),t=nt(t);while(++r<o){var l=n[r];l&&e(t,l,r,s)}return t}))}function us(e,t){return function(n,r){if(null==n)return n;if(!uu(n))return e(n,r);var i=n.length,o=t?i:-1,s=nt(n);while(t?o--:++o<i)if(!1===r(s[o],o,s))break;return n}}function hs(e){return function(t,n,r){var i=-1,o=nt(t),s=r(t),a=s.length;while(a--){var l=s[e?a:++i];if(!1===n(o[l],l,o))break}return t}}function ds(e,t,n){var r=t&y,i=gs(e);function o(){var t=this&&this!==an&&this instanceof o?i:e;return t.apply(r?n:this,arguments)}return o}function fs(e){return function(t){t=Ju(t);var n=or(t)?mr(t):i,r=n?n[0]:t.charAt(0),o=n?Qo(n,1).join(""):t.slice(1);return r[e]()+o}}function ps(e){return function(t){return An(xd(Yh(t).replace(qt,"")),e,"")}}function gs(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Or(e.prototype),r=e.apply(n,t);return Ou(r)?r:n}}function ms(e,t,r){var o=gs(e);function s(){var a=arguments.length,l=n(a),c=a,u=zs(s);while(c--)l[c]=arguments[c];var h=a<3&&l[0]!==u&&l[a-1]!==u?[]:ur(l,u);if(a-=h.length,a<r)return Cs(e,t,bs,s.placeholder,i,l,h,i,i,r-a);var d=this&&this!==an&&this instanceof s?o:e;return bn(d,this,l)}return s}function vs(e){return function(t,n,r){var o=nt(t);if(!uu(t)){var s=Hs(n,3);t=kh(t),n=function(e){return s(o[e],e,o)}}var a=e(t,n,r);return a>-1?o[s?t[a]:a]:i}}function ys(e){return Ns((function(t){var n=t.length,r=n,o=Er.prototype.thru;e&&t.reverse();while(r--){var s=t[r];if("function"!=typeof s)throw new ot(l);if(o&&!a&&"wrapper"==qs(s))var a=new Er([],!0)}r=a?r:n;while(++r<n){s=t[r];var c=qs(s),u="wrapper"==c?Vs(s):i;a=u&&ua(u[0])&&u[1]==(S|x|_|E)&&!u[4].length&&1==u[9]?a[qs(u[0])].apply(a,u[3]):1==s.length&&ua(s)?a[c]():a.thru(s)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&lu(r))return a.plant(r).value();var i=0,o=n?t[i].apply(this,e):r;while(++i<n)o=t[i].call(this,o);return o}}))}function bs(e,t,r,o,s,a,l,c,u,h){var d=t&S,f=t&y,p=t&b,g=t&(x|k),m=t&C,v=p?i:gs(e);function w(){var i=arguments.length,y=n(i),b=i;while(b--)y[b]=arguments[b];if(g)var x=zs(w),k=er(y,x);if(o&&(y=ns(y,o,s,g)),a&&(y=rs(y,a,l,g)),i-=k,g&&i<h){var _=ur(y,x);return Cs(e,t,bs,w.placeholder,r,y,_,c,u,h-i)}var O=f?r:this,S=p?O[e]:e;return i=y.length,c?y=ka(y,c):m&&i>1&&y.reverse(),d&&u<i&&(y.length=u),this&&this!==an&&this instanceof w&&(S=v||gs(S)),S.apply(O,y)}return w}function ws(e,t){return function(n,r){return qi(n,e,t(r),{})}}function xs(e,t){return function(n,r){var o;if(n===i&&r===i)return t;if(n!==i&&(o=n),r!==i){if(o===i)return r;"string"==typeof n||"string"==typeof r?(n=Po(n),r=Po(r)):(n=Ro(n),r=Ro(r)),o=e(n,r)}return o}}function ks(e){return Ns((function(t){return t=Cn(t,Xn(Hs())),xo((function(n){var r=this;return e(t,(function(e){return bn(e,r,n)}))}))}))}function _s(e,t){t=t===i?" ":Po(t);var n=t.length;if(n<2)return n?wo(t,e):t;var r=wo(t,Rt(e/gr(t)));return or(t)?Qo(mr(r),0,e).join(""):r.slice(0,e)}function Os(e,t,r,i){var o=t&y,s=gs(e);function a(){var t=-1,l=arguments.length,c=-1,u=i.length,h=n(u+l),d=this&&this!==an&&this instanceof a?s:e;while(++c<u)h[c]=i[c];while(l--)h[c++]=arguments[++t];return bn(d,o?r:this,h)}return a}function Ss(e){return function(t,n,r){return r&&"number"!=typeof r&&aa(t,n,r)&&(n=r=i),t=Uu(t),n===i?(n=t,t=0):n=Uu(n),r=r===i?t<n?1:-1:Uu(r),bo(t,n,r,e)}}function Es(e){return function(t,n){return"string"==typeof t&&"string"==typeof n||(t=Zu(t),n=Zu(n)),e(t,n)}}function Cs(e,t,n,r,o,s,a,l,c,u){var h=t&x,d=h?a:i,f=h?i:a,p=h?s:i,g=h?i:s;t|=h?_:O,t&=~(h?O:_),t&w||(t&=~(y|b));var m=[e,t,o,p,d,g,f,l,c,u],v=n.apply(i,m);return ua(e)&&Oa(v,m),v.placeholder=r,Ca(v,e,t)}function Ts(e){var t=tt[e];return function(e,n){if(e=Zu(e),n=null==n?0:Vt(Yu(n),292),n&&$t(e)){var r=(Ju(e)+"e").split("e"),i=t(r[0]+"e"+(+r[1]+n));return r=(Ju(i)+"e").split("e"),+(r[0]+"e"+(+r[1]-n))}return t(e)}}var As=tn&&1/hr(new tn([,-0]))[1]==I?function(e){return new tn(e)}:Nd;function Ds(e){return function(t){var n=Gs(t);return n==K?lr(t):n==oe?dr(t):Un(t,e(t))}}function Ms(e,t,n,r,o,s,a,c){var u=t&b;if(!u&&"function"!=typeof e)throw new ot(l);var h=r?r.length:0;if(h||(t&=~(_|O),r=o=i),a=a===i?a:Bt(Yu(a),0),c=c===i?c:Yu(c),h-=o?o.length:0,t&O){var d=r,f=o;r=o=i}var p=u?i:Vs(e),g=[e,t,n,r,o,d,f,s,a,c];if(p&&va(g,p),e=g[0],t=g[1],n=g[2],r=g[3],o=g[4],c=g[9]=g[9]===i?u?0:e.length:Bt(g[9]-h,0),!c&&t&(x|k)&&(t&=~(x|k)),t&&t!=y)m=t==x||t==k?ms(e,t,c):t!=_&&t!=(y|_)||o.length?bs.apply(i,g):Os(e,t,n,r);else var m=ds(e,t,n);var v=p?So:Oa;return Ca(v(m,g),e,t)}function Fs(e,t,n,r){return e===i||iu(e,lt[n])&&!ht.call(r,n)?t:e}function Rs(e,t,n,r,o,s){return Ou(e)&&Ou(t)&&(s.set(t,e),lo(e,t,i,Rs,s),s["delete"](t)),e}function Ps(e){return Pu(e)?i:e}function Is(e,t,n,r,o,s){var a=n&m,l=e.length,c=t.length;if(l!=c&&!(a&&c>l))return!1;var u=s.get(e),h=s.get(t);if(u&&h)return u==t&&h==e;var d=-1,f=!0,p=n&v?new Xr:i;s.set(e,t),s.set(t,e);while(++d<l){var g=e[d],y=t[d];if(r)var b=a?r(y,g,d,t,e,s):r(g,y,d,e,t,s);if(b!==i){if(b)continue;f=!1;break}if(p){if(!Mn(t,(function(e,t){if(!Gn(p,t)&&(g===e||o(g,e,n,r,s)))return p.push(t)}))){f=!1;break}}else if(g!==y&&!o(g,y,n,r,s)){f=!1;break}}return s["delete"](e),s["delete"](t),f}function Ls(e,t,n,r,i,o,s){switch(n){case de:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case he:return!(e.byteLength!=t.byteLength||!o(new wt(e),new wt(t)));case Q:case U:case J:return iu(+e,+t);case X:return e.name==t.name&&e.message==t.message;case ie:case se:return e==t+"";case K:var a=lr;case oe:var l=r&m;if(a||(a=hr),e.size!=t.size&&!l)return!1;var c=s.get(e);if(c)return c==t;r|=v,s.set(e,t);var u=Is(a(e),a(t),r,i,o,s);return s["delete"](e),u;case ae:if(br)return br.call(e)==br.call(t)}return!1}function $s(e,t,n,r,o,s){var a=n&m,l=js(e),c=l.length,u=js(t),h=u.length;if(c!=h&&!a)return!1;var d=c;while(d--){var f=l[d];if(!(a?f in t:ht.call(t,f)))return!1}var p=s.get(e),g=s.get(t);if(p&&g)return p==t&&g==e;var v=!0;s.set(e,t),s.set(t,e);var y=a;while(++d<c){f=l[d];var b=e[f],w=t[f];if(r)var x=a?r(w,b,f,t,e,s):r(b,w,f,e,t,s);if(!(x===i?b===w||o(b,w,n,r,s):x)){v=!1;break}y||(y="constructor"==f)}if(v&&!y){var k=e.constructor,_=t.constructor;k==_||!("constructor"in e)||!("constructor"in t)||"function"==typeof k&&k instanceof k&&"function"==typeof _&&_ instanceof _||(v=!1)}return s["delete"](e),s["delete"](t),v}function Ns(e){return Ea(wa(e,i,Ya),e+"")}function js(e){return Ii(e,kh,Xs)}function Bs(e){return Ii(e,_h,Zs)}var Vs=ln?function(e){return ln.get(e)}:Nd;function qs(e){var t=e.name+"",n=cn[t],r=ht.call(cn,t)?n.length:0;while(r--){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function zs(e){var t=ht.call(kr,"placeholder")?kr:e;return t.placeholder}function Hs(){var e=kr.iteratee||Md;return e=e===Md?to:e,arguments.length?e(arguments[0],arguments[1]):e}function Ws(e,t){var n=e.__data__;return ca(t)?n["string"==typeof t?"string":"hash"]:n.map}function Qs(e){var t=kh(e),n=t.length;while(n--){var r=t[n],i=e[r];t[n]=[r,i,pa(i)]}return t}function Us(e,t){var n=ir(e,t);return Gi(n)?n:i}function Ys(e){var t=ht.call(e,Tt),n=e[Tt];try{e[Tt]=i;var r=!0}catch(s){}var o=pt.call(e);return r&&(t?e[Tt]=n:delete e[Tt]),o}var Xs=It?function(e){return null==e?[]:(e=nt(e),On(It(e),(function(t){return Ot.call(e,t)})))}:Ud,Zs=It?function(e){var t=[];while(e)Tn(t,Xs(e)),e=kt(e);return t}:Ud,Gs=Li;function Ks(e,t,n){var r=-1,i=n.length;while(++r<i){var o=n[r],s=o.size;switch(o.type){case"drop":e+=s;break;case"dropRight":t-=s;break;case"take":t=Vt(t,e+s);break;case"takeRight":e=Bt(e,t-s);break}}return{start:e,end:t}}function Js(e){var t=e.match(Be);return t?t[1].split(Ve):[]}function ea(e,t,n){t=Ho(t,e);var r=-1,i=t.length,o=!1;while(++r<i){var s=Ma(t[r]);if(!(o=null!=e&&n(e,s)))break;e=e[s]}return o||++r!=i?o:(i=null==e?0:e.length,!!i&&_u(i)&&sa(s,i)&&(lu(e)||au(e)))}function ta(e){var t=e.length,n=new e.constructor(t);return t&&"string"==typeof e[0]&&ht.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function na(e){return"function"!=typeof e.constructor||fa(e)?{}:Or(kt(e))}function ra(e,t,n){var r=e.constructor;switch(t){case he:return Xo(e);case Q:case U:return new r(+e);case de:return Zo(e,n);case fe:case pe:case ge:case me:case ve:case ye:case be:case we:case xe:return Jo(e,n);case K:return new r;case J:case se:return new r(e);case ie:return Go(e);case oe:return new r;case ae:return Ko(e)}}function ia(e,t){var n=t.length;if(!n)return e;var r=n-1;return t[r]=(n>1?"& ":"")+t[r],t=t.join(n>2?", ":" "),e.replace(je,"{\n/* [wrapped with "+t+"] */\n")}function oa(e){return lu(e)||au(e)||!!(Et&&e&&e[Et])}function sa(e,t){var n=typeof e;return t=null==t?L:t,!!t&&("number"==n||"symbol"!=n&&Ge.test(e))&&e>-1&&e%1==0&&e<t}function aa(e,t,n){if(!Ou(n))return!1;var r=typeof t;return!!("number"==r?uu(n)&&sa(t,n.length):"string"==r&&t in n)&&iu(n[t],e)}function la(e,t){if(lu(e))return!1;var n=typeof e;return!("number"!=n&&"symbol"!=n&&"boolean"!=n&&null!=e&&!ju(e))||(Re.test(e)||!Fe.test(e)||null!=t&&e in nt(t))}function ca(e){var t=typeof e;return"string"==t||"number"==t||"symbol"==t||"boolean"==t?"__proto__"!==e:null===e}function ua(e){var t=qs(e),n=kr[t];if("function"!=typeof n||!(t in Cr.prototype))return!1;if(e===n)return!0;var r=Vs(n);return!!r&&e===r[0]}function ha(e){return!!ft&&ft in e}(Kt&&Gs(new Kt(new ArrayBuffer(1)))!=de||Jt&&Gs(new Jt)!=K||en&&Gs(en.resolve())!=ne||tn&&Gs(new tn)!=oe||on&&Gs(new on)!=ce)&&(Gs=function(e){var t=Li(e),n=t==te?e.constructor:i,r=n?Fa(n):"";if(r)switch(r){case hn:return de;case dn:return K;case Fn:return ne;case Rn:return oe;case qn:return ce}return t});var da=ct?xu:Yd;function fa(e){var t=e&&e.constructor,n="function"==typeof t&&t.prototype||lt;return e===n}function pa(e){return e===e&&!Ou(e)}function ga(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==i||e in nt(n)))}}function ma(e){var t=Bc(e,(function(e){return n.size===h&&n.clear(),e})),n=t.cache;return t}function va(e,t){var n=e[1],r=t[1],i=n|r,o=i<(y|b|S),s=r==S&&n==x||r==S&&n==E&&e[7].length<=t[8]||r==(S|E)&&t[7].length<=t[8]&&n==x;if(!o&&!s)return e;r&y&&(e[2]=t[2],i|=n&y?0:w);var a=t[3];if(a){var l=e[3];e[3]=l?ns(l,a,t[4]):a,e[4]=l?ur(e[3],d):t[4]}return a=t[5],a&&(l=e[5],e[5]=l?rs(l,a,t[6]):a,e[6]=l?ur(e[5],d):t[6]),a=t[7],a&&(e[7]=a),r&S&&(e[8]=null==e[8]?t[8]:Vt(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function ya(e){var t=[];if(null!=e)for(var n in nt(e))t.push(n);return t}function ba(e){return pt.call(e)}function wa(e,t,r){return t=Bt(t===i?e.length-1:t,0),function(){var i=arguments,o=-1,s=Bt(i.length-t,0),a=n(s);while(++o<s)a[o]=i[t+o];o=-1;var l=n(t+1);while(++o<t)l[o]=i[o];return l[t]=r(a),bn(e,this,l)}}function xa(e,t){return t.length<2?e:Pi(e,To(t,0,-1))}function ka(e,t){var n=e.length,r=Vt(t.length,n),o=is(e);while(r--){var s=t[r];e[r]=sa(s,n)?o[s]:i}return e}function _a(e,t){if(("constructor"!==t||"function"!==typeof e[t])&&"__proto__"!=t)return e[t]}var Oa=Ta(So),Sa=Ft||function(e,t){return an.setTimeout(e,t)},Ea=Ta(Eo);function Ca(e,t,n){var r=t+"";return Ea(e,ia(r,Ra(Js(r),n)))}function Ta(e){var t=0,n=0;return function(){var r=Ht(),o=M-(r-n);if(n=r,o>0){if(++t>=D)return arguments[0]}else t=0;return e.apply(i,arguments)}}function Aa(e,t){var n=-1,r=e.length,o=r-1;t=t===i?r:t;while(++n<t){var s=yo(n,o),a=e[s];e[s]=e[n],e[n]=a}return e.length=t,e}var Da=ma((function(e){var t=[];return 46===e.charCodeAt(0)&&t.push(""),e.replace(Pe,(function(e,n,r,i){t.push(r?i.replace(He,"$1"):n||e)})),t}));function Ma(e){if("string"==typeof e||ju(e))return e;var t=e+"";return"0"==t&&1/e==-I?"-0":t}function Fa(e){if(null!=e){try{return ut.call(e)}catch(t){}try{return e+""}catch(t){}}return""}function Ra(e,t){return xn(q,(function(n){var r="_."+n[0];t&n[1]&&!Sn(e,r)&&e.push(r)})),e.sort()}function Pa(e){if(e instanceof Cr)return e.clone();var t=new Er(e.__wrapped__,e.__chain__);return t.__actions__=is(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Ia(e,t,r){t=(r?aa(e,t,r):t===i)?1:Bt(Yu(t),0);var o=null==e?0:e.length;if(!o||t<1)return[];var s=0,a=0,l=n(Rt(o/t));while(s<o)l[a++]=To(e,s,s+=t);return l}function La(e){var t=-1,n=null==e?0:e.length,r=0,i=[];while(++t<n){var o=e[t];o&&(i[r++]=o)}return i}function $a(){var e=arguments.length;if(!e)return[];var t=n(e-1),r=arguments[0],i=e;while(i--)t[i-1]=arguments[i];return Tn(lu(r)?is(r):[r],Ti(t,1))}var Na=xo((function(e,t){return hu(e)?xi(e,Ti(t,1,hu,!0)):[]})),ja=xo((function(e,t){var n=ol(t);return hu(n)&&(n=i),hu(e)?xi(e,Ti(t,1,hu,!0),Hs(n,2)):[]})),Ba=xo((function(e,t){var n=ol(t);return hu(n)&&(n=i),hu(e)?xi(e,Ti(t,1,hu,!0),i,n):[]}));function Va(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===i?1:Yu(t),To(e,t<0?0:t,r)):[]}function qa(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===i?1:Yu(t),t=r-t,To(e,0,t<0?0:t)):[]}function za(e,t){return e&&e.length?No(e,Hs(t,3),!0,!0):[]}function Ha(e,t){return e&&e.length?No(e,Hs(t,3),!0):[]}function Wa(e,t,n,r){var i=null==e?0:e.length;return i?(n&&"number"!=typeof n&&aa(e,t,n)&&(n=0,r=i),Ei(e,t,n,r)):[]}function Qa(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Yu(n);return i<0&&(i=Bt(r+i,0)),Ln(e,Hs(t,3),i)}function Ua(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r-1;return n!==i&&(o=Yu(n),o=n<0?Bt(r+o,0):Vt(o,r-1)),Ln(e,Hs(t,3),o,!0)}function Ya(e){var t=null==e?0:e.length;return t?Ti(e,1):[]}function Xa(e){var t=null==e?0:e.length;return t?Ti(e,I):[]}function Za(e,t){var n=null==e?0:e.length;return n?(t=t===i?1:Yu(t),Ti(e,t)):[]}function Ga(e){var t=-1,n=null==e?0:e.length,r={};while(++t<n){var i=e[t];r[i[0]]=i[1]}return r}function Ka(e){return e&&e.length?e[0]:i}function Ja(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var i=null==n?0:Yu(n);return i<0&&(i=Bt(r+i,0)),$n(e,t,i)}function el(e){var t=null==e?0:e.length;return t?To(e,0,-1):[]}var tl=xo((function(e){var t=Cn(e,qo);return t.length&&t[0]===e[0]?Vi(t):[]})),nl=xo((function(e){var t=ol(e),n=Cn(e,qo);return t===ol(n)?t=i:n.pop(),n.length&&n[0]===e[0]?Vi(n,Hs(t,2)):[]})),rl=xo((function(e){var t=ol(e),n=Cn(e,qo);return t="function"==typeof t?t:i,t&&n.pop(),n.length&&n[0]===e[0]?Vi(n,i,t):[]}));function il(e,t){return null==e?"":Nt.call(e,t)}function ol(e){var t=null==e?0:e.length;return t?e[t-1]:i}function sl(e,t,n){var r=null==e?0:e.length;if(!r)return-1;var o=r;return n!==i&&(o=Yu(n),o=o<0?Bt(r+o,0):Vt(o,r-1)),t===t?pr(e,t,o):Ln(e,jn,o,!0)}function al(e,t){return e&&e.length?uo(e,Yu(t)):i}var ll=xo(cl);function cl(e,t){return e&&e.length&&t&&t.length?mo(e,t):e}function ul(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,Hs(n,2)):e}function hl(e,t,n){return e&&e.length&&t&&t.length?mo(e,t,i,n):e}var dl=Ns((function(e,t){var n=null==e?0:e.length,r=gi(e,t);return vo(e,Cn(t,(function(e){return sa(e,n)?+e:e})).sort(es)),r}));function fl(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;t=Hs(t,3);while(++r<o){var s=e[r];t(s,r,e)&&(n.push(s),i.push(r))}return vo(e,i),n}function pl(e){return null==e?e:Ut.call(e)}function gl(e,t,n){var r=null==e?0:e.length;return r?(n&&"number"!=typeof n&&aa(e,t,n)?(t=0,n=r):(t=null==t?0:Yu(t),n=n===i?r:Yu(n)),To(e,t,n)):[]}function ml(e,t){return Do(e,t)}function vl(e,t,n){return Mo(e,t,Hs(n,2))}function yl(e,t){var n=null==e?0:e.length;if(n){var r=Do(e,t);if(r<n&&iu(e[r],t))return r}return-1}function bl(e,t){return Do(e,t,!0)}function wl(e,t,n){return Mo(e,t,Hs(n,2),!0)}function xl(e,t){var n=null==e?0:e.length;if(n){var r=Do(e,t,!0)-1;if(iu(e[r],t))return r}return-1}function kl(e){return e&&e.length?Fo(e):[]}function _l(e,t){return e&&e.length?Fo(e,Hs(t,2)):[]}function Ol(e){var t=null==e?0:e.length;return t?To(e,1,t):[]}function Sl(e,t,n){return e&&e.length?(t=n||t===i?1:Yu(t),To(e,0,t<0?0:t)):[]}function El(e,t,n){var r=null==e?0:e.length;return r?(t=n||t===i?1:Yu(t),t=r-t,To(e,t<0?0:t,r)):[]}function Cl(e,t){return e&&e.length?No(e,Hs(t,3),!1,!0):[]}function Tl(e,t){return e&&e.length?No(e,Hs(t,3)):[]}var Al=xo((function(e){return Io(Ti(e,1,hu,!0))})),Dl=xo((function(e){var t=ol(e);return hu(t)&&(t=i),Io(Ti(e,1,hu,!0),Hs(t,2))})),Ml=xo((function(e){var t=ol(e);return t="function"==typeof t?t:i,Io(Ti(e,1,hu,!0),i,t)}));function Fl(e){return e&&e.length?Io(e):[]}function Rl(e,t){return e&&e.length?Io(e,Hs(t,2)):[]}function Pl(e,t){return t="function"==typeof t?t:i,e&&e.length?Io(e,i,t):[]}function Il(e){if(!e||!e.length)return[];var t=0;return e=On(e,(function(e){if(hu(e))return t=Bt(e.length,t),!0})),Qn(t,(function(t){return Cn(e,Vn(t))}))}function Ll(e,t){if(!e||!e.length)return[];var n=Il(e);return null==t?n:Cn(n,(function(e){return bn(t,i,e)}))}var $l=xo((function(e,t){return hu(e)?xi(e,t):[]})),Nl=xo((function(e){return Bo(On(e,hu))})),jl=xo((function(e){var t=ol(e);return hu(t)&&(t=i),Bo(On(e,hu),Hs(t,2))})),Bl=xo((function(e){var t=ol(e);return t="function"==typeof t?t:i,Bo(On(e,hu),i,t)})),Vl=xo(Il);function ql(e,t){return Vo(e||[],t||[],ci)}function zl(e,t){return Vo(e||[],t||[],Oo)}var Hl=xo((function(e){var t=e.length,n=t>1?e[t-1]:i;return n="function"==typeof n?(e.pop(),n):i,Ll(e,n)}));function Wl(e){var t=kr(e);return t.__chain__=!0,t}function Ql(e,t){return t(e),e}function Ul(e,t){return t(e)}var Yl=Ns((function(e){var t=e.length,n=t?e[0]:0,r=this.__wrapped__,o=function(t){return gi(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Cr&&sa(n)?(r=r.slice(n,+n+(t?1:0)),r.__actions__.push({func:Ul,args:[o],thisArg:i}),new Er(r,this.__chain__).thru((function(e){return t&&!e.length&&e.push(i),e}))):this.thru(o)}));function Xl(){return Wl(this)}function Zl(){return new Er(this.value(),this.__chain__)}function Gl(){this.__values__===i&&(this.__values__=Qu(this.value()));var e=this.__index__>=this.__values__.length,t=e?i:this.__values__[this.__index__++];return{done:e,value:t}}function Kl(){return this}function Jl(e){var t,n=this;while(n instanceof Sr){var r=Pa(n);r.__index__=0,r.__values__=i,t?o.__wrapped__=r:t=r;var o=r;n=n.__wrapped__}return o.__wrapped__=e,t}function ec(){var e=this.__wrapped__;if(e instanceof Cr){var t=e;return this.__actions__.length&&(t=new Cr(this)),t=t.reverse(),t.__actions__.push({func:Ul,args:[pl],thisArg:i}),new Er(t,this.__chain__)}return this.thru(pl)}function tc(){return jo(this.__wrapped__,this.__actions__)}var nc=ls((function(e,t,n){ht.call(e,n)?++e[n]:pi(e,n,1)}));function rc(e,t,n){var r=lu(e)?_n:Oi;return n&&aa(e,t,n)&&(t=i),r(e,Hs(t,3))}function ic(e,t){var n=lu(e)?On:Ci;return n(e,Hs(t,3))}var oc=vs(Qa),sc=vs(Ua);function ac(e,t){return Ti(mc(e,t),1)}function lc(e,t){return Ti(mc(e,t),I)}function cc(e,t,n){return n=n===i?1:Yu(n),Ti(mc(e,t),n)}function uc(e,t){var n=lu(e)?xn:ki;return n(e,Hs(t,3))}function hc(e,t){var n=lu(e)?kn:_i;return n(e,Hs(t,3))}var dc=ls((function(e,t,n){ht.call(e,n)?e[n].push(t):pi(e,n,[t])}));function fc(e,t,n,r){e=uu(e)?e:Vh(e),n=n&&!r?Yu(n):0;var i=e.length;return n<0&&(n=Bt(i+n,0)),Nu(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&$n(e,t,n)>-1}var pc=xo((function(e,t,r){var i=-1,o="function"==typeof t,s=uu(e)?n(e.length):[];return ki(e,(function(e){s[++i]=o?bn(t,e,r):zi(e,t,r)})),s})),gc=ls((function(e,t,n){pi(e,n,t)}));function mc(e,t){var n=lu(e)?Cn:oo;return n(e,Hs(t,3))}function vc(e,t,n,r){return null==e?[]:(lu(t)||(t=null==t?[]:[t]),n=r?i:n,lu(n)||(n=null==n?[]:[n]),ho(e,t,n))}var yc=ls((function(e,t,n){e[n?0:1].push(t)}),(function(){return[[],[]]}));function bc(e,t,n){var r=lu(e)?An:zn,i=arguments.length<3;return r(e,Hs(t,4),n,i,ki)}function wc(e,t,n){var r=lu(e)?Dn:zn,i=arguments.length<3;return r(e,Hs(t,4),n,i,_i)}function xc(e,t){var n=lu(e)?On:Ci;return n(e,Vc(Hs(t,3)))}function kc(e){var t=lu(e)?oi:ko;return t(e)}function _c(e,t,n){t=(n?aa(e,t,n):t===i)?1:Yu(t);var r=lu(e)?si:_o;return r(e,t)}function Oc(e){var t=lu(e)?ai:Co;return t(e)}function Sc(e){if(null==e)return 0;if(uu(e))return Nu(e)?gr(e):e.length;var t=Gs(e);return t==K||t==oe?e.size:no(e).length}function Ec(e,t,n){var r=lu(e)?Mn:Ao;return n&&aa(e,t,n)&&(t=i),r(e,Hs(t,3))}var Cc=xo((function(e,t){if(null==e)return[];var n=t.length;return n>1&&aa(e,t[0],t[1])?t=[]:n>2&&aa(t[0],t[1],t[2])&&(t=[t[0]]),ho(e,Ti(t,1),[])})),Tc=Mt||function(){return an.Date.now()};function Ac(e,t){if("function"!=typeof t)throw new ot(l);return e=Yu(e),function(){if(--e<1)return t.apply(this,arguments)}}function Dc(e,t,n){return t=n?i:t,t=e&&null==t?e.length:t,Ms(e,S,i,i,i,i,t)}function Mc(e,t){var n;if("function"!=typeof t)throw new ot(l);return e=Yu(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=i),n}}var Fc=xo((function(e,t,n){var r=y;if(n.length){var i=ur(n,zs(Fc));r|=_}return Ms(e,r,t,n,i)})),Rc=xo((function(e,t,n){var r=y|b;if(n.length){var i=ur(n,zs(Rc));r|=_}return Ms(t,r,e,n,i)}));function Pc(e,t,n){t=n?i:t;var r=Ms(e,x,i,i,i,i,i,t);return r.placeholder=Pc.placeholder,r}function Ic(e,t,n){t=n?i:t;var r=Ms(e,k,i,i,i,i,i,t);return r.placeholder=Ic.placeholder,r}function Lc(e,t,n){var r,o,s,a,c,u,h=0,d=!1,f=!1,p=!0;if("function"!=typeof e)throw new ot(l);function g(t){var n=r,s=o;return r=o=i,h=t,a=e.apply(s,n),a}function m(e){return h=e,c=Sa(b,t),d?g(e):a}function v(e){var n=e-u,r=e-h,i=t-n;return f?Vt(i,s-r):i}function y(e){var n=e-u,r=e-h;return u===i||n>=t||n<0||f&&r>=s}function b(){var e=Tc();if(y(e))return w(e);c=Sa(b,v(e))}function w(e){return c=i,p&&r?g(e):(r=o=i,a)}function x(){c!==i&&Uo(c),h=0,r=u=o=c=i}function k(){return c===i?a:w(Tc())}function _(){var e=Tc(),n=y(e);if(r=arguments,o=this,u=e,n){if(c===i)return m(u);if(f)return Uo(c),c=Sa(b,t),g(u)}return c===i&&(c=Sa(b,t)),a}return t=Zu(t)||0,Ou(n)&&(d=!!n.leading,f="maxWait"in n,s=f?Bt(Zu(n.maxWait)||0,t):s,p="trailing"in n?!!n.trailing:p),_.cancel=x,_.flush=k,_}var $c=xo((function(e,t){return wi(e,1,t)})),Nc=xo((function(e,t,n){return wi(e,Zu(t)||0,n)}));function jc(e){return Ms(e,C)}function Bc(e,t){if("function"!=typeof e||null!=t&&"function"!=typeof t)throw new ot(l);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var s=e.apply(this,r);return n.cache=o.set(i,s)||o,s};return n.cache=new(Bc.Cache||zr),n}function Vc(e){if("function"!=typeof e)throw new ot(l);return function(){var t=arguments;switch(t.length){case 0:return!e.call(this);case 1:return!e.call(this,t[0]);case 2:return!e.call(this,t[0],t[1]);case 3:return!e.call(this,t[0],t[1],t[2])}return!e.apply(this,t)}}function qc(e){return Mc(2,e)}Bc.Cache=zr;var zc=Wo((function(e,t){t=1==t.length&&lu(t[0])?Cn(t[0],Xn(Hs())):Cn(Ti(t,1),Xn(Hs()));var n=t.length;return xo((function(r){var i=-1,o=Vt(r.length,n);while(++i<o)r[i]=t[i].call(this,r[i]);return bn(e,this,r)}))})),Hc=xo((function(e,t){var n=ur(t,zs(Hc));return Ms(e,_,i,t,n)})),Wc=xo((function(e,t){var n=ur(t,zs(Wc));return Ms(e,O,i,t,n)})),Qc=Ns((function(e,t){return Ms(e,E,i,i,i,t)}));function Uc(e,t){if("function"!=typeof e)throw new ot(l);return t=t===i?t:Yu(t),xo(e,t)}function Yc(e,t){if("function"!=typeof e)throw new ot(l);return t=null==t?0:Bt(Yu(t),0),xo((function(n){var r=n[t],i=Qo(n,0,t);return r&&Tn(i,r),bn(e,this,i)}))}function Xc(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ot(l);return Ou(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),Lc(e,t,{leading:r,maxWait:t,trailing:i})}function Zc(e){return Dc(e,1)}function Gc(e,t){return Hc(zo(t),e)}function Kc(){if(!arguments.length)return[];var e=arguments[0];return lu(e)?e:[e]}function Jc(e){return vi(e,g)}function eu(e,t){return t="function"==typeof t?t:i,vi(e,g,t)}function tu(e){return vi(e,f|g)}function nu(e,t){return t="function"==typeof t?t:i,vi(e,f|g,t)}function ru(e,t){return null==t||bi(e,t,kh(t))}function iu(e,t){return e===t||e!==e&&t!==t}var ou=Es($i),su=Es((function(e,t){return e>=t})),au=Hi(function(){return arguments}())?Hi:function(e){return Su(e)&&ht.call(e,"callee")&&!Ot.call(e,"callee")},lu=n.isArray,cu=fn?Xn(fn):Wi;function uu(e){return null!=e&&_u(e.length)&&!xu(e)}function hu(e){return Su(e)&&uu(e)}function du(e){return!0===e||!1===e||Su(e)&&Li(e)==Q}var fu=Lt||Yd,pu=pn?Xn(pn):Qi;function gu(e){return Su(e)&&1===e.nodeType&&!Pu(e)}function mu(e){if(null==e)return!0;if(uu(e)&&(lu(e)||"string"==typeof e||"function"==typeof e.splice||fu(e)||Bu(e)||au(e)))return!e.length;var t=Gs(e);if(t==K||t==oe)return!e.size;if(fa(e))return!no(e).length;for(var n in e)if(ht.call(e,n))return!1;return!0}function vu(e,t){return Ui(e,t)}function yu(e,t,n){n="function"==typeof n?n:i;var r=n?n(e,t):i;return r===i?Ui(e,t,i,n):!!r}function bu(e){if(!Su(e))return!1;var t=Li(e);return t==X||t==Y||"string"==typeof e.message&&"string"==typeof e.name&&!Pu(e)}function wu(e){return"number"==typeof e&&$t(e)}function xu(e){if(!Ou(e))return!1;var t=Li(e);return t==Z||t==G||t==W||t==re}function ku(e){return"number"==typeof e&&e==Yu(e)}function _u(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=L}function Ou(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}function Su(e){return null!=e&&"object"==typeof e}var Eu=gn?Xn(gn):Xi;function Cu(e,t){return e===t||Zi(e,t,Qs(t))}function Tu(e,t,n){return n="function"==typeof n?n:i,Zi(e,t,Qs(t),n)}function Au(e){return Ru(e)&&e!=+e}function Du(e){if(da(e))throw new Ne(a);return Gi(e)}function Mu(e){return null===e}function Fu(e){return null==e}function Ru(e){return"number"==typeof e||Su(e)&&Li(e)==J}function Pu(e){if(!Su(e)||Li(e)!=te)return!1;var t=kt(e);if(null===t)return!0;var n=ht.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&ut.call(n)==gt}var Iu=mn?Xn(mn):Ki;function Lu(e){return ku(e)&&e>=-L&&e<=L}var $u=vn?Xn(vn):Ji;function Nu(e){return"string"==typeof e||!lu(e)&&Su(e)&&Li(e)==se}function ju(e){return"symbol"==typeof e||Su(e)&&Li(e)==ae}var Bu=yn?Xn(yn):eo;function Vu(e){return e===i}function qu(e){return Su(e)&&Gs(e)==ce}function zu(e){return Su(e)&&Li(e)==ue}var Hu=Es(io),Wu=Es((function(e,t){return e<=t}));function Qu(e){if(!e)return[];if(uu(e))return Nu(e)?mr(e):is(e);if(Ct&&e[Ct])return ar(e[Ct]());var t=Gs(e),n=t==K?lr:t==oe?hr:Vh;return n(e)}function Uu(e){if(!e)return 0===e?e:0;if(e=Zu(e),e===I||e===-I){var t=e<0?-1:1;return t*$}return e===e?e:0}function Yu(e){var t=Uu(e),n=t%1;return t===t?n?t-n:t:0}function Xu(e){return e?mi(Yu(e),0,j):0}function Zu(e){if("number"==typeof e)return e;if(ju(e))return N;if(Ou(e)){var t="function"==typeof e.valueOf?e.valueOf():e;e=Ou(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=Yn(e);var n=Ye.test(e);return n||Ze.test(e)?rn(e.slice(2),n?2:8):Ue.test(e)?N:+e}function Gu(e){return os(e,_h(e))}function Ku(e){return e?mi(Yu(e),-L,L):0===e?e:0}function Ju(e){return null==e?"":Po(e)}var eh=cs((function(e,t){if(fa(t)||uu(t))os(t,kh(t),e);else for(var n in t)ht.call(t,n)&&ci(e,n,t[n])})),th=cs((function(e,t){os(t,_h(t),e)})),nh=cs((function(e,t,n,r){os(t,_h(t),e,r)})),rh=cs((function(e,t,n,r){os(t,kh(t),e,r)})),ih=Ns(gi);function oh(e,t){var n=Or(e);return null==t?n:di(n,t)}var sh=xo((function(e,t){e=nt(e);var n=-1,r=t.length,o=r>2?t[2]:i;o&&aa(t[0],t[1],o)&&(r=1);while(++n<r){var s=t[n],a=_h(s),l=-1,c=a.length;while(++l<c){var u=a[l],h=e[u];(h===i||iu(h,lt[u])&&!ht.call(e,u))&&(e[u]=s[u])}}return e})),ah=xo((function(e){return e.push(i,Rs),bn(Ch,i,e)}));function lh(e,t){return In(e,Hs(t,3),Mi)}function ch(e,t){return In(e,Hs(t,3),Fi)}function uh(e,t){return null==e?e:Ai(e,Hs(t,3),_h)}function hh(e,t){return null==e?e:Di(e,Hs(t,3),_h)}function dh(e,t){return e&&Mi(e,Hs(t,3))}function fh(e,t){return e&&Fi(e,Hs(t,3))}function ph(e){return null==e?[]:Ri(e,kh(e))}function gh(e){return null==e?[]:Ri(e,_h(e))}function mh(e,t,n){var r=null==e?i:Pi(e,t);return r===i?n:r}function vh(e,t){return null!=e&&ea(e,t,Ni)}function yh(e,t){return null!=e&&ea(e,t,ji)}var bh=ws((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),e[t]=n}),Ed(Dd)),wh=ws((function(e,t,n){null!=t&&"function"!=typeof t.toString&&(t=pt.call(t)),ht.call(e,t)?e[t].push(n):e[t]=[n]}),Hs),xh=xo(zi);function kh(e){return uu(e)?ii(e):no(e)}function _h(e){return uu(e)?ii(e,!0):ro(e)}function Oh(e,t){var n={};return t=Hs(t,3),Mi(e,(function(e,r,i){pi(n,t(e,r,i),e)})),n}function Sh(e,t){var n={};return t=Hs(t,3),Mi(e,(function(e,r,i){pi(n,r,t(e,r,i))})),n}var Eh=cs((function(e,t,n){lo(e,t,n)})),Ch=cs((function(e,t,n,r){lo(e,t,n,r)})),Th=Ns((function(e,t){var n={};if(null==e)return n;var r=!1;t=Cn(t,(function(t){return t=Ho(t,e),r||(r=t.length>1),t})),os(e,Bs(e),n),r&&(n=vi(n,f|p|g,Ps));var i=t.length;while(i--)Lo(n,t[i]);return n}));function Ah(e,t){return Mh(e,Vc(Hs(t)))}var Dh=Ns((function(e,t){return null==e?{}:fo(e,t)}));function Mh(e,t){if(null==e)return{};var n=Cn(Bs(e),(function(e){return[e]}));return t=Hs(t),po(e,n,(function(e,n){return t(e,n[0])}))}function Fh(e,t,n){t=Ho(t,e);var r=-1,o=t.length;o||(o=1,e=i);while(++r<o){var s=null==e?i:e[Ma(t[r])];s===i&&(r=o,s=n),e=xu(s)?s.call(e):s}return e}function Rh(e,t,n){return null==e?e:Oo(e,t,n)}function Ph(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:Oo(e,t,n,r)}var Ih=Ds(kh),Lh=Ds(_h);function $h(e,t,n){var r=lu(e),i=r||fu(e)||Bu(e);if(t=Hs(t,4),null==n){var o=e&&e.constructor;n=i?r?new o:[]:Ou(e)&&xu(o)?Or(kt(e)):{}}return(i?xn:Mi)(e,(function(e,r,i){return t(n,e,r,i)})),n}function Nh(e,t){return null==e||Lo(e,t)}function jh(e,t,n){return null==e?e:$o(e,t,zo(n))}function Bh(e,t,n,r){return r="function"==typeof r?r:i,null==e?e:$o(e,t,zo(n),r)}function Vh(e){return null==e?[]:Zn(e,kh(e))}function qh(e){return null==e?[]:Zn(e,_h(e))}function zh(e,t,n){return n===i&&(n=t,t=i),n!==i&&(n=Zu(n),n=n===n?n:0),t!==i&&(t=Zu(t),t=t===t?t:0),mi(Zu(e),t,n)}function Hh(e,t,n){return t=Uu(t),n===i?(n=t,t=0):n=Uu(n),e=Zu(e),Bi(e,t,n)}function Wh(e,t,n){if(n&&"boolean"!=typeof n&&aa(e,t,n)&&(t=n=i),n===i&&("boolean"==typeof t?(n=t,t=i):"boolean"==typeof e&&(n=e,e=i)),e===i&&t===i?(e=0,t=1):(e=Uu(e),t===i?(t=e,e=0):t=Uu(t)),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var o=Qt();return Vt(e+o*(t-e+nn("1e-"+((o+"").length-1))),t)}return yo(e,t)}var Qh=ps((function(e,t,n){return t=t.toLowerCase(),e+(n?Uh(t):t)}));function Uh(e){return wd(Ju(e).toLowerCase())}function Yh(e){return e=Ju(e),e&&e.replace(Ke,tr).replace(zt,"")}function Xh(e,t,n){e=Ju(e),t=Po(t);var r=e.length;n=n===i?r:mi(Yu(n),0,r);var o=n;return n-=t.length,n>=0&&e.slice(n,o)==t}function Zh(e){return e=Ju(e),e&&Te.test(e)?e.replace(Ee,nr):e}function Gh(e){return e=Ju(e),e&&Le.test(e)?e.replace(Ie,"\\$&"):e}var Kh=ps((function(e,t,n){return e+(n?"-":"")+t.toLowerCase()})),Jh=ps((function(e,t,n){return e+(n?" ":"")+t.toLowerCase()})),ed=fs("toLowerCase");function td(e,t,n){e=Ju(e),t=Yu(t);var r=t?gr(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return _s(Pt(i),n)+e+_s(Rt(i),n)}function nd(e,t,n){e=Ju(e),t=Yu(t);var r=t?gr(e):0;return t&&r<t?e+_s(t-r,n):e}function rd(e,t,n){e=Ju(e),t=Yu(t);var r=t?gr(e):0;return t&&r<t?_s(t-r,n)+e:e}function id(e,t,n){return n||null==t?t=0:t&&(t=+t),Wt(Ju(e).replace($e,""),t||0)}function od(e,t,n){return t=(n?aa(e,t,n):t===i)?1:Yu(t),wo(Ju(e),t)}function sd(){var e=arguments,t=Ju(e[0]);return e.length<3?t:t.replace(e[1],e[2])}var ad=ps((function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}));function ld(e,t,n){return n&&"number"!=typeof n&&aa(e,t,n)&&(t=n=i),n=n===i?j:n>>>0,n?(e=Ju(e),e&&("string"==typeof t||null!=t&&!Iu(t))&&(t=Po(t),!t&&or(e))?Qo(mr(e),0,n):e.split(t,n)):[]}var cd=ps((function(e,t,n){return e+(n?" ":"")+wd(t)}));function ud(e,t,n){return e=Ju(e),n=null==n?0:mi(Yu(n),0,e.length),t=Po(t),e.slice(n,n+t.length)==t}function hd(e,t,n){var r=kr.templateSettings;n&&aa(e,t,n)&&(t=i),e=Ju(e),t=nh({},t,r,Fs);var o,s,a=nh({},t.imports,r.imports,Fs),l=kh(a),u=Zn(a,l),h=0,d=t.interpolate||Je,f="__p += '",p=rt((t.escape||Je).source+"|"+d.source+"|"+(d===Me?We:Je).source+"|"+(t.evaluate||Je).source+"|$","g"),g="//# sourceURL="+(ht.call(t,"sourceURL")?(t.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Xt+"]")+"\n";e.replace(p,(function(t,n,r,i,a,l){return r||(r=i),f+=e.slice(h,l).replace(et,rr),n&&(o=!0,f+="' +\n__e("+n+") +\n'"),a&&(s=!0,f+="';\n"+a+";\n__p += '"),r&&(f+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),h=l+t.length,t})),f+="';\n";var m=ht.call(t,"variable")&&t.variable;if(m){if(ze.test(m))throw new Ne(c)}else f="with (obj) {\n"+f+"\n}\n";f=(s?f.replace(ke,""):f).replace(_e,"$1").replace(Oe,"$1;"),f="function("+(m||"obj")+") {\n"+(m?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(o?", __e = _.escape":"")+(s?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+f+"return __p\n}";var v=kd((function(){return qe(l,g+"return "+f).apply(i,u)}));if(v.source=f,bu(v))throw v;return v}function dd(e){return Ju(e).toLowerCase()}function fd(e){return Ju(e).toUpperCase()}function pd(e,t,n){if(e=Ju(e),e&&(n||t===i))return Yn(e);if(!e||!(t=Po(t)))return e;var r=mr(e),o=mr(t),s=Kn(r,o),a=Jn(r,o)+1;return Qo(r,s,a).join("")}function gd(e,t,n){if(e=Ju(e),e&&(n||t===i))return e.slice(0,vr(e)+1);if(!e||!(t=Po(t)))return e;var r=mr(e),o=Jn(r,mr(t))+1;return Qo(r,0,o).join("")}function md(e,t,n){if(e=Ju(e),e&&(n||t===i))return e.replace($e,"");if(!e||!(t=Po(t)))return e;var r=mr(e),o=Kn(r,mr(t));return Qo(r,o).join("")}function vd(e,t){var n=T,r=A;if(Ou(t)){var o="separator"in t?t.separator:o;n="length"in t?Yu(t.length):n,r="omission"in t?Po(t.omission):r}e=Ju(e);var s=e.length;if(or(e)){var a=mr(e);s=a.length}if(n>=s)return e;var l=n-gr(r);if(l<1)return r;var c=a?Qo(a,0,l).join(""):e.slice(0,l);if(o===i)return c+r;if(a&&(l+=c.length-l),Iu(o)){if(e.slice(l).search(o)){var u,h=c;o.global||(o=rt(o.source,Ju(Qe.exec(o))+"g")),o.lastIndex=0;while(u=o.exec(h))var d=u.index;c=c.slice(0,d===i?l:d)}}else if(e.indexOf(Po(o),l)!=l){var f=c.lastIndexOf(o);f>-1&&(c=c.slice(0,f))}return c+r}function yd(e){return e=Ju(e),e&&Ce.test(e)?e.replace(Se,yr):e}var bd=ps((function(e,t,n){return e+(n?" ":"")+t.toUpperCase()})),wd=fs("toUpperCase");function xd(e,t,n){return e=Ju(e),t=n?i:t,t===i?sr(e)?xr(e):Pn(e):e.match(t)||[]}var kd=xo((function(e,t){try{return bn(e,i,t)}catch(n){return bu(n)?n:new Ne(n)}})),_d=Ns((function(e,t){return xn(t,(function(t){t=Ma(t),pi(e,t,Fc(e[t],e))})),e}));function Od(e){var t=null==e?0:e.length,n=Hs();return e=t?Cn(e,(function(e){if("function"!=typeof e[1])throw new ot(l);return[n(e[0]),e[1]]})):[],xo((function(n){var r=-1;while(++r<t){var i=e[r];if(bn(i[0],this,n))return bn(i[1],this,n)}}))}function Sd(e){return yi(vi(e,f))}function Ed(e){return function(){return e}}function Cd(e,t){return null==e||e!==e?t:e}var Td=ys(),Ad=ys(!0);function Dd(e){return e}function Md(e){return to("function"==typeof e?e:vi(e,f))}function Fd(e){return so(vi(e,f))}function Rd(e,t){return ao(e,vi(t,f))}var Pd=xo((function(e,t){return function(n){return zi(n,e,t)}})),Id=xo((function(e,t){return function(n){return zi(e,n,t)}}));function Ld(e,t,n){var r=kh(t),i=Ri(t,r);null!=n||Ou(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Ri(t,kh(t)));var o=!(Ou(n)&&"chain"in n)||!!n.chain,s=xu(e);return xn(i,(function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(o||t){var n=e(this.__wrapped__),i=n.__actions__=is(this.__actions__);return i.push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,Tn([this.value()],arguments))})})),e}function $d(){return an._===this&&(an._=mt),this}function Nd(){}function jd(e){return e=Yu(e),xo((function(t){return uo(t,e)}))}var Bd=ks(Cn),Vd=ks(_n),qd=ks(Mn);function zd(e){return la(e)?Vn(Ma(e)):go(e)}function Hd(e){return function(t){return null==e?i:Pi(e,t)}}var Wd=Ss(),Qd=Ss(!0);function Ud(){return[]}function Yd(){return!1}function Xd(){return{}}function Zd(){return""}function Gd(){return!0}function Kd(e,t){if(e=Yu(e),e<1||e>L)return[];var n=j,r=Vt(e,j);t=Hs(t),e-=j;var i=Qn(r,t);while(++n<e)t(n);return i}function Jd(e){return lu(e)?Cn(e,Ma):ju(e)?[e]:is(Da(Ju(e)))}function ef(e){var t=++dt;return Ju(e)+t}var tf=xs((function(e,t){return e+t}),0),nf=Ts("ceil"),rf=xs((function(e,t){return e/t}),1),of=Ts("floor");function sf(e){return e&&e.length?Si(e,Dd,$i):i}function af(e,t){return e&&e.length?Si(e,Hs(t,2),$i):i}function lf(e){return Bn(e,Dd)}function cf(e,t){return Bn(e,Hs(t,2))}function uf(e){return e&&e.length?Si(e,Dd,io):i}function hf(e,t){return e&&e.length?Si(e,Hs(t,2),io):i}var df=xs((function(e,t){return e*t}),1),ff=Ts("round"),pf=xs((function(e,t){return e-t}),0);function gf(e){return e&&e.length?Wn(e,Dd):0}function mf(e,t){return e&&e.length?Wn(e,Hs(t,2)):0}return kr.after=Ac,kr.ary=Dc,kr.assign=eh,kr.assignIn=th,kr.assignInWith=nh,kr.assignWith=rh,kr.at=ih,kr.before=Mc,kr.bind=Fc,kr.bindAll=_d,kr.bindKey=Rc,kr.castArray=Kc,kr.chain=Wl,kr.chunk=Ia,kr.compact=La,kr.concat=$a,kr.cond=Od,kr.conforms=Sd,kr.constant=Ed,kr.countBy=nc,kr.create=oh,kr.curry=Pc,kr.curryRight=Ic,kr.debounce=Lc,kr.defaults=sh,kr.defaultsDeep=ah,kr.defer=$c,kr.delay=Nc,kr.difference=Na,kr.differenceBy=ja,kr.differenceWith=Ba,kr.drop=Va,kr.dropRight=qa,kr.dropRightWhile=za,kr.dropWhile=Ha,kr.fill=Wa,kr.filter=ic,kr.flatMap=ac,kr.flatMapDeep=lc,kr.flatMapDepth=cc,kr.flatten=Ya,kr.flattenDeep=Xa,kr.flattenDepth=Za,kr.flip=jc,kr.flow=Td,kr.flowRight=Ad,kr.fromPairs=Ga,kr.functions=ph,kr.functionsIn=gh,kr.groupBy=dc,kr.initial=el,kr.intersection=tl,kr.intersectionBy=nl,kr.intersectionWith=rl,kr.invert=bh,kr.invertBy=wh,kr.invokeMap=pc,kr.iteratee=Md,kr.keyBy=gc,kr.keys=kh,kr.keysIn=_h,kr.map=mc,kr.mapKeys=Oh,kr.mapValues=Sh,kr.matches=Fd,kr.matchesProperty=Rd,kr.memoize=Bc,kr.merge=Eh,kr.mergeWith=Ch,kr.method=Pd,kr.methodOf=Id,kr.mixin=Ld,kr.negate=Vc,kr.nthArg=jd,kr.omit=Th,kr.omitBy=Ah,kr.once=qc,kr.orderBy=vc,kr.over=Bd,kr.overArgs=zc,kr.overEvery=Vd,kr.overSome=qd,kr.partial=Hc,kr.partialRight=Wc,kr.partition=yc,kr.pick=Dh,kr.pickBy=Mh,kr.property=zd,kr.propertyOf=Hd,kr.pull=ll,kr.pullAll=cl,kr.pullAllBy=ul,kr.pullAllWith=hl,kr.pullAt=dl,kr.range=Wd,kr.rangeRight=Qd,kr.rearg=Qc,kr.reject=xc,kr.remove=fl,kr.rest=Uc,kr.reverse=pl,kr.sampleSize=_c,kr.set=Rh,kr.setWith=Ph,kr.shuffle=Oc,kr.slice=gl,kr.sortBy=Cc,kr.sortedUniq=kl,kr.sortedUniqBy=_l,kr.split=ld,kr.spread=Yc,kr.tail=Ol,kr.take=Sl,kr.takeRight=El,kr.takeRightWhile=Cl,kr.takeWhile=Tl,kr.tap=Ql,kr.throttle=Xc,kr.thru=Ul,kr.toArray=Qu,kr.toPairs=Ih,kr.toPairsIn=Lh,kr.toPath=Jd,kr.toPlainObject=Gu,kr.transform=$h,kr.unary=Zc,kr.union=Al,kr.unionBy=Dl,kr.unionWith=Ml,kr.uniq=Fl,kr.uniqBy=Rl,kr.uniqWith=Pl,kr.unset=Nh,kr.unzip=Il,kr.unzipWith=Ll,kr.update=jh,kr.updateWith=Bh,kr.values=Vh,kr.valuesIn=qh,kr.without=$l,kr.words=xd,kr.wrap=Gc,kr.xor=Nl,kr.xorBy=jl,kr.xorWith=Bl,kr.zip=Vl,kr.zipObject=ql,kr.zipObjectDeep=zl,kr.zipWith=Hl,kr.entries=Ih,kr.entriesIn=Lh,kr.extend=th,kr.extendWith=nh,Ld(kr,kr),kr.add=tf,kr.attempt=kd,kr.camelCase=Qh,kr.capitalize=Uh,kr.ceil=nf,kr.clamp=zh,kr.clone=Jc,kr.cloneDeep=tu,kr.cloneDeepWith=nu,kr.cloneWith=eu,kr.conformsTo=ru,kr.deburr=Yh,kr.defaultTo=Cd,kr.divide=rf,kr.endsWith=Xh,kr.eq=iu,kr.escape=Zh,kr.escapeRegExp=Gh,kr.every=rc,kr.find=oc,kr.findIndex=Qa,kr.findKey=lh,kr.findLast=sc,kr.findLastIndex=Ua,kr.findLastKey=ch,kr.floor=of,kr.forEach=uc,kr.forEachRight=hc,kr.forIn=uh,kr.forInRight=hh,kr.forOwn=dh,kr.forOwnRight=fh,kr.get=mh,kr.gt=ou,kr.gte=su,kr.has=vh,kr.hasIn=yh,kr.head=Ka,kr.identity=Dd,kr.includes=fc,kr.indexOf=Ja,kr.inRange=Hh,kr.invoke=xh,kr.isArguments=au,kr.isArray=lu,kr.isArrayBuffer=cu,kr.isArrayLike=uu,kr.isArrayLikeObject=hu,kr.isBoolean=du,kr.isBuffer=fu,kr.isDate=pu,kr.isElement=gu,kr.isEmpty=mu,kr.isEqual=vu,kr.isEqualWith=yu,kr.isError=bu,kr.isFinite=wu,kr.isFunction=xu,kr.isInteger=ku,kr.isLength=_u,kr.isMap=Eu,kr.isMatch=Cu,kr.isMatchWith=Tu,kr.isNaN=Au,kr.isNative=Du,kr.isNil=Fu,kr.isNull=Mu,kr.isNumber=Ru,kr.isObject=Ou,kr.isObjectLike=Su,kr.isPlainObject=Pu,kr.isRegExp=Iu,kr.isSafeInteger=Lu,kr.isSet=$u,kr.isString=Nu,kr.isSymbol=ju,kr.isTypedArray=Bu,kr.isUndefined=Vu,kr.isWeakMap=qu,kr.isWeakSet=zu,kr.join=il,kr.kebabCase=Kh,kr.last=ol,kr.lastIndexOf=sl,kr.lowerCase=Jh,kr.lowerFirst=ed,kr.lt=Hu,kr.lte=Wu,kr.max=sf,kr.maxBy=af,kr.mean=lf,kr.meanBy=cf,kr.min=uf,kr.minBy=hf,kr.stubArray=Ud,kr.stubFalse=Yd,kr.stubObject=Xd,kr.stubString=Zd,kr.stubTrue=Gd,kr.multiply=df,kr.nth=al,kr.noConflict=$d,kr.noop=Nd,kr.now=Tc,kr.pad=td,kr.padEnd=nd,kr.padStart=rd,kr.parseInt=id,kr.random=Wh,kr.reduce=bc,kr.reduceRight=wc,kr.repeat=od,kr.replace=sd,kr.result=Fh,kr.round=ff,kr.runInContext=e,kr.sample=kc,kr.size=Sc,kr.snakeCase=ad,kr.some=Ec,kr.sortedIndex=ml,kr.sortedIndexBy=vl,kr.sortedIndexOf=yl,kr.sortedLastIndex=bl,kr.sortedLastIndexBy=wl,kr.sortedLastIndexOf=xl,kr.startCase=cd,kr.startsWith=ud,kr.subtract=pf,kr.sum=gf,kr.sumBy=mf,kr.template=hd,kr.times=Kd,kr.toFinite=Uu,kr.toInteger=Yu,kr.toLength=Xu,kr.toLower=dd,kr.toNumber=Zu,kr.toSafeInteger=Ku,kr.toString=Ju,kr.toUpper=fd,kr.trim=pd,kr.trimEnd=gd,kr.trimStart=md,kr.truncate=vd,kr.unescape=yd,kr.uniqueId=ef,kr.upperCase=bd,kr.upperFirst=wd,kr.each=uc,kr.eachRight=hc,kr.first=Ka,Ld(kr,function(){var e={};return Mi(kr,(function(t,n){ht.call(kr.prototype,n)||(e[n]=t)})),e}(),{chain:!1}),kr.VERSION=o,xn(["bind","bindKey","curry","curryRight","partial","partialRight"],(function(e){kr[e].placeholder=kr})),xn(["drop","take"],(function(e,t){Cr.prototype[e]=function(n){n=n===i?1:Bt(Yu(n),0);var r=this.__filtered__&&!t?new Cr(this):this.clone();return r.__filtered__?r.__takeCount__=Vt(n,r.__takeCount__):r.__views__.push({size:Vt(n,j),type:e+(r.__dir__<0?"Right":"")}),r},Cr.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}})),xn(["filter","map","takeWhile"],(function(e,t){var n=t+1,r=n==F||n==P;Cr.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:Hs(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}})),xn(["head","last"],(function(e,t){var n="take"+(t?"Right":"");Cr.prototype[e]=function(){return this[n](1).value()[0]}})),xn(["initial","tail"],(function(e,t){var n="drop"+(t?"":"Right");Cr.prototype[e]=function(){return this.__filtered__?new Cr(this):this[n](1)}})),Cr.prototype.compact=function(){return this.filter(Dd)},Cr.prototype.find=function(e){return this.filter(e).head()},Cr.prototype.findLast=function(e){return this.reverse().find(e)},Cr.prototype.invokeMap=xo((function(e,t){return"function"==typeof e?new Cr(this):this.map((function(n){return zi(n,e,t)}))})),Cr.prototype.reject=function(e){return this.filter(Vc(Hs(e)))},Cr.prototype.slice=function(e,t){e=Yu(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Cr(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==i&&(t=Yu(t),n=t<0?n.dropRight(-t):n.take(t-e)),n)},Cr.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Cr.prototype.toArray=function(){return this.take(j)},Mi(Cr.prototype,(function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),o=kr[r?"take"+("last"==t?"Right":""):t],s=r||/^find/.test(t);o&&(kr.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,l=t instanceof Cr,c=a[0],u=l||lu(t),h=function(e){var t=o.apply(kr,Tn([e],a));return r&&d?t[0]:t};u&&n&&"function"==typeof c&&1!=c.length&&(l=u=!1);var d=this.__chain__,f=!!this.__actions__.length,p=s&&!d,g=l&&!f;if(!s&&u){t=g?t:new Cr(this);var m=e.apply(t,a);return m.__actions__.push({func:Ul,args:[h],thisArg:i}),new Er(m,d)}return p&&g?e.apply(this,a):(m=this.thru(h),p?r?m.value()[0]:m.value():m)})})),xn(["pop","push","shift","sort","splice","unshift"],(function(e){var t=st[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);kr.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(lu(i)?i:[],e)}return this[n]((function(n){return t.apply(lu(n)?n:[],e)}))}})),Mi(Cr.prototype,(function(e,t){var n=kr[t];if(n){var r=n.name+"";ht.call(cn,r)||(cn[r]=[]),cn[r].push({name:t,func:n})}})),cn[bs(i,b).name]=[{name:"wrapper",func:i}],Cr.prototype.clone=Tr,Cr.prototype.reverse=Ar,Cr.prototype.value=Dr,kr.prototype.at=Yl,kr.prototype.chain=Xl,kr.prototype.commit=Zl,kr.prototype.next=Gl,kr.prototype.plant=Jl,kr.prototype.reverse=ec,kr.prototype.toJSON=kr.prototype.valueOf=kr.prototype.value=tc,kr.prototype.first=kr.prototype.head,Ct&&(kr.prototype[Ct]=Kl),kr},_r=kr();an._=_r,r=function(){return _r}.call(t,n,t,e),r===i||(e.exports=r)}.call(this)},7770:function(e){function t(){return[]}e.exports=t},3236:function(e){function t(){return!1}e.exports=t},1781:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return rK}});var r=n(6768);const i={class:"titulo"},o={class:"margem"},s={class:"m-icone esquerda"},a={class:"margem"};function l(e,t,n,l,c,u){const h=(0,r.g2)("editarFichaComponent");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.Lk)("div",i,[(0,r.Lk)("div",o,[(0,r.Lk)("div",s,[(0,r.Lk)("a",{onClick:t[0]||(t[0]=e=>this.$router.back()),style:{cursor:"pointer"},class:"icone-voltar m-d"})]),t[2]||(t[2]=(0,r.Lk)("h2",null,"Criar Ficha",-1))])]),(0,r.Lk)("div",a,[(0,r.Lk)("button",{class:"button",style:{position:"absolute",right:"1rem","z-index":"99999"},onClick:t[1]||(t[1]=(...e)=>u.saveSchema&&u.saveSchema(...e))},"Salvar"),(0,r.bF)(h,{schema:c.initialSchema,ref:"formEditor"},null,8,["schema"])])],64)}const c={class:"bloco"},u={ref:"formEditorContainer"};function h(e,t,n,i,o,s){return(0,r.uX)(),(0,r.CE)("div",c,[(0,r.Lk)("div",u,null,512)])}n(4114);function d(e,t){return t={exports:{}},e(t,t.exports),t.exports}var f=d((function(e){var t=e.exports=function(e,n){if(n||(n=16),void 0===e&&(e=128),e<=0)return"0";for(var r=Math.log(Math.pow(2,e))/Math.log(n),i=2;r===1/0;i*=2)r=Math.log(Math.pow(2,e/i))/Math.log(n)*i;var o=r-Math.floor(r),s="";for(i=0;i<Math.floor(r);i++){var a=Math.floor(Math.random()*n).toString(n);s=a+s}if(o){var l=Math.pow(n,o);a=Math.floor(Math.random()*l).toString(n);s=a+s}var c=parseInt(s,n);return c!==1/0&&c>=Math.pow(2,e)?t(e,n):s};t.rack=function(e,n,r){var i=function(i){var s=0;do{if(s++>10){if(!r)throw new Error("too many ID collisions, use more bits");e+=r}var a=t(e,n)}while(Object.hasOwnProperty.call(o,a));return o[a]=i,a},o=i.hats={};return i.get=function(e){return i.hats[e]},i.set=function(e,t){return i.hats[e]=t,i},i.bits=e||128,i.base=n||16,i}}));function p(e){if(!(this instanceof p))return new p(e);e=e||[128,36,1],this._seed=e.length?f.rack(e[0],e[1],e[2]):e}p.prototype.next=function(e){return this._seed(e||!0)},p.prototype.nextPrefixed=function(e,t){var n;do{n=e+this.next(!0)}while(this.assigned(n));return this.claim(n,t),n},p.prototype.claim=function(e,t){this._seed.set(e,t||!0)},p.prototype.assigned=function(e){return this._seed.get(e)||!1},p.prototype.unclaim=function(e){delete this._seed.hats[e]},p.prototype.clear=function(){var e,t=this._seed.hats;for(e in t)this.unclaim(e)};var g=p;n(7642),n(8004),n(3853),n(5876),n(2475),n(5024),n(1698);const m=Object.prototype.toString,v=Object.prototype.hasOwnProperty;function y(e){return void 0===e}function b(e){return void 0!==e}function w(e){return null==e}function x(e){return"[object Array]"===m.call(e)}function k(e){return"[object Object]"===m.call(e)}function _(e){return"[object Number]"===m.call(e)}function O(e){const t=m.call(e);return"[object Function]"===t||"[object AsyncFunction]"===t||"[object GeneratorFunction]"===t||"[object AsyncGeneratorFunction]"===t||"[object Proxy]"===t}function S(e){return"[object String]"===m.call(e)}function E(e){if(!x(e))throw new Error("must supply array")}function C(e,t){return!w(e)&&v.call(e,t)}function T(e,t){const n=j(t);let r;return D(e,(function(e,t){if(n(e,t))return r=e,!1})),r}function A(e,t){const n=j(t);let r=x(e)?-1:void 0;return D(e,(function(e,t){if(n(e,t))return r=t,!1})),r}function D(e,t){let n,r;if(y(e))return;const i=x(e)?V:B;for(let o in e)if(C(e,o)&&(n=e[o],r=t(n,i(o)),!1===r))return n}function M(e,t){if(y(e))return[];E(e);const n=j(t);return e.filter((function(e,t){return!n(e,t)}))}function F(e,t,n){return D(e,(function(e,r){n=t(n,e,r)})),n}function R(e,t){return!!T(e,t)}function P(e,t){let n=[];return D(e,(function(e,r){n.push(t(e,r))})),n}function I(e){return P(e,(e=>e))}function L(e,t,n={}){return t=N(t),D(e,(function(e){let r=t(e)||"_",i=n[r];i||(i=n[r]=[]),i.push(e)})),n}function $(e,...t){e=N(e);let n={};D(t,(t=>L(t,e,n)));let r=P(n,(function(e,t){return e[0]}));return r}function N(e){return O(e)?e:t=>t[e]}function j(e){return O(e)?e:t=>t===e}function B(e){return e}function V(e){return Number(e)}function q(e,t){let n,r,i,o;function s(n){let s=Date.now(),c=n?0:o+t-s;if(c>0)return a(c);e.apply(i,r),l()}function a(e){n=setTimeout(s,e)}function l(){n&&clearTimeout(n),n=o=r=i=void 0}function c(){n&&s(!0),l()}function u(...e){o=Date.now(),r=e,i=this,n||a(t)}return u.flush=c,u.cancel=l,u}function z(e,t){return e.bind(t)}function H(e,...t){return Object.assign(e,...t)}function W(e,t,n){let r=e;return D(t,(function(e,i){if("number"!==typeof e&&"string"!==typeof e)throw new Error("illegal key type: "+typeof e+". Key should be of type number or string.");if("constructor"===e)throw new Error("illegal key: constructor");if("__proto__"===e)throw new Error("illegal key: __proto__");let o=t[i+1],s=r[e];b(o)&&w(s)&&(s=r[e]=isNaN(+o)?{}:[]),y(o)?y(n)?delete r[e]:r[e]=n:r=s})),e}function Q(e,t,n){let r=e;return D(t,(function(e){if(w(r))return r=void 0,!1;r=r[e]})),y(r)?n:r}var U=20,Y=1,X=1e6,Z=1e6,G=-7,K=21,J=!1,ee="[big.js] ",te=ee+"Invalid ",ne=te+"decimal places",re=te+"rounding mode",ie=ee+"Division by zero",oe={},se=void 0,ae=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function le(){function e(t){var n=this;if(!(n instanceof e))return t===se?le():new e(t);if(t instanceof e)n.s=t.s,n.e=t.e,n.c=t.c.slice();else{if("string"!==typeof t){if(!0===e.strict&&"bigint"!==typeof t)throw TypeError(te+"value");t=0===t&&1/t<0?"-0":String(t)}ce(n,t)}n.constructor=e}return e.prototype=oe,e.DP=U,e.RM=Y,e.NE=G,e.PE=K,e.strict=J,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function ce(e,t){var n,r,i;if(!ae.test(t))throw Error(te+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),i=t.length,r=0;r<i&&"0"==t.charAt(r);)++r;if(r==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=n-r-1,e.c=[],n=0;r<=i;)e.c[n++]=+t.charAt(r++)}return e}function ue(e,t,n,r){var i=e.c;if(n===se&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(re);if(t<1)r=3===n&&(r||!!i[0])||0===t&&(1===n&&i[0]>=5||2===n&&(i[0]>5||5===i[0]&&(r||i[1]!==se))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=1===n&&i[t]>=5||2===n&&(i[t]>5||5===i[t]&&(r||i[t+1]!==se||1&i[t-1]))||3===n&&(r||!!i[0]),i.length=t,r)for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}for(t=i.length;!i[--t];)i.pop()}return e}function he(e,t,n){var r=e.e,i=e.c.join(""),o=i.length;if(t)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>o)for(r-=o;r--;)i+="0";else r<o&&(i=i.slice(0,r)+"."+i.slice(r));else o>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&n?"-"+i:i}oe.abs=function(){var e=new this.constructor(this);return e.s=1,e},oe.cmp=function(e){var t,n=this,r=n.c,i=(e=new n.constructor(e)).c,o=n.s,s=e.s,a=n.e,l=e.e;if(!r[0]||!i[0])return r[0]?o:i[0]?-s:0;if(o!=s)return o;if(t=o<0,a!=l)return a>l^t?1:-1;for(s=(a=r.length)<(l=i.length)?a:l,o=-1;++o<s;)if(r[o]!=i[o])return r[o]>i[o]^t?1:-1;return a==l?0:a>l^t?1:-1},oe.div=function(e){var t=this,n=t.constructor,r=t.c,i=(e=new n(e)).c,o=t.s==e.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>X)throw Error(ne);if(!i[0])throw Error(ie);if(!r[0])return e.s=o,e.c=[e.e=0],e;var a,l,c,u,h,d=i.slice(),f=a=i.length,p=r.length,g=r.slice(0,a),m=g.length,v=e,y=v.c=[],b=0,w=s+(v.e=t.e-e.e)+1;for(v.s=o,o=w<0?0:w,d.unshift(0);m++<a;)g.push(0);do{for(c=0;c<10;c++){if(a!=(m=g.length))u=a>m?1:-1;else for(h=-1,u=0;++h<a;)if(i[h]!=g[h]){u=i[h]>g[h]?1:-1;break}if(!(u<0))break;for(l=m==a?i:d;m;){if(g[--m]<l[m]){for(h=m;h&&!g[--h];)g[h]=9;--g[h],g[m]+=10}g[m]-=l[m]}for(;!g[0];)g.shift()}y[b++]=u?c:++c,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==se)&&o--);return y[0]||1==b||(y.shift(),v.e--,w--),b>w&&ue(v,w,n.RM,g[0]!==se),v},oe.eq=function(e){return 0===this.cmp(e)},oe.gt=function(e){return this.cmp(e)>0},oe.gte=function(e){return this.cmp(e)>-1},oe.lt=function(e){return this.cmp(e)<0},oe.lte=function(e){return this.cmp(e)<1},oe.minus=oe.sub=function(e){var t,n,r,i,o=this,s=o.constructor,a=o.s,l=(e=new s(e)).s;if(a!=l)return e.s=-l,o.plus(e);var c=o.c.slice(),u=o.e,h=e.c,d=e.e;if(!c[0]||!h[0])return h[0]?e.s=-l:c[0]?e=new s(o):e.s=1,e;if(a=u-d){for((i=a<0)?(a=-a,r=c):(d=u,r=h),r.reverse(),l=a;l--;)r.push(0);r.reverse()}else for(n=((i=c.length<h.length)?c:h).length,a=l=0;l<n;l++)if(c[l]!=h[l]){i=c[l]<h[l];break}if(i&&(r=c,c=h,h=r,e.s=-e.s),(l=(n=h.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;n>a;){if(c[--n]<h[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=h[n]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(e.s=1,c=[d=0]),e.c=c,e.e=d,e},oe.mod=function(e){var t,n=this,r=n.constructor,i=n.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(ie);return n.s=e.s=1,t=1==e.cmp(n),n.s=i,e.s=o,t?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=o,this.minus(n.times(e)))},oe.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},oe.plus=oe.add=function(e){var t,n,r,i=this,o=i.constructor;if(e=new o(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var s=i.e,a=i.c,l=e.e,c=e.c;if(!a[0]||!c[0])return c[0]||(a[0]?e=new o(i):e.s=i.s),e;if(a=a.slice(),t=s-l){for(t>0?(l=s,r=c):(t=-t,r=a),r.reverse();t--;)r.push(0);r.reverse()}for(a.length-c.length<0&&(r=c,c=a,a=r),t=c.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+c[t]+n)/10|0;for(n&&(a.unshift(n),++l),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=l,e},oe.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-Z||e>Z)throw Error(te+"exponent");for(i&&(e=-e);;){if(1&e&&(r=r.times(t)),e>>=1,!e)break;t=t.times(t)}return i?n.div(r):r},oe.prec=function(e,t){if(e!==~~e||e<1||e>X)throw Error(te+"precision");return ue(new this.constructor(this),e,t)},oe.round=function(e,t){if(e===se)e=0;else if(e!==~~e||e<-X||e>X)throw Error(ne);return ue(new this.constructor(this),e+this.e+1,t)},oe.sqrt=function(){var e,t,n,r=this,i=r.constructor,o=r.s,s=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(o<0)throw Error(ee+"No square root");o=Math.sqrt(+he(r,!0,!0)),0===o||o===1/0?(t=r.c.join(""),t.length+s&1||(t+="0"),o=Math.sqrt(t),s=((s+1)/2|0)-(s<0||1&s),e=new i((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new i(o+""),s=e.e+(i.DP+=4);do{n=e,e=a.times(n.plus(r.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return ue(e,(i.DP-=4)+e.e+1,i.RM)},oe.times=oe.mul=function(e){var t,n=this,r=n.constructor,i=n.c,o=(e=new r(e)).c,s=i.length,a=o.length,l=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!i[0]||!o[0])return e.c=[e.e=0],e;for(e.e=l+c,s<a&&(t=i,i=o,o=t,c=s,s=a,a=c),t=new Array(c=s+a);c--;)t[c]=0;for(l=a;l--;){for(a=0,c=s+l;c>l;)a=t[c]+o[l]*i[c-l-1]+a,t[c--]=a%10,a=a/10|0;t[c]=a}for(a?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},oe.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==se){if(e!==~~e||e<0||e>X)throw Error(ne);for(n=ue(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return he(n,!0,!!r)},oe.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==se){if(e!==~~e||e<0||e>X)throw Error(ne);for(n=ue(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return he(n,!1,!!r)},oe[Symbol.for("nodejs.util.inspect.custom")]=oe.toJSON=oe.toString=function(){var e=this,t=e.constructor;return he(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},oe.toNumber=function(){var e=+he(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(ee+"Imprecise conversion");return e},oe.toPrecision=function(e,t){var n=this,r=n.constructor,i=n.c[0];if(e!==se){if(e!==~~e||e<1||e>X)throw Error(te+"precision");for(n=ue(new r(n),e,t);n.c.length<e;)n.c.push(0)}return he(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},oe.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(ee+"valueOf disallowed");return he(e,e.e<=t.NE||e.e>=t.PE,!0)};var de,fe,pe,ge,me,ve,ye,be,we,xe,ke,_e=le(),Oe=_e,Se=n(5719),Ee=n.n(Se),Ce={},Te=[],Ae=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord|itera/i,De=Array.isArray;function Me(e,t){for(var n in t)e[n]=t[n];return e}function Fe(e){e&&e.parentNode&&e.parentNode.removeChild(e)}function Re(e,t,n){var r,i,o,s={};for(o in t)"key"==o?r=t[o]:"ref"==o?i=t[o]:s[o]=t[o];if(arguments.length>2&&(s.children=arguments.length>3?de.call(arguments,2):n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===s[o]&&(s[o]=e.defaultProps[o]);return Pe(e,s,r,i,null)}function Pe(e,t,n,r,i){var o={type:e,props:t,key:n,ref:r,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:null==i?++pe:i,__i:-1,__u:0};return null==i&&null!=fe.vnode&&fe.vnode(o),o}function Ie(e){return e.children}function Le(e,t){this.props=e,this.context=t}function $e(e,t){if(null==t)return e.__?$e(e.__,e.__i+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?$e(e):null}function Ne(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return Ne(e)}}function je(e){(!e.__d&&(e.__d=!0)&&ge.push(e)&&!Be.__r++||me!==fe.debounceRendering)&&((me=fe.debounceRendering)||ve)(Be)}function Be(){var e,t,n,r,i,o,s,a;for(ge.sort(ye);e=ge.shift();)e.__d&&(t=ge.length,r=void 0,o=(i=(n=e).__v).__e,s=[],a=[],n.__P&&((r=Me({},i)).__v=i.__v+1,fe.vnode&&fe.vnode(r),Xe(n.__P,r,i,n.__n,n.__P.namespaceURI,32&i.__u?[o]:null,s,null==o?$e(i):o,!!(32&i.__u),a),r.__v=i.__v,r.__.__k[r.__i]=r,Ze(s,r,a),r.__e!=o&&Ne(r)),ge.length>t&&ge.sort(ye));Be.__r=0}function Ve(e,t,n,r,i,o,s,a,l,c,u){var h,d,f,p,g,m=r&&r.__k||Te,v=t.length;for(n.__d=l,qe(n,t,m),l=n.__d,h=0;h<v;h++)null!=(f=n.__k[h])&&(d=-1===f.__i?Ce:m[f.__i]||Ce,f.__i=h,Xe(e,f,d,i,o,s,a,l,c,u),p=f.__e,f.ref&&d.ref!=f.ref&&(d.ref&&Ke(d.ref,null,f),u.push(f.ref,f.__c||p,f)),null==g&&null!=p&&(g=p),65536&f.__u||d.__k===f.__k?l=ze(f,l,e):"function"==typeof f.type&&void 0!==f.__d?l=f.__d:p&&(l=p.nextSibling),f.__d=void 0,f.__u&=-196609);n.__d=l,n.__e=g}function qe(e,t,n){var r,i,o,s,a,l=t.length,c=n.length,u=c,h=0;for(e.__k=[],r=0;r<l;r++)null!=(i=t[r])&&"boolean"!=typeof i&&"function"!=typeof i?(s=r+h,(i=e.__k[r]="string"==typeof i||"number"==typeof i||"bigint"==typeof i||i.constructor==String?Pe(null,i,null,null,null):De(i)?Pe(Ie,{children:i},null,null,null):void 0===i.constructor&&i.__b>0?Pe(i.type,i.props,i.key,i.ref?i.ref:null,i.__v):i).__=e,i.__b=e.__b+1,o=null,-1!==(a=i.__i=We(i,n,s,u))&&(u--,(o=n[a])&&(o.__u|=131072)),null==o||null===o.__v?(-1==a&&h--,"function"!=typeof i.type&&(i.__u|=65536)):a!==s&&(a==s-1?h--:a==s+1?h++:(a>s?h--:h++,i.__u|=65536))):i=e.__k[r]=null;if(u)for(r=0;r<c;r++)null!=(o=n[r])&&0==(131072&o.__u)&&(o.__e==e.__d&&(e.__d=$e(o)),Je(o,o))}function ze(e,t,n){var r,i;if("function"==typeof e.type){for(r=e.__k,i=0;r&&i<r.length;i++)r[i]&&(r[i].__=e,t=ze(r[i],t,n));return t}e.__e!=t&&(t&&e.type&&!n.contains(t)&&(t=$e(e)),n.insertBefore(e.__e,t||null),t=e.__e);do{t=t&&t.nextSibling}while(null!=t&&8===t.nodeType);return t}function He(e,t){return t=t||[],null==e||"boolean"==typeof e||(De(e)?e.some((function(e){He(e,t)})):t.push(e)),t}function We(e,t,n,r){var i=e.key,o=e.type,s=n-1,a=n+1,l=t[n];if(null===l||l&&i==l.key&&o===l.type&&0==(131072&l.__u))return n;if(r>(null!=l&&0==(131072&l.__u)?1:0))for(;s>=0||a<t.length;){if(s>=0){if((l=t[s])&&0==(131072&l.__u)&&i==l.key&&o===l.type)return s;s--}if(a<t.length){if((l=t[a])&&0==(131072&l.__u)&&i==l.key&&o===l.type)return a;a++}}return-1}function Qe(e,t,n){"-"===t[0]?e.setProperty(t,null==n?"":n):e[t]=null==n?"":"number"!=typeof n||Ae.test(t)?n:n+"px"}function Ue(e,t,n,r,i){var o;e:if("style"===t)if("string"==typeof n)e.style.cssText=n;else{if("string"==typeof r&&(e.style.cssText=r=""),r)for(t in r)n&&t in n||Qe(e.style,t,"");if(n)for(t in n)r&&n[t]===r[t]||Qe(e.style,t,n[t])}else if("o"===t[0]&&"n"===t[1])o=t!==(t=t.replace(/(PointerCapture)$|Capture$/i,"$1")),t=t.toLowerCase()in e||"onFocusOut"===t||"onFocusIn"===t?t.toLowerCase().slice(2):t.slice(2),e.l||(e.l={}),e.l[t+o]=n,n?r?n.u=r.u:(n.u=be,e.addEventListener(t,o?xe:we,o)):e.removeEventListener(t,o?xe:we,o);else{if("http://www.w3.org/2000/svg"==i)t=t.replace(/xlink(H|:h)/,"h").replace(/sName$/,"s");else if("width"!=t&&"height"!=t&&"href"!=t&&"list"!=t&&"form"!=t&&"tabIndex"!=t&&"download"!=t&&"rowSpan"!=t&&"colSpan"!=t&&"role"!=t&&"popover"!=t&&t in e)try{e[t]=null==n?"":n;break e}catch(e){}"function"==typeof n||(null==n||!1===n&&"-"!==t[4]?e.removeAttribute(t):e.setAttribute(t,"popover"==t&&1==n?"":n))}}function Ye(e){return function(t){if(this.l){var n=this.l[t.type+e];if(null==t.t)t.t=be++;else if(t.t<n.u)return;return n(fe.event?fe.event(t):t)}}}function Xe(e,t,n,r,i,o,s,a,l,c){var u,h,d,f,p,g,m,v,y,b,w,x,k,_,O,S,E=t.type;if(void 0!==t.constructor)return null;128&n.__u&&(l=!!(32&n.__u),o=[a=t.__e=n.__e]),(u=fe.__b)&&u(t);e:if("function"==typeof E)try{if(v=t.props,y="prototype"in E&&E.prototype.render,b=(u=E.contextType)&&r[u.__c],w=u?b?b.props.value:u.__:r,n.__c?m=(h=t.__c=n.__c).__=h.__E:(y?t.__c=h=new E(v,w):(t.__c=h=new Le(v,w),h.constructor=E,h.render=et),b&&b.sub(h),h.props=v,h.state||(h.state={}),h.context=w,h.__n=r,d=h.__d=!0,h.__h=[],h._sb=[]),y&&null==h.__s&&(h.__s=h.state),y&&null!=E.getDerivedStateFromProps&&(h.__s==h.state&&(h.__s=Me({},h.__s)),Me(h.__s,E.getDerivedStateFromProps(v,h.__s))),f=h.props,p=h.state,h.__v=t,d)y&&null==E.getDerivedStateFromProps&&null!=h.componentWillMount&&h.componentWillMount(),y&&null!=h.componentDidMount&&h.__h.push(h.componentDidMount);else{if(y&&null==E.getDerivedStateFromProps&&v!==f&&null!=h.componentWillReceiveProps&&h.componentWillReceiveProps(v,w),!h.__e&&(null!=h.shouldComponentUpdate&&!1===h.shouldComponentUpdate(v,h.__s,w)||t.__v===n.__v)){for(t.__v!==n.__v&&(h.props=v,h.state=h.__s,h.__d=!1),t.__e=n.__e,t.__k=n.__k,t.__k.some((function(e){e&&(e.__=t)})),x=0;x<h._sb.length;x++)h.__h.push(h._sb[x]);h._sb=[],h.__h.length&&s.push(h);break e}null!=h.componentWillUpdate&&h.componentWillUpdate(v,h.__s,w),y&&null!=h.componentDidUpdate&&h.__h.push((function(){h.componentDidUpdate(f,p,g)}))}if(h.context=w,h.props=v,h.__P=e,h.__e=!1,k=fe.__r,_=0,y){for(h.state=h.__s,h.__d=!1,k&&k(t),u=h.render(h.props,h.state,h.context),O=0;O<h._sb.length;O++)h.__h.push(h._sb[O]);h._sb=[]}else do{h.__d=!1,k&&k(t),u=h.render(h.props,h.state,h.context),h.state=h.__s}while(h.__d&&++_<25);h.state=h.__s,null!=h.getChildContext&&(r=Me(Me({},r),h.getChildContext())),y&&!d&&null!=h.getSnapshotBeforeUpdate&&(g=h.getSnapshotBeforeUpdate(f,p)),Ve(e,De(S=null!=u&&u.type===Ie&&null==u.key?u.props.children:u)?S:[S],t,n,r,i,o,s,a,l,c),h.base=t.__e,t.__u&=-161,h.__h.length&&s.push(h),m&&(h.__E=h.__=null)}catch(e){if(t.__v=null,l||null!=o){for(t.__u|=l?160:128;a&&8===a.nodeType&&a.nextSibling;)a=a.nextSibling;o[o.indexOf(a)]=null,t.__e=a}else t.__e=n.__e,t.__k=n.__k;fe.__e(e,t,n)}else null==o&&t.__v===n.__v?(t.__k=n.__k,t.__e=n.__e):t.__e=Ge(n.__e,t,n,r,i,o,s,l,c);(u=fe.diffed)&&u(t)}function Ze(e,t,n){t.__d=void 0;for(var r=0;r<n.length;r++)Ke(n[r],n[++r],n[++r]);fe.__c&&fe.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){fe.__e(e,t.__v)}}))}function Ge(e,t,n,r,i,o,s,a,l){var c,u,h,d,f,p,g,m=n.props,v=t.props,y=t.type;if("svg"===y?i="http://www.w3.org/2000/svg":"math"===y?i="http://www.w3.org/1998/Math/MathML":i||(i="http://www.w3.org/1999/xhtml"),null!=o)for(c=0;c<o.length;c++)if((f=o[c])&&"setAttribute"in f==!!y&&(y?f.localName===y:3===f.nodeType)){e=f,o[c]=null;break}if(null==e){if(null===y)return document.createTextNode(v);e=document.createElementNS(i,y,v.is&&v),a&&(fe.__m&&fe.__m(t,o),a=!1),o=null}if(null===y)m===v||a&&e.data===v||(e.data=v);else{if(o=o&&de.call(e.childNodes),m=n.props||Ce,!a&&null!=o)for(m={},c=0;c<e.attributes.length;c++)m[(f=e.attributes[c]).name]=f.value;for(c in m)if(f=m[c],"children"==c);else if("dangerouslySetInnerHTML"==c)h=f;else if(!(c in v)){if("value"==c&&"defaultValue"in v||"checked"==c&&"defaultChecked"in v)continue;Ue(e,c,null,f,i)}for(c in v)f=v[c],"children"==c?d=f:"dangerouslySetInnerHTML"==c?u=f:"value"==c?p=f:"checked"==c?g=f:a&&"function"!=typeof f||m[c]===f||Ue(e,c,f,m[c],i);if(u)a||h&&(u.__html===h.__html||u.__html===e.innerHTML)||(e.innerHTML=u.__html),t.__k=[];else if(h&&(e.innerHTML=""),Ve(e,De(d)?d:[d],t,n,r,"foreignObject"===y?"http://www.w3.org/1999/xhtml":i,o,s,o?o[0]:n.__k&&$e(n,0),a,l),null!=o)for(c=o.length;c--;)Fe(o[c]);a||(c="value","progress"===y&&null==p?e.removeAttribute("value"):void 0!==p&&(p!==e[c]||"progress"===y&&!p||"option"===y&&p!==m[c])&&Ue(e,c,p,m[c],i),c="checked",void 0!==g&&g!==e[c]&&Ue(e,c,g,m[c],i))}return e}function Ke(e,t,n){try{if("function"==typeof e){var r="function"==typeof e.__u;r&&e.__u(),r&&null==t||(e.__u=e(t))}else e.current=t}catch(e){fe.__e(e,n)}}function Je(e,t,n){var r,i;if(fe.unmount&&fe.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||Ke(r,null,t)),null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){fe.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(i=0;i<r.length;i++)r[i]&&Je(r[i],t,n||"function"!=typeof e.type);n||Fe(e.__e),e.__c=e.__=e.__e=e.__d=void 0}function et(e,t,n){return this.constructor(e,n)}function tt(e,t,n){var r,i,o,s;fe.__&&fe.__(e,t),i=(r="function"==typeof n)?null:n&&n.__k||t.__k,o=[],s=[],Xe(t,e=(!r&&n||t).__k=Re(Ie,null,[e]),i||Ce,Ce,t.namespaceURI,!r&&n?[n]:i?null:t.firstChild?de.call(t.childNodes):null,o,!r&&n?n:i?i.__e:t.firstChild,r,s),Ze(o,e,s)}function nt(e,t){var n={__c:t="__cC"+ke++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var n,r;return this.getChildContext||(n=new Set,(r={})[t]=this,this.getChildContext=function(){return r},this.componentWillUnmount=function(){n=null},this.shouldComponentUpdate=function(e){this.props.value!==e.value&&n.forEach((function(e){e.__e=!0,je(e)}))},this.sub=function(e){n.add(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){n&&n.delete(e),t&&t.call(e)}}),e.children}};return n.Provider.__=n.Consumer.contextType=n}de=Te.slice,fe={__e:function(e,t,n,r){for(var i,o,s;t=t.__;)if((i=t.__c)&&!i.__)try{if((o=i.constructor)&&null!=o.getDerivedStateFromError&&(i.setState(o.getDerivedStateFromError(e)),s=i.__d),null!=i.componentDidCatch&&(i.componentDidCatch(e,r||{}),s=i.__d),s)return i.__E=i}catch(t){e=t}throw e}},pe=0,Le.prototype.setState=function(e,t){var n;n=null!=this.__s&&this.__s!==this.state?this.__s:this.__s=Me({},this.state),"function"==typeof e&&(e=e(Me({},n),this.props)),e&&Me(n,e),null!=e&&this.__v&&(t&&this._sb.push(t),je(this))},Le.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),je(this))},Le.prototype.render=Ie,ge=[],ve="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,ye=function(e,t){return e.__v.__b-t.__v.__b},Be.__r=0,be=0,we=Ye(!1),xe=Ye(!0),ke=0;var rt=0;Array.isArray;function it(e,t,n,r,i,o){t||(t={});var s,a,l=t;"ref"in t&&(s=t.ref,delete t.ref);var c={type:e,props:l,key:n,ref:s,__k:null,__:null,__b:0,__e:null,__d:void 0,__c:null,constructor:void 0,__v:--rt,__i:-1,__u:0,__source:i,__self:o};if("function"==typeof e&&(s=e.defaultProps))for(a in s)void 0===l[a]&&(l[a]=s[a]);return fe.vnode&&fe.vnode(c),c}var ot,st,at,lt,ct=0,ut=[],ht=fe,dt=ht.__b,ft=ht.__r,pt=ht.diffed,gt=ht.__c,mt=ht.unmount,vt=ht.__;function yt(e,t){ht.__h&&ht.__h(st,e,ct||t),ct=0;var n=st.__H||(st.__H={__:[],__h:[]});return e>=n.__.length&&n.__.push({}),n.__[e]}function bt(e){return ct=1,wt(Rt,e)}function wt(e,t,n){var r=yt(ot++,2);if(r.t=e,!r.__c&&(r.__=[n?n(t):Rt(void 0,t),function(e){var t=r.__N?r.__N[0]:r.__[0],n=r.t(t,e);t!==n&&(r.__N=[n,r.__[1]],r.__c.setState({}))}],r.__c=st,!st.u)){var i=function(e,t,n){if(!r.__c.__H)return!0;var i=r.__c.__H.__.filter((function(e){return!!e.__c}));if(i.every((function(e){return!e.__N})))return!o||o.call(this,e,t,n);var s=!1;return i.forEach((function(e){if(e.__N){var t=e.__[0];e.__=e.__N,e.__N=void 0,t!==e.__[0]&&(s=!0)}})),!(!s&&r.__c.props===e)&&(!o||o.call(this,e,t,n))};st.u=!0;var o=st.shouldComponentUpdate,s=st.componentWillUpdate;st.componentWillUpdate=function(e,t,n){if(this.__e){var r=o;o=void 0,i(e,t,n),o=r}s&&s.call(this,e,t,n)},st.shouldComponentUpdate=i}return r.__N||r.__}function xt(e,t){var n=yt(ot++,3);!ht.__s&&Ft(n.__H,t)&&(n.__=e,n.i=t,st.__H.__h.push(n))}function kt(e,t){var n=yt(ot++,4);!ht.__s&&Ft(n.__H,t)&&(n.__=e,n.i=t,st.__h.push(n))}function _t(e){return ct=5,Ot((function(){return{current:e}}),[])}function Ot(e,t){var n=yt(ot++,7);return Ft(n.__H,t)&&(n.__=e(),n.__H=t,n.__h=e),n.__}function St(e,t){return ct=8,Ot((function(){return e}),t)}function Et(e){var t=st.context[e.__c],n=yt(ot++,9);return n.c=e,t?(null==n.__&&(n.__=!0,t.sub(st)),t.props.value):e.__}function Ct(){for(var e;e=ut.shift();)if(e.__P&&e.__H)try{e.__H.__h.forEach(Dt),e.__H.__h.forEach(Mt),e.__H.__h=[]}catch(t){e.__H.__h=[],ht.__e(t,e.__v)}}ht.__b=function(e){st=null,dt&&dt(e)},ht.__=function(e,t){e&&t.__k&&t.__k.__m&&(e.__m=t.__k.__m),vt&&vt(e,t)},ht.__r=function(e){ft&&ft(e),ot=0;var t=(st=e.__c).__H;t&&(at===st?(t.__h=[],st.__h=[],t.__.forEach((function(e){e.__N&&(e.__=e.__N),e.i=e.__N=void 0}))):(t.__h.forEach(Dt),t.__h.forEach(Mt),t.__h=[],ot=0)),at=st},ht.diffed=function(e){pt&&pt(e);var t=e.__c;t&&t.__H&&(t.__H.__h.length&&(1!==ut.push(t)&&lt===ht.requestAnimationFrame||((lt=ht.requestAnimationFrame)||At)(Ct)),t.__H.__.forEach((function(e){e.i&&(e.__H=e.i),e.i=void 0}))),at=st=null},ht.__c=function(e,t){t.some((function(e){try{e.__h.forEach(Dt),e.__h=e.__h.filter((function(e){return!e.__||Mt(e)}))}catch(n){t.some((function(e){e.__h&&(e.__h=[])})),t=[],ht.__e(n,e.__v)}})),gt&&gt(e,t)},ht.unmount=function(e){mt&&mt(e);var t,n=e.__c;n&&n.__H&&(n.__H.__.forEach((function(e){try{Dt(e)}catch(e){t=e}})),n.__H=void 0,t&&ht.__e(t,n.__v))};var Tt="function"==typeof requestAnimationFrame;function At(e){var t,n=function(){clearTimeout(r),Tt&&cancelAnimationFrame(t),setTimeout(e)},r=setTimeout(n,100);Tt&&(t=requestAnimationFrame(n))}function Dt(e){var t=st,n=e.__c;"function"==typeof n&&(e.__c=void 0,n()),st=t}function Mt(e){var t=st;e.__c=e.__(),st=t}function Ft(e,t){return!e||e.length!==t.length||t.some((function(t,n){return t!==e[n]}))}function Rt(e,t){return"function"==typeof t?t(e):t}var Pt=n(8567),It=n.n(Pt);class Lt extends Error{}class $t extends Lt{constructor(e){super(`Invalid DateTime: ${e.toMessage()}`)}}class Nt extends Lt{constructor(e){super(`Invalid Interval: ${e.toMessage()}`)}}class jt extends Lt{constructor(e){super(`Invalid Duration: ${e.toMessage()}`)}}class Bt extends Lt{}class Vt extends Lt{constructor(e){super(`Invalid unit ${e}`)}}class qt extends Lt{}class zt extends Lt{constructor(){super("Zone is an abstract class")}}const Ht="numeric",Wt="short",Qt="long",Ut={year:Ht,month:Ht,day:Ht},Yt={year:Ht,month:Wt,day:Ht},Xt={year:Ht,month:Wt,day:Ht,weekday:Wt},Zt={year:Ht,month:Qt,day:Ht},Gt={year:Ht,month:Qt,day:Ht,weekday:Qt},Kt={hour:Ht,minute:Ht},Jt={hour:Ht,minute:Ht,second:Ht},en={hour:Ht,minute:Ht,second:Ht,timeZoneName:Wt},tn={hour:Ht,minute:Ht,second:Ht,timeZoneName:Qt},nn={hour:Ht,minute:Ht,hourCycle:"h23"},rn={hour:Ht,minute:Ht,second:Ht,hourCycle:"h23"},on={hour:Ht,minute:Ht,second:Ht,hourCycle:"h23",timeZoneName:Wt},sn={hour:Ht,minute:Ht,second:Ht,hourCycle:"h23",timeZoneName:Qt},an={year:Ht,month:Ht,day:Ht,hour:Ht,minute:Ht},ln={year:Ht,month:Ht,day:Ht,hour:Ht,minute:Ht,second:Ht},cn={year:Ht,month:Wt,day:Ht,hour:Ht,minute:Ht},un={year:Ht,month:Wt,day:Ht,hour:Ht,minute:Ht,second:Ht},hn={year:Ht,month:Wt,day:Ht,weekday:Wt,hour:Ht,minute:Ht},dn={year:Ht,month:Qt,day:Ht,hour:Ht,minute:Ht,timeZoneName:Wt},fn={year:Ht,month:Qt,day:Ht,hour:Ht,minute:Ht,second:Ht,timeZoneName:Wt},pn={year:Ht,month:Qt,day:Ht,weekday:Qt,hour:Ht,minute:Ht,timeZoneName:Qt},gn={year:Ht,month:Qt,day:Ht,weekday:Qt,hour:Ht,minute:Ht,second:Ht,timeZoneName:Qt};class mn{get type(){throw new zt}get name(){throw new zt}get ianaName(){return this.name}get isUniversal(){throw new zt}offsetName(e,t){throw new zt}formatOffset(e,t){throw new zt}offset(e){throw new zt}equals(e){throw new zt}get isValid(){throw new zt}}let vn=null;class yn extends mn{static get instance(){return null===vn&&(vn=new yn),vn}get type(){return"system"}get name(){return(new Intl.DateTimeFormat).resolvedOptions().timeZone}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return ii(e,t,n)}formatOffset(e,t){return li(this.offset(e),t)}offset(e){return-new Date(e).getTimezoneOffset()}equals(e){return"system"===e.type}get isValid(){return!0}}let bn={};function wn(e){return bn[e]||(bn[e]=new Intl.DateTimeFormat("en-US",{hour12:!1,timeZone:e,year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit",second:"2-digit",era:"short"})),bn[e]}const xn={year:0,month:1,day:2,era:3,hour:4,minute:5,second:6};function kn(e,t){const n=e.format(t).replace(/\u200E/g,""),r=/(\d+)\/(\d+)\/(\d+) (AD|BC),? (\d+):(\d+):(\d+)/.exec(n),[,i,o,s,a,l,c,u]=r;return[s,i,o,a,l,c,u]}function _n(e,t){const n=e.formatToParts(t),r=[];for(let i=0;i<n.length;i++){const{type:e,value:t}=n[i],o=xn[e];"era"===e?r[o]=t:Fr(o)||(r[o]=parseInt(t,10))}return r}let On={};class Sn extends mn{static create(e){return On[e]||(On[e]=new Sn(e)),On[e]}static resetCache(){On={},bn={}}static isValidSpecifier(e){return this.isValidZone(e)}static isValidZone(e){if(!e)return!1;try{return new Intl.DateTimeFormat("en-US",{timeZone:e}).format(),!0}catch(t){return!1}}constructor(e){super(),this.zoneName=e,this.valid=Sn.isValidZone(e)}get type(){return"iana"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(e,{format:t,locale:n}){return ii(e,t,n,this.name)}formatOffset(e,t){return li(this.offset(e),t)}offset(e){const t=new Date(e);if(isNaN(t))return NaN;const n=wn(this.name);let[r,i,o,s,a,l,c]=n.formatToParts?_n(n,t):kn(n,t);"BC"===s&&(r=1-Math.abs(r));const u=24===a?0:a,h=ei({year:r,month:i,day:o,hour:u,minute:l,second:c,millisecond:0});let d=+t;const f=d%1e3;return d-=f>=0?f:1e3+f,(h-d)/6e4}equals(e){return"iana"===e.type&&e.name===this.name}get isValid(){return this.valid}}let En={};function Cn(e,t={}){const n=JSON.stringify([e,t]);let r=En[n];return r||(r=new Intl.ListFormat(e,t),En[n]=r),r}let Tn={};function An(e,t={}){const n=JSON.stringify([e,t]);let r=Tn[n];return r||(r=new Intl.DateTimeFormat(e,t),Tn[n]=r),r}let Dn={};function Mn(e,t={}){const n=JSON.stringify([e,t]);let r=Dn[n];return r||(r=new Intl.NumberFormat(e,t),Dn[n]=r),r}let Fn={};function Rn(e,t={}){const{base:n,...r}=t,i=JSON.stringify([e,r]);let o=Fn[i];return o||(o=new Intl.RelativeTimeFormat(e,t),Fn[i]=o),o}let Pn=null;function In(){return Pn||(Pn=(new Intl.DateTimeFormat).resolvedOptions().locale,Pn)}let Ln={};function $n(e){let t=Ln[e];if(!t){const n=new Intl.Locale(e);t="getWeekInfo"in n?n.getWeekInfo():n.weekInfo,Ln[e]=t}return t}function Nn(e){const t=e.indexOf("-x-");-1!==t&&(e=e.substring(0,t));const n=e.indexOf("-u-");if(-1===n)return[e];{let t,i;try{t=An(e).resolvedOptions(),i=e}catch(r){const o=e.substring(0,n);t=An(o).resolvedOptions(),i=o}const{numberingSystem:o,calendar:s}=t;return[i,o,s]}}function jn(e,t,n){return n||t?(e.includes("-u-")||(e+="-u"),n&&(e+=`-ca-${n}`),t&&(e+=`-nu-${t}`),e):e}function Bn(e){const t=[];for(let n=1;n<=12;n++){const r=Gs.utc(2009,n,1);t.push(e(r))}return t}function Vn(e){const t=[];for(let n=1;n<=7;n++){const r=Gs.utc(2016,11,13+n);t.push(e(r))}return t}function qn(e,t,n,r){const i=e.listingMode();return"error"===i?null:"en"===i?n(t):r(t)}function zn(e){return(!e.numberingSystem||"latn"===e.numberingSystem)&&("latn"===e.numberingSystem||!e.locale||e.locale.startsWith("en")||"latn"===new Intl.DateTimeFormat(e.intl).resolvedOptions().numberingSystem)}class Hn{constructor(e,t,n){this.padTo=n.padTo||0,this.floor=n.floor||!1;const{padTo:r,floor:i,...o}=n;if(!t||Object.keys(o).length>0){const t={useGrouping:!1,...n};n.padTo>0&&(t.minimumIntegerDigits=n.padTo),this.inf=Mn(e,t)}}format(e){if(this.inf){const t=this.floor?Math.floor(e):e;return this.inf.format(t)}{const t=this.floor?Math.floor(e):Zr(e,3);return Qr(t,this.padTo)}}}class Wn{constructor(e,t,n){let r;if(this.opts=n,this.originalZone=void 0,this.opts.timeZone)this.dt=e;else if("fixed"===e.zone.type){const t=e.offset/60*-1,n=t>=0?`Etc/GMT+${t}`:`Etc/GMT${t}`;0!==e.offset&&Sn.create(n).valid?(r=n,this.dt=e):(r="UTC",this.dt=0===e.offset?e:e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone)}else"system"===e.zone.type?this.dt=e:"iana"===e.zone.type?(this.dt=e,r=e.zone.name):(r="UTC",this.dt=e.setZone("UTC").plus({minutes:e.offset}),this.originalZone=e.zone);const i={...this.opts};i.timeZone=i.timeZone||r,this.dtf=An(t,i)}format(){return this.originalZone?this.formatToParts().map((({value:e})=>e)).join(""):this.dtf.format(this.dt.toJSDate())}formatToParts(){const e=this.dtf.formatToParts(this.dt.toJSDate());return this.originalZone?e.map((e=>{if("timeZoneName"===e.type){const t=this.originalZone.offsetName(this.dt.ts,{locale:this.dt.locale,format:this.opts.timeZoneName});return{...e,value:t}}return e})):e}resolvedOptions(){return this.dtf.resolvedOptions()}}class Qn{constructor(e,t,n){this.opts={style:"long",...n},!t&&$r()&&(this.rtf=Rn(e,n))}format(e,t){return this.rtf?this.rtf.format(e,t):Ci(t,e,this.opts.numeric,"long"!==this.opts.style)}formatToParts(e,t){return this.rtf?this.rtf.formatToParts(e,t):[]}}const Un={firstDay:1,minimalDays:4,weekend:[6,7]};class Yn{static fromOpts(e){return Yn.create(e.locale,e.numberingSystem,e.outputCalendar,e.weekSettings,e.defaultToEN)}static create(e,t,n,r,i=!1){const o=e||pr.defaultLocale,s=o||(i?"en-US":In()),a=t||pr.defaultNumberingSystem,l=n||pr.defaultOutputCalendar,c=zr(r)||pr.defaultWeekSettings;return new Yn(s,a,l,c,o)}static resetCache(){Pn=null,Tn={},Dn={},Fn={}}static fromObject({locale:e,numberingSystem:t,outputCalendar:n,weekSettings:r}={}){return Yn.create(e,t,n,r)}constructor(e,t,n,r,i){const[o,s,a]=Nn(e);this.locale=o,this.numberingSystem=t||s||null,this.outputCalendar=n||a||null,this.weekSettings=r,this.intl=jn(this.locale,this.numberingSystem,this.outputCalendar),this.weekdaysCache={format:{},standalone:{}},this.monthsCache={format:{},standalone:{}},this.meridiemCache=null,this.eraCache={},this.specifiedLocale=i,this.fastNumbersCached=null}get fastNumbers(){return null==this.fastNumbersCached&&(this.fastNumbersCached=zn(this)),this.fastNumbersCached}listingMode(){const e=this.isEnglish(),t=(null===this.numberingSystem||"latn"===this.numberingSystem)&&(null===this.outputCalendar||"gregory"===this.outputCalendar);return e&&t?"en":"intl"}clone(e){return e&&0!==Object.getOwnPropertyNames(e).length?Yn.create(e.locale||this.specifiedLocale,e.numberingSystem||this.numberingSystem,e.outputCalendar||this.outputCalendar,zr(e.weekSettings)||this.weekSettings,e.defaultToEN||!1):this}redefaultToEN(e={}){return this.clone({...e,defaultToEN:!0})}redefaultToSystem(e={}){return this.clone({...e,defaultToEN:!1})}months(e,t=!1){return qn(this,e,fi,(()=>{const n=t?{month:e,day:"numeric"}:{month:e},r=t?"format":"standalone";return this.monthsCache[r][e]||(this.monthsCache[r][e]=Bn((e=>this.extract(e,n,"month")))),this.monthsCache[r][e]}))}weekdays(e,t=!1){return qn(this,e,vi,(()=>{const n=t?{weekday:e,year:"numeric",month:"long",day:"numeric"}:{weekday:e},r=t?"format":"standalone";return this.weekdaysCache[r][e]||(this.weekdaysCache[r][e]=Vn((e=>this.extract(e,n,"weekday")))),this.weekdaysCache[r][e]}))}meridiems(){return qn(this,void 0,(()=>yi),(()=>{if(!this.meridiemCache){const e={hour:"numeric",hourCycle:"h12"};this.meridiemCache=[Gs.utc(2016,11,13,9),Gs.utc(2016,11,13,19)].map((t=>this.extract(t,e,"dayperiod")))}return this.meridiemCache}))}eras(e){return qn(this,e,ki,(()=>{const t={era:e};return this.eraCache[e]||(this.eraCache[e]=[Gs.utc(-40,1,1),Gs.utc(2017,1,1)].map((e=>this.extract(e,t,"era")))),this.eraCache[e]}))}extract(e,t,n){const r=this.dtFormatter(e,t),i=r.formatToParts(),o=i.find((e=>e.type.toLowerCase()===n));return o?o.value:null}numberFormatter(e={}){return new Hn(this.intl,e.forceSimple||this.fastNumbers,e)}dtFormatter(e,t={}){return new Wn(e,this.intl,t)}relFormatter(e={}){return new Qn(this.intl,this.isEnglish(),e)}listFormatter(e={}){return Cn(this.intl,e)}isEnglish(){return"en"===this.locale||"en-us"===this.locale.toLowerCase()||new Intl.DateTimeFormat(this.intl).resolvedOptions().locale.startsWith("en-us")}getWeekSettings(){return this.weekSettings?this.weekSettings:Nr()?$n(this.locale):Un}getStartOfWeek(){return this.getWeekSettings().firstDay}getMinDaysInFirstWeek(){return this.getWeekSettings().minimalDays}getWeekendDays(){return this.getWeekSettings().weekend}equals(e){return this.locale===e.locale&&this.numberingSystem===e.numberingSystem&&this.outputCalendar===e.outputCalendar}toString(){return`Locale(${this.locale}, ${this.numberingSystem}, ${this.outputCalendar})`}}let Xn=null;class Zn extends mn{static get utcInstance(){return null===Xn&&(Xn=new Zn(0)),Xn}static instance(e){return 0===e?Zn.utcInstance:new Zn(e)}static parseSpecifier(e){if(e){const t=e.match(/^utc(?:([+-]\d{1,2})(?::(\d{2}))?)?$/i);if(t)return new Zn(oi(t[1],t[2]))}return null}constructor(e){super(),this.fixed=e}get type(){return"fixed"}get name(){return 0===this.fixed?"UTC":`UTC${li(this.fixed,"narrow")}`}get ianaName(){return 0===this.fixed?"Etc/UTC":`Etc/GMT${li(-this.fixed,"narrow")}`}offsetName(){return this.name}formatOffset(e,t){return li(this.fixed,t)}get isUniversal(){return!0}offset(){return this.fixed}equals(e){return"fixed"===e.type&&e.fixed===this.fixed}get isValid(){return!0}}class Gn extends mn{constructor(e){super(),this.zoneName=e}get type(){return"invalid"}get name(){return this.zoneName}get isUniversal(){return!1}offsetName(){return null}formatOffset(){return""}offset(){return NaN}equals(){return!1}get isValid(){return!1}}function Kn(e,t){if(Fr(e)||null===e)return t;if(e instanceof mn)return e;if(Ir(e)){const n=e.toLowerCase();return"default"===n?t:"local"===n||"system"===n?yn.instance:"utc"===n||"gmt"===n?Zn.utcInstance:Zn.parseSpecifier(n)||Sn.create(e)}return Rr(e)?Zn.instance(e):"object"===typeof e&&"offset"in e&&"function"===typeof e.offset?e:new Gn(e)}const Jn={arab:"[٠-٩]",arabext:"[۰-۹]",bali:"[᭐-᭙]",beng:"[০-৯]",deva:"[०-९]",fullwide:"[０-９]",gujr:"[૦-૯]",hanidec:"[〇|一|二|三|四|五|六|七|八|九]",khmr:"[០-៩]",knda:"[೦-೯]",laoo:"[໐-໙]",limb:"[᥆-᥏]",mlym:"[൦-൯]",mong:"[᠐-᠙]",mymr:"[၀-၉]",orya:"[୦-୯]",tamldec:"[௦-௯]",telu:"[౦-౯]",thai:"[๐-๙]",tibt:"[༠-༩]",latn:"\\d"},er={arab:[1632,1641],arabext:[1776,1785],bali:[6992,7001],beng:[2534,2543],deva:[2406,2415],fullwide:[65296,65303],gujr:[2790,2799],khmr:[6112,6121],knda:[3302,3311],laoo:[3792,3801],limb:[6470,6479],mlym:[3430,3439],mong:[6160,6169],mymr:[4160,4169],orya:[2918,2927],tamldec:[3046,3055],telu:[3174,3183],thai:[3664,3673],tibt:[3872,3881]},tr=Jn.hanidec.replace(/[\[|\]]/g,"").split("");function nr(e){let t=parseInt(e,10);if(isNaN(t)){t="";for(let n=0;n<e.length;n++){const r=e.charCodeAt(n);if(-1!==e[n].search(Jn.hanidec))t+=tr.indexOf(e[n]);else for(const e in er){const[n,i]=er[e];r>=n&&r<=i&&(t+=r-n)}}return parseInt(t,10)}return t}let rr={};function ir(){rr={}}function or({numberingSystem:e},t=""){const n=e||"latn";return rr[n]||(rr[n]={}),rr[n][t]||(rr[n][t]=new RegExp(`${Jn[n]}${t}`)),rr[n][t]}let sr,ar=()=>Date.now(),lr="system",cr=null,ur=null,hr=null,dr=60,fr=null;class pr{static get now(){return ar}static set now(e){ar=e}static set defaultZone(e){lr=e}static get defaultZone(){return Kn(lr,yn.instance)}static get defaultLocale(){return cr}static set defaultLocale(e){cr=e}static get defaultNumberingSystem(){return ur}static set defaultNumberingSystem(e){ur=e}static get defaultOutputCalendar(){return hr}static set defaultOutputCalendar(e){hr=e}static get defaultWeekSettings(){return fr}static set defaultWeekSettings(e){fr=zr(e)}static get twoDigitCutoffYear(){return dr}static set twoDigitCutoffYear(e){dr=e%100}static get throwOnInvalid(){return sr}static set throwOnInvalid(e){sr=e}static resetCaches(){Yn.resetCache(),Sn.resetCache(),Gs.resetCache(),ir()}}class gr{constructor(e,t){this.reason=e,this.explanation=t}toMessage(){return this.explanation?`${this.reason}: ${this.explanation}`:this.reason}}const mr=[0,31,59,90,120,151,181,212,243,273,304,334],vr=[0,31,60,91,121,152,182,213,244,274,305,335];function yr(e,t){return new gr("unit out of range",`you specified ${t} (of type ${typeof t}) as a ${e}, which is invalid`)}function br(e,t,n){const r=new Date(Date.UTC(e,t-1,n));e<100&&e>=0&&r.setUTCFullYear(r.getUTCFullYear()-1900);const i=r.getUTCDay();return 0===i?7:i}function wr(e,t,n){return n+(Gr(e)?vr:mr)[t-1]}function xr(e,t){const n=Gr(e)?vr:mr,r=n.findIndex((e=>e<t)),i=t-n[r];return{month:r+1,day:i}}function kr(e,t){return(e-t+7)%7+1}function _r(e,t=4,n=1){const{year:r,month:i,day:o}=e,s=wr(r,i,o),a=kr(br(r,i,o),n);let l,c=Math.floor((s-a+14-t)/7);return c<1?(l=r-1,c=ni(l,t,n)):c>ni(r,t,n)?(l=r+1,c=1):l=r,{weekYear:l,weekNumber:c,weekday:a,...ci(e)}}function Or(e,t=4,n=1){const{weekYear:r,weekNumber:i,weekday:o}=e,s=kr(br(r,1,t),n),a=Kr(r);let l,c=7*i+o-s-7+t;c<1?(l=r-1,c+=Kr(l)):c>a?(l=r+1,c-=Kr(r)):l=r;const{month:u,day:h}=xr(l,c);return{year:l,month:u,day:h,...ci(e)}}function Sr(e){const{year:t,month:n,day:r}=e,i=wr(t,n,r);return{year:t,ordinal:i,...ci(e)}}function Er(e){const{year:t,ordinal:n}=e,{month:r,day:i}=xr(t,n);return{year:t,month:r,day:i,...ci(e)}}function Cr(e,t){const n=!Fr(e.localWeekday)||!Fr(e.localWeekNumber)||!Fr(e.localWeekYear);if(n){const n=!Fr(e.weekday)||!Fr(e.weekNumber)||!Fr(e.weekYear);if(n)throw new Bt("Cannot mix locale-based week fields with ISO-based week fields");return Fr(e.localWeekday)||(e.weekday=e.localWeekday),Fr(e.localWeekNumber)||(e.weekNumber=e.localWeekNumber),Fr(e.localWeekYear)||(e.weekYear=e.localWeekYear),delete e.localWeekday,delete e.localWeekNumber,delete e.localWeekYear,{minDaysInFirstWeek:t.getMinDaysInFirstWeek(),startOfWeek:t.getStartOfWeek()}}return{minDaysInFirstWeek:4,startOfWeek:1}}function Tr(e,t=4,n=1){const r=Pr(e.weekYear),i=Hr(e.weekNumber,1,ni(e.weekYear,t,n)),o=Hr(e.weekday,1,7);return r?i?!o&&yr("weekday",e.weekday):yr("week",e.weekNumber):yr("weekYear",e.weekYear)}function Ar(e){const t=Pr(e.year),n=Hr(e.ordinal,1,Kr(e.year));return t?!n&&yr("ordinal",e.ordinal):yr("year",e.year)}function Dr(e){const t=Pr(e.year),n=Hr(e.month,1,12),r=Hr(e.day,1,Jr(e.year,e.month));return t?n?!r&&yr("day",e.day):yr("month",e.month):yr("year",e.year)}function Mr(e){const{hour:t,minute:n,second:r,millisecond:i}=e,o=Hr(t,0,23)||24===t&&0===n&&0===r&&0===i,s=Hr(n,0,59),a=Hr(r,0,59),l=Hr(i,0,999);return o?s?a?!l&&yr("millisecond",i):yr("second",r):yr("minute",n):yr("hour",t)}function Fr(e){return"undefined"===typeof e}function Rr(e){return"number"===typeof e}function Pr(e){return"number"===typeof e&&e%1===0}function Ir(e){return"string"===typeof e}function Lr(e){return"[object Date]"===Object.prototype.toString.call(e)}function $r(){try{return"undefined"!==typeof Intl&&!!Intl.RelativeTimeFormat}catch(e){return!1}}function Nr(){try{return"undefined"!==typeof Intl&&!!Intl.Locale&&("weekInfo"in Intl.Locale.prototype||"getWeekInfo"in Intl.Locale.prototype)}catch(e){return!1}}function jr(e){return Array.isArray(e)?e:[e]}function Br(e,t,n){if(0!==e.length)return e.reduce(((e,r)=>{const i=[t(r),r];return e&&n(e[0],i[0])===e[0]?e:i}),null)[1]}function Vr(e,t){return t.reduce(((t,n)=>(t[n]=e[n],t)),{})}function qr(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function zr(e){if(null==e)return null;if("object"!==typeof e)throw new qt("Week settings must be an object");if(!Hr(e.firstDay,1,7)||!Hr(e.minimalDays,1,7)||!Array.isArray(e.weekend)||e.weekend.some((e=>!Hr(e,1,7))))throw new qt("Invalid week settings");return{firstDay:e.firstDay,minimalDays:e.minimalDays,weekend:Array.from(e.weekend)}}function Hr(e,t,n){return Pr(e)&&e>=t&&e<=n}function Wr(e,t){return e-t*Math.floor(e/t)}function Qr(e,t=2){const n=e<0;let r;return r=n?"-"+(""+-e).padStart(t,"0"):(""+e).padStart(t,"0"),r}function Ur(e){return Fr(e)||null===e||""===e?void 0:parseInt(e,10)}function Yr(e){return Fr(e)||null===e||""===e?void 0:parseFloat(e)}function Xr(e){if(!Fr(e)&&null!==e&&""!==e){const t=1e3*parseFloat("0."+e);return Math.floor(t)}}function Zr(e,t,n=!1){const r=10**t,i=n?Math.trunc:Math.round;return i(e*r)/r}function Gr(e){return e%4===0&&(e%100!==0||e%400===0)}function Kr(e){return Gr(e)?366:365}function Jr(e,t){const n=Wr(t-1,12)+1,r=e+(t-n)/12;return 2===n?Gr(r)?29:28:[31,null,31,30,31,30,31,31,30,31,30,31][n-1]}function ei(e){let t=Date.UTC(e.year,e.month-1,e.day,e.hour,e.minute,e.second,e.millisecond);return e.year<100&&e.year>=0&&(t=new Date(t),t.setUTCFullYear(e.year,e.month-1,e.day)),+t}function ti(e,t,n){const r=kr(br(e,1,t),n);return-r+t-1}function ni(e,t=4,n=1){const r=ti(e,t,n),i=ti(e+1,t,n);return(Kr(e)-r+i)/7}function ri(e){return e>99?e:e>pr.twoDigitCutoffYear?1900+e:2e3+e}function ii(e,t,n,r=null){const i=new Date(e),o={hourCycle:"h23",year:"numeric",month:"2-digit",day:"2-digit",hour:"2-digit",minute:"2-digit"};r&&(o.timeZone=r);const s={timeZoneName:t,...o},a=new Intl.DateTimeFormat(n,s).formatToParts(i).find((e=>"timezonename"===e.type.toLowerCase()));return a?a.value:null}function oi(e,t){let n=parseInt(e,10);Number.isNaN(n)&&(n=0);const r=parseInt(t,10)||0,i=n<0||Object.is(n,-0)?-r:r;return 60*n+i}function si(e){const t=Number(e);if("boolean"===typeof e||""===e||Number.isNaN(t))throw new qt(`Invalid unit value ${e}`);return t}function ai(e,t){const n={};for(const r in e)if(qr(e,r)){const i=e[r];if(void 0===i||null===i)continue;n[t(r)]=si(i)}return n}function li(e,t){const n=Math.trunc(Math.abs(e/60)),r=Math.trunc(Math.abs(e%60)),i=e>=0?"+":"-";switch(t){case"short":return`${i}${Qr(n,2)}:${Qr(r,2)}`;case"narrow":return`${i}${n}${r>0?`:${r}`:""}`;case"techie":return`${i}${Qr(n,2)}${Qr(r,2)}`;default:throw new RangeError(`Value format ${t} is out of range for property format`)}}function ci(e){return Vr(e,["hour","minute","second","millisecond"])}const ui=["January","February","March","April","May","June","July","August","September","October","November","December"],hi=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],di=["J","F","M","A","M","J","J","A","S","O","N","D"];function fi(e){switch(e){case"narrow":return[...di];case"short":return[...hi];case"long":return[...ui];case"numeric":return["1","2","3","4","5","6","7","8","9","10","11","12"];case"2-digit":return["01","02","03","04","05","06","07","08","09","10","11","12"];default:return null}}const pi=["Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"],gi=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"],mi=["M","T","W","T","F","S","S"];function vi(e){switch(e){case"narrow":return[...mi];case"short":return[...gi];case"long":return[...pi];case"numeric":return["1","2","3","4","5","6","7"];default:return null}}const yi=["AM","PM"],bi=["Before Christ","Anno Domini"],wi=["BC","AD"],xi=["B","A"];function ki(e){switch(e){case"narrow":return[...xi];case"short":return[...wi];case"long":return[...bi];default:return null}}function _i(e){return yi[e.hour<12?0:1]}function Oi(e,t){return vi(t)[e.weekday-1]}function Si(e,t){return fi(t)[e.month-1]}function Ei(e,t){return ki(t)[e.year<0?0:1]}function Ci(e,t,n="always",r=!1){const i={years:["year","yr."],quarters:["quarter","qtr."],months:["month","mo."],weeks:["week","wk."],days:["day","day","days"],hours:["hour","hr."],minutes:["minute","min."],seconds:["second","sec."]},o=-1===["hours","minutes","seconds"].indexOf(e);if("auto"===n&&o){const n="days"===e;switch(t){case 1:return n?"tomorrow":`next ${i[e][0]}`;case-1:return n?"yesterday":`last ${i[e][0]}`;case 0:return n?"today":`this ${i[e][0]}`;default:}}const s=Object.is(t,-0)||t<0,a=Math.abs(t),l=1===a,c=i[e],u=r?l?c[1]:c[2]||c[1]:l?i[e][0]:e;return s?`${a} ${u} ago`:`in ${a} ${u}`}function Ti(e,t){let n="";for(const r of e)r.literal?n+=r.val:n+=t(r.val);return n}const Ai={D:Ut,DD:Yt,DDD:Zt,DDDD:Gt,t:Kt,tt:Jt,ttt:en,tttt:tn,T:nn,TT:rn,TTT:on,TTTT:sn,f:an,ff:cn,fff:dn,ffff:pn,F:ln,FF:un,FFF:fn,FFFF:gn};class Di{static create(e,t={}){return new Di(e,t)}static parseFormat(e){let t=null,n="",r=!1;const i=[];for(let o=0;o<e.length;o++){const s=e.charAt(o);"'"===s?(n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),t=null,n="",r=!r):r||s===t?n+=s:(n.length>0&&i.push({literal:/^\s+$/.test(n),val:n}),n=s,t=s)}return n.length>0&&i.push({literal:r||/^\s+$/.test(n),val:n}),i}static macroTokenToFormatOpts(e){return Ai[e]}constructor(e,t){this.opts=t,this.loc=e,this.systemLoc=null}formatWithSystemDefault(e,t){null===this.systemLoc&&(this.systemLoc=this.loc.redefaultToSystem());const n=this.systemLoc.dtFormatter(e,{...this.opts,...t});return n.format()}dtFormatter(e,t={}){return this.loc.dtFormatter(e,{...this.opts,...t})}formatDateTime(e,t){return this.dtFormatter(e,t).format()}formatDateTimeParts(e,t){return this.dtFormatter(e,t).formatToParts()}formatInterval(e,t){const n=this.dtFormatter(e.start,t);return n.dtf.formatRange(e.start.toJSDate(),e.end.toJSDate())}resolvedOptions(e,t){return this.dtFormatter(e,t).resolvedOptions()}num(e,t=0){if(this.opts.forceSimple)return Qr(e,t);const n={...this.opts};return t>0&&(n.padTo=t),this.loc.numberFormatter(n).format(e)}formatDateTimeFromString(e,t){const n="en"===this.loc.listingMode(),r=this.loc.outputCalendar&&"gregory"!==this.loc.outputCalendar,i=(t,n)=>this.loc.extract(e,t,n),o=t=>e.isOffsetFixed&&0===e.offset&&t.allowZ?"Z":e.isValid?e.zone.formatOffset(e.ts,t.format):"",s=()=>n?_i(e):i({hour:"numeric",hourCycle:"h12"},"dayperiod"),a=(t,r)=>n?Si(e,t):i(r?{month:t}:{month:t,day:"numeric"},"month"),l=(t,r)=>n?Oi(e,t):i(r?{weekday:t}:{weekday:t,month:"long",day:"numeric"},"weekday"),c=t=>{const n=Di.macroTokenToFormatOpts(t);return n?this.formatWithSystemDefault(e,n):t},u=t=>n?Ei(e,t):i({era:t},"era"),h=t=>{switch(t){case"S":return this.num(e.millisecond);case"u":case"SSS":return this.num(e.millisecond,3);case"s":return this.num(e.second);case"ss":return this.num(e.second,2);case"uu":return this.num(Math.floor(e.millisecond/10),2);case"uuu":return this.num(Math.floor(e.millisecond/100));case"m":return this.num(e.minute);case"mm":return this.num(e.minute,2);case"h":return this.num(e.hour%12===0?12:e.hour%12);case"hh":return this.num(e.hour%12===0?12:e.hour%12,2);case"H":return this.num(e.hour);case"HH":return this.num(e.hour,2);case"Z":return o({format:"narrow",allowZ:this.opts.allowZ});case"ZZ":return o({format:"short",allowZ:this.opts.allowZ});case"ZZZ":return o({format:"techie",allowZ:this.opts.allowZ});case"ZZZZ":return e.zone.offsetName(e.ts,{format:"short",locale:this.loc.locale});case"ZZZZZ":return e.zone.offsetName(e.ts,{format:"long",locale:this.loc.locale});case"z":return e.zoneName;case"a":return s();case"d":return r?i({day:"numeric"},"day"):this.num(e.day);case"dd":return r?i({day:"2-digit"},"day"):this.num(e.day,2);case"c":return this.num(e.weekday);case"ccc":return l("short",!0);case"cccc":return l("long",!0);case"ccccc":return l("narrow",!0);case"E":return this.num(e.weekday);case"EEE":return l("short",!1);case"EEEE":return l("long",!1);case"EEEEE":return l("narrow",!1);case"L":return r?i({month:"numeric",day:"numeric"},"month"):this.num(e.month);case"LL":return r?i({month:"2-digit",day:"numeric"},"month"):this.num(e.month,2);case"LLL":return a("short",!0);case"LLLL":return a("long",!0);case"LLLLL":return a("narrow",!0);case"M":return r?i({month:"numeric"},"month"):this.num(e.month);case"MM":return r?i({month:"2-digit"},"month"):this.num(e.month,2);case"MMM":return a("short",!1);case"MMMM":return a("long",!1);case"MMMMM":return a("narrow",!1);case"y":return r?i({year:"numeric"},"year"):this.num(e.year);case"yy":return r?i({year:"2-digit"},"year"):this.num(e.year.toString().slice(-2),2);case"yyyy":return r?i({year:"numeric"},"year"):this.num(e.year,4);case"yyyyyy":return r?i({year:"numeric"},"year"):this.num(e.year,6);case"G":return u("short");case"GG":return u("long");case"GGGGG":return u("narrow");case"kk":return this.num(e.weekYear.toString().slice(-2),2);case"kkkk":return this.num(e.weekYear,4);case"W":return this.num(e.weekNumber);case"WW":return this.num(e.weekNumber,2);case"n":return this.num(e.localWeekNumber);case"nn":return this.num(e.localWeekNumber,2);case"ii":return this.num(e.localWeekYear.toString().slice(-2),2);case"iiii":return this.num(e.localWeekYear,4);case"o":return this.num(e.ordinal);case"ooo":return this.num(e.ordinal,3);case"q":return this.num(e.quarter);case"qq":return this.num(e.quarter,2);case"X":return this.num(Math.floor(e.ts/1e3));case"x":return this.num(e.ts);default:return c(t)}};return Ti(Di.parseFormat(t),h)}formatDurationFromString(e,t){const n=e=>{switch(e[0]){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":return"hour";case"d":return"day";case"w":return"week";case"M":return"month";case"y":return"year";default:return null}},r=e=>t=>{const r=n(t);return r?this.num(e.get(r),t.length):t},i=Di.parseFormat(t),o=i.reduce(((e,{literal:t,val:n})=>t?e:e.concat(n)),[]),s=e.shiftTo(...o.map(n).filter((e=>e)));return Ti(i,r(s))}}const Mi=/[A-Za-z_+-]{1,256}(?::?\/[A-Za-z0-9_+-]{1,256}(?:\/[A-Za-z0-9_+-]{1,256})?)?/;function Fi(...e){const t=e.reduce(((e,t)=>e+t.source),"");return RegExp(`^${t}$`)}function Ri(...e){return t=>e.reduce((([e,n,r],i)=>{const[o,s,a]=i(t,r);return[{...e,...o},s||n,a]}),[{},null,1]).slice(0,2)}function Pi(e,...t){if(null==e)return[null,null];for(const[n,r]of t){const t=n.exec(e);if(t)return r(t)}return[null,null]}function Ii(...e){return(t,n)=>{const r={};let i;for(i=0;i<e.length;i++)r[e[i]]=Ur(t[n+i]);return[r,null,n+i]}}const Li=/(?:(Z)|([+-]\d\d)(?::?(\d\d))?)/,$i=`(?:${Li.source}?(?:\\[(${Mi.source})\\])?)?`,Ni=/(\d\d)(?::?(\d\d)(?::?(\d\d)(?:[.,](\d{1,30}))?)?)?/,ji=RegExp(`${Ni.source}${$i}`),Bi=RegExp(`(?:T${ji.source})?`),Vi=/([+-]\d{6}|\d{4})(?:-?(\d\d)(?:-?(\d\d))?)?/,qi=/(\d{4})-?W(\d\d)(?:-?(\d))?/,zi=/(\d{4})-?(\d{3})/,Hi=Ii("weekYear","weekNumber","weekDay"),Wi=Ii("year","ordinal"),Qi=/(\d{4})-(\d\d)-(\d\d)/,Ui=RegExp(`${Ni.source} ?(?:${Li.source}|(${Mi.source}))?`),Yi=RegExp(`(?: ${Ui.source})?`);function Xi(e,t,n){const r=e[t];return Fr(r)?n:Ur(r)}function Zi(e,t){const n={year:Xi(e,t),month:Xi(e,t+1,1),day:Xi(e,t+2,1)};return[n,null,t+3]}function Gi(e,t){const n={hours:Xi(e,t,0),minutes:Xi(e,t+1,0),seconds:Xi(e,t+2,0),milliseconds:Xr(e[t+3])};return[n,null,t+4]}function Ki(e,t){const n=!e[t]&&!e[t+1],r=oi(e[t+1],e[t+2]),i=n?null:Zn.instance(r);return[{},i,t+3]}function Ji(e,t){const n=e[t]?Sn.create(e[t]):null;return[{},n,t+1]}const eo=RegExp(`^T?${Ni.source}$`),to=/^-?P(?:(?:(-?\d{1,20}(?:\.\d{1,20})?)Y)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20}(?:\.\d{1,20})?)W)?(?:(-?\d{1,20}(?:\.\d{1,20})?)D)?(?:T(?:(-?\d{1,20}(?:\.\d{1,20})?)H)?(?:(-?\d{1,20}(?:\.\d{1,20})?)M)?(?:(-?\d{1,20})(?:[.,](-?\d{1,20}))?S)?)?)$/;function no(e){const[t,n,r,i,o,s,a,l,c]=e,u="-"===t[0],h=l&&"-"===l[0],d=(e,t=!1)=>void 0!==e&&(t||e&&u)?-e:e;return[{years:d(Yr(n)),months:d(Yr(r)),weeks:d(Yr(i)),days:d(Yr(o)),hours:d(Yr(s)),minutes:d(Yr(a)),seconds:d(Yr(l),"-0"===l),milliseconds:d(Xr(c),h)}]}const ro={GMT:0,EDT:-240,EST:-300,CDT:-300,CST:-360,MDT:-360,MST:-420,PDT:-420,PST:-480};function io(e,t,n,r,i,o,s){const a={year:2===t.length?ri(Ur(t)):Ur(t),month:hi.indexOf(n)+1,day:Ur(r),hour:Ur(i),minute:Ur(o)};return s&&(a.second=Ur(s)),e&&(a.weekday=e.length>3?pi.indexOf(e)+1:gi.indexOf(e)+1),a}const oo=/^(?:(Mon|Tue|Wed|Thu|Fri|Sat|Sun),\s)?(\d{1,2})\s(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)\s(\d{2,4})\s(\d\d):(\d\d)(?::(\d\d))?\s(?:(UT|GMT|[ECMP][SD]T)|([Zz])|(?:([+-]\d\d)(\d\d)))$/;function so(e){const[,t,n,r,i,o,s,a,l,c,u,h]=e,d=io(t,i,r,n,o,s,a);let f;return f=l?ro[l]:c?0:oi(u,h),[d,new Zn(f)]}function ao(e){return e.replace(/\([^()]*\)|[\n\t]/g," ").replace(/(\s\s+)/g," ").trim()}const lo=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun), (\d\d) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) (\d{4}) (\d\d):(\d\d):(\d\d) GMT$/,co=/^(Monday|Tuesday|Wednesday|Thursday|Friday|Saturday|Sunday), (\d\d)-(Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec)-(\d\d) (\d\d):(\d\d):(\d\d) GMT$/,uo=/^(Mon|Tue|Wed|Thu|Fri|Sat|Sun) (Jan|Feb|Mar|Apr|May|Jun|Jul|Aug|Sep|Oct|Nov|Dec) ( \d|\d\d) (\d\d):(\d\d):(\d\d) (\d{4})$/;function ho(e){const[,t,n,r,i,o,s,a]=e,l=io(t,i,r,n,o,s,a);return[l,Zn.utcInstance]}function fo(e){const[,t,n,r,i,o,s,a]=e,l=io(t,a,n,r,i,o,s);return[l,Zn.utcInstance]}const po=Fi(Vi,Bi),go=Fi(qi,Bi),mo=Fi(zi,Bi),vo=Fi(ji),yo=Ri(Zi,Gi,Ki,Ji),bo=Ri(Hi,Gi,Ki,Ji),wo=Ri(Wi,Gi,Ki,Ji),xo=Ri(Gi,Ki,Ji);function ko(e){return Pi(e,[po,yo],[go,bo],[mo,wo],[vo,xo])}function _o(e){return Pi(ao(e),[oo,so])}function Oo(e){return Pi(e,[lo,ho],[co,ho],[uo,fo])}function So(e){return Pi(e,[to,no])}const Eo=Ri(Gi);function Co(e){return Pi(e,[eo,Eo])}const To=Fi(Qi,Yi),Ao=Fi(Ui),Do=Ri(Gi,Ki,Ji);function Mo(e){return Pi(e,[To,yo],[Ao,Do])}const Fo="Invalid Duration",Ro={weeks:{days:7,hours:168,minutes:10080,seconds:604800,milliseconds:6048e5},days:{hours:24,minutes:1440,seconds:86400,milliseconds:864e5},hours:{minutes:60,seconds:3600,milliseconds:36e5},minutes:{seconds:60,milliseconds:6e4},seconds:{milliseconds:1e3}},Po={years:{quarters:4,months:12,weeks:52,days:365,hours:8760,minutes:525600,seconds:31536e3,milliseconds:31536e6},quarters:{months:3,weeks:13,days:91,hours:2184,minutes:131040,seconds:7862400,milliseconds:78624e5},months:{weeks:4,days:30,hours:720,minutes:43200,seconds:2592e3,milliseconds:2592e6},...Ro},Io=365.2425,Lo=30.436875,$o={years:{quarters:4,months:12,weeks:Io/7,days:Io,hours:24*Io,minutes:24*Io*60,seconds:24*Io*60*60,milliseconds:24*Io*60*60*1e3},quarters:{months:3,weeks:Io/28,days:Io/4,hours:24*Io/4,minutes:24*Io*60/4,seconds:24*Io*60*60/4,milliseconds:24*Io*60*60*1e3/4},months:{weeks:Lo/7,days:Lo,hours:24*Lo,minutes:24*Lo*60,seconds:24*Lo*60*60,milliseconds:24*Lo*60*60*1e3},...Ro},No=["years","quarters","months","weeks","days","hours","minutes","seconds","milliseconds"],jo=No.slice(0).reverse();function Bo(e,t,n=!1){const r={values:n?t.values:{...e.values,...t.values||{}},loc:e.loc.clone(t.loc),conversionAccuracy:t.conversionAccuracy||e.conversionAccuracy,matrix:t.matrix||e.matrix};return new Ho(r)}function Vo(e,t){let n=t.milliseconds??0;for(const r of jo.slice(1))t[r]&&(n+=t[r]*e[r]["milliseconds"]);return n}function qo(e,t){const n=Vo(e,t)<0?-1:1;No.reduceRight(((r,i)=>{if(Fr(t[i]))return r;if(r){const o=t[r]*n,s=e[i][r],a=Math.floor(o/s);t[i]+=a*n,t[r]-=a*s*n}return i}),null),No.reduce(((n,r)=>{if(Fr(t[r]))return n;if(n){const i=t[n]%1;t[n]-=i,t[r]+=i*e[n][r]}return r}),null)}function zo(e){const t={};for(const[n,r]of Object.entries(e))0!==r&&(t[n]=r);return t}class Ho{constructor(e){const t="longterm"===e.conversionAccuracy||!1;let n=t?$o:Po;e.matrix&&(n=e.matrix),this.values=e.values,this.loc=e.loc||Yn.create(),this.conversionAccuracy=t?"longterm":"casual",this.invalid=e.invalid||null,this.matrix=n,this.isLuxonDuration=!0}static fromMillis(e,t){return Ho.fromObject({milliseconds:e},t)}static fromObject(e,t={}){if(null==e||"object"!==typeof e)throw new qt("Duration.fromObject: argument expected to be an object, got "+(null===e?"null":typeof e));return new Ho({values:ai(e,Ho.normalizeUnit),loc:Yn.fromObject(t),conversionAccuracy:t.conversionAccuracy,matrix:t.matrix})}static fromDurationLike(e){if(Rr(e))return Ho.fromMillis(e);if(Ho.isDuration(e))return e;if("object"===typeof e)return Ho.fromObject(e);throw new qt(`Unknown duration argument ${e} of type ${typeof e}`)}static fromISO(e,t){const[n]=So(e);return n?Ho.fromObject(n,t):Ho.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static fromISOTime(e,t){const[n]=Co(e);return n?Ho.fromObject(n,t):Ho.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static invalid(e,t=null){if(!e)throw new qt("need to specify a reason the Duration is invalid");const n=e instanceof gr?e:new gr(e,t);if(pr.throwOnInvalid)throw new jt(n);return new Ho({invalid:n})}static normalizeUnit(e){const t={year:"years",years:"years",quarter:"quarters",quarters:"quarters",month:"months",months:"months",week:"weeks",weeks:"weeks",day:"days",days:"days",hour:"hours",hours:"hours",minute:"minutes",minutes:"minutes",second:"seconds",seconds:"seconds",millisecond:"milliseconds",milliseconds:"milliseconds"}[e?e.toLowerCase():e];if(!t)throw new Vt(e);return t}static isDuration(e){return e&&e.isLuxonDuration||!1}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}toFormat(e,t={}){const n={...t,floor:!1!==t.round&&!1!==t.floor};return this.isValid?Di.create(this.loc,n).formatDurationFromString(this,e):Fo}toHuman(e={}){if(!this.isValid)return Fo;const t=No.map((t=>{const n=this.values[t];return Fr(n)?null:this.loc.numberFormatter({style:"unit",unitDisplay:"long",...e,unit:t.slice(0,-1)}).format(n)})).filter((e=>e));return this.loc.listFormatter({type:"conjunction",style:e.listStyle||"narrow",...e}).format(t)}toObject(){return this.isValid?{...this.values}:{}}toISO(){if(!this.isValid)return null;let e="P";return 0!==this.years&&(e+=this.years+"Y"),0===this.months&&0===this.quarters||(e+=this.months+3*this.quarters+"M"),0!==this.weeks&&(e+=this.weeks+"W"),0!==this.days&&(e+=this.days+"D"),0===this.hours&&0===this.minutes&&0===this.seconds&&0===this.milliseconds||(e+="T"),0!==this.hours&&(e+=this.hours+"H"),0!==this.minutes&&(e+=this.minutes+"M"),0===this.seconds&&0===this.milliseconds||(e+=Zr(this.seconds+this.milliseconds/1e3,3)+"S"),"P"===e&&(e+="T0S"),e}toISOTime(e={}){if(!this.isValid)return null;const t=this.toMillis();if(t<0||t>=864e5)return null;e={suppressMilliseconds:!1,suppressSeconds:!1,includePrefix:!1,format:"extended",...e,includeOffset:!1};const n=Gs.fromMillis(t,{zone:"UTC"});return n.toISOTime(e)}toJSON(){return this.toISO()}toString(){return this.toISO()}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Duration { values: ${JSON.stringify(this.values)} }`:`Duration { Invalid, reason: ${this.invalidReason} }`}toMillis(){return this.isValid?Vo(this.matrix,this.values):NaN}valueOf(){return this.toMillis()}plus(e){if(!this.isValid)return this;const t=Ho.fromDurationLike(e),n={};for(const r of No)(qr(t.values,r)||qr(this.values,r))&&(n[r]=t.get(r)+this.get(r));return Bo(this,{values:n},!0)}minus(e){if(!this.isValid)return this;const t=Ho.fromDurationLike(e);return this.plus(t.negate())}mapUnits(e){if(!this.isValid)return this;const t={};for(const n of Object.keys(this.values))t[n]=si(e(this.values[n],n));return Bo(this,{values:t},!0)}get(e){return this[Ho.normalizeUnit(e)]}set(e){if(!this.isValid)return this;const t={...this.values,...ai(e,Ho.normalizeUnit)};return Bo(this,{values:t})}reconfigure({locale:e,numberingSystem:t,conversionAccuracy:n,matrix:r}={}){const i=this.loc.clone({locale:e,numberingSystem:t}),o={loc:i,matrix:r,conversionAccuracy:n};return Bo(this,o)}as(e){return this.isValid?this.shiftTo(e).get(e):NaN}normalize(){if(!this.isValid)return this;const e=this.toObject();return qo(this.matrix,e),Bo(this,{values:e},!0)}rescale(){if(!this.isValid)return this;const e=zo(this.normalize().shiftToAll().toObject());return Bo(this,{values:e},!0)}shiftTo(...e){if(!this.isValid)return this;if(0===e.length)return this;e=e.map((e=>Ho.normalizeUnit(e)));const t={},n={},r=this.toObject();let i;for(const o of No)if(e.indexOf(o)>=0){i=o;let e=0;for(const t in n)e+=this.matrix[t][o]*n[t],n[t]=0;Rr(r[o])&&(e+=r[o]);const s=Math.trunc(e);t[o]=s,n[o]=(1e3*e-1e3*s)/1e3}else Rr(r[o])&&(n[o]=r[o]);for(const o in n)0!==n[o]&&(t[i]+=o===i?n[o]:n[o]/this.matrix[i][o]);return qo(this.matrix,t),Bo(this,{values:t},!0)}shiftToAll(){return this.isValid?this.shiftTo("years","months","weeks","days","hours","minutes","seconds","milliseconds"):this}negate(){if(!this.isValid)return this;const e={};for(const t of Object.keys(this.values))e[t]=0===this.values[t]?0:-this.values[t];return Bo(this,{values:e},!0)}get years(){return this.isValid?this.values.years||0:NaN}get quarters(){return this.isValid?this.values.quarters||0:NaN}get months(){return this.isValid?this.values.months||0:NaN}get weeks(){return this.isValid?this.values.weeks||0:NaN}get days(){return this.isValid?this.values.days||0:NaN}get hours(){return this.isValid?this.values.hours||0:NaN}get minutes(){return this.isValid?this.values.minutes||0:NaN}get seconds(){return this.isValid?this.values.seconds||0:NaN}get milliseconds(){return this.isValid?this.values.milliseconds||0:NaN}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}equals(e){if(!this.isValid||!e.isValid)return!1;if(!this.loc.equals(e.loc))return!1;function t(e,t){return void 0===e||0===e?void 0===t||0===t:e===t}for(const n of No)if(!t(this.values[n],e.values[n]))return!1;return!0}}const Wo="Invalid Interval";function Qo(e,t){return e&&e.isValid?t&&t.isValid?t<e?Uo.invalid("end before start",`The end of an interval must be after its start, but you had start=${e.toISO()} and end=${t.toISO()}`):null:Uo.invalid("missing or invalid end"):Uo.invalid("missing or invalid start")}class Uo{constructor(e){this.s=e.start,this.e=e.end,this.invalid=e.invalid||null,this.isLuxonInterval=!0}static invalid(e,t=null){if(!e)throw new qt("need to specify a reason the Interval is invalid");const n=e instanceof gr?e:new gr(e,t);if(pr.throwOnInvalid)throw new Nt(n);return new Uo({invalid:n})}static fromDateTimes(e,t){const n=Ks(e),r=Ks(t),i=Qo(n,r);return null==i?new Uo({start:n,end:r}):i}static after(e,t){const n=Ho.fromDurationLike(t),r=Ks(e);return Uo.fromDateTimes(r,r.plus(n))}static before(e,t){const n=Ho.fromDurationLike(t),r=Ks(e);return Uo.fromDateTimes(r.minus(n),r)}static fromISO(e,t){const[n,r]=(e||"").split("/",2);if(n&&r){let e,i,o,s;try{e=Gs.fromISO(n,t),i=e.isValid}catch(r){i=!1}try{o=Gs.fromISO(r,t),s=o.isValid}catch(r){s=!1}if(i&&s)return Uo.fromDateTimes(e,o);if(i){const n=Ho.fromISO(r,t);if(n.isValid)return Uo.after(e,n)}else if(s){const e=Ho.fromISO(n,t);if(e.isValid)return Uo.before(o,e)}}return Uo.invalid("unparsable",`the input "${e}" can't be parsed as ISO 8601`)}static isInterval(e){return e&&e.isLuxonInterval||!1}get start(){return this.isValid?this.s:null}get end(){return this.isValid?this.e:null}get isValid(){return null===this.invalidReason}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}length(e="milliseconds"){return this.isValid?this.toDuration(e).get(e):NaN}count(e="milliseconds",t){if(!this.isValid)return NaN;const n=this.start.startOf(e,t);let r;return r=t?.useLocaleWeeks?this.end.reconfigure({locale:n.locale}):this.end,r=r.startOf(e,t),Math.floor(r.diff(n,e).get(e))+(r.valueOf()!==this.end.valueOf())}hasSame(e){return!!this.isValid&&(this.isEmpty()||this.e.minus(1).hasSame(this.s,e))}isEmpty(){return this.s.valueOf()===this.e.valueOf()}isAfter(e){return!!this.isValid&&this.s>e}isBefore(e){return!!this.isValid&&this.e<=e}contains(e){return!!this.isValid&&(this.s<=e&&this.e>e)}set({start:e,end:t}={}){return this.isValid?Uo.fromDateTimes(e||this.s,t||this.e):this}splitAt(...e){if(!this.isValid)return[];const t=e.map(Ks).filter((e=>this.contains(e))).sort(((e,t)=>e.toMillis()-t.toMillis())),n=[];let{s:r}=this,i=0;while(r<this.e){const e=t[i]||this.e,o=+e>+this.e?this.e:e;n.push(Uo.fromDateTimes(r,o)),r=o,i+=1}return n}splitBy(e){const t=Ho.fromDurationLike(e);if(!this.isValid||!t.isValid||0===t.as("milliseconds"))return[];let n,{s:r}=this,i=1;const o=[];while(r<this.e){const e=this.start.plus(t.mapUnits((e=>e*i)));n=+e>+this.e?this.e:e,o.push(Uo.fromDateTimes(r,n)),r=n,i+=1}return o}divideEqually(e){return this.isValid?this.splitBy(this.length()/e).slice(0,e):[]}overlaps(e){return this.e>e.s&&this.s<e.e}abutsStart(e){return!!this.isValid&&+this.e===+e.s}abutsEnd(e){return!!this.isValid&&+e.e===+this.s}engulfs(e){return!!this.isValid&&(this.s<=e.s&&this.e>=e.e)}equals(e){return!(!this.isValid||!e.isValid)&&(this.s.equals(e.s)&&this.e.equals(e.e))}intersection(e){if(!this.isValid)return this;const t=this.s>e.s?this.s:e.s,n=this.e<e.e?this.e:e.e;return t>=n?null:Uo.fromDateTimes(t,n)}union(e){if(!this.isValid)return this;const t=this.s<e.s?this.s:e.s,n=this.e>e.e?this.e:e.e;return Uo.fromDateTimes(t,n)}static merge(e){const[t,n]=e.sort(((e,t)=>e.s-t.s)).reduce((([e,t],n)=>t?t.overlaps(n)||t.abutsStart(n)?[e,t.union(n)]:[e.concat([t]),n]:[e,n]),[[],null]);return n&&t.push(n),t}static xor(e){let t=null,n=0;const r=[],i=e.map((e=>[{time:e.s,type:"s"},{time:e.e,type:"e"}])),o=Array.prototype.concat(...i),s=o.sort(((e,t)=>e.time-t.time));for(const a of s)n+="s"===a.type?1:-1,1===n?t=a.time:(t&&+t!==+a.time&&r.push(Uo.fromDateTimes(t,a.time)),t=null);return Uo.merge(r)}difference(...e){return Uo.xor([this].concat(e)).map((e=>this.intersection(e))).filter((e=>e&&!e.isEmpty()))}toString(){return this.isValid?`[${this.s.toISO()} – ${this.e.toISO()})`:Wo}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`Interval { start: ${this.s.toISO()}, end: ${this.e.toISO()} }`:`Interval { Invalid, reason: ${this.invalidReason} }`}toLocaleString(e=Ut,t={}){return this.isValid?Di.create(this.s.loc.clone(t),e).formatInterval(this):Wo}toISO(e){return this.isValid?`${this.s.toISO(e)}/${this.e.toISO(e)}`:Wo}toISODate(){return this.isValid?`${this.s.toISODate()}/${this.e.toISODate()}`:Wo}toISOTime(e){return this.isValid?`${this.s.toISOTime(e)}/${this.e.toISOTime(e)}`:Wo}toFormat(e,{separator:t=" – "}={}){return this.isValid?`${this.s.toFormat(e)}${t}${this.e.toFormat(e)}`:Wo}toDuration(e,t){return this.isValid?this.e.diff(this.s,e,t):Ho.invalid(this.invalidReason)}mapEndpoints(e){return Uo.fromDateTimes(e(this.s),e(this.e))}}class Yo{static hasDST(e=pr.defaultZone){const t=Gs.now().setZone(e).set({month:12});return!e.isUniversal&&t.offset!==t.set({month:6}).offset}static isValidIANAZone(e){return Sn.isValidZone(e)}static normalizeZone(e){return Kn(e,pr.defaultZone)}static getStartOfWeek({locale:e=null,locObj:t=null}={}){return(t||Yn.create(e)).getStartOfWeek()}static getMinimumDaysInFirstWeek({locale:e=null,locObj:t=null}={}){return(t||Yn.create(e)).getMinDaysInFirstWeek()}static getWeekendWeekdays({locale:e=null,locObj:t=null}={}){return(t||Yn.create(e)).getWeekendDays().slice()}static months(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||Yn.create(t,n,i)).months(e)}static monthsFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null,outputCalendar:i="gregory"}={}){return(r||Yn.create(t,n,i)).months(e,!0)}static weekdays(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Yn.create(t,n,null)).weekdays(e)}static weekdaysFormat(e="long",{locale:t=null,numberingSystem:n=null,locObj:r=null}={}){return(r||Yn.create(t,n,null)).weekdays(e,!0)}static meridiems({locale:e=null}={}){return Yn.create(e).meridiems()}static eras(e="short",{locale:t=null}={}){return Yn.create(t,null,"gregory").eras(e)}static features(){return{relative:$r(),localeWeek:Nr()}}}function Xo(e,t){const n=e=>e.toUTC(0,{keepLocalTime:!0}).startOf("day").valueOf(),r=n(t)-n(e);return Math.floor(Ho.fromMillis(r).as("days"))}function Zo(e,t,n){const r=[["years",(e,t)=>t.year-e.year],["quarters",(e,t)=>t.quarter-e.quarter+4*(t.year-e.year)],["months",(e,t)=>t.month-e.month+12*(t.year-e.year)],["weeks",(e,t)=>{const n=Xo(e,t);return(n-n%7)/7}],["days",Xo]],i={},o=e;let s,a;for(const[l,c]of r)n.indexOf(l)>=0&&(s=l,i[l]=c(e,t),a=o.plus(i),a>t?(i[l]--,e=o.plus(i),e>t&&(a=e,i[l]--,e=o.plus(i))):e=a);return[e,i,a,s]}function Go(e,t,n,r){let[i,o,s,a]=Zo(e,t,n);const l=t-i,c=n.filter((e=>["hours","minutes","seconds","milliseconds"].indexOf(e)>=0));0===c.length&&(s<t&&(s=i.plus({[a]:1})),s!==i&&(o[a]=(o[a]||0)+l/(s-i)));const u=Ho.fromObject(o,r);return c.length>0?Ho.fromMillis(l,r).shiftTo(...c).plus(u):u}const Ko="missing Intl.DateTimeFormat.formatToParts support";function Jo(e,t=e=>e){return{regex:e,deser:([e])=>t(nr(e))}}const es=String.fromCharCode(160),ts=`[ ${es}]`,ns=new RegExp(ts,"g");function rs(e){return e.replace(/\./g,"\\.?").replace(ns,ts)}function is(e){return e.replace(/\./g,"").replace(ns," ").toLowerCase()}function os(e,t){return null===e?null:{regex:RegExp(e.map(rs).join("|")),deser:([n])=>e.findIndex((e=>is(n)===is(e)))+t}}function ss(e,t){return{regex:e,deser:([,e,t])=>oi(e,t),groups:t}}function as(e){return{regex:e,deser:([e])=>e}}function ls(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function cs(e,t){const n=or(t),r=or(t,"{2}"),i=or(t,"{3}"),o=or(t,"{4}"),s=or(t,"{6}"),a=or(t,"{1,2}"),l=or(t,"{1,3}"),c=or(t,"{1,6}"),u=or(t,"{1,9}"),h=or(t,"{2,4}"),d=or(t,"{4,6}"),f=e=>({regex:RegExp(ls(e.val)),deser:([e])=>e,literal:!0}),p=p=>{if(e.literal)return f(p);switch(p.val){case"G":return os(t.eras("short"),0);case"GG":return os(t.eras("long"),0);case"y":return Jo(c);case"yy":return Jo(h,ri);case"yyyy":return Jo(o);case"yyyyy":return Jo(d);case"yyyyyy":return Jo(s);case"M":return Jo(a);case"MM":return Jo(r);case"MMM":return os(t.months("short",!0),1);case"MMMM":return os(t.months("long",!0),1);case"L":return Jo(a);case"LL":return Jo(r);case"LLL":return os(t.months("short",!1),1);case"LLLL":return os(t.months("long",!1),1);case"d":return Jo(a);case"dd":return Jo(r);case"o":return Jo(l);case"ooo":return Jo(i);case"HH":return Jo(r);case"H":return Jo(a);case"hh":return Jo(r);case"h":return Jo(a);case"mm":return Jo(r);case"m":return Jo(a);case"q":return Jo(a);case"qq":return Jo(r);case"s":return Jo(a);case"ss":return Jo(r);case"S":return Jo(l);case"SSS":return Jo(i);case"u":return as(u);case"uu":return as(a);case"uuu":return Jo(n);case"a":return os(t.meridiems(),0);case"kkkk":return Jo(o);case"kk":return Jo(h,ri);case"W":return Jo(a);case"WW":return Jo(r);case"E":case"c":return Jo(n);case"EEE":return os(t.weekdays("short",!1),1);case"EEEE":return os(t.weekdays("long",!1),1);case"ccc":return os(t.weekdays("short",!0),1);case"cccc":return os(t.weekdays("long",!0),1);case"Z":case"ZZ":return ss(new RegExp(`([+-]${a.source})(?::(${r.source}))?`),2);case"ZZZ":return ss(new RegExp(`([+-]${a.source})(${r.source})?`),2);case"z":return as(/[a-z_+-/]{1,256}?/i);case" ":return as(/[^\S\n\r]/);default:return f(p)}},g=p(e)||{invalidReason:Ko};return g.token=e,g}const us={year:{"2-digit":"yy",numeric:"yyyyy"},month:{numeric:"M","2-digit":"MM",short:"MMM",long:"MMMM"},day:{numeric:"d","2-digit":"dd"},weekday:{short:"EEE",long:"EEEE"},dayperiod:"a",dayPeriod:"a",hour12:{numeric:"h","2-digit":"hh"},hour24:{numeric:"H","2-digit":"HH"},minute:{numeric:"m","2-digit":"mm"},second:{numeric:"s","2-digit":"ss"},timeZoneName:{long:"ZZZZZ",short:"ZZZ"}};function hs(e,t,n){const{type:r,value:i}=e;if("literal"===r){const e=/^\s+$/.test(i);return{literal:!e,val:e?" ":i}}const o=t[r];let s=r;"hour"===r&&(s=null!=t.hour12?t.hour12?"hour12":"hour24":null!=t.hourCycle?"h11"===t.hourCycle||"h12"===t.hourCycle?"hour12":"hour24":n.hour12?"hour12":"hour24");let a=us[s];if("object"===typeof a&&(a=a[o]),a)return{literal:!1,val:a}}function ds(e){const t=e.map((e=>e.regex)).reduce(((e,t)=>`${e}(${t.source})`),"");return[`^${t}$`,e]}function fs(e,t,n){const r=e.match(t);if(r){const e={};let t=1;for(const i in n)if(qr(n,i)){const o=n[i],s=o.groups?o.groups+1:1;!o.literal&&o.token&&(e[o.token.val[0]]=o.deser(r.slice(t,t+s))),t+=s}return[r,e]}return[r,{}]}function ps(e){const t=e=>{switch(e){case"S":return"millisecond";case"s":return"second";case"m":return"minute";case"h":case"H":return"hour";case"d":return"day";case"o":return"ordinal";case"L":case"M":return"month";case"y":return"year";case"E":case"c":return"weekday";case"W":return"weekNumber";case"k":return"weekYear";case"q":return"quarter";default:return null}};let n,r=null;Fr(e.z)||(r=Sn.create(e.z)),Fr(e.Z)||(r||(r=new Zn(e.Z)),n=e.Z),Fr(e.q)||(e.M=3*(e.q-1)+1),Fr(e.h)||(e.h<12&&1===e.a?e.h+=12:12===e.h&&0===e.a&&(e.h=0)),0===e.G&&e.y&&(e.y=-e.y),Fr(e.u)||(e.S=Xr(e.u));const i=Object.keys(e).reduce(((n,r)=>{const i=t(r);return i&&(n[i]=e[r]),n}),{});return[i,r,n]}let gs=null;function ms(){return gs||(gs=Gs.fromMillis(1555555555555)),gs}function vs(e,t){if(e.literal)return e;const n=Di.macroTokenToFormatOpts(e.val),r=ks(n,t);return null==r||r.includes(void 0)?e:r}function ys(e,t){return Array.prototype.concat(...e.map((e=>vs(e,t))))}class bs{constructor(e,t){if(this.locale=e,this.format=t,this.tokens=ys(Di.parseFormat(t),e),this.units=this.tokens.map((t=>cs(t,e))),this.disqualifyingUnit=this.units.find((e=>e.invalidReason)),!this.disqualifyingUnit){const[e,t]=ds(this.units);this.regex=RegExp(e,"i"),this.handlers=t}}explainFromTokens(e){if(this.isValid){const[t,n]=fs(e,this.regex,this.handlers),[r,i,o]=n?ps(n):[null,null,void 0];if(qr(n,"a")&&qr(n,"H"))throw new Bt("Can't include meridiem when specifying 24-hour format");return{input:e,tokens:this.tokens,regex:this.regex,rawMatches:t,matches:n,result:r,zone:i,specificOffset:o}}return{input:e,tokens:this.tokens,invalidReason:this.invalidReason}}get isValid(){return!this.disqualifyingUnit}get invalidReason(){return this.disqualifyingUnit?this.disqualifyingUnit.invalidReason:null}}function ws(e,t,n){const r=new bs(e,n);return r.explainFromTokens(t)}function xs(e,t,n){const{result:r,zone:i,specificOffset:o,invalidReason:s}=ws(e,t,n);return[r,i,o,s]}function ks(e,t){if(!e)return null;const n=Di.create(t,e),r=n.dtFormatter(ms()),i=r.formatToParts(),o=r.resolvedOptions();return i.map((t=>hs(t,e,o)))}const _s="Invalid DateTime",Os=864e13;function Ss(e){return new gr("unsupported zone",`the zone "${e.name}" is not supported`)}function Es(e){return null===e.weekData&&(e.weekData=_r(e.c)),e.weekData}function Cs(e){return null===e.localWeekData&&(e.localWeekData=_r(e.c,e.loc.getMinDaysInFirstWeek(),e.loc.getStartOfWeek())),e.localWeekData}function Ts(e,t){const n={ts:e.ts,zone:e.zone,c:e.c,o:e.o,loc:e.loc,invalid:e.invalid};return new Gs({...n,...t,old:n})}function As(e,t,n){let r=e-60*t*1e3;const i=n.offset(r);if(t===i)return[r,t];r-=60*(i-t)*1e3;const o=n.offset(r);return i===o?[r,i]:[e-60*Math.min(i,o)*1e3,Math.max(i,o)]}function Ds(e,t){e+=60*t*1e3;const n=new Date(e);return{year:n.getUTCFullYear(),month:n.getUTCMonth()+1,day:n.getUTCDate(),hour:n.getUTCHours(),minute:n.getUTCMinutes(),second:n.getUTCSeconds(),millisecond:n.getUTCMilliseconds()}}function Ms(e,t,n){return As(ei(e),t,n)}function Fs(e,t){const n=e.o,r=e.c.year+Math.trunc(t.years),i=e.c.month+Math.trunc(t.months)+3*Math.trunc(t.quarters),o={...e.c,year:r,month:i,day:Math.min(e.c.day,Jr(r,i))+Math.trunc(t.days)+7*Math.trunc(t.weeks)},s=Ho.fromObject({years:t.years-Math.trunc(t.years),quarters:t.quarters-Math.trunc(t.quarters),months:t.months-Math.trunc(t.months),weeks:t.weeks-Math.trunc(t.weeks),days:t.days-Math.trunc(t.days),hours:t.hours,minutes:t.minutes,seconds:t.seconds,milliseconds:t.milliseconds}).as("milliseconds"),a=ei(o);let[l,c]=As(a,n,e.zone);return 0!==s&&(l+=s,c=e.zone.offset(l)),{ts:l,o:c}}function Rs(e,t,n,r,i,o){const{setZone:s,zone:a}=n;if(e&&0!==Object.keys(e).length||t){const r=t||a,i=Gs.fromObject(e,{...n,zone:r,specificOffset:o});return s?i:i.setZone(a)}return Gs.invalid(new gr("unparsable",`the input "${i}" can't be parsed as ${r}`))}function Ps(e,t,n=!0){return e.isValid?Di.create(Yn.create("en-US"),{allowZ:n,forceSimple:!0}).formatDateTimeFromString(e,t):null}function Is(e,t){const n=e.c.year>9999||e.c.year<0;let r="";return n&&e.c.year>=0&&(r+="+"),r+=Qr(e.c.year,n?6:4),t?(r+="-",r+=Qr(e.c.month),r+="-",r+=Qr(e.c.day)):(r+=Qr(e.c.month),r+=Qr(e.c.day)),r}function Ls(e,t,n,r,i,o){let s=Qr(e.c.hour);return t?(s+=":",s+=Qr(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(s+=":")):s+=Qr(e.c.minute),0===e.c.millisecond&&0===e.c.second&&n||(s+=Qr(e.c.second),0===e.c.millisecond&&r||(s+=".",s+=Qr(e.c.millisecond,3))),i&&(e.isOffsetFixed&&0===e.offset&&!o?s+="Z":e.o<0?(s+="-",s+=Qr(Math.trunc(-e.o/60)),s+=":",s+=Qr(Math.trunc(-e.o%60))):(s+="+",s+=Qr(Math.trunc(e.o/60)),s+=":",s+=Qr(Math.trunc(e.o%60)))),o&&(s+="["+e.zone.ianaName+"]"),s}const $s={month:1,day:1,hour:0,minute:0,second:0,millisecond:0},Ns={weekNumber:1,weekday:1,hour:0,minute:0,second:0,millisecond:0},js={ordinal:1,hour:0,minute:0,second:0,millisecond:0},Bs=["year","month","day","hour","minute","second","millisecond"],Vs=["weekYear","weekNumber","weekday","hour","minute","second","millisecond"],qs=["year","ordinal","hour","minute","second","millisecond"];function zs(e){const t={year:"year",years:"year",month:"month",months:"month",day:"day",days:"day",hour:"hour",hours:"hour",minute:"minute",minutes:"minute",quarter:"quarter",quarters:"quarter",second:"second",seconds:"second",millisecond:"millisecond",milliseconds:"millisecond",weekday:"weekday",weekdays:"weekday",weeknumber:"weekNumber",weeksnumber:"weekNumber",weeknumbers:"weekNumber",weekyear:"weekYear",weekyears:"weekYear",ordinal:"ordinal"}[e.toLowerCase()];if(!t)throw new Vt(e);return t}function Hs(e){switch(e.toLowerCase()){case"localweekday":case"localweekdays":return"localWeekday";case"localweeknumber":case"localweeknumbers":return"localWeekNumber";case"localweekyear":case"localweekyears":return"localWeekYear";default:return zs(e)}}function Ws(e){return Zs[e]||(void 0===Xs&&(Xs=pr.now()),Zs[e]=e.offset(Xs)),Zs[e]}function Qs(e,t){const n=Kn(t.zone,pr.defaultZone);if(!n.isValid)return Gs.invalid(Ss(n));const r=Yn.fromObject(t);let i,o;if(Fr(e.year))i=pr.now();else{for(const n of Bs)Fr(e[n])&&(e[n]=$s[n]);const t=Dr(e)||Mr(e);if(t)return Gs.invalid(t);const r=Ws(n);[i,o]=Ms(e,r,n)}return new Gs({ts:i,zone:n,loc:r,o:o})}function Us(e,t,n){const r=!!Fr(n.round)||n.round,i=(e,i)=>{e=Zr(e,r||n.calendary?0:2,!0);const o=t.loc.clone(n).relFormatter(n);return o.format(e,i)},o=r=>n.calendary?t.hasSame(e,r)?0:t.startOf(r).diff(e.startOf(r),r).get(r):t.diff(e,r).get(r);if(n.unit)return i(o(n.unit),n.unit);for(const s of n.units){const e=o(s);if(Math.abs(e)>=1)return i(e,s)}return i(e>t?-0:0,n.units[n.units.length-1])}function Ys(e){let t,n={};return e.length>0&&"object"===typeof e[e.length-1]?(n=e[e.length-1],t=Array.from(e).slice(0,e.length-1)):t=Array.from(e),[n,t]}let Xs,Zs={};class Gs{constructor(e){const t=e.zone||pr.defaultZone;let n=e.invalid||(Number.isNaN(e.ts)?new gr("invalid input"):null)||(t.isValid?null:Ss(t));this.ts=Fr(e.ts)?pr.now():e.ts;let r=null,i=null;if(!n){const o=e.old&&e.old.ts===this.ts&&e.old.zone.equals(t);if(o)[r,i]=[e.old.c,e.old.o];else{const o=Rr(e.o)&&!e.old?e.o:t.offset(this.ts);r=Ds(this.ts,o),n=Number.isNaN(r.year)?new gr("invalid input"):null,r=n?null:r,i=n?null:o}}this._zone=t,this.loc=e.loc||Yn.create(),this.invalid=n,this.weekData=null,this.localWeekData=null,this.c=r,this.o=i,this.isLuxonDateTime=!0}static now(){return new Gs({})}static local(){const[e,t]=Ys(arguments),[n,r,i,o,s,a,l]=t;return Qs({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:l},e)}static utc(){const[e,t]=Ys(arguments),[n,r,i,o,s,a,l]=t;return e.zone=Zn.utcInstance,Qs({year:n,month:r,day:i,hour:o,minute:s,second:a,millisecond:l},e)}static fromJSDate(e,t={}){const n=Lr(e)?e.valueOf():NaN;if(Number.isNaN(n))return Gs.invalid("invalid input");const r=Kn(t.zone,pr.defaultZone);return r.isValid?new Gs({ts:n,zone:r,loc:Yn.fromObject(t)}):Gs.invalid(Ss(r))}static fromMillis(e,t={}){if(Rr(e))return e<-Os||e>Os?Gs.invalid("Timestamp out of range"):new Gs({ts:e,zone:Kn(t.zone,pr.defaultZone),loc:Yn.fromObject(t)});throw new qt(`fromMillis requires a numerical input, but received a ${typeof e} with value ${e}`)}static fromSeconds(e,t={}){if(Rr(e))return new Gs({ts:1e3*e,zone:Kn(t.zone,pr.defaultZone),loc:Yn.fromObject(t)});throw new qt("fromSeconds requires a numerical input")}static fromObject(e,t={}){e=e||{};const n=Kn(t.zone,pr.defaultZone);if(!n.isValid)return Gs.invalid(Ss(n));const r=Yn.fromObject(t),i=ai(e,Hs),{minDaysInFirstWeek:o,startOfWeek:s}=Cr(i,r),a=pr.now(),l=Fr(t.specificOffset)?n.offset(a):t.specificOffset,c=!Fr(i.ordinal),u=!Fr(i.year),h=!Fr(i.month)||!Fr(i.day),d=u||h,f=i.weekYear||i.weekNumber;if((d||c)&&f)throw new Bt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(h&&c)throw new Bt("Can't mix ordinal dates with month/day");const p=f||i.weekday&&!d;let g,m,v=Ds(a,l);p?(g=Vs,m=Ns,v=_r(v,o,s)):c?(g=qs,m=js,v=Sr(v)):(g=Bs,m=$s);let y=!1;for(const S of g){const e=i[S];Fr(e)?i[S]=y?m[S]:v[S]:y=!0}const b=p?Tr(i,o,s):c?Ar(i):Dr(i),w=b||Mr(i);if(w)return Gs.invalid(w);const x=p?Or(i,o,s):c?Er(i):i,[k,_]=Ms(x,l,n),O=new Gs({ts:k,zone:n,o:_,loc:r});return i.weekday&&d&&e.weekday!==O.weekday?Gs.invalid("mismatched weekday",`you can't specify both a weekday of ${i.weekday} and a date of ${O.toISO()}`):O.isValid?O:Gs.invalid(O.invalid)}static fromISO(e,t={}){const[n,r]=ko(e);return Rs(n,r,t,"ISO 8601",e)}static fromRFC2822(e,t={}){const[n,r]=_o(e);return Rs(n,r,t,"RFC 2822",e)}static fromHTTP(e,t={}){const[n,r]=Oo(e);return Rs(n,r,t,"HTTP",t)}static fromFormat(e,t,n={}){if(Fr(e)||Fr(t))throw new qt("fromFormat requires an input string and a format");const{locale:r=null,numberingSystem:i=null}=n,o=Yn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0}),[s,a,l,c]=xs(o,e,t);return c?Gs.invalid(c):Rs(s,a,n,`format ${t}`,e,l)}static fromString(e,t,n={}){return Gs.fromFormat(e,t,n)}static fromSQL(e,t={}){const[n,r]=Mo(e);return Rs(n,r,t,"SQL",e)}static invalid(e,t=null){if(!e)throw new qt("need to specify a reason the DateTime is invalid");const n=e instanceof gr?e:new gr(e,t);if(pr.throwOnInvalid)throw new $t(n);return new Gs({invalid:n})}static isDateTime(e){return e&&e.isLuxonDateTime||!1}static parseFormatForOpts(e,t={}){const n=ks(e,Yn.fromObject(t));return n?n.map((e=>e?e.val:null)).join(""):null}static expandFormat(e,t={}){const n=ys(Di.parseFormat(e),Yn.fromObject(t));return n.map((e=>e.val)).join("")}static resetCache(){Xs=void 0,Zs={}}get(e){return this[e]}get isValid(){return null===this.invalid}get invalidReason(){return this.invalid?this.invalid.reason:null}get invalidExplanation(){return this.invalid?this.invalid.explanation:null}get locale(){return this.isValid?this.loc.locale:null}get numberingSystem(){return this.isValid?this.loc.numberingSystem:null}get outputCalendar(){return this.isValid?this.loc.outputCalendar:null}get zone(){return this._zone}get zoneName(){return this.isValid?this.zone.name:null}get year(){return this.isValid?this.c.year:NaN}get quarter(){return this.isValid?Math.ceil(this.c.month/3):NaN}get month(){return this.isValid?this.c.month:NaN}get day(){return this.isValid?this.c.day:NaN}get hour(){return this.isValid?this.c.hour:NaN}get minute(){return this.isValid?this.c.minute:NaN}get second(){return this.isValid?this.c.second:NaN}get millisecond(){return this.isValid?this.c.millisecond:NaN}get weekYear(){return this.isValid?Es(this).weekYear:NaN}get weekNumber(){return this.isValid?Es(this).weekNumber:NaN}get weekday(){return this.isValid?Es(this).weekday:NaN}get isWeekend(){return this.isValid&&this.loc.getWeekendDays().includes(this.weekday)}get localWeekday(){return this.isValid?Cs(this).weekday:NaN}get localWeekNumber(){return this.isValid?Cs(this).weekNumber:NaN}get localWeekYear(){return this.isValid?Cs(this).weekYear:NaN}get ordinal(){return this.isValid?Sr(this.c).ordinal:NaN}get monthShort(){return this.isValid?Yo.months("short",{locObj:this.loc})[this.month-1]:null}get monthLong(){return this.isValid?Yo.months("long",{locObj:this.loc})[this.month-1]:null}get weekdayShort(){return this.isValid?Yo.weekdays("short",{locObj:this.loc})[this.weekday-1]:null}get weekdayLong(){return this.isValid?Yo.weekdays("long",{locObj:this.loc})[this.weekday-1]:null}get offset(){return this.isValid?+this.o:NaN}get offsetNameShort(){return this.isValid?this.zone.offsetName(this.ts,{format:"short",locale:this.locale}):null}get offsetNameLong(){return this.isValid?this.zone.offsetName(this.ts,{format:"long",locale:this.locale}):null}get isOffsetFixed(){return this.isValid?this.zone.isUniversal:null}get isInDST(){return!this.isOffsetFixed&&(this.offset>this.set({month:1,day:1}).offset||this.offset>this.set({month:5}).offset)}getPossibleOffsets(){if(!this.isValid||this.isOffsetFixed)return[this];const e=864e5,t=6e4,n=ei(this.c),r=this.zone.offset(n-e),i=this.zone.offset(n+e),o=this.zone.offset(n-r*t),s=this.zone.offset(n-i*t);if(o===s)return[this];const a=n-o*t,l=n-s*t,c=Ds(a,o),u=Ds(l,s);return c.hour===u.hour&&c.minute===u.minute&&c.second===u.second&&c.millisecond===u.millisecond?[Ts(this,{ts:a}),Ts(this,{ts:l})]:[this]}get isInLeapYear(){return Gr(this.year)}get daysInMonth(){return Jr(this.year,this.month)}get daysInYear(){return this.isValid?Kr(this.year):NaN}get weeksInWeekYear(){return this.isValid?ni(this.weekYear):NaN}get weeksInLocalWeekYear(){return this.isValid?ni(this.localWeekYear,this.loc.getMinDaysInFirstWeek(),this.loc.getStartOfWeek()):NaN}resolvedLocaleOptions(e={}){const{locale:t,numberingSystem:n,calendar:r}=Di.create(this.loc.clone(e),e).resolvedOptions(this);return{locale:t,numberingSystem:n,outputCalendar:r}}toUTC(e=0,t={}){return this.setZone(Zn.instance(e),t)}toLocal(){return this.setZone(pr.defaultZone)}setZone(e,{keepLocalTime:t=!1,keepCalendarTime:n=!1}={}){if(e=Kn(e,pr.defaultZone),e.equals(this.zone))return this;if(e.isValid){let r=this.ts;if(t||n){const t=e.offset(this.ts),n=this.toObject();[r]=Ms(n,t,e)}return Ts(this,{ts:r,zone:e})}return Gs.invalid(Ss(e))}reconfigure({locale:e,numberingSystem:t,outputCalendar:n}={}){const r=this.loc.clone({locale:e,numberingSystem:t,outputCalendar:n});return Ts(this,{loc:r})}setLocale(e){return this.reconfigure({locale:e})}set(e){if(!this.isValid)return this;const t=ai(e,Hs),{minDaysInFirstWeek:n,startOfWeek:r}=Cr(t,this.loc),i=!Fr(t.weekYear)||!Fr(t.weekNumber)||!Fr(t.weekday),o=!Fr(t.ordinal),s=!Fr(t.year),a=!Fr(t.month)||!Fr(t.day),l=s||a,c=t.weekYear||t.weekNumber;if((l||o)&&c)throw new Bt("Can't mix weekYear/weekNumber units with year/month/day or ordinals");if(a&&o)throw new Bt("Can't mix ordinal dates with month/day");let u;i?u=Or({..._r(this.c,n,r),...t},n,r):Fr(t.ordinal)?(u={...this.toObject(),...t},Fr(t.day)&&(u.day=Math.min(Jr(u.year,u.month),u.day))):u=Er({...Sr(this.c),...t});const[h,d]=Ms(u,this.o,this.zone);return Ts(this,{ts:h,o:d})}plus(e){if(!this.isValid)return this;const t=Ho.fromDurationLike(e);return Ts(this,Fs(this,t))}minus(e){if(!this.isValid)return this;const t=Ho.fromDurationLike(e).negate();return Ts(this,Fs(this,t))}startOf(e,{useLocaleWeeks:t=!1}={}){if(!this.isValid)return this;const n={},r=Ho.normalizeUnit(e);switch(r){case"years":n.month=1;case"quarters":case"months":n.day=1;case"weeks":case"days":n.hour=0;case"hours":n.minute=0;case"minutes":n.second=0;case"seconds":n.millisecond=0;break;case"milliseconds":break}if("weeks"===r)if(t){const e=this.loc.getStartOfWeek(),{weekday:t}=this;t<e&&(n.weekNumber=this.weekNumber-1),n.weekday=e}else n.weekday=1;if("quarters"===r){const e=Math.ceil(this.month/3);n.month=3*(e-1)+1}return this.set(n)}endOf(e,t){return this.isValid?this.plus({[e]:1}).startOf(e,t).minus(1):this}toFormat(e,t={}){return this.isValid?Di.create(this.loc.redefaultToEN(t)).formatDateTimeFromString(this,e):_s}toLocaleString(e=Ut,t={}){return this.isValid?Di.create(this.loc.clone(t),e).formatDateTime(this):_s}toLocaleParts(e={}){return this.isValid?Di.create(this.loc.clone(e),e).formatDateTimeParts(this):[]}toISO({format:e="extended",suppressSeconds:t=!1,suppressMilliseconds:n=!1,includeOffset:r=!0,extendedZone:i=!1}={}){if(!this.isValid)return null;const o="extended"===e;let s=Is(this,o);return s+="T",s+=Ls(this,o,t,n,r,i),s}toISODate({format:e="extended"}={}){return this.isValid?Is(this,"extended"===e):null}toISOWeekDate(){return Ps(this,"kkkk-'W'WW-c")}toISOTime({suppressMilliseconds:e=!1,suppressSeconds:t=!1,includeOffset:n=!0,includePrefix:r=!1,extendedZone:i=!1,format:o="extended"}={}){if(!this.isValid)return null;let s=r?"T":"";return s+Ls(this,"extended"===o,t,e,n,i)}toRFC2822(){return Ps(this,"EEE, dd LLL yyyy HH:mm:ss ZZZ",!1)}toHTTP(){return Ps(this.toUTC(),"EEE, dd LLL yyyy HH:mm:ss 'GMT'")}toSQLDate(){return this.isValid?Is(this,!0):null}toSQLTime({includeOffset:e=!0,includeZone:t=!1,includeOffsetSpace:n=!0}={}){let r="HH:mm:ss.SSS";return(t||e)&&(n&&(r+=" "),t?r+="z":e&&(r+="ZZ")),Ps(this,r,!0)}toSQL(e={}){return this.isValid?`${this.toSQLDate()} ${this.toSQLTime(e)}`:null}toString(){return this.isValid?this.toISO():_s}[Symbol.for("nodejs.util.inspect.custom")](){return this.isValid?`DateTime { ts: ${this.toISO()}, zone: ${this.zone.name}, locale: ${this.locale} }`:`DateTime { Invalid, reason: ${this.invalidReason} }`}valueOf(){return this.toMillis()}toMillis(){return this.isValid?this.ts:NaN}toSeconds(){return this.isValid?this.ts/1e3:NaN}toUnixInteger(){return this.isValid?Math.floor(this.ts/1e3):NaN}toJSON(){return this.toISO()}toBSON(){return this.toJSDate()}toObject(e={}){if(!this.isValid)return{};const t={...this.c};return e.includeConfig&&(t.outputCalendar=this.outputCalendar,t.numberingSystem=this.loc.numberingSystem,t.locale=this.loc.locale),t}toJSDate(){return new Date(this.isValid?this.ts:NaN)}diff(e,t="milliseconds",n={}){if(!this.isValid||!e.isValid)return Ho.invalid("created by diffing an invalid DateTime");const r={locale:this.locale,numberingSystem:this.numberingSystem,...n},i=jr(t).map(Ho.normalizeUnit),o=e.valueOf()>this.valueOf(),s=o?this:e,a=o?e:this,l=Go(s,a,i,r);return o?l.negate():l}diffNow(e="milliseconds",t={}){return this.diff(Gs.now(),e,t)}until(e){return this.isValid?Uo.fromDateTimes(this,e):this}hasSame(e,t,n){if(!this.isValid)return!1;const r=e.valueOf(),i=this.setZone(e.zone,{keepLocalTime:!0});return i.startOf(t,n)<=r&&r<=i.endOf(t,n)}equals(e){return this.isValid&&e.isValid&&this.valueOf()===e.valueOf()&&this.zone.equals(e.zone)&&this.loc.equals(e.loc)}toRelative(e={}){if(!this.isValid)return null;const t=e.base||Gs.fromObject({},{zone:this.zone}),n=e.padding?this<t?-e.padding:e.padding:0;let r=["years","months","days","hours","minutes","seconds"],i=e.unit;return Array.isArray(e.unit)&&(r=e.unit,i=void 0),Us(t,this.plus(n),{...e,numeric:"always",units:r,unit:i})}toRelativeCalendar(e={}){return this.isValid?Us(e.base||Gs.fromObject({},{zone:this.zone}),this,{...e,numeric:"auto",units:["years","months","days"],calendary:!0}):null}static min(...e){if(!e.every(Gs.isDateTime))throw new qt("min requires all arguments be DateTimes");return Br(e,(e=>e.valueOf()),Math.min)}static max(...e){if(!e.every(Gs.isDateTime))throw new qt("max requires all arguments be DateTimes");return Br(e,(e=>e.valueOf()),Math.max)}static fromFormatExplain(e,t,n={}){const{locale:r=null,numberingSystem:i=null}=n,o=Yn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});return ws(o,e,t)}static fromStringExplain(e,t,n={}){return Gs.fromFormatExplain(e,t,n)}static buildFormatParser(e,t={}){const{locale:n=null,numberingSystem:r=null}=t,i=Yn.fromOpts({locale:n,numberingSystem:r,defaultToEN:!0});return new bs(i,e)}static fromFormatParser(e,t,n={}){if(Fr(e)||Fr(t))throw new qt("fromFormatParser requires an input string and a format parser");const{locale:r=null,numberingSystem:i=null}=n,o=Yn.fromOpts({locale:r,numberingSystem:i,defaultToEN:!0});if(!o.equals(t.locale))throw new qt(`fromFormatParser called with a locale of ${o}, but the format parser was created for ${t.locale}`);const{result:s,zone:a,specificOffset:l,invalidReason:c}=t.explainFromTokens(e);return c?Gs.invalid(c):Rs(s,a,n,`format ${t.format}`,e,l)}static get DATE_SHORT(){return Ut}static get DATE_MED(){return Yt}static get DATE_MED_WITH_WEEKDAY(){return Xt}static get DATE_FULL(){return Zt}static get DATE_HUGE(){return Gt}static get TIME_SIMPLE(){return Kt}static get TIME_WITH_SECONDS(){return Jt}static get TIME_WITH_SHORT_OFFSET(){return en}static get TIME_WITH_LONG_OFFSET(){return tn}static get TIME_24_SIMPLE(){return nn}static get TIME_24_WITH_SECONDS(){return rn}static get TIME_24_WITH_SHORT_OFFSET(){return on}static get TIME_24_WITH_LONG_OFFSET(){return sn}static get DATETIME_SHORT(){return an}static get DATETIME_SHORT_WITH_SECONDS(){return ln}static get DATETIME_MED(){return cn}static get DATETIME_MED_WITH_SECONDS(){return un}static get DATETIME_MED_WITH_WEEKDAY(){return hn}static get DATETIME_FULL(){return dn}static get DATETIME_FULL_WITH_SECONDS(){return fn}static get DATETIME_HUGE(){return pn}static get DATETIME_HUGE_WITH_SECONDS(){return gn}}function Ks(e){if(Gs.isDateTime(e))return e;if(e&&e.valueOf&&Rr(e.valueOf()))return Gs.fromJSDate(e);if(e&&"object"===typeof e)return Gs.fromObject(e);throw new qt(`Unknown datetime argument: ${e}, of type ${typeof e}`)}var Js=["onChange","onClose","onDayCreate","onDestroy","onKeyDown","onMonthChange","onOpen","onParseConfig","onReady","onValueUpdate","onYearChange","onPreCalendarPosition"],ea={_disable:[],allowInput:!1,allowInvalidPreload:!1,altFormat:"F j, Y",altInput:!1,altInputClass:"form-control input",animate:"object"===typeof window&&-1===window.navigator.userAgent.indexOf("MSIE"),ariaDateFormat:"F j, Y",autoFillDefaultTime:!0,clickOpens:!0,closeOnSelect:!0,conjunction:", ",dateFormat:"Y-m-d",defaultHour:12,defaultMinute:0,defaultSeconds:0,disable:[],disableMobile:!1,enableSeconds:!1,enableTime:!1,errorHandler:function(e){return"undefined"!==typeof console&&console.warn(e)},getWeek:function(e){var t=new Date(e.getTime());t.setHours(0,0,0,0),t.setDate(t.getDate()+3-(t.getDay()+6)%7);var n=new Date(t.getFullYear(),0,4);return 1+Math.round(((t.getTime()-n.getTime())/864e5-3+(n.getDay()+6)%7)/7)},hourIncrement:1,ignoredFocusElements:[],inline:!1,locale:"default",minuteIncrement:5,mode:"single",monthSelectorType:"dropdown",nextArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M13.207 8.472l-7.854 7.854-0.707-0.707 7.146-7.146-7.146-7.148 0.707-0.707 7.854 7.854z' /></svg>",noCalendar:!1,now:new Date,onChange:[],onClose:[],onDayCreate:[],onDestroy:[],onKeyDown:[],onMonthChange:[],onOpen:[],onParseConfig:[],onReady:[],onValueUpdate:[],onYearChange:[],onPreCalendarPosition:[],plugins:[],position:"auto",positionElement:void 0,prevArrow:"<svg version='1.1' xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' viewBox='0 0 17 17'><g></g><path d='M5.207 8.471l7.146 7.147-0.707 0.707-7.853-7.854 7.854-7.853 0.707 0.707-7.147 7.146z' /></svg>",shorthandCurrentMonth:!1,showMonths:1,static:!1,time_24hr:!1,weekNumbers:!1,wrap:!1},ta={weekdays:{shorthand:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],longhand:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"]},months:{shorthand:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],longhand:["January","February","March","April","May","June","July","August","September","October","November","December"]},daysInMonth:[31,28,31,30,31,30,31,31,30,31,30,31],firstDayOfWeek:0,ordinal:function(e){var t=e%100;if(t>3&&t<21)return"th";switch(t%10){case 1:return"st";case 2:return"nd";case 3:return"rd";default:return"th"}},rangeSeparator:" to ",weekAbbreviation:"Wk",scrollTitle:"Scroll to increment",toggleTitle:"Click to toggle",amPM:["AM","PM"],yearAriaLabel:"Year",monthAriaLabel:"Month",hourAriaLabel:"Hour",minuteAriaLabel:"Minute",time_24hr:!1},na=ta,ra=function(e,t){return void 0===t&&(t=2),("000"+e).slice(-1*t)},ia=function(e){return!0===e?1:0};function oa(e,t){var n;return function(){var r=this,i=arguments;clearTimeout(n),n=setTimeout((function(){return e.apply(r,i)}),t)}}var sa=function(e){return e instanceof Array?e:[e]};function aa(e,t,n){if(!0===n)return e.classList.add(t);e.classList.remove(t)}function la(e,t,n){var r=window.document.createElement(e);return t=t||"",n=n||"",r.className=t,void 0!==n&&(r.textContent=n),r}function ca(e){while(e.firstChild)e.removeChild(e.firstChild)}function ua(e,t){return t(e)?e:e.parentNode?ua(e.parentNode,t):void 0}function ha(e,t){var n=la("div","numInputWrapper"),r=la("input","numInput "+e),i=la("span","arrowUp"),o=la("span","arrowDown");if(-1===navigator.userAgent.indexOf("MSIE 9.0")?r.type="number":(r.type="text",r.pattern="\\d*"),void 0!==t)for(var s in t)r.setAttribute(s,t[s]);return n.appendChild(r),n.appendChild(i),n.appendChild(o),n}function da(e){try{if("function"===typeof e.composedPath){var t=e.composedPath();return t[0]}return e.target}catch(IH){return e.target}}var fa=function(){},pa=function(e,t,n){return n.months[t?"shorthand":"longhand"][e]},ga={D:fa,F:function(e,t,n){e.setMonth(n.months.longhand.indexOf(t))},G:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},H:function(e,t){e.setHours(parseFloat(t))},J:function(e,t){e.setDate(parseFloat(t))},K:function(e,t,n){e.setHours(e.getHours()%12+12*ia(new RegExp(n.amPM[1],"i").test(t)))},M:function(e,t,n){e.setMonth(n.months.shorthand.indexOf(t))},S:function(e,t){e.setSeconds(parseFloat(t))},U:function(e,t){return new Date(1e3*parseFloat(t))},W:function(e,t,n){var r=parseInt(t),i=new Date(e.getFullYear(),0,2+7*(r-1),0,0,0,0);return i.setDate(i.getDate()-i.getDay()+n.firstDayOfWeek),i},Y:function(e,t){e.setFullYear(parseFloat(t))},Z:function(e,t){return new Date(t)},d:function(e,t){e.setDate(parseFloat(t))},h:function(e,t){e.setHours((e.getHours()>=12?12:0)+parseFloat(t))},i:function(e,t){e.setMinutes(parseFloat(t))},j:function(e,t){e.setDate(parseFloat(t))},l:fa,m:function(e,t){e.setMonth(parseFloat(t)-1)},n:function(e,t){e.setMonth(parseFloat(t)-1)},s:function(e,t){e.setSeconds(parseFloat(t))},u:function(e,t){return new Date(parseFloat(t))},w:fa,y:function(e,t){e.setFullYear(2e3+parseFloat(t))}},ma={D:"",F:"",G:"(\\d\\d|\\d)",H:"(\\d\\d|\\d)",J:"(\\d\\d|\\d)\\w+",K:"",M:"",S:"(\\d\\d|\\d)",U:"(.+)",W:"(\\d\\d|\\d)",Y:"(\\d{4})",Z:"(.+)",d:"(\\d\\d|\\d)",h:"(\\d\\d|\\d)",i:"(\\d\\d|\\d)",j:"(\\d\\d|\\d)",l:"",m:"(\\d\\d|\\d)",n:"(\\d\\d|\\d)",s:"(\\d\\d|\\d)",u:"(.+)",w:"(\\d\\d|\\d)",y:"(\\d{2})"},va={Z:function(e){return e.toISOString()},D:function(e,t,n){return t.weekdays.shorthand[va.w(e,t,n)]},F:function(e,t,n){return pa(va.n(e,t,n)-1,!1,t)},G:function(e,t,n){return ra(va.h(e,t,n))},H:function(e){return ra(e.getHours())},J:function(e,t){return void 0!==t.ordinal?e.getDate()+t.ordinal(e.getDate()):e.getDate()},K:function(e,t){return t.amPM[ia(e.getHours()>11)]},M:function(e,t){return pa(e.getMonth(),!0,t)},S:function(e){return ra(e.getSeconds())},U:function(e){return e.getTime()/1e3},W:function(e,t,n){return n.getWeek(e)},Y:function(e){return ra(e.getFullYear(),4)},d:function(e){return ra(e.getDate())},h:function(e){return e.getHours()%12?e.getHours()%12:12},i:function(e){return ra(e.getMinutes())},j:function(e){return e.getDate()},l:function(e,t){return t.weekdays.longhand[e.getDay()]},m:function(e){return ra(e.getMonth()+1)},n:function(e){return e.getMonth()+1},s:function(e){return e.getSeconds()},u:function(e){return e.getTime()},w:function(e){return e.getDay()},y:function(e){return String(e.getFullYear()).substring(2)}},ya=function(e){var t=e.config,n=void 0===t?ea:t,r=e.l10n,i=void 0===r?ta:r,o=e.isMobile,s=void 0!==o&&o;return function(e,t,r){var o=r||i;return void 0===n.formatDate||s?t.split("").map((function(t,r,i){return va[t]&&"\\"!==i[r-1]?va[t](e,o,n):"\\"!==t?t:""})).join(""):n.formatDate(e,t,o)}},ba=function(e){var t=e.config,n=void 0===t?ea:t,r=e.l10n,i=void 0===r?ta:r;return function(e,t,r,o){if(0===e||e){var s,a=o||i,l=e;if(e instanceof Date)s=new Date(e.getTime());else if("string"!==typeof e&&void 0!==e.toFixed)s=new Date(e);else if("string"===typeof e){var c=t||(n||ea).dateFormat,u=String(e).trim();if("today"===u)s=new Date,r=!0;else if(n&&n.parseDate)s=n.parseDate(e,c);else if(/Z$/.test(u)||/GMT$/.test(u))s=new Date(e);else{for(var h=void 0,d=[],f=0,p=0,g="";f<c.length;f++){var m=c[f],v="\\"===m,y="\\"===c[f-1]||v;if(ma[m]&&!y){g+=ma[m];var b=new RegExp(g).exec(e);b&&(h=!0)&&d["Y"!==m?"push":"unshift"]({fn:ga[m],val:b[++p]})}else v||(g+=".")}s=n&&n.noCalendar?new Date((new Date).setHours(0,0,0,0)):new Date((new Date).getFullYear(),0,1,0,0,0,0),d.forEach((function(e){var t=e.fn,n=e.val;return s=t(s,n,a)||s})),s=h?s:void 0}}if(s instanceof Date&&!isNaN(s.getTime()))return!0===r&&s.setHours(0,0,0,0),s;n.errorHandler(new Error("Invalid date provided: "+l))}}};function wa(e,t,n){return void 0===n&&(n=!0),!1!==n?new Date(e.getTime()).setHours(0,0,0,0)-new Date(t.getTime()).setHours(0,0,0,0):e.getTime()-t.getTime()}var xa=function(e,t,n){return e>Math.min(t,n)&&e<Math.max(t,n)},ka=function(e,t,n){return 3600*e+60*t+n},_a=function(e){var t=Math.floor(e/3600),n=(e-3600*t)/60;return[t,n,e-3600*t-60*n]},Oa={DAY:864e5};function Sa(e){var t=e.defaultHour,n=e.defaultMinute,r=e.defaultSeconds;if(void 0!==e.minDate){var i=e.minDate.getHours(),o=e.minDate.getMinutes(),s=e.minDate.getSeconds();t<i&&(t=i),t===i&&n<o&&(n=o),t===i&&n===o&&r<s&&(r=e.minDate.getSeconds())}if(void 0!==e.maxDate){var a=e.maxDate.getHours(),l=e.maxDate.getMinutes();t=Math.min(t,a),t===a&&(n=Math.min(l,n)),t===a&&n===l&&(r=e.maxDate.getSeconds())}return{hours:t,minutes:n,seconds:r}}n(3725);var Ea=function(){return Ea=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var i in t=arguments[n],t)Object.prototype.hasOwnProperty.call(t,i)&&(e[i]=t[i]);return e},Ea.apply(this,arguments)},Ca=function(){for(var e=0,t=0,n=arguments.length;t<n;t++)e+=arguments[t].length;var r=Array(e),i=0;for(t=0;t<n;t++)for(var o=arguments[t],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r},Ta=300;function Aa(e,t){var n={config:Ea(Ea({},ea),Ma.defaultConfig),l10n:na};function r(){n.utils={getDaysInMonth:function(e,t){return void 0===e&&(e=n.currentMonth),void 0===t&&(t=n.currentYear),1===e&&(t%4===0&&t%100!==0||t%400===0)?29:n.l10n.daysInMonth[e]}}}function i(){n.element=n.input=e,n.isOpen=!1,K(),ee(),fe(),de(),r(),n.isMobile||x(),v(),(n.selectedDates.length||n.config.noCalendar)&&(n.config.enableTime&&d(n.config.noCalendar?n.latestSelectedDateObj:void 0),_e(!1)),a();var t=/^((?!chrome|android).)*safari/i.test(navigator.userAgent);!n.isMobile&&t&&te(),ve("onReady")}function o(){var e;return(null===(e=n.calendarContainer)||void 0===e?void 0:e.getRootNode()).activeElement||document.activeElement}function s(e){return e.bind(n)}function a(){var e=n.config;!1===e.weekNumbers&&1===e.showMonths||!0!==e.noCalendar&&window.requestAnimationFrame((function(){if(void 0!==n.calendarContainer&&(n.calendarContainer.style.visibility="hidden",n.calendarContainer.style.display="block"),void 0!==n.daysContainer){var t=(n.days.offsetWidth+1)*e.showMonths;n.daysContainer.style.width=t+"px",n.calendarContainer.style.width=t+(void 0!==n.weekWrapper?n.weekWrapper.offsetWidth:0)+"px",n.calendarContainer.style.removeProperty("visibility"),n.calendarContainer.style.removeProperty("display")}}))}function l(e){if(0===n.selectedDates.length){var t=void 0===n.config.minDate||wa(new Date,n.config.minDate)>=0?new Date:new Date(n.config.minDate.getTime()),r=Sa(n.config);t.setHours(r.hours,r.minutes,r.seconds,t.getMilliseconds()),n.selectedDates=[t],n.latestSelectedDateObj=t}void 0!==e&&"blur"!==e.type&&Se(e);var i=n._input.value;h(),_e(),n._input.value!==i&&n._debouncedChange()}function c(e,t){return e%12+12*ia(t===n.l10n.amPM[1])}function u(e){switch(e%24){case 0:case 12:return 12;default:return e%12}}function h(){if(void 0!==n.hourElement&&void 0!==n.minuteElement){var e=(parseInt(n.hourElement.value.slice(-2),10)||0)%24,t=(parseInt(n.minuteElement.value,10)||0)%60,r=void 0!==n.secondElement?(parseInt(n.secondElement.value,10)||0)%60:0;void 0!==n.amPM&&(e=c(e,n.amPM.textContent));var i=void 0!==n.config.minTime||n.config.minDate&&n.minDateHasTime&&n.latestSelectedDateObj&&0===wa(n.latestSelectedDateObj,n.config.minDate,!0),o=void 0!==n.config.maxTime||n.config.maxDate&&n.maxDateHasTime&&n.latestSelectedDateObj&&0===wa(n.latestSelectedDateObj,n.config.maxDate,!0);if(void 0!==n.config.maxTime&&void 0!==n.config.minTime&&n.config.minTime>n.config.maxTime){var s=ka(n.config.minTime.getHours(),n.config.minTime.getMinutes(),n.config.minTime.getSeconds()),a=ka(n.config.maxTime.getHours(),n.config.maxTime.getMinutes(),n.config.maxTime.getSeconds()),l=ka(e,t,r);if(l>a&&l<s){var u=_a(s);e=u[0],t=u[1],r=u[2]}}else{if(o){var h=void 0!==n.config.maxTime?n.config.maxTime:n.config.maxDate;e=Math.min(e,h.getHours()),e===h.getHours()&&(t=Math.min(t,h.getMinutes())),t===h.getMinutes()&&(r=Math.min(r,h.getSeconds()))}if(i){var d=void 0!==n.config.minTime?n.config.minTime:n.config.minDate;e=Math.max(e,d.getHours()),e===d.getHours()&&t<d.getMinutes()&&(t=d.getMinutes()),t===d.getMinutes()&&(r=Math.max(r,d.getSeconds()))}}f(e,t,r)}}function d(e){var t=e||n.latestSelectedDateObj;t&&t instanceof Date&&f(t.getHours(),t.getMinutes(),t.getSeconds())}function f(e,t,r){void 0!==n.latestSelectedDateObj&&n.latestSelectedDateObj.setHours(e%24,t,r||0,0),n.hourElement&&n.minuteElement&&!n.isMobile&&(n.hourElement.value=ra(n.config.time_24hr?e:(12+e)%12+12*ia(e%12===0)),n.minuteElement.value=ra(t),void 0!==n.amPM&&(n.amPM.textContent=n.l10n.amPM[ia(e>=12)]),void 0!==n.secondElement&&(n.secondElement.value=ra(r)))}function p(e){var t=da(e),n=parseInt(t.value)+(e.delta||0);(n/1e3>1||"Enter"===e.key&&!/[^\d]/.test(n.toString()))&&z(n)}function g(e,t,r,i){return t instanceof Array?t.forEach((function(t){return g(e,t,r,i)})):e instanceof Array?e.forEach((function(e){return g(e,t,r,i)})):(e.addEventListener(t,r,i),void n._handlers.push({remove:function(){return e.removeEventListener(t,r,i)}}))}function m(){ve("onChange")}function v(){if(n.config.wrap&&["open","close","toggle","clear"].forEach((function(e){Array.prototype.forEach.call(n.element.querySelectorAll("[data-"+e+"]"),(function(t){return g(t,"click",n[e])}))})),n.isMobile)ge();else{var e=oa(X,50);if(n._debouncedChange=oa(m,Ta),n.daysContainer&&!/iPhone|iPad|iPod/i.test(navigator.userAgent)&&g(n.daysContainer,"mouseover",(function(e){"range"===n.config.mode&&Y(da(e))})),g(n._input,"keydown",U),void 0!==n.calendarContainer&&g(n.calendarContainer,"keydown",U),n.config.inline||n.config.static||g(window,"resize",e),void 0!==window.ontouchstart?g(window.document,"touchstart",q):g(window.document,"mousedown",q),g(window.document,"focus",q,{capture:!0}),!0===n.config.clickOpens&&(g(n._input,"focus",n.open),g(n._input,"click",n.open)),void 0!==n.daysContainer&&(g(n.monthNav,"click",Oe),g(n.monthNav,["keyup","increment"],p),g(n.daysContainer,"click",se)),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement){var t=function(e){return da(e).select()};g(n.timeContainer,["increment"],l),g(n.timeContainer,"blur",l,{capture:!0}),g(n.timeContainer,"click",b),g([n.hourElement,n.minuteElement],["focus","click"],t),void 0!==n.secondElement&&g(n.secondElement,"focus",(function(){return n.secondElement&&n.secondElement.select()})),void 0!==n.amPM&&g(n.amPM,"click",(function(e){l(e)}))}n.config.allowInput&&g(n._input,"blur",Q)}}function y(e,t){var r=void 0!==e?n.parseDate(e):n.latestSelectedDateObj||(n.config.minDate&&n.config.minDate>n.now?n.config.minDate:n.config.maxDate&&n.config.maxDate<n.now?n.config.maxDate:n.now),i=n.currentYear,o=n.currentMonth;try{void 0!==r&&(n.currentYear=r.getFullYear(),n.currentMonth=r.getMonth())}catch(s){s.message="Invalid date supplied: "+r,n.config.errorHandler(s)}t&&n.currentYear!==i&&(ve("onYearChange"),A()),!t||n.currentYear===i&&n.currentMonth===o||ve("onMonthChange"),n.redraw()}function b(e){var t=da(e);~t.className.indexOf("arrow")&&w(e,t.classList.contains("arrowUp")?1:-1)}function w(e,t,n){var r=e&&da(e),i=n||r&&r.parentNode&&r.parentNode.firstChild,o=ye("increment");o.delta=t,i&&i.dispatchEvent(o)}function x(){var e=window.document.createDocumentFragment();if(n.calendarContainer=la("div","flatpickr-calendar"),n.calendarContainer.tabIndex=-1,!n.config.noCalendar){if(e.appendChild(F()),n.innerContainer=la("div","flatpickr-innerContainer"),n.config.weekNumbers){var t=L(),r=t.weekWrapper,i=t.weekNumbers;n.innerContainer.appendChild(r),n.weekNumbers=i,n.weekWrapper=r}n.rContainer=la("div","flatpickr-rContainer"),n.rContainer.appendChild(P()),n.daysContainer||(n.daysContainer=la("div","flatpickr-days"),n.daysContainer.tabIndex=-1),T(),n.rContainer.appendChild(n.daysContainer),n.innerContainer.appendChild(n.rContainer),e.appendChild(n.innerContainer)}n.config.enableTime&&e.appendChild(R()),aa(n.calendarContainer,"rangeMode","range"===n.config.mode),aa(n.calendarContainer,"animate",!0===n.config.animate),aa(n.calendarContainer,"multiMonth",n.config.showMonths>1),n.calendarContainer.appendChild(e);var o=void 0!==n.config.appendTo&&void 0!==n.config.appendTo.nodeType;if((n.config.inline||n.config.static)&&(n.calendarContainer.classList.add(n.config.inline?"inline":"static"),n.config.inline&&(!o&&n.element.parentNode?n.element.parentNode.insertBefore(n.calendarContainer,n._input.nextSibling):void 0!==n.config.appendTo&&n.config.appendTo.appendChild(n.calendarContainer)),n.config.static)){var s=la("div","flatpickr-wrapper");n.element.parentNode&&n.element.parentNode.insertBefore(s,n.element),s.appendChild(n.element),n.altInput&&s.appendChild(n.altInput),s.appendChild(n.calendarContainer)}n.config.static||n.config.inline||(void 0!==n.config.appendTo?n.config.appendTo:window.document.body).appendChild(n.calendarContainer)}function k(e,t,r,i){var o=H(t,!0),s=la("span",e,t.getDate().toString());return s.dateObj=t,s.$i=i,s.setAttribute("aria-label",n.formatDate(t,n.config.ariaDateFormat)),-1===e.indexOf("hidden")&&0===wa(t,n.now)&&(n.todayDateElem=s,s.classList.add("today"),s.setAttribute("aria-current","date")),o?(s.tabIndex=-1,be(t)&&(s.classList.add("selected"),n.selectedDateElem=s,"range"===n.config.mode&&(aa(s,"startRange",n.selectedDates[0]&&0===wa(t,n.selectedDates[0],!0)),aa(s,"endRange",n.selectedDates[1]&&0===wa(t,n.selectedDates[1],!0)),"nextMonthDay"===e&&s.classList.add("inRange")))):s.classList.add("flatpickr-disabled"),"range"===n.config.mode&&we(t)&&!be(t)&&s.classList.add("inRange"),n.weekNumbers&&1===n.config.showMonths&&"prevMonthDay"!==e&&i%7===6&&n.weekNumbers.insertAdjacentHTML("beforeend","<span class='flatpickr-day'>"+n.config.getWeek(t)+"</span>"),ve("onDayCreate",s),s}function _(e){e.focus(),"range"===n.config.mode&&Y(e)}function O(e){for(var t=e>0?0:n.config.showMonths-1,r=e>0?n.config.showMonths:-1,i=t;i!=r;i+=e)for(var o=n.daysContainer.children[i],s=e>0?0:o.children.length-1,a=e>0?o.children.length:-1,l=s;l!=a;l+=e){var c=o.children[l];if(-1===c.className.indexOf("hidden")&&H(c.dateObj))return c}}function S(e,t){for(var r=-1===e.className.indexOf("Month")?e.dateObj.getMonth():n.currentMonth,i=t>0?n.config.showMonths:-1,o=t>0?1:-1,s=r-n.currentMonth;s!=i;s+=o)for(var a=n.daysContainer.children[s],l=r-n.currentMonth===s?e.$i+t:t<0?a.children.length-1:0,c=a.children.length,u=l;u>=0&&u<c&&u!=(t>0?c:-1);u+=o){var h=a.children[u];if(-1===h.className.indexOf("hidden")&&H(h.dateObj)&&Math.abs(e.$i-u)>=Math.abs(t))return _(h)}n.changeMonth(o),E(O(o),0)}function E(e,t){var r=o(),i=W(r||document.body),s=void 0!==e?e:i?r:void 0!==n.selectedDateElem&&W(n.selectedDateElem)?n.selectedDateElem:void 0!==n.todayDateElem&&W(n.todayDateElem)?n.todayDateElem:O(t>0?1:-1);void 0===s?n._input.focus():i?S(s,t):_(s)}function C(e,t){for(var r=(new Date(e,t,1).getDay()-n.l10n.firstDayOfWeek+7)%7,i=n.utils.getDaysInMonth((t-1+12)%12,e),o=n.utils.getDaysInMonth(t,e),s=window.document.createDocumentFragment(),a=n.config.showMonths>1,l=a?"prevMonthDay hidden":"prevMonthDay",c=a?"nextMonthDay hidden":"nextMonthDay",u=i+1-r,h=0;u<=i;u++,h++)s.appendChild(k("flatpickr-day "+l,new Date(e,t-1,u),u,h));for(u=1;u<=o;u++,h++)s.appendChild(k("flatpickr-day",new Date(e,t,u),u,h));for(var d=o+1;d<=42-r&&(1===n.config.showMonths||h%7!==0);d++,h++)s.appendChild(k("flatpickr-day "+c,new Date(e,t+1,d%o),d,h));var f=la("div","dayContainer");return f.appendChild(s),f}function T(){if(void 0!==n.daysContainer){ca(n.daysContainer),n.weekNumbers&&ca(n.weekNumbers);for(var e=document.createDocumentFragment(),t=0;t<n.config.showMonths;t++){var r=new Date(n.currentYear,n.currentMonth,1);r.setMonth(n.currentMonth+t),e.appendChild(C(r.getFullYear(),r.getMonth()))}n.daysContainer.appendChild(e),n.days=n.daysContainer.firstChild,"range"===n.config.mode&&1===n.selectedDates.length&&Y()}}function A(){if(!(n.config.showMonths>1||"dropdown"!==n.config.monthSelectorType)){var e=function(e){return!(void 0!==n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&e<n.config.minDate.getMonth())&&!(void 0!==n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()&&e>n.config.maxDate.getMonth())};n.monthsDropdownContainer.tabIndex=-1,n.monthsDropdownContainer.innerHTML="";for(var t=0;t<12;t++)if(e(t)){var r=la("option","flatpickr-monthDropdown-month");r.value=new Date(n.currentYear,t).getMonth().toString(),r.textContent=pa(t,n.config.shorthandCurrentMonth,n.l10n),r.tabIndex=-1,n.currentMonth===t&&(r.selected=!0),n.monthsDropdownContainer.appendChild(r)}}}function D(){var e,t=la("div","flatpickr-month"),r=window.document.createDocumentFragment();n.config.showMonths>1||"static"===n.config.monthSelectorType?e=la("span","cur-month"):(n.monthsDropdownContainer=la("select","flatpickr-monthDropdown-months"),n.monthsDropdownContainer.setAttribute("aria-label",n.l10n.monthAriaLabel),g(n.monthsDropdownContainer,"change",(function(e){var t=da(e),r=parseInt(t.value,10);n.changeMonth(r-n.currentMonth),ve("onMonthChange")})),A(),e=n.monthsDropdownContainer);var i=ha("cur-year",{tabindex:"-1"}),o=i.getElementsByTagName("input")[0];o.setAttribute("aria-label",n.l10n.yearAriaLabel),n.config.minDate&&o.setAttribute("min",n.config.minDate.getFullYear().toString()),n.config.maxDate&&(o.setAttribute("max",n.config.maxDate.getFullYear().toString()),o.disabled=!!n.config.minDate&&n.config.minDate.getFullYear()===n.config.maxDate.getFullYear());var s=la("div","flatpickr-current-month");return s.appendChild(e),s.appendChild(i),r.appendChild(s),t.appendChild(r),{container:t,yearElement:o,monthElement:e}}function M(){ca(n.monthNav),n.monthNav.appendChild(n.prevMonthNav),n.config.showMonths&&(n.yearElements=[],n.monthElements=[]);for(var e=n.config.showMonths;e--;){var t=D();n.yearElements.push(t.yearElement),n.monthElements.push(t.monthElement),n.monthNav.appendChild(t.container)}n.monthNav.appendChild(n.nextMonthNav)}function F(){return n.monthNav=la("div","flatpickr-months"),n.yearElements=[],n.monthElements=[],n.prevMonthNav=la("span","flatpickr-prev-month"),n.prevMonthNav.innerHTML=n.config.prevArrow,n.nextMonthNav=la("span","flatpickr-next-month"),n.nextMonthNav.innerHTML=n.config.nextArrow,M(),Object.defineProperty(n,"_hidePrevMonthArrow",{get:function(){return n.__hidePrevMonthArrow},set:function(e){n.__hidePrevMonthArrow!==e&&(aa(n.prevMonthNav,"flatpickr-disabled",e),n.__hidePrevMonthArrow=e)}}),Object.defineProperty(n,"_hideNextMonthArrow",{get:function(){return n.__hideNextMonthArrow},set:function(e){n.__hideNextMonthArrow!==e&&(aa(n.nextMonthNav,"flatpickr-disabled",e),n.__hideNextMonthArrow=e)}}),n.currentYearElement=n.yearElements[0],xe(),n.monthNav}function R(){n.calendarContainer.classList.add("hasTime"),n.config.noCalendar&&n.calendarContainer.classList.add("noCalendar");var e=Sa(n.config);n.timeContainer=la("div","flatpickr-time"),n.timeContainer.tabIndex=-1;var t=la("span","flatpickr-time-separator",":"),r=ha("flatpickr-hour",{"aria-label":n.l10n.hourAriaLabel});n.hourElement=r.getElementsByTagName("input")[0];var i=ha("flatpickr-minute",{"aria-label":n.l10n.minuteAriaLabel});if(n.minuteElement=i.getElementsByTagName("input")[0],n.hourElement.tabIndex=n.minuteElement.tabIndex=-1,n.hourElement.value=ra(n.latestSelectedDateObj?n.latestSelectedDateObj.getHours():n.config.time_24hr?e.hours:u(e.hours)),n.minuteElement.value=ra(n.latestSelectedDateObj?n.latestSelectedDateObj.getMinutes():e.minutes),n.hourElement.setAttribute("step",n.config.hourIncrement.toString()),n.minuteElement.setAttribute("step",n.config.minuteIncrement.toString()),n.hourElement.setAttribute("min",n.config.time_24hr?"0":"1"),n.hourElement.setAttribute("max",n.config.time_24hr?"23":"12"),n.hourElement.setAttribute("maxlength","2"),n.minuteElement.setAttribute("min","0"),n.minuteElement.setAttribute("max","59"),n.minuteElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(r),n.timeContainer.appendChild(t),n.timeContainer.appendChild(i),n.config.time_24hr&&n.timeContainer.classList.add("time24hr"),n.config.enableSeconds){n.timeContainer.classList.add("hasSeconds");var o=ha("flatpickr-second");n.secondElement=o.getElementsByTagName("input")[0],n.secondElement.value=ra(n.latestSelectedDateObj?n.latestSelectedDateObj.getSeconds():e.seconds),n.secondElement.setAttribute("step",n.minuteElement.getAttribute("step")),n.secondElement.setAttribute("min","0"),n.secondElement.setAttribute("max","59"),n.secondElement.setAttribute("maxlength","2"),n.timeContainer.appendChild(la("span","flatpickr-time-separator",":")),n.timeContainer.appendChild(o)}return n.config.time_24hr||(n.amPM=la("span","flatpickr-am-pm",n.l10n.amPM[ia((n.latestSelectedDateObj?n.hourElement.value:n.config.defaultHour)>11)]),n.amPM.title=n.l10n.toggleTitle,n.amPM.tabIndex=-1,n.timeContainer.appendChild(n.amPM)),n.timeContainer}function P(){n.weekdayContainer?ca(n.weekdayContainer):n.weekdayContainer=la("div","flatpickr-weekdays");for(var e=n.config.showMonths;e--;){var t=la("div","flatpickr-weekdaycontainer");n.weekdayContainer.appendChild(t)}return I(),n.weekdayContainer}function I(){if(n.weekdayContainer){var e=n.l10n.firstDayOfWeek,t=Ca(n.l10n.weekdays.shorthand);e>0&&e<t.length&&(t=Ca(t.splice(e,t.length),t.splice(0,e)));for(var r=n.config.showMonths;r--;)n.weekdayContainer.children[r].innerHTML="\n      <span class='flatpickr-weekday'>\n        "+t.join("</span><span class='flatpickr-weekday'>")+"\n      </span>\n      "}}function L(){n.calendarContainer.classList.add("hasWeeks");var e=la("div","flatpickr-weekwrapper");e.appendChild(la("span","flatpickr-weekday",n.l10n.weekAbbreviation));var t=la("div","flatpickr-weeks");return e.appendChild(t),{weekWrapper:e,weekNumbers:t}}function $(e,t){void 0===t&&(t=!0);var r=t?e:e-n.currentMonth;r<0&&!0===n._hidePrevMonthArrow||r>0&&!0===n._hideNextMonthArrow||(n.currentMonth+=r,(n.currentMonth<0||n.currentMonth>11)&&(n.currentYear+=n.currentMonth>11?1:-1,n.currentMonth=(n.currentMonth+12)%12,ve("onYearChange"),A()),T(),ve("onMonthChange"),xe())}function N(e,t){if(void 0===e&&(e=!0),void 0===t&&(t=!0),n.input.value="",void 0!==n.altInput&&(n.altInput.value=""),void 0!==n.mobileInput&&(n.mobileInput.value=""),n.selectedDates=[],n.latestSelectedDateObj=void 0,!0===t&&(n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth()),!0===n.config.enableTime){var r=Sa(n.config),i=r.hours,o=r.minutes,s=r.seconds;f(i,o,s)}n.redraw(),e&&ve("onChange")}function j(){n.isOpen=!1,n.isMobile||(void 0!==n.calendarContainer&&n.calendarContainer.classList.remove("open"),void 0!==n._input&&n._input.classList.remove("active")),ve("onClose")}function B(){void 0!==n.config&&ve("onDestroy");for(var e=n._handlers.length;e--;)n._handlers[e].remove();if(n._handlers=[],n.mobileInput)n.mobileInput.parentNode&&n.mobileInput.parentNode.removeChild(n.mobileInput),n.mobileInput=void 0;else if(n.calendarContainer&&n.calendarContainer.parentNode)if(n.config.static&&n.calendarContainer.parentNode){var t=n.calendarContainer.parentNode;if(t.lastChild&&t.removeChild(t.lastChild),t.parentNode){while(t.firstChild)t.parentNode.insertBefore(t.firstChild,t);t.parentNode.removeChild(t)}}else n.calendarContainer.parentNode.removeChild(n.calendarContainer);n.altInput&&(n.input.type="text",n.altInput.parentNode&&n.altInput.parentNode.removeChild(n.altInput),delete n.altInput),n.input&&(n.input.type=n.input._type,n.input.classList.remove("flatpickr-input"),n.input.removeAttribute("readonly")),["_showTimeInput","latestSelectedDateObj","_hideNextMonthArrow","_hidePrevMonthArrow","__hideNextMonthArrow","__hidePrevMonthArrow","isMobile","isOpen","selectedDateElem","minDateHasTime","maxDateHasTime","days","daysContainer","_input","_positionElement","innerContainer","rContainer","monthNav","todayDateElem","calendarContainer","weekdayContainer","prevMonthNav","nextMonthNav","monthsDropdownContainer","currentMonthElement","currentYearElement","navigationCurrentMonth","selectedDateElem","config"].forEach((function(e){try{delete n[e]}catch(Re){}}))}function V(e){return n.calendarContainer.contains(e)}function q(e){if(n.isOpen&&!n.config.inline){var t=da(e),r=V(t),i=t===n.input||t===n.altInput||n.element.contains(t)||e.path&&e.path.indexOf&&(~e.path.indexOf(n.input)||~e.path.indexOf(n.altInput)),o=!i&&!r&&!V(e.relatedTarget),s=!n.config.ignoredFocusElements.some((function(e){return e.contains(t)}));o&&s&&(n.config.allowInput&&n.setDate(n._input.value,!1,n.config.altInput?n.config.altFormat:n.config.dateFormat),void 0!==n.timeContainer&&void 0!==n.minuteElement&&void 0!==n.hourElement&&""!==n.input.value&&void 0!==n.input.value&&l(),n.close(),n.config&&"range"===n.config.mode&&1===n.selectedDates.length&&n.clear(!1))}}function z(e){if(!(!e||n.config.minDate&&e<n.config.minDate.getFullYear()||n.config.maxDate&&e>n.config.maxDate.getFullYear())){var t=e,r=n.currentYear!==t;n.currentYear=t||n.currentYear,n.config.maxDate&&n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth=Math.min(n.config.maxDate.getMonth(),n.currentMonth):n.config.minDate&&n.currentYear===n.config.minDate.getFullYear()&&(n.currentMonth=Math.max(n.config.minDate.getMonth(),n.currentMonth)),r&&(n.redraw(),ve("onYearChange"),A())}}function H(e,t){var r;void 0===t&&(t=!0);var i=n.parseDate(e,void 0,t);if(n.config.minDate&&i&&wa(i,n.config.minDate,void 0!==t?t:!n.minDateHasTime)<0||n.config.maxDate&&i&&wa(i,n.config.maxDate,void 0!==t?t:!n.maxDateHasTime)>0)return!1;if(!n.config.enable&&0===n.config.disable.length)return!0;if(void 0===i)return!1;for(var o=!!n.config.enable,s=null!==(r=n.config.enable)&&void 0!==r?r:n.config.disable,a=0,l=void 0;a<s.length;a++){if(l=s[a],"function"===typeof l&&l(i))return o;if(l instanceof Date&&void 0!==i&&l.getTime()===i.getTime())return o;if("string"===typeof l){var c=n.parseDate(l,void 0,!0);return c&&c.getTime()===i.getTime()?o:!o}if("object"===typeof l&&void 0!==i&&l.from&&l.to&&i.getTime()>=l.from.getTime()&&i.getTime()<=l.to.getTime())return o}return!o}function W(e){return void 0!==n.daysContainer&&(-1===e.className.indexOf("hidden")&&-1===e.className.indexOf("flatpickr-disabled")&&n.daysContainer.contains(e))}function Q(e){var t=e.target===n._input,r=n._input.value.trimEnd()!==ke();!t||!r||e.relatedTarget&&V(e.relatedTarget)||n.setDate(n._input.value,!0,e.target===n.altInput?n.config.altFormat:n.config.dateFormat)}function U(t){var r=da(t),i=n.config.wrap?e.contains(r):r===n._input,s=n.config.allowInput,a=n.isOpen&&(!s||!i),c=n.config.inline&&i&&!s;if(13===t.keyCode&&i){if(s)return n.setDate(n._input.value,!0,r===n.altInput?n.config.altFormat:n.config.dateFormat),n.close(),r.blur();n.open()}else if(V(r)||a||c){var u=!!n.timeContainer&&n.timeContainer.contains(r);switch(t.keyCode){case 13:u?(t.preventDefault(),l(),oe()):se(t);break;case 27:t.preventDefault(),oe();break;case 8:case 46:i&&!n.config.allowInput&&(t.preventDefault(),n.clear());break;case 37:case 39:if(u||i)n.hourElement&&n.hourElement.focus();else{t.preventDefault();var d=o();if(void 0!==n.daysContainer&&(!1===s||d&&W(d))){var f=39===t.keyCode?1:-1;t.ctrlKey?(t.stopPropagation(),$(f),E(O(1),0)):E(void 0,f)}}break;case 38:case 40:t.preventDefault();var p=40===t.keyCode?1:-1;n.daysContainer&&void 0!==r.$i||r===n.input||r===n.altInput?t.ctrlKey?(t.stopPropagation(),z(n.currentYear-p),E(O(1),0)):u||E(void 0,7*p):r===n.currentYearElement?z(n.currentYear-p):n.config.enableTime&&(!u&&n.hourElement&&n.hourElement.focus(),l(t),n._debouncedChange());break;case 9:if(u){var g=[n.hourElement,n.minuteElement,n.secondElement,n.amPM].concat(n.pluginElements).filter((function(e){return e})),m=g.indexOf(r);if(-1!==m){var v=g[m+(t.shiftKey?-1:1)];t.preventDefault(),(v||n._input).focus()}}else!n.config.noCalendar&&n.daysContainer&&n.daysContainer.contains(r)&&t.shiftKey&&(t.preventDefault(),n._input.focus());break;default:break}}if(void 0!==n.amPM&&r===n.amPM)switch(t.key){case n.l10n.amPM[0].charAt(0):case n.l10n.amPM[0].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[0],h(),_e();break;case n.l10n.amPM[1].charAt(0):case n.l10n.amPM[1].charAt(0).toLowerCase():n.amPM.textContent=n.l10n.amPM[1],h(),_e();break}(i||V(r))&&ve("onKeyDown",t)}function Y(e,t){if(void 0===t&&(t="flatpickr-day"),1===n.selectedDates.length&&(!e||e.classList.contains(t)&&!e.classList.contains("flatpickr-disabled"))){for(var r=e?e.dateObj.getTime():n.days.firstElementChild.dateObj.getTime(),i=n.parseDate(n.selectedDates[0],void 0,!0).getTime(),o=Math.min(r,n.selectedDates[0].getTime()),s=Math.max(r,n.selectedDates[0].getTime()),a=!1,l=0,c=0,u=o;u<s;u+=Oa.DAY)H(new Date(u),!0)||(a=a||u>o&&u<s,u<i&&(!l||u>l)?l=u:u>i&&(!c||u<c)&&(c=u));var h=Array.from(n.rContainer.querySelectorAll("*:nth-child(-n+"+n.config.showMonths+") > ."+t));h.forEach((function(t){var o=t.dateObj,s=o.getTime(),u=l>0&&s<l||c>0&&s>c;if(u)return t.classList.add("notAllowed"),void["inRange","startRange","endRange"].forEach((function(e){t.classList.remove(e)}));a&&!u||(["startRange","inRange","endRange","notAllowed"].forEach((function(e){t.classList.remove(e)})),void 0!==e&&(e.classList.add(r<=n.selectedDates[0].getTime()?"startRange":"endRange"),i<r&&s===i?t.classList.add("startRange"):i>r&&s===i&&t.classList.add("endRange"),s>=l&&(0===c||s<=c)&&xa(s,i,r)&&t.classList.add("inRange")))}))}}function X(){!n.isOpen||n.config.static||n.config.inline||te()}function Z(e,t){if(void 0===t&&(t=n._positionElement),!0===n.isMobile){if(e){e.preventDefault();var r=da(e);r&&r.blur()}return void 0!==n.mobileInput&&(n.mobileInput.focus(),n.mobileInput.click()),void ve("onOpen")}if(!n._input.disabled&&!n.config.inline){var i=n.isOpen;n.isOpen=!0,i||(n.calendarContainer.classList.add("open"),n._input.classList.add("active"),ve("onOpen"),te(t)),!0===n.config.enableTime&&!0===n.config.noCalendar&&(!1!==n.config.allowInput||void 0!==e&&n.timeContainer.contains(e.relatedTarget)||setTimeout((function(){return n.hourElement.select()}),50))}}function G(e){return function(t){var r=n.config["_"+e+"Date"]=n.parseDate(t,n.config.dateFormat),i=n.config["_"+("min"===e?"max":"min")+"Date"];void 0!==r&&(n["min"===e?"minDateHasTime":"maxDateHasTime"]=r.getHours()>0||r.getMinutes()>0||r.getSeconds()>0),n.selectedDates&&(n.selectedDates=n.selectedDates.filter((function(e){return H(e)})),n.selectedDates.length||"min"!==e||d(r),_e()),n.daysContainer&&(ie(),void 0!==r?n.currentYearElement[e]=r.getFullYear().toString():n.currentYearElement.removeAttribute(e),n.currentYearElement.disabled=!!i&&void 0!==r&&i.getFullYear()===r.getFullYear())}}function K(){var r=["wrap","weekNumbers","allowInput","allowInvalidPreload","clickOpens","time_24hr","enableTime","noCalendar","altInput","shorthandCurrentMonth","inline","static","enableSeconds","disableMobile"],i=Ea(Ea({},JSON.parse(JSON.stringify(e.dataset||{}))),t),o={};n.config.parseDate=i.parseDate,n.config.formatDate=i.formatDate,Object.defineProperty(n.config,"enable",{get:function(){return n.config._enable},set:function(e){n.config._enable=he(e)}}),Object.defineProperty(n.config,"disable",{get:function(){return n.config._disable},set:function(e){n.config._disable=he(e)}});var a="time"===i.mode;if(!i.dateFormat&&(i.enableTime||a)){var l=Ma.defaultConfig.dateFormat||ea.dateFormat;o.dateFormat=i.noCalendar||a?"H:i"+(i.enableSeconds?":S":""):l+" H:i"+(i.enableSeconds?":S":"")}if(i.altInput&&(i.enableTime||a)&&!i.altFormat){var c=Ma.defaultConfig.altFormat||ea.altFormat;o.altFormat=i.noCalendar||a?"h:i"+(i.enableSeconds?":S K":" K"):c+" h:i"+(i.enableSeconds?":S":"")+" K"}Object.defineProperty(n.config,"minDate",{get:function(){return n.config._minDate},set:G("min")}),Object.defineProperty(n.config,"maxDate",{get:function(){return n.config._maxDate},set:G("max")});var u=function(e){return function(t){n.config["min"===e?"_minTime":"_maxTime"]=n.parseDate(t,"H:i:S")}};Object.defineProperty(n.config,"minTime",{get:function(){return n.config._minTime},set:u("min")}),Object.defineProperty(n.config,"maxTime",{get:function(){return n.config._maxTime},set:u("max")}),"time"===i.mode&&(n.config.noCalendar=!0,n.config.enableTime=!0),Object.assign(n.config,o,i);for(var h=0;h<r.length;h++)n.config[r[h]]=!0===n.config[r[h]]||"true"===n.config[r[h]];Js.filter((function(e){return void 0!==n.config[e]})).forEach((function(e){n.config[e]=sa(n.config[e]||[]).map(s)})),n.isMobile=!n.config.disableMobile&&!n.config.inline&&"single"===n.config.mode&&!n.config.disable.length&&!n.config.enable&&!n.config.weekNumbers&&/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent);for(h=0;h<n.config.plugins.length;h++){var d=n.config.plugins[h](n)||{};for(var f in d)Js.indexOf(f)>-1?n.config[f]=sa(d[f]).map(s).concat(n.config[f]):"undefined"===typeof i[f]&&(n.config[f]=d[f])}i.altInputClass||(n.config.altInputClass=J().className+" "+n.config.altInputClass),ve("onParseConfig")}function J(){return n.config.wrap?e.querySelector("[data-input]"):e}function ee(){"object"!==typeof n.config.locale&&"undefined"===typeof Ma.l10ns[n.config.locale]&&n.config.errorHandler(new Error("flatpickr: invalid locale "+n.config.locale)),n.l10n=Ea(Ea({},Ma.l10ns.default),"object"===typeof n.config.locale?n.config.locale:"default"!==n.config.locale?Ma.l10ns[n.config.locale]:void 0),ma.D="("+n.l10n.weekdays.shorthand.join("|")+")",ma.l="("+n.l10n.weekdays.longhand.join("|")+")",ma.M="("+n.l10n.months.shorthand.join("|")+")",ma.F="("+n.l10n.months.longhand.join("|")+")",ma.K="("+n.l10n.amPM[0]+"|"+n.l10n.amPM[1]+"|"+n.l10n.amPM[0].toLowerCase()+"|"+n.l10n.amPM[1].toLowerCase()+")";var r=Ea(Ea({},t),JSON.parse(JSON.stringify(e.dataset||{})));void 0===r.time_24hr&&void 0===Ma.defaultConfig.time_24hr&&(n.config.time_24hr=n.l10n.time_24hr),n.formatDate=ya(n),n.parseDate=ba({config:n.config,l10n:n.l10n})}function te(e){if("function"!==typeof n.config.position){if(void 0!==n.calendarContainer){ve("onPreCalendarPosition");var t=e||n._positionElement,r=Array.prototype.reduce.call(n.calendarContainer.children,(function(e,t){return e+t.offsetHeight}),0),i=n.calendarContainer.offsetWidth,o=n.config.position.split(" "),s=o[0],a=o.length>1?o[1]:null,l=t.getBoundingClientRect(),c=window.innerHeight-l.bottom,u="above"===s||"below"!==s&&c<r&&l.top>r,h=window.pageYOffset+l.top+(u?-r-2:t.offsetHeight+2);if(aa(n.calendarContainer,"arrowTop",!u),aa(n.calendarContainer,"arrowBottom",u),!n.config.inline){var d=window.pageXOffset+l.left,f=!1,p=!1;"center"===a?(d-=(i-l.width)/2,f=!0):"right"===a&&(d-=i-l.width,p=!0),aa(n.calendarContainer,"arrowLeft",!f&&!p),aa(n.calendarContainer,"arrowCenter",f),aa(n.calendarContainer,"arrowRight",p);var g=window.document.body.offsetWidth-(window.pageXOffset+l.right),m=d+i>window.document.body.offsetWidth,v=g+i>window.document.body.offsetWidth;if(aa(n.calendarContainer,"rightMost",m),!n.config.static)if(n.calendarContainer.style.top=h+"px",m)if(v){var y=ne();if(void 0===y)return;var b=window.document.body.offsetWidth,w=Math.max(0,b/2-i/2),x=".flatpickr-calendar.centerMost:before",k=".flatpickr-calendar.centerMost:after",_=y.cssRules.length,O="{left:"+l.left+"px;right:auto;}";aa(n.calendarContainer,"rightMost",!1),aa(n.calendarContainer,"centerMost",!0),y.insertRule(x+","+k+O,_),n.calendarContainer.style.left=w+"px",n.calendarContainer.style.right="auto"}else n.calendarContainer.style.left="auto",n.calendarContainer.style.right=g+"px";else n.calendarContainer.style.left=d+"px",n.calendarContainer.style.right="auto"}}}else n.config.position(n,e)}function ne(){for(var e=null,t=0;t<document.styleSheets.length;t++){var n=document.styleSheets[t];if(n.cssRules){try{n.cssRules}catch(r){continue}e=n;break}}return null!=e?e:re()}function re(){var e=document.createElement("style");return document.head.appendChild(e),e.sheet}function ie(){n.config.noCalendar||n.isMobile||(A(),xe(),T())}function oe(){n._input.focus(),-1!==window.navigator.userAgent.indexOf("MSIE")||void 0!==navigator.msMaxTouchPoints?setTimeout(n.close,0):n.close()}function se(e){e.preventDefault(),e.stopPropagation();var t=function(e){return e.classList&&e.classList.contains("flatpickr-day")&&!e.classList.contains("flatpickr-disabled")&&!e.classList.contains("notAllowed")},r=ua(da(e),t);if(void 0!==r){var i=r,o=n.latestSelectedDateObj=new Date(i.dateObj.getTime()),s=(o.getMonth()<n.currentMonth||o.getMonth()>n.currentMonth+n.config.showMonths-1)&&"range"!==n.config.mode;if(n.selectedDateElem=i,"single"===n.config.mode)n.selectedDates=[o];else if("multiple"===n.config.mode){var a=be(o);a?n.selectedDates.splice(parseInt(a),1):n.selectedDates.push(o)}else"range"===n.config.mode&&(2===n.selectedDates.length&&n.clear(!1,!1),n.latestSelectedDateObj=o,n.selectedDates.push(o),0!==wa(o,n.selectedDates[0],!0)&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()})));if(h(),s){var l=n.currentYear!==o.getFullYear();n.currentYear=o.getFullYear(),n.currentMonth=o.getMonth(),l&&(ve("onYearChange"),A()),ve("onMonthChange")}if(xe(),T(),_e(),s||"range"===n.config.mode||1!==n.config.showMonths?void 0!==n.selectedDateElem&&void 0===n.hourElement&&n.selectedDateElem&&n.selectedDateElem.focus():_(i),void 0!==n.hourElement&&void 0!==n.hourElement&&n.hourElement.focus(),n.config.closeOnSelect){var c="single"===n.config.mode&&!n.config.enableTime,u="range"===n.config.mode&&2===n.selectedDates.length&&!n.config.enableTime;(c||u)&&oe()}m()}}n.parseDate=ba({config:n.config,l10n:n.l10n}),n._handlers=[],n.pluginElements=[],n.loadedPlugins=[],n._bind=g,n._setHoursFromDate=d,n._positionCalendar=te,n.changeMonth=$,n.changeYear=z,n.clear=N,n.close=j,n.onMouseOver=Y,n._createElement=la,n.createDay=k,n.destroy=B,n.isEnabled=H,n.jumpToDate=y,n.updateValue=_e,n.open=Z,n.redraw=ie,n.set=le,n.setDate=ue,n.toggle=me;var ae={locale:[ee,I],showMonths:[M,a,P],minDate:[y],maxDate:[y],positionElement:[pe],clickOpens:[function(){!0===n.config.clickOpens?(g(n._input,"focus",n.open),g(n._input,"click",n.open)):(n._input.removeEventListener("focus",n.open),n._input.removeEventListener("click",n.open))}]};function le(e,t){if(null!==e&&"object"===typeof e)for(var r in Object.assign(n.config,e),e)void 0!==ae[r]&&ae[r].forEach((function(e){return e()}));else n.config[e]=t,void 0!==ae[e]?ae[e].forEach((function(e){return e()})):Js.indexOf(e)>-1&&(n.config[e]=sa(t));n.redraw(),_e(!0)}function ce(e,t){var r=[];if(e instanceof Array)r=e.map((function(e){return n.parseDate(e,t)}));else if(e instanceof Date||"number"===typeof e)r=[n.parseDate(e,t)];else if("string"===typeof e)switch(n.config.mode){case"single":case"time":r=[n.parseDate(e,t)];break;case"multiple":r=e.split(n.config.conjunction).map((function(e){return n.parseDate(e,t)}));break;case"range":r=e.split(n.l10n.rangeSeparator).map((function(e){return n.parseDate(e,t)}));break;default:break}else n.config.errorHandler(new Error("Invalid date supplied: "+JSON.stringify(e)));n.selectedDates=n.config.allowInvalidPreload?r:r.filter((function(e){return e instanceof Date&&H(e,!1)})),"range"===n.config.mode&&n.selectedDates.sort((function(e,t){return e.getTime()-t.getTime()}))}function ue(e,t,r){if(void 0===t&&(t=!1),void 0===r&&(r=n.config.dateFormat),0!==e&&!e||e instanceof Array&&0===e.length)return n.clear(t);ce(e,r),n.latestSelectedDateObj=n.selectedDates[n.selectedDates.length-1],n.redraw(),y(void 0,t),d(),0===n.selectedDates.length&&n.clear(!1),_e(t),t&&ve("onChange")}function he(e){return e.slice().map((function(e){return"string"===typeof e||"number"===typeof e||e instanceof Date?n.parseDate(e,void 0,!0):e&&"object"===typeof e&&e.from&&e.to?{from:n.parseDate(e.from,void 0),to:n.parseDate(e.to,void 0)}:e})).filter((function(e){return e}))}function de(){n.selectedDates=[],n.now=n.parseDate(n.config.now)||new Date;var e=n.config.defaultDate||("INPUT"!==n.input.nodeName&&"TEXTAREA"!==n.input.nodeName||!n.input.placeholder||n.input.value!==n.input.placeholder?n.input.value:null);e&&ce(e,n.config.dateFormat),n._initialDate=n.selectedDates.length>0?n.selectedDates[0]:n.config.minDate&&n.config.minDate.getTime()>n.now.getTime()?n.config.minDate:n.config.maxDate&&n.config.maxDate.getTime()<n.now.getTime()?n.config.maxDate:n.now,n.currentYear=n._initialDate.getFullYear(),n.currentMonth=n._initialDate.getMonth(),n.selectedDates.length>0&&(n.latestSelectedDateObj=n.selectedDates[0]),void 0!==n.config.minTime&&(n.config.minTime=n.parseDate(n.config.minTime,"H:i")),void 0!==n.config.maxTime&&(n.config.maxTime=n.parseDate(n.config.maxTime,"H:i")),n.minDateHasTime=!!n.config.minDate&&(n.config.minDate.getHours()>0||n.config.minDate.getMinutes()>0||n.config.minDate.getSeconds()>0),n.maxDateHasTime=!!n.config.maxDate&&(n.config.maxDate.getHours()>0||n.config.maxDate.getMinutes()>0||n.config.maxDate.getSeconds()>0)}function fe(){n.input=J(),n.input?(n.input._type=n.input.type,n.input.type="text",n.input.classList.add("flatpickr-input"),n._input=n.input,n.config.altInput&&(n.altInput=la(n.input.nodeName,n.config.altInputClass),n._input=n.altInput,n.altInput.placeholder=n.input.placeholder,n.altInput.disabled=n.input.disabled,n.altInput.required=n.input.required,n.altInput.tabIndex=n.input.tabIndex,n.altInput.type="text",n.input.setAttribute("type","hidden"),!n.config.static&&n.input.parentNode&&n.input.parentNode.insertBefore(n.altInput,n.input.nextSibling)),n.config.allowInput||n._input.setAttribute("readonly","readonly"),pe()):n.config.errorHandler(new Error("Invalid input element specified"))}function pe(){n._positionElement=n.config.positionElement||n._input}function ge(){var e=n.config.enableTime?n.config.noCalendar?"time":"datetime-local":"date";n.mobileInput=la("input",n.input.className+" flatpickr-mobile"),n.mobileInput.tabIndex=1,n.mobileInput.type=e,n.mobileInput.disabled=n.input.disabled,n.mobileInput.required=n.input.required,n.mobileInput.placeholder=n.input.placeholder,n.mobileFormatStr="datetime-local"===e?"Y-m-d\\TH:i:S":"date"===e?"Y-m-d":"H:i:S",n.selectedDates.length>0&&(n.mobileInput.defaultValue=n.mobileInput.value=n.formatDate(n.selectedDates[0],n.mobileFormatStr)),n.config.minDate&&(n.mobileInput.min=n.formatDate(n.config.minDate,"Y-m-d")),n.config.maxDate&&(n.mobileInput.max=n.formatDate(n.config.maxDate,"Y-m-d")),n.input.getAttribute("step")&&(n.mobileInput.step=String(n.input.getAttribute("step"))),n.input.type="hidden",void 0!==n.altInput&&(n.altInput.type="hidden");try{n.input.parentNode&&n.input.parentNode.insertBefore(n.mobileInput,n.input.nextSibling)}catch(Ck){}g(n.mobileInput,"change",(function(e){n.setDate(da(e).value,!1,n.mobileFormatStr),ve("onChange"),ve("onClose")}))}function me(e){if(!0===n.isOpen)return n.close();n.open(e)}function ve(e,t){if(void 0!==n.config){var r=n.config[e];if(void 0!==r&&r.length>0)for(var i=0;r[i]&&i<r.length;i++)r[i](n.selectedDates,n.input.value,n,t);"onChange"===e&&(n.input.dispatchEvent(ye("change")),n.input.dispatchEvent(ye("input")))}}function ye(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t}function be(e){for(var t=0;t<n.selectedDates.length;t++){var r=n.selectedDates[t];if(r instanceof Date&&0===wa(r,e))return""+t}return!1}function we(e){return!("range"!==n.config.mode||n.selectedDates.length<2)&&(wa(e,n.selectedDates[0])>=0&&wa(e,n.selectedDates[1])<=0)}function xe(){n.config.noCalendar||n.isMobile||!n.monthNav||(n.yearElements.forEach((function(e,t){var r=new Date(n.currentYear,n.currentMonth,1);r.setMonth(n.currentMonth+t),n.config.showMonths>1||"static"===n.config.monthSelectorType?n.monthElements[t].textContent=pa(r.getMonth(),n.config.shorthandCurrentMonth,n.l10n)+" ":n.monthsDropdownContainer.value=r.getMonth().toString(),e.value=r.getFullYear().toString()})),n._hidePrevMonthArrow=void 0!==n.config.minDate&&(n.currentYear===n.config.minDate.getFullYear()?n.currentMonth<=n.config.minDate.getMonth():n.currentYear<n.config.minDate.getFullYear()),n._hideNextMonthArrow=void 0!==n.config.maxDate&&(n.currentYear===n.config.maxDate.getFullYear()?n.currentMonth+1>n.config.maxDate.getMonth():n.currentYear>n.config.maxDate.getFullYear()))}function ke(e){var t=e||(n.config.altInput?n.config.altFormat:n.config.dateFormat);return n.selectedDates.map((function(e){return n.formatDate(e,t)})).filter((function(e,t,r){return"range"!==n.config.mode||n.config.enableTime||r.indexOf(e)===t})).join("range"!==n.config.mode?n.config.conjunction:n.l10n.rangeSeparator)}function _e(e){void 0===e&&(e=!0),void 0!==n.mobileInput&&n.mobileFormatStr&&(n.mobileInput.value=void 0!==n.latestSelectedDateObj?n.formatDate(n.latestSelectedDateObj,n.mobileFormatStr):""),n.input.value=ke(n.config.dateFormat),void 0!==n.altInput&&(n.altInput.value=ke(n.config.altFormat)),!1!==e&&ve("onValueUpdate")}function Oe(e){var t=da(e),r=n.prevMonthNav.contains(t),i=n.nextMonthNav.contains(t);r||i?$(r?-1:1):n.yearElements.indexOf(t)>=0?t.select():t.classList.contains("arrowUp")?n.changeYear(n.currentYear+1):t.classList.contains("arrowDown")&&n.changeYear(n.currentYear-1)}function Se(e){e.preventDefault();var t="keydown"===e.type,r=da(e),i=r;void 0!==n.amPM&&r===n.amPM&&(n.amPM.textContent=n.l10n.amPM[ia(n.amPM.textContent===n.l10n.amPM[0])]);var o=parseFloat(i.getAttribute("min")),s=parseFloat(i.getAttribute("max")),a=parseFloat(i.getAttribute("step")),l=parseInt(i.value,10),c=e.delta||(t?38===e.which?1:-1:0),u=l+a*c;if("undefined"!==typeof i.value&&2===i.value.length){var h=i===n.hourElement,d=i===n.minuteElement;u<o?(u=s+u+ia(!h)+(ia(h)&&ia(!n.amPM)),d&&w(void 0,-1,n.hourElement)):u>s&&(u=i===n.hourElement?u-s-ia(!n.amPM):o,d&&w(void 0,1,n.hourElement)),n.amPM&&h&&(1===a?u+l===23:Math.abs(u-l)>a)&&(n.amPM.textContent=n.l10n.amPM[ia(n.amPM.textContent===n.l10n.amPM[0])]),i.value=ra(u)}}return i(),n}function Da(e,t){for(var n=Array.prototype.slice.call(e).filter((function(e){return e instanceof HTMLElement})),r=[],i=0;i<n.length;i++){var o=n[i];try{if(null!==o.getAttribute("data-fp-omit"))continue;void 0!==o._flatpickr&&(o._flatpickr.destroy(),o._flatpickr=void 0),o._flatpickr=Aa(o,t||{}),r.push(o._flatpickr)}catch(s){console.error(s)}}return 1===r.length?r[0]:r}"undefined"!==typeof HTMLElement&&"undefined"!==typeof HTMLCollection&&"undefined"!==typeof NodeList&&(HTMLCollection.prototype.flatpickr=NodeList.prototype.flatpickr=function(e){return Da(this,e)},HTMLElement.prototype.flatpickr=function(e){return Da([this],e)});var Ma=function(e,t){return"string"===typeof e?Da(window.document.querySelectorAll(e),t):e instanceof Node?Da([e],t):Da(e,t)};Ma.defaultConfig={},Ma.l10ns={en:Ea({},na),default:Ea({},na)},Ma.localize=function(e){Ma.l10ns.default=Ea(Ea({},Ma.l10ns.default),e)},Ma.setDefaults=function(e){Ma.defaultConfig=Ea(Ea({},Ma.defaultConfig),e)},Ma.parseDate=ba({}),Ma.formatDate=ya({}),Ma.compareDates=wa,"undefined"!==typeof jQuery&&"undefined"!==typeof jQuery.fn&&(jQuery.fn.flatpickr=function(e){return Da(this,e)}),Date.prototype.fp_incr=function(e){return new Date(this.getFullYear(),this.getMonth(),this.getDate()+("string"===typeof e?parseInt(e,10):e))},"undefined"!==typeof window&&(window.flatpickr=Ma);var Fa=Ma;function Ra(e,t){for(var n in e)if("__source"!==n&&!(n in t))return!0;for(var r in t)if("__source"!==r&&e[r]!==t[r])return!0;return!1}function Pa(e,t){this.props=e,this.context=t}(Pa.prototype=new Le).isPureReactComponent=!0,Pa.prototype.shouldComponentUpdate=function(e,t){return Ra(this.props,e)||Ra(this.state,t)};var Ia=fe.__b;fe.__b=function(e){e.type&&e.type.__f&&e.ref&&(e.props.ref=e.ref,e.ref=null),Ia&&Ia(e)};var La="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.forward_ref")||3911;function $a(e){function t(t){if(!("ref"in t))return e(t,null);var n=t.ref;delete t.ref;var r=e(t,n);return t.ref=n,r}return t.$$typeof=La,t.render=t,t.prototype.isReactComponent=t.__f=!0,t.displayName="ForwardRef("+(e.displayName||e.name)+")",t}var Na=fe.__e;fe.__e=function(e,t,n,r){if(e.then)for(var i,o=t;o=o.__;)if((i=o.__c)&&i.__c)return null==t.__e&&(t.__e=n.__e,t.__k=n.__k),i.__c(e,t);Na(e,t,n,r)};var ja=fe.unmount;function Ba(e,t,n){return e&&(e.__c&&e.__c.__H&&(e.__c.__H.__.forEach((function(e){"function"==typeof e.__c&&e.__c()})),e.__c.__H=null),null!=(e=function(e,t){for(var n in t)e[n]=t[n];return e}({},e)).__c&&(e.__c.__P===n&&(e.__c.__P=t),e.__c=null),e.__k=e.__k&&e.__k.map((function(e){return Ba(e,t,n)}))),e}function Va(e,t,n){return e&&n&&(e.__v=null,e.__k=e.__k&&e.__k.map((function(e){return Va(e,t,n)})),e.__c&&e.__c.__P===t&&(e.__e&&n.appendChild(e.__e),e.__c.__e=!0,e.__c.__P=n)),e}function qa(){this.__u=0,this.t=null,this.__b=null}function za(e){var t=e.__.__c;return t&&t.__a&&t.__a(e)}function Ha(){this.u=null,this.o=null}fe.unmount=function(e){var t=e.__c;t&&t.__R&&t.__R(),t&&32&e.__u&&(e.type=null),ja&&ja(e)},(qa.prototype=new Le).__c=function(e,t){var n=t.__c,r=this;null==r.t&&(r.t=[]),r.t.push(n);var i=za(r.__v),o=!1,s=function(){o||(o=!0,n.__R=null,i?i(a):a())};n.__R=s;var a=function(){if(! --r.__u){if(r.state.__a){var e=r.state.__a;r.__v.__k[0]=Va(e,e.__c.__P,e.__c.__O)}var t;for(r.setState({__a:r.__b=null});t=r.t.pop();)t.forceUpdate()}};r.__u++||32&t.__u||r.setState({__a:r.__b=r.__v.__k[0]}),e.then(s,s)},qa.prototype.componentWillUnmount=function(){this.t=[]},qa.prototype.render=function(e,t){if(this.__b){if(this.__v.__k){var n=document.createElement("div"),r=this.__v.__k[0].__c;this.__v.__k[0]=Ba(this.__b,n,r.__O=r.__P)}this.__b=null}var i=t.__a&&Re(Ie,null,e.fallback);return i&&(i.__u&=-33),[Re(Ie,null,t.__a?null:e.children),i]};var Wa=function(e,t,n){if(++n[1]===n[0]&&e.o.delete(t),e.props.revealOrder&&("t"!==e.props.revealOrder[0]||!e.o.size))for(n=e.u;n;){for(;n.length>3;)n.pop()();if(n[1]<n[0])break;e.u=n=n[2]}};function Qa(e){return this.getChildContext=function(){return e.context},e.children}function Ua(e){var t=this,n=e.i;t.componentWillUnmount=function(){tt(null,t.l),t.l=null,t.i=null},t.i&&t.i!==n&&t.componentWillUnmount(),t.l||(t.i=n,t.l={nodeType:1,parentNode:n,childNodes:[],contains:function(){return!0},appendChild:function(e){this.childNodes.push(e),t.i.appendChild(e)},insertBefore:function(e,n){this.childNodes.push(e),t.i.appendChild(e)},removeChild:function(e){this.childNodes.splice(this.childNodes.indexOf(e)>>>1,1),t.i.removeChild(e)}}),tt(Re(Qa,{context:t.context},e.__v),t.l)}function Ya(e,t){var n=Re(Ua,{__v:e,i:t});return n.containerInfo=t,n}(Ha.prototype=new Le).__a=function(e){var t=this,n=za(t.__v),r=t.o.get(e);return r[0]++,function(i){var o=function(){t.props.revealOrder?(r.push(i),Wa(t,e,r)):i()};n?n(o):o()}},Ha.prototype.render=function(e){this.u=null,this.o=new Map;var t=He(e.children);e.revealOrder&&"b"===e.revealOrder[0]&&t.reverse();for(var n=t.length;n--;)this.o.set(t[n],this.u=[1,0,this.u]);return e.children},Ha.prototype.componentDidUpdate=Ha.prototype.componentDidMount=function(){var e=this;this.o.forEach((function(t,n){Wa(e,n,t)}))};var Xa="undefined"!=typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103,Za=/^(?:accent|alignment|arabic|baseline|cap|clip(?!PathU)|color|dominant|fill|flood|font|glyph(?!R)|horiz|image(!S)|letter|lighting|marker(?!H|W|U)|overline|paint|pointer|shape|stop|strikethrough|stroke|text(?!L)|transform|underline|unicode|units|v|vector|vert|word|writing|x(?!C))[A-Z]/,Ga=/^on(Ani|Tra|Tou|BeforeInp|Compo)/,Ka=/[A-Z0-9]/g,Ja="undefined"!=typeof document,el=function(e){return("undefined"!=typeof Symbol&&"symbol"==typeof Symbol()?/fil|che|rad/:/fil|che|ra/).test(e)};Le.prototype.isReactComponent={},["componentWillMount","componentWillReceiveProps","componentWillUpdate"].forEach((function(e){Object.defineProperty(Le.prototype,e,{configurable:!0,get:function(){return this["UNSAFE_"+e]},set:function(t){Object.defineProperty(this,e,{configurable:!0,writable:!0,value:t})}})}));var tl=fe.event;function nl(){}function rl(){return this.cancelBubble}function il(){return this.defaultPrevented}fe.event=function(e){return tl&&(e=tl(e)),e.persist=nl,e.isPropagationStopped=rl,e.isDefaultPrevented=il,e.nativeEvent=e};var ol={enumerable:!1,configurable:!0,get:function(){return this.class}},sl=fe.vnode;fe.vnode=function(e){"string"==typeof e.type&&function(e){var t=e.props,n=e.type,r={},i=-1===n.indexOf("-");for(var o in t){var s=t[o];if(!("value"===o&&"defaultValue"in t&&null==s||Ja&&"children"===o&&"noscript"===n||"class"===o||"className"===o)){var a=o.toLowerCase();"defaultValue"===o&&"value"in t&&null==t.value?o="value":"download"===o&&!0===s?s="":"translate"===a&&"no"===s?s=!1:"o"===a[0]&&"n"===a[1]?"ondoubleclick"===a?o="ondblclick":"onchange"!==a||"input"!==n&&"textarea"!==n||el(t.type)?"onfocus"===a?o="onfocusin":"onblur"===a?o="onfocusout":Ga.test(o)&&(o=a):a=o="oninput":i&&Za.test(o)?o=o.replace(Ka,"-$&").toLowerCase():null===s&&(s=void 0),"oninput"===a&&r[o=a]&&(o="oninputCapture"),r[o]=s}}"select"==n&&r.multiple&&Array.isArray(r.value)&&(r.value=He(t.children).forEach((function(e){e.props.selected=-1!=r.value.indexOf(e.props.value)}))),"select"==n&&null!=r.defaultValue&&(r.value=He(t.children).forEach((function(e){e.props.selected=r.multiple?-1!=r.defaultValue.indexOf(e.props.value):r.defaultValue==e.props.value}))),t.class&&!t.className?(r.class=t.class,Object.defineProperty(r,"className",ol)):(t.className&&!t.class||t.class&&t.className)&&(r.class=r.className=t.className),e.props=r}(e),e.$$typeof=Xa,sl&&sl(e)};var al=fe.__r;fe.__r=function(e){al&&al(e),e.__c};var ll=fe.diffed;fe.diffed=function(e){ll&&ll(e);var t=e.props,n=e.__e;null!=n&&"textarea"===e.type&&"value"in t&&t.value!==n.value&&(n.value=null==t.value?"":t.value)};
/*! @license DOMPurify 3.2.0 | (c) Cure53 and other contributors | Released under the Apache license 2.0 and Mozilla Public License 2.0 | github.com/cure53/DOMPurify/blob/3.2.0/LICENSE */
const{entries:cl,setPrototypeOf:ul,isFrozen:hl,getPrototypeOf:dl,getOwnPropertyDescriptor:fl}=Object;let{freeze:pl,seal:gl,create:ml}=Object,{apply:vl,construct:yl}="undefined"!==typeof Reflect&&Reflect;pl||(pl=function(e){return e}),gl||(gl=function(e){return e}),vl||(vl=function(e,t,n){return e.apply(t,n)}),yl||(yl=function(e,t){return new e(...t)});const bl=Ml(Array.prototype.forEach),wl=Ml(Array.prototype.pop),xl=Ml(Array.prototype.push),kl=Ml(String.prototype.toLowerCase),_l=Ml(String.prototype.toString),Ol=Ml(String.prototype.match),Sl=Ml(String.prototype.replace),El=Ml(String.prototype.indexOf),Cl=Ml(String.prototype.trim),Tl=Ml(Object.prototype.hasOwnProperty),Al=Ml(RegExp.prototype.test),Dl=Fl(TypeError);function Ml(e){return function(t){for(var n=arguments.length,r=new Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return vl(e,t,r)}}function Fl(e){return function(){for(var t=arguments.length,n=new Array(t),r=0;r<t;r++)n[r]=arguments[r];return yl(e,n)}}function Rl(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:kl;ul&&ul(e,null);let r=t.length;while(r--){let i=t[r];if("string"===typeof i){const e=n(i);e!==i&&(hl(t)||(t[r]=e),i=e)}e[i]=!0}return e}function Pl(e){for(let t=0;t<e.length;t++){const n=Tl(e,t);n||(e[t]=null)}return e}function Il(e){const t=ml(null);for(const[n,r]of cl(e)){const i=Tl(e,n);i&&(Array.isArray(r)?t[n]=Pl(r):r&&"object"===typeof r&&r.constructor===Object?t[n]=Il(r):t[n]=r)}return t}function Ll(e,t){while(null!==e){const n=fl(e,t);if(n){if(n.get)return Ml(n.get);if("function"===typeof n.value)return Ml(n.value)}e=dl(e)}function n(){return null}return n}const $l=pl(["a","abbr","acronym","address","area","article","aside","audio","b","bdi","bdo","big","blink","blockquote","body","br","button","canvas","caption","center","cite","code","col","colgroup","content","data","datalist","dd","decorator","del","details","dfn","dialog","dir","div","dl","dt","element","em","fieldset","figcaption","figure","font","footer","form","h1","h2","h3","h4","h5","h6","head","header","hgroup","hr","html","i","img","input","ins","kbd","label","legend","li","main","map","mark","marquee","menu","menuitem","meter","nav","nobr","ol","optgroup","option","output","p","picture","pre","progress","q","rp","rt","ruby","s","samp","section","select","shadow","small","source","spacer","span","strike","strong","style","sub","summary","sup","table","tbody","td","template","textarea","tfoot","th","thead","time","tr","track","tt","u","ul","var","video","wbr"]),Nl=pl(["svg","a","altglyph","altglyphdef","altglyphitem","animatecolor","animatemotion","animatetransform","circle","clippath","defs","desc","ellipse","filter","font","g","glyph","glyphref","hkern","image","line","lineargradient","marker","mask","metadata","mpath","path","pattern","polygon","polyline","radialgradient","rect","stop","style","switch","symbol","text","textpath","title","tref","tspan","view","vkern"]),jl=pl(["feBlend","feColorMatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feDropShadow","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence"]),Bl=pl(["animate","color-profile","cursor","discard","font-face","font-face-format","font-face-name","font-face-src","font-face-uri","foreignobject","hatch","hatchpath","mesh","meshgradient","meshpatch","meshrow","missing-glyph","script","set","solidcolor","unknown","use"]),Vl=pl(["math","menclose","merror","mfenced","mfrac","mglyph","mi","mlabeledtr","mmultiscripts","mn","mo","mover","mpadded","mphantom","mroot","mrow","ms","mspace","msqrt","mstyle","msub","msup","msubsup","mtable","mtd","mtext","mtr","munder","munderover","mprescripts"]),ql=pl(["maction","maligngroup","malignmark","mlongdiv","mscarries","mscarry","msgroup","mstack","msline","msrow","semantics","annotation","annotation-xml","mprescripts","none"]),zl=pl(["#text"]),Hl=pl(["accept","action","align","alt","autocapitalize","autocomplete","autopictureinpicture","autoplay","background","bgcolor","border","capture","cellpadding","cellspacing","checked","cite","class","clear","color","cols","colspan","controls","controlslist","coords","crossorigin","datetime","decoding","default","dir","disabled","disablepictureinpicture","disableremoteplayback","download","draggable","enctype","enterkeyhint","face","for","headers","height","hidden","high","href","hreflang","id","inputmode","integrity","ismap","kind","label","lang","list","loading","loop","low","max","maxlength","media","method","min","minlength","multiple","muted","name","nonce","noshade","novalidate","nowrap","open","optimum","pattern","placeholder","playsinline","popover","popovertarget","popovertargetaction","poster","preload","pubdate","radiogroup","readonly","rel","required","rev","reversed","role","rows","rowspan","spellcheck","scope","selected","shape","size","sizes","span","srclang","start","src","srcset","step","style","summary","tabindex","title","translate","type","usemap","valign","value","width","wrap","xmlns","slot"]),Wl=pl(["accent-height","accumulate","additive","alignment-baseline","amplitude","ascent","attributename","attributetype","azimuth","basefrequency","baseline-shift","begin","bias","by","class","clip","clippathunits","clip-path","clip-rule","color","color-interpolation","color-interpolation-filters","color-profile","color-rendering","cx","cy","d","dx","dy","diffuseconstant","direction","display","divisor","dur","edgemode","elevation","end","exponent","fill","fill-opacity","fill-rule","filter","filterunits","flood-color","flood-opacity","font-family","font-size","font-size-adjust","font-stretch","font-style","font-variant","font-weight","fx","fy","g1","g2","glyph-name","glyphref","gradientunits","gradienttransform","height","href","id","image-rendering","in","in2","intercept","k","k1","k2","k3","k4","kerning","keypoints","keysplines","keytimes","lang","lengthadjust","letter-spacing","kernelmatrix","kernelunitlength","lighting-color","local","marker-end","marker-mid","marker-start","markerheight","markerunits","markerwidth","maskcontentunits","maskunits","max","mask","media","method","mode","min","name","numoctaves","offset","operator","opacity","order","orient","orientation","origin","overflow","paint-order","path","pathlength","patterncontentunits","patterntransform","patternunits","points","preservealpha","preserveaspectratio","primitiveunits","r","rx","ry","radius","refx","refy","repeatcount","repeatdur","restart","result","rotate","scale","seed","shape-rendering","slope","specularconstant","specularexponent","spreadmethod","startoffset","stddeviation","stitchtiles","stop-color","stop-opacity","stroke-dasharray","stroke-dashoffset","stroke-linecap","stroke-linejoin","stroke-miterlimit","stroke-opacity","stroke","stroke-width","style","surfacescale","systemlanguage","tabindex","tablevalues","targetx","targety","transform","transform-origin","text-anchor","text-decoration","text-rendering","textlength","type","u1","u2","unicode","values","viewbox","visibility","version","vert-adv-y","vert-origin-x","vert-origin-y","width","word-spacing","wrap","writing-mode","xchannelselector","ychannelselector","x","x1","x2","xmlns","y","y1","y2","z","zoomandpan"]),Ql=pl(["accent","accentunder","align","bevelled","close","columnsalign","columnlines","columnspan","denomalign","depth","dir","display","displaystyle","encoding","fence","frame","height","href","id","largeop","length","linethickness","lspace","lquote","mathbackground","mathcolor","mathsize","mathvariant","maxsize","minsize","movablelimits","notation","numalign","open","rowalign","rowlines","rowspacing","rowspan","rspace","rquote","scriptlevel","scriptminsize","scriptsizemultiplier","selection","separator","separators","stretchy","subscriptshift","supscriptshift","symmetric","voffset","width","xmlns"]),Ul=pl(["xlink:href","xml:id","xlink:title","xml:space","xmlns:xlink"]),Yl=gl(/\{\{[\w\W]*|[\w\W]*\}\}/gm),Xl=gl(/<%[\w\W]*|[\w\W]*%>/gm),Zl=gl(/\${[\w\W]*}/gm),Gl=gl(/^data-[\-\w.\u00B7-\uFFFF]/),Kl=gl(/^aria-[\-\w]+$/),Jl=gl(/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|sms|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i),ec=gl(/^(?:\w+script|data):/i),tc=gl(/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g),nc=gl(/^html$/i),rc=gl(/^[a-z][.\w]*(-[.\w]+)+$/i);var ic=Object.freeze({__proto__:null,ARIA_ATTR:Kl,ATTR_WHITESPACE:tc,CUSTOM_ELEMENT:rc,DATA_ATTR:Gl,DOCTYPE_NAME:nc,ERB_EXPR:Xl,IS_ALLOWED_URI:Jl,IS_SCRIPT_OR_DATA:ec,MUSTACHE_EXPR:Yl,TMPLIT_EXPR:Zl});const oc={element:1,attribute:2,text:3,cdataSection:4,entityReference:5,entityNode:6,progressingInstruction:7,comment:8,document:9,documentType:10,documentFragment:11,notation:12},sc=function(){return"undefined"===typeof window?null:window},ac=function(e,t){if("object"!==typeof e||"function"!==typeof e.createPolicy)return null;let n=null;const r="data-tt-policy-suffix";t&&t.hasAttribute(r)&&(n=t.getAttribute(r));const i="dompurify"+(n?"#"+n:"");try{return e.createPolicy(i,{createHTML(e){return e},createScriptURL(e){return e}})}catch(Re){return console.warn("TrustedTypes policy "+i+" could not be created."),null}};function lc(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:sc();const t=e=>lc(e);if(t.version="3.2.0",t.removed=[],!e||!e.document||e.document.nodeType!==oc.document)return t.isSupported=!1,t;let{document:n}=e;const r=n,i=r.currentScript,{DocumentFragment:o,HTMLTemplateElement:s,Node:a,Element:l,NodeFilter:c,NamedNodeMap:u=e.NamedNodeMap||e.MozNamedAttrMap,HTMLFormElement:h,DOMParser:d,trustedTypes:f}=e,p=l.prototype,g=Ll(p,"cloneNode"),m=Ll(p,"remove"),v=Ll(p,"nextSibling"),y=Ll(p,"childNodes"),b=Ll(p,"parentNode");if("function"===typeof s){const e=n.createElement("template");e.content&&e.content.ownerDocument&&(n=e.content.ownerDocument)}let w,x="";const{implementation:k,createNodeIterator:_,createDocumentFragment:O,getElementsByTagName:S}=n,{importNode:E}=r;let C={};t.isSupported="function"===typeof cl&&"function"===typeof b&&k&&void 0!==k.createHTMLDocument;const{MUSTACHE_EXPR:T,ERB_EXPR:A,TMPLIT_EXPR:D,DATA_ATTR:M,ARIA_ATTR:F,IS_SCRIPT_OR_DATA:R,ATTR_WHITESPACE:P,CUSTOM_ELEMENT:I}=ic;let{IS_ALLOWED_URI:L}=ic,$=null;const N=Rl({},[...$l,...Nl,...jl,...Vl,...zl]);let j=null;const B=Rl({},[...Hl,...Wl,...Ql,...Ul]);let V=Object.seal(ml(null,{tagNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},attributeNameCheck:{writable:!0,configurable:!1,enumerable:!0,value:null},allowCustomizedBuiltInElements:{writable:!0,configurable:!1,enumerable:!0,value:!1}})),q=null,z=null,H=!0,W=!0,Q=!1,U=!0,Y=!1,X=!0,Z=!1,G=!1,K=!1,J=!1,ee=!1,te=!1,ne=!0,re=!1;const ie="user-content-";let oe=!0,se=!1,ae={},le=null;const ce=Rl({},["annotation-xml","audio","colgroup","desc","foreignobject","head","iframe","math","mi","mn","mo","ms","mtext","noembed","noframes","noscript","plaintext","script","style","svg","template","thead","title","video","xmp"]);let ue=null;const he=Rl({},["audio","video","img","source","image","track"]);let de=null;const fe=Rl({},["alt","class","for","id","label","name","pattern","placeholder","role","summary","title","value","style","xmlns"]),pe="http://www.w3.org/1998/Math/MathML",ge="http://www.w3.org/2000/svg",me="http://www.w3.org/1999/xhtml";let ve=me,ye=!1,be=null;const we=Rl({},[pe,ge,me],_l);let xe=Rl({},["mi","mo","mn","ms","mtext"]),ke=Rl({},["annotation-xml"]);const _e=Rl({},["title","style","font","a","script"]);let Oe=null;const Se=["application/xhtml+xml","text/html"],Ee="text/html";let Ce=null,Te=null;const Ae=n.createElement("form"),De=function(e){return e instanceof RegExp||e instanceof Function},Me=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};if(!Te||Te!==e){if(e&&"object"===typeof e||(e={}),e=Il(e),Oe=-1===Se.indexOf(e.PARSER_MEDIA_TYPE)?Ee:e.PARSER_MEDIA_TYPE,Ce="application/xhtml+xml"===Oe?_l:kl,$=Tl(e,"ALLOWED_TAGS")?Rl({},e.ALLOWED_TAGS,Ce):N,j=Tl(e,"ALLOWED_ATTR")?Rl({},e.ALLOWED_ATTR,Ce):B,be=Tl(e,"ALLOWED_NAMESPACES")?Rl({},e.ALLOWED_NAMESPACES,_l):we,de=Tl(e,"ADD_URI_SAFE_ATTR")?Rl(Il(fe),e.ADD_URI_SAFE_ATTR,Ce):fe,ue=Tl(e,"ADD_DATA_URI_TAGS")?Rl(Il(he),e.ADD_DATA_URI_TAGS,Ce):he,le=Tl(e,"FORBID_CONTENTS")?Rl({},e.FORBID_CONTENTS,Ce):ce,q=Tl(e,"FORBID_TAGS")?Rl({},e.FORBID_TAGS,Ce):{},z=Tl(e,"FORBID_ATTR")?Rl({},e.FORBID_ATTR,Ce):{},ae=!!Tl(e,"USE_PROFILES")&&e.USE_PROFILES,H=!1!==e.ALLOW_ARIA_ATTR,W=!1!==e.ALLOW_DATA_ATTR,Q=e.ALLOW_UNKNOWN_PROTOCOLS||!1,U=!1!==e.ALLOW_SELF_CLOSE_IN_ATTR,Y=e.SAFE_FOR_TEMPLATES||!1,X=!1!==e.SAFE_FOR_XML,Z=e.WHOLE_DOCUMENT||!1,J=e.RETURN_DOM||!1,ee=e.RETURN_DOM_FRAGMENT||!1,te=e.RETURN_TRUSTED_TYPE||!1,K=e.FORCE_BODY||!1,ne=!1!==e.SANITIZE_DOM,re=e.SANITIZE_NAMED_PROPS||!1,oe=!1!==e.KEEP_CONTENT,se=e.IN_PLACE||!1,L=e.ALLOWED_URI_REGEXP||Jl,ve=e.NAMESPACE||me,xe=e.MATHML_TEXT_INTEGRATION_POINTS||xe,ke=e.HTML_INTEGRATION_POINTS||ke,V=e.CUSTOM_ELEMENT_HANDLING||{},e.CUSTOM_ELEMENT_HANDLING&&De(e.CUSTOM_ELEMENT_HANDLING.tagNameCheck)&&(V.tagNameCheck=e.CUSTOM_ELEMENT_HANDLING.tagNameCheck),e.CUSTOM_ELEMENT_HANDLING&&De(e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck)&&(V.attributeNameCheck=e.CUSTOM_ELEMENT_HANDLING.attributeNameCheck),e.CUSTOM_ELEMENT_HANDLING&&"boolean"===typeof e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements&&(V.allowCustomizedBuiltInElements=e.CUSTOM_ELEMENT_HANDLING.allowCustomizedBuiltInElements),Y&&(W=!1),ee&&(J=!0),ae&&($=Rl({},zl),j=[],!0===ae.html&&(Rl($,$l),Rl(j,Hl)),!0===ae.svg&&(Rl($,Nl),Rl(j,Wl),Rl(j,Ul)),!0===ae.svgFilters&&(Rl($,jl),Rl(j,Wl),Rl(j,Ul)),!0===ae.mathMl&&(Rl($,Vl),Rl(j,Ql),Rl(j,Ul))),e.ADD_TAGS&&($===N&&($=Il($)),Rl($,e.ADD_TAGS,Ce)),e.ADD_ATTR&&(j===B&&(j=Il(j)),Rl(j,e.ADD_ATTR,Ce)),e.ADD_URI_SAFE_ATTR&&Rl(de,e.ADD_URI_SAFE_ATTR,Ce),e.FORBID_CONTENTS&&(le===ce&&(le=Il(le)),Rl(le,e.FORBID_CONTENTS,Ce)),oe&&($["#text"]=!0),Z&&Rl($,["html","head","body"]),$.table&&(Rl($,["tbody"]),delete q.tbody),e.TRUSTED_TYPES_POLICY){if("function"!==typeof e.TRUSTED_TYPES_POLICY.createHTML)throw Dl('TRUSTED_TYPES_POLICY configuration option must provide a "createHTML" hook.');if("function"!==typeof e.TRUSTED_TYPES_POLICY.createScriptURL)throw Dl('TRUSTED_TYPES_POLICY configuration option must provide a "createScriptURL" hook.');w=e.TRUSTED_TYPES_POLICY,x=w.createHTML("")}else void 0===w&&(w=ac(f,i)),null!==w&&"string"===typeof x&&(x=w.createHTML(""));pl&&pl(e),Te=e}},Fe=Rl({},[...Nl,...jl,...Bl]),Pe=Rl({},[...Vl,...ql]),Ie=function(e){let t=b(e);t&&t.tagName||(t={namespaceURI:ve,tagName:"template"});const n=kl(e.tagName),r=kl(t.tagName);return!!be[e.namespaceURI]&&(e.namespaceURI===ge?t.namespaceURI===me?"svg"===n:t.namespaceURI===pe?"svg"===n&&("annotation-xml"===r||xe[r]):Boolean(Fe[n]):e.namespaceURI===pe?t.namespaceURI===me?"math"===n:t.namespaceURI===ge?"math"===n&&ke[r]:Boolean(Pe[n]):e.namespaceURI===me?!(t.namespaceURI===ge&&!ke[r])&&(!(t.namespaceURI===pe&&!xe[r])&&(!Pe[n]&&(_e[n]||!Fe[n]))):!("application/xhtml+xml"!==Oe||!be[e.namespaceURI]))},Le=function(e){xl(t.removed,{element:e});try{b(e).removeChild(e)}catch(Re){m(e)}},$e=function(e,n){try{xl(t.removed,{attribute:n.getAttributeNode(e),from:n})}catch(Re){xl(t.removed,{attribute:null,from:n})}if(n.removeAttribute(e),"is"===e&&!j[e])if(J||ee)try{Le(n)}catch(Re){}else try{n.setAttribute(e,"")}catch(Re){}},Ne=function(e){let t=null,r=null;if(K)e="<remove></remove>"+e;else{const t=Ol(e,/^[\r\n\t ]+/);r=t&&t[0]}"application/xhtml+xml"===Oe&&ve===me&&(e='<html xmlns="http://www.w3.org/1999/xhtml"><head></head><body>'+e+"</body></html>");const i=w?w.createHTML(e):e;if(ve===me)try{t=(new d).parseFromString(i,Oe)}catch(Re){}if(!t||!t.documentElement){t=k.createDocument(ve,"template",null);try{t.documentElement.innerHTML=ye?x:i}catch(Re){}}const o=t.body||t.documentElement;return e&&r&&o.insertBefore(n.createTextNode(r),o.childNodes[0]||null),ve===me?S.call(t,Z?"html":"body")[0]:Z?t.documentElement:o},je=function(e){return _.call(e.ownerDocument||e,e,c.SHOW_ELEMENT|c.SHOW_COMMENT|c.SHOW_TEXT|c.SHOW_PROCESSING_INSTRUCTION|c.SHOW_CDATA_SECTION,null)},Be=function(e){return e instanceof h&&("string"!==typeof e.nodeName||"string"!==typeof e.textContent||"function"!==typeof e.removeChild||!(e.attributes instanceof u)||"function"!==typeof e.removeAttribute||"function"!==typeof e.setAttribute||"string"!==typeof e.namespaceURI||"function"!==typeof e.insertBefore||"function"!==typeof e.hasChildNodes)},Ve=function(e){return"function"===typeof a&&e instanceof a};function qe(e,n,r){C[e]&&bl(C[e],(e=>{e.call(t,n,r,Te)}))}const ze=function(e){let n=null;if(qe("beforeSanitizeElements",e,null),Be(e))return Le(e),!0;const r=Ce(e.nodeName);if(qe("uponSanitizeElement",e,{tagName:r,allowedTags:$}),e.hasChildNodes()&&!Ve(e.firstElementChild)&&Al(/<[/\w]/g,e.innerHTML)&&Al(/<[/\w]/g,e.textContent))return Le(e),!0;if(e.nodeType===oc.progressingInstruction)return Le(e),!0;if(X&&e.nodeType===oc.comment&&Al(/<[/\w]/g,e.data))return Le(e),!0;if(!$[r]||q[r]){if(!q[r]&&We(r)){if(V.tagNameCheck instanceof RegExp&&Al(V.tagNameCheck,r))return!1;if(V.tagNameCheck instanceof Function&&V.tagNameCheck(r))return!1}if(oe&&!le[r]){const t=b(e)||e.parentNode,n=y(e)||e.childNodes;if(n&&t){const r=n.length;for(let i=r-1;i>=0;--i){const r=g(n[i],!0);r.__removalCount=(e.__removalCount||0)+1,t.insertBefore(r,v(e))}}}return Le(e),!0}return e instanceof l&&!Ie(e)?(Le(e),!0):"noscript"!==r&&"noembed"!==r&&"noframes"!==r||!Al(/<\/no(script|embed|frames)/i,e.innerHTML)?(Y&&e.nodeType===oc.text&&(n=e.textContent,bl([T,A,D],(e=>{n=Sl(n,e," ")})),e.textContent!==n&&(xl(t.removed,{element:e.cloneNode()}),e.textContent=n)),qe("afterSanitizeElements",e,null),!1):(Le(e),!0)},He=function(e,t,r){if(ne&&("id"===t||"name"===t)&&(r in n||r in Ae))return!1;if(W&&!z[t]&&Al(M,t));else if(H&&Al(F,t));else if(!j[t]||z[t]){if(!(We(e)&&(V.tagNameCheck instanceof RegExp&&Al(V.tagNameCheck,e)||V.tagNameCheck instanceof Function&&V.tagNameCheck(e))&&(V.attributeNameCheck instanceof RegExp&&Al(V.attributeNameCheck,t)||V.attributeNameCheck instanceof Function&&V.attributeNameCheck(t))||"is"===t&&V.allowCustomizedBuiltInElements&&(V.tagNameCheck instanceof RegExp&&Al(V.tagNameCheck,r)||V.tagNameCheck instanceof Function&&V.tagNameCheck(r))))return!1}else if(de[t]);else if(Al(L,Sl(r,P,"")));else if("src"!==t&&"xlink:href"!==t&&"href"!==t||"script"===e||0!==El(r,"data:")||!ue[e]){if(Q&&!Al(R,Sl(r,P,"")));else if(r)return!1}else;return!0},We=function(e){return"annotation-xml"!==e&&Ol(e,I)},Qe=function(e){qe("beforeSanitizeAttributes",e,null);const{attributes:n}=e;if(!n)return;const r={attrName:"",attrValue:"",keepAttr:!0,allowedAttributes:j,forceKeepAttr:void 0};let i=n.length;while(i--){const o=n[i],{name:s,namespaceURI:a,value:l}=o,c=Ce(s);let u="value"===s?l:Cl(l);if(r.attrName=c,r.attrValue=u,r.keepAttr=!0,r.forceKeepAttr=void 0,qe("uponSanitizeAttribute",e,r),u=r.attrValue,!re||"id"!==c&&"name"!==c||($e(s,e),u=ie+u),X&&Al(/((--!?|])>)|<\/(style|title)/i,u)){$e(s,e);continue}if(r.forceKeepAttr)continue;if($e(s,e),!r.keepAttr)continue;if(!U&&Al(/\/>/i,u)){$e(s,e);continue}Y&&bl([T,A,D],(e=>{u=Sl(u,e," ")}));const h=Ce(e.nodeName);if(He(h,c,u)){if(w&&"object"===typeof f&&"function"===typeof f.getAttributeType)if(a);else switch(f.getAttributeType(h,c)){case"TrustedHTML":u=w.createHTML(u);break;case"TrustedScriptURL":u=w.createScriptURL(u);break}try{a?e.setAttributeNS(a,s,u):e.setAttribute(s,u),Be(e)?Le(e):wl(t.removed)}catch(Re){}}}qe("afterSanitizeAttributes",e,null)},Ue=function e(t){let n=null;const r=je(t);qe("beforeSanitizeShadowDOM",t,null);while(n=r.nextNode())qe("uponSanitizeShadowNode",n,null),ze(n)||(n.content instanceof o&&e(n.content),Qe(n));qe("afterSanitizeShadowDOM",t,null)};return t.sanitize=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=null,s=null,l=null,c=null;if(ye=!e,ye&&(e="\x3c!--\x3e"),"string"!==typeof e&&!Ve(e)){if("function"!==typeof e.toString)throw Dl("toString is not a function");if(e=e.toString(),"string"!==typeof e)throw Dl("dirty is not a string, aborting")}if(!t.isSupported)return e;if(G||Me(n),t.removed=[],"string"===typeof e&&(se=!1),se){if(e.nodeName){const t=Ce(e.nodeName);if(!$[t]||q[t])throw Dl("root node is forbidden and cannot be sanitized in-place")}}else if(e instanceof a)i=Ne("\x3c!----\x3e"),s=i.ownerDocument.importNode(e,!0),s.nodeType===oc.element&&"BODY"===s.nodeName||"HTML"===s.nodeName?i=s:i.appendChild(s);else{if(!J&&!Y&&!Z&&-1===e.indexOf("<"))return w&&te?w.createHTML(e):e;if(i=Ne(e),!i)return J?null:te?x:""}i&&K&&Le(i.firstChild);const u=je(se?e:i);while(l=u.nextNode())ze(l)||(l.content instanceof o&&Ue(l.content),Qe(l));if(se)return e;if(J){if(ee){c=O.call(i.ownerDocument);while(i.firstChild)c.appendChild(i.firstChild)}else c=i;return(j.shadowroot||j.shadowrootmode)&&(c=E.call(r,c,!0)),c}let h=Z?i.outerHTML:i.innerHTML;return Z&&$["!doctype"]&&i.ownerDocument&&i.ownerDocument.doctype&&i.ownerDocument.doctype.name&&Al(nc,i.ownerDocument.doctype.name)&&(h="<!DOCTYPE "+i.ownerDocument.doctype.name+">\n"+h),Y&&bl([T,A,D],(e=>{h=Sl(h,e," ")})),w&&te?w.createHTML(h):h},t.setConfig=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};Me(e),G=!0},t.clearConfig=function(){Te=null,G=!1},t.isValidAttribute=function(e,t,n){Te||Me({});const r=Ce(e),i=Ce(t);return He(r,i,n)},t.addHook=function(e,t){"function"===typeof t&&(C[e]=C[e]||[],xl(C[e],t))},t.removeHook=function(e){if(C[e])return wl(C[e])},t.removeHooks=function(e){C[e]&&(C[e]=[])},t.removeAllHooks=function(){C={}},t}var cc=lc(),uc=n(8626);const hc=/^class[ {]/;function dc(e){return hc.test(e.toString())}function fc(e){return Array.isArray(e)}function pc(e,t){return Object.prototype.hasOwnProperty.call(e,t)}function gc(...e){1===e.length&&fc(e[0])&&(e=e[0]),e=[...e];const t=e.pop();return t.$inject=e,t}const mc=/constructor\s*[^(]*\(\s*([^)]*)\)/m,vc=/^(?:async\s+)?(?:function\s*[^(]*)?(?:\(\s*([^)]*)\)|(\w+))/m,yc=/\/\*([^*]*)\*\//m;function bc(e){if("function"!==typeof e)throw new Error(`Cannot annotate "${e}". Expected a function!`);const t=e.toString().match(dc(e)?mc:vc);if(!t)return[];const n=t[1]||t[2];return n&&n.split(",").map((e=>{const t=e.match(yc);return(t&&t[1]||e).trim()}))||[]}function wc(e,t){const n=t||{get:function(e,t){if(r.push(e),!1===t)return null;throw a(`No provider for "${e}"!`)}},r=[],i=this._providers=Object.create(n._providers||null),o=this._instances=Object.create(null),s=o.injector=this,a=function(e){const t=r.join(" -> ");return r.length=0,new Error(t?`${e} (Resolving: ${t})`:e)};function l(e,t){if(!i[e]&&e.includes(".")){const t=e.split(".");let n=l(t.shift());while(t.length)n=n[t.shift()];return n}if(pc(o,e))return o[e];if(pc(i,e)){if(-1!==r.indexOf(e))throw r.push(e),a("Cannot resolve circular dependency!");return r.push(e),o[e]=i[e][0](i[e][1]),r.pop(),o[e]}return n.get(e,t)}function c(e,t){if("undefined"===typeof t&&(t={}),"function"!==typeof e){if(!fc(e))throw a(`Cannot invoke "${e}". Expected a function!`);e=gc(e.slice())}const n=e.$inject||bc(e),r=n.map((e=>pc(t,e)?t[e]:l(e)));return{fn:e,dependencies:r}}function u(e){const{fn:t,dependencies:n}=c(e),r=Function.prototype.bind.call(t,null,...n);return new r}function h(e,t,n){const{fn:r,dependencies:i}=c(e,n);return r.apply(t,i)}function d(e){return gc((t=>e.get(t)))}function f(e,t){if(t&&t.length){const n=Object.create(null),r=Object.create(null),o=[],s=[],a=[];let l,c,u,h;for(let e in i)l=i[e],-1!==t.indexOf(e)&&("private"===l[2]?(c=o.indexOf(l[3]),-1===c?(u=l[3].createChild([],t),h=d(u),o.push(l[3]),s.push(u),a.push(h),n[e]=[h,e,"private",u]):n[e]=[a[c],e,"private",s[c]]):n[e]=[l[2],l[1]],r[e]=!0),"factory"!==l[2]&&"type"!==l[2]||!l[1].$scope||t.forEach((t=>{-1!==l[1].$scope.indexOf(t)&&(n[e]=[l[2],l[1]],r[t]=!0)}));t.forEach((e=>{if(!r[e])throw new Error('No provider for "'+e+'". Cannot use provider from the parent!')})),e.unshift(n)}return new wc(e,s)}const p={factory:h,type:u,value:function(e){return e}};function g(e,t){const n=e.__init__||[];return function(){n.forEach((e=>{"string"===typeof e?t.get(e):t.invoke(e)}))}}function m(e){const t=e.__exports__;if(t){const n=e.__modules__,r=Object.keys(e).reduce(((t,n)=>("__exports__"!==n&&"__modules__"!==n&&"__init__"!==n&&"__depends__"!==n&&(t[n]=e[n]),t)),Object.create(null)),o=(n||[]).concat(r),s=f(o),a=gc((function(e){return s.get(e)}));t.forEach((function(e){i[e]=[a,e,"private",s]}));const l=(e.__init__||[]).slice();return l.unshift((function(){s.init()})),e=Object.assign({},e,{__init__:l}),g(e,s)}return Object.keys(e).forEach((function(t){if("__init__"===t||"__depends__"===t)return;const n=e[t];if("private"===n[2])return void(i[t]=n);const r=n[0],o=n[1];i[t]=[p[r],xc(r,o),r]})),g(e,s)}function v(e,t){return-1!==e.indexOf(t)?e:(e=(t.__depends__||[]).reduce(v,e),-1!==e.indexOf(t)?e:e.concat(t))}function y(e){const t=e.reduce(v,[]).map(m);let n=!1;return function(){n||(n=!0,t.forEach((e=>e())))}}this.get=l,this.invoke=h,this.instantiate=u,this.createChild=f,this.init=y(e)}function xc(e,t){return"value"!==e&&fc(t)&&(t=gc(t.slice())),t}n(6573),n(8100),n(7936),n(9479),n(7467),n(4732),n(9577);const kc=1024;let _c=0;class Oc{constructor(e,t){this.from=e,this.to=t}}class Sc{constructor(e={}){this.id=_c++,this.perNode=!!e.perNode,this.deserialize=e.deserialize||(()=>{throw new Error("This node type doesn't define a deserialize function")})}add(e){if(this.perNode)throw new RangeError("Can't add per-node props to node types");return"function"!=typeof e&&(e=Tc.match(e)),t=>{let n=e(t);return void 0===n?null:[this,n]}}}Sc.closedBy=new Sc({deserialize:e=>e.split(" ")}),Sc.openedBy=new Sc({deserialize:e=>e.split(" ")}),Sc.group=new Sc({deserialize:e=>e.split(" ")}),Sc.isolate=new Sc({deserialize:e=>{if(e&&"rtl"!=e&&"ltr"!=e&&"auto"!=e)throw new RangeError("Invalid value for isolate: "+e);return e||"auto"}}),Sc.contextHash=new Sc({perNode:!0}),Sc.lookAhead=new Sc({perNode:!0}),Sc.mounted=new Sc({perNode:!0});class Ec{constructor(e,t,n){this.tree=e,this.overlay=t,this.parser=n}static get(e){return e&&e.props&&e.props[Sc.mounted.id]}}const Cc=Object.create(null);class Tc{constructor(e,t,n,r=0){this.name=e,this.props=t,this.id=n,this.flags=r}static define(e){let t=e.props&&e.props.length?Object.create(null):Cc,n=(e.top?1:0)|(e.skipped?2:0)|(e.error?4:0)|(null==e.name?8:0),r=new Tc(e.name||"",t,e.id,n);if(e.props)for(let i of e.props)if(Array.isArray(i)||(i=i(r)),i){if(i[0].perNode)throw new RangeError("Can't store a per-node prop on a node type");t[i[0].id]=i[1]}return r}prop(e){return this.props[e.id]}get isTop(){return(1&this.flags)>0}get isSkipped(){return(2&this.flags)>0}get isError(){return(4&this.flags)>0}get isAnonymous(){return(8&this.flags)>0}is(e){if("string"==typeof e){if(this.name==e)return!0;let t=this.prop(Sc.group);return!!t&&t.indexOf(e)>-1}return this.id==e}static match(e){let t=Object.create(null);for(let n in e)for(let r of n.split(" "))t[r]=e[n];return e=>{for(let n=e.prop(Sc.group),r=-1;r<(n?n.length:0);r++){let i=t[r<0?e.name:n[r]];if(i)return i}}}}Tc.none=new Tc("",Object.create(null),0,8);class Ac{constructor(e){this.types=e;for(let t=0;t<e.length;t++)if(e[t].id!=t)throw new RangeError("Node type ids should correspond to array positions when creating a node set")}extend(...e){let t=[];for(let n of this.types){let r=null;for(let t of e){let e=t(n);e&&(r||(r=Object.assign({},n.props)),r[e[0].id]=e[1])}t.push(r?new Tc(n.name,r,n.id,n.flags):n)}return new Ac(t)}}const Dc=new WeakMap,Mc=new WeakMap;var Fc;(function(e){e[e["ExcludeBuffers"]=1]="ExcludeBuffers",e[e["IncludeAnonymous"]=2]="IncludeAnonymous",e[e["IgnoreMounts"]=4]="IgnoreMounts",e[e["IgnoreOverlays"]=8]="IgnoreOverlays"})(Fc||(Fc={}));class Rc{constructor(e,t,n,r,i){if(this.type=e,this.children=t,this.positions=n,this.length=r,this.props=null,i&&i.length){this.props=Object.create(null);for(let[e,t]of i)this.props["number"==typeof e?e:e.id]=t}}toString(){let e=Ec.get(this);if(e&&!e.overlay)return e.tree.toString();let t="";for(let n of this.children){let e=n.toString();e&&(t&&(t+=","),t+=e)}return this.type.name?(/\W/.test(this.type.name)&&!this.type.isError?JSON.stringify(this.type.name):this.type.name)+(t.length?"("+t+")":""):t}cursor(e=0){return new Uc(this.topNode,e)}cursorAt(e,t=0,n=0){let r=Dc.get(this)||this.topNode,i=new Uc(r);return i.moveTo(e,t),Dc.set(this,i._tree),i}get topNode(){return new jc(this,0,0,null)}resolve(e,t=0){let n=$c(Dc.get(this)||this.topNode,e,t,!1);return Dc.set(this,n),n}resolveInner(e,t=0){let n=$c(Mc.get(this)||this.topNode,e,t,!0);return Mc.set(this,n),n}resolveStack(e,t=0){return Qc(this,e,t)}iterate(e){let{enter:t,leave:n,from:r=0,to:i=this.length}=e,o=e.mode||0,s=(o&Fc.IncludeAnonymous)>0;for(let a=this.cursor(o|Fc.IncludeAnonymous);;){let e=!1;if(a.from<=i&&a.to>=r&&(!s&&a.type.isAnonymous||!1!==t(a))){if(a.firstChild())continue;e=!0}for(;;){if(e&&n&&(s||!a.type.isAnonymous)&&n(a),a.nextSibling())break;if(!a.parent())return;e=!0}}}prop(e){return e.perNode?this.props?this.props[e.id]:void 0:this.type.prop(e)}get propValues(){let e=[];if(this.props)for(let t in this.props)e.push([+t,this.props[t]]);return e}balance(e={}){return this.children.length<=8?this:Kc(Tc.none,this.children,this.positions,0,this.children.length,0,this.length,((e,t,n)=>new Rc(this.type,e,t,n,this.propValues)),e.makeTree||((e,t,n)=>new Rc(Tc.none,e,t,n)))}static build(e){return Xc(e)}}Rc.empty=new Rc(Tc.none,[],[],0);class Pc{constructor(e,t){this.buffer=e,this.index=t}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}get pos(){return this.index}next(){this.index-=4}fork(){return new Pc(this.buffer,this.index)}}class Ic{constructor(e,t,n){this.buffer=e,this.length=t,this.set=n}get type(){return Tc.none}toString(){let e=[];for(let t=0;t<this.buffer.length;)e.push(this.childString(t)),t=this.buffer[t+3];return e.join(",")}childString(e){let t=this.buffer[e],n=this.buffer[e+3],r=this.set.types[t],i=r.name;if(/\W/.test(i)&&!r.isError&&(i=JSON.stringify(i)),e+=4,n==e)return i;let o=[];while(e<n)o.push(this.childString(e)),e=this.buffer[e+3];return i+"("+o.join(",")+")"}findChild(e,t,n,r,i){let{buffer:o}=this,s=-1;for(let a=e;a!=t;a=o[a+3])if(Lc(i,r,o[a+1],o[a+2])&&(s=a,n>0))break;return s}slice(e,t,n){let r=this.buffer,i=new Uint16Array(t-e),o=0;for(let s=e,a=0;s<t;){i[a++]=r[s++],i[a++]=r[s++]-n;let t=i[a++]=r[s++]-n;i[a++]=r[s++]-e,o=Math.max(o,t)}return new Ic(i,o,this.set)}}function Lc(e,t,n,r){switch(e){case-2:return n<t;case-1:return r>=t&&n<t;case 0:return n<t&&r>t;case 1:return n<=t&&r>t;case 2:return r>t;case 4:return!0}}function $c(e,t,n,r){var i;while(e.from==e.to||(n<1?e.from>=t:e.from>t)||(n>-1?e.to<=t:e.to<t)){let t=!r&&e instanceof jc&&e.index<0?null:e.parent;if(!t)return e;e=t}let o=r?0:Fc.IgnoreOverlays;if(r)for(let s=e,a=s.parent;a;s=a,a=s.parent)s instanceof jc&&s.index<0&&(null===(i=a.enter(t,n,o))||void 0===i?void 0:i.from)!=s.from&&(e=a);for(;;){let r=e.enter(t,n,o);if(!r)return e;e=r}}class Nc{cursor(e=0){return new Uc(this,e)}getChild(e,t=null,n=null){let r=Bc(this,e,t,n);return r.length?r[0]:null}getChildren(e,t=null,n=null){return Bc(this,e,t,n)}resolve(e,t=0){return $c(this,e,t,!1)}resolveInner(e,t=0){return $c(this,e,t,!0)}matchContext(e){return Vc(this.parent,e)}enterUnfinishedNodesBefore(e){let t=this.childBefore(e),n=this;while(t){let e=t.lastChild;if(!e||e.to!=t.to)break;e.type.isError&&e.from==e.to?(n=t,t=e.prevSibling):t=e}return n}get node(){return this}get next(){return this.parent}}class jc extends Nc{constructor(e,t,n,r){super(),this._tree=e,this.from=t,this.index=n,this._parent=r}get type(){return this._tree.type}get name(){return this._tree.type.name}get to(){return this.from+this._tree.length}nextChild(e,t,n,r,i=0){for(let o=this;;){for(let{children:s,positions:a}=o._tree,l=t>0?s.length:-1;e!=l;e+=t){let l=s[e],c=a[e]+o.from;if(Lc(r,n,c,c+l.length))if(l instanceof Ic){if(i&Fc.ExcludeBuffers)continue;let s=l.findChild(0,l.buffer.length,t,n-c,r);if(s>-1)return new zc(new qc(o,l,e,c),null,s)}else if(i&Fc.IncludeAnonymous||!l.type.isAnonymous||Yc(l)){let s;if(!(i&Fc.IgnoreMounts)&&(s=Ec.get(l))&&!s.overlay)return new jc(s.tree,c,e,o);let a=new jc(l,c,e,o);return i&Fc.IncludeAnonymous||!a.type.isAnonymous?a:a.nextChild(t<0?l.children.length-1:0,t,n,r)}}if(i&Fc.IncludeAnonymous||!o.type.isAnonymous)return null;if(e=o.index>=0?o.index+t:t<0?-1:o._parent._tree.children.length,o=o._parent,!o)return null}}get firstChild(){return this.nextChild(0,1,0,4)}get lastChild(){return this.nextChild(this._tree.children.length-1,-1,0,4)}childAfter(e){return this.nextChild(0,1,e,2)}childBefore(e){return this.nextChild(this._tree.children.length-1,-1,e,-2)}enter(e,t,n=0){let r;if(!(n&Fc.IgnoreOverlays)&&(r=Ec.get(this._tree))&&r.overlay){let n=e-this.from;for(let{from:e,to:i}of r.overlay)if((t>0?e<=n:e<n)&&(t<0?i>=n:i>n))return new jc(r.tree,r.overlay[0].from+this.from,-1,this)}return this.nextChild(0,1,e,t,n)}nextSignificantParent(){let e=this;while(e.type.isAnonymous&&e._parent)e=e._parent;return e}get parent(){return this._parent?this._parent.nextSignificantParent():null}get nextSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index+1,1,0,4):null}get prevSibling(){return this._parent&&this.index>=0?this._parent.nextChild(this.index-1,-1,0,4):null}get tree(){return this._tree}toTree(){return this._tree}toString(){return this._tree.toString()}}function Bc(e,t,n,r){let i=e.cursor(),o=[];if(!i.firstChild())return o;if(null!=n)for(let s=!1;!s;)if(s=i.type.is(n),!i.nextSibling())return o;for(;;){if(null!=r&&i.type.is(r))return o;if(i.type.is(t)&&o.push(i.node),!i.nextSibling())return null==r?o:[]}}function Vc(e,t,n=t.length-1){for(let r=e;n>=0;r=r.parent){if(!r)return!1;if(!r.type.isAnonymous){if(t[n]&&t[n]!=r.name)return!1;n--}}return!0}class qc{constructor(e,t,n,r){this.parent=e,this.buffer=t,this.index=n,this.start=r}}class zc extends Nc{get name(){return this.type.name}get from(){return this.context.start+this.context.buffer.buffer[this.index+1]}get to(){return this.context.start+this.context.buffer.buffer[this.index+2]}constructor(e,t,n){super(),this.context=e,this._parent=t,this.index=n,this.type=e.buffer.set.types[e.buffer.buffer[n]]}child(e,t,n){let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.context.start,n);return i<0?null:new zc(this.context,this,i)}get firstChild(){return this.child(1,0,4)}get lastChild(){return this.child(-1,0,4)}childAfter(e){return this.child(1,e,2)}childBefore(e){return this.child(-1,e,-2)}enter(e,t,n=0){if(n&Fc.ExcludeBuffers)return null;let{buffer:r}=this.context,i=r.findChild(this.index+4,r.buffer[this.index+3],t>0?1:-1,e-this.context.start,t);return i<0?null:new zc(this.context,this,i)}get parent(){return this._parent||this.context.parent.nextSignificantParent()}externalSibling(e){return this._parent?null:this.context.parent.nextChild(this.context.index+e,e,0,4)}get nextSibling(){let{buffer:e}=this.context,t=e.buffer[this.index+3];return t<(this._parent?e.buffer[this._parent.index+3]:e.buffer.length)?new zc(this.context,this._parent,t):this.externalSibling(1)}get prevSibling(){let{buffer:e}=this.context,t=this._parent?this._parent.index+4:0;return this.index==t?this.externalSibling(-1):new zc(this.context,this._parent,e.findChild(t,this.index,-1,0,4))}get tree(){return null}toTree(){let e=[],t=[],{buffer:n}=this.context,r=this.index+4,i=n.buffer[this.index+3];if(i>r){let o=n.buffer[this.index+1];e.push(n.slice(r,i,o)),t.push(0)}return new Rc(this.type,e,t,this.to-this.from)}toString(){return this.context.buffer.childString(this.index)}}function Hc(e){if(!e.length)return null;let t=0,n=e[0];for(let o=1;o<e.length;o++){let r=e[o];(r.from>n.from||r.to<n.to)&&(n=r,t=o)}let r=n instanceof jc&&n.index<0?null:n.parent,i=e.slice();return r?i[t]=r:i.splice(t,1),new Wc(i,n)}class Wc{constructor(e,t){this.heads=e,this.node=t}get next(){return Hc(this.heads)}}function Qc(e,t,n){let r=e.resolveInner(t,n),i=null;for(let o=r instanceof jc?r:r.context.parent;o;o=o.parent)if(o.index<0){let e=o.parent;(i||(i=[r])).push(e.resolve(t,n)),o=e}else{let e=Ec.get(o.tree);if(e&&e.overlay&&e.overlay[0].from<=t&&e.overlay[e.overlay.length-1].to>=t){let s=new jc(e.tree,e.overlay[0].from+o.from,-1,o);(i||(i=[r])).push($c(s,t,n,!1))}}return i?Hc(i):r}class Uc{get name(){return this.type.name}constructor(e,t=0){if(this.mode=t,this.buffer=null,this.stack=[],this.index=0,this.bufferNode=null,e instanceof jc)this.yieldNode(e);else{this._tree=e.context.parent,this.buffer=e.context;for(let t=e._parent;t;t=t._parent)this.stack.unshift(t.index);this.bufferNode=e,this.yieldBuf(e.index)}}yieldNode(e){return!!e&&(this._tree=e,this.type=e.type,this.from=e.from,this.to=e.to,!0)}yieldBuf(e,t){this.index=e;let{start:n,buffer:r}=this.buffer;return this.type=t||r.set.types[r.buffer[e]],this.from=n+r.buffer[e+1],this.to=n+r.buffer[e+2],!0}yield(e){return!!e&&(e instanceof jc?(this.buffer=null,this.yieldNode(e)):(this.buffer=e.context,this.yieldBuf(e.index,e.type)))}toString(){return this.buffer?this.buffer.buffer.childString(this.index):this._tree.toString()}enterChild(e,t,n){if(!this.buffer)return this.yield(this._tree.nextChild(e<0?this._tree._tree.children.length-1:0,e,t,n,this.mode));let{buffer:r}=this.buffer,i=r.findChild(this.index+4,r.buffer[this.index+3],e,t-this.buffer.start,n);return!(i<0)&&(this.stack.push(this.index),this.yieldBuf(i))}firstChild(){return this.enterChild(1,0,4)}lastChild(){return this.enterChild(-1,0,4)}childAfter(e){return this.enterChild(1,e,2)}childBefore(e){return this.enterChild(-1,e,-2)}enter(e,t,n=this.mode){return this.buffer?!(n&Fc.ExcludeBuffers)&&this.enterChild(1,e,t):this.yield(this._tree.enter(e,t,n))}parent(){if(!this.buffer)return this.yieldNode(this.mode&Fc.IncludeAnonymous?this._tree._parent:this._tree.parent);if(this.stack.length)return this.yieldBuf(this.stack.pop());let e=this.mode&Fc.IncludeAnonymous?this.buffer.parent:this.buffer.parent.nextSignificantParent();return this.buffer=null,this.yieldNode(e)}sibling(e){if(!this.buffer)return!!this._tree._parent&&this.yield(this._tree.index<0?null:this._tree._parent.nextChild(this._tree.index+e,e,0,4,this.mode));let{buffer:t}=this.buffer,n=this.stack.length-1;if(e<0){let e=n<0?0:this.stack[n]+4;if(this.index!=e)return this.yieldBuf(t.findChild(e,this.index,-1,0,4))}else{let e=t.buffer[this.index+3];if(e<(n<0?t.buffer.length:t.buffer[this.stack[n]+3]))return this.yieldBuf(e)}return n<0&&this.yield(this.buffer.parent.nextChild(this.buffer.index+e,e,0,4,this.mode))}nextSibling(){return this.sibling(1)}prevSibling(){return this.sibling(-1)}atLastNode(e){let t,n,{buffer:r}=this;if(r){if(e>0){if(this.index<r.buffer.buffer.length)return!1}else for(let e=0;e<this.index;e++)if(r.buffer.buffer[e+3]<this.index)return!1;({index:t,parent:n}=r)}else({index:t,_parent:n}=this._tree);for(;n;({index:t,_parent:n}=n))if(t>-1)for(let r=t+e,i=e<0?-1:n._tree.children.length;r!=i;r+=e){let e=n._tree.children[r];if(this.mode&Fc.IncludeAnonymous||e instanceof Ic||!e.type.isAnonymous||Yc(e))return!1}return!0}move(e,t){if(t&&this.enterChild(e,0,4))return!0;for(;;){if(this.sibling(e))return!0;if(this.atLastNode(e)||!this.parent())return!1}}next(e=!0){return this.move(1,e)}prev(e=!0){return this.move(-1,e)}moveTo(e,t=0){while(this.from==this.to||(t<1?this.from>=e:this.from>e)||(t>-1?this.to<=e:this.to<e))if(!this.parent())break;while(this.enterChild(1,e,t));return this}get node(){if(!this.buffer)return this._tree;let e=this.bufferNode,t=null,n=0;if(e&&e.context==this.buffer)e:for(let r=this.index,i=this.stack.length;i>=0;){for(let o=e;o;o=o._parent)if(o.index==r){if(r==this.index)return o;t=o,n=i+1;break e}r=this.stack[--i]}for(let r=n;r<this.stack.length;r++)t=new zc(this.buffer,t,this.stack[r]);return this.bufferNode=new zc(this.buffer,t,this.index)}get tree(){return this.buffer?null:this._tree._tree}iterate(e,t){for(let n=0;;){let r=!1;if(this.type.isAnonymous||!1!==e(this)){if(this.firstChild()){n++;continue}this.type.isAnonymous||(r=!0)}for(;;){if(r&&t&&t(this),r=this.type.isAnonymous,!n)return;if(this.nextSibling())break;this.parent(),n--,r=!0}}}matchContext(e){if(!this.buffer)return Vc(this.node.parent,e);let{buffer:t}=this.buffer,{types:n}=t.set;for(let r=e.length-1,i=this.stack.length-1;r>=0;i--){if(i<0)return Vc(this._tree,e,r);let o=n[t.buffer[this.stack[i]]];if(!o.isAnonymous){if(e[r]&&e[r]!=o.name)return!1;r--}}return!0}}function Yc(e){return e.children.some((e=>e instanceof Ic||!e.type.isAnonymous||Yc(e)))}function Xc(e){var t;let{buffer:n,nodeSet:r,maxBufferLength:i=kc,reused:o=[],minRepeatType:s=r.types.length}=e,a=Array.isArray(n)?new Pc(n,n.length):n,l=r.types,c=0,u=0;function h(e,t,n,y,b,w){let{id:x,start:k,end:_,size:O}=a,S=u,E=c;while(O<0){if(a.next(),-1==O){let t=o[x];return n.push(t),void y.push(k-e)}if(-3==O)return void(c=x);if(-4==O)return void(u=x);throw new RangeError(`Unrecognized record size: ${O}`)}let C,T,A=l[x],D=k-e;if(_-k<=i&&(T=m(a.pos-t,b))){let t=new Uint16Array(T.size-T.skip),n=a.pos-T.size,i=t.length;while(a.pos>n)i=v(T.start,t,i);C=new Ic(t,_-T.start,r),D=T.start-e}else{let e=a.pos-O;a.next();let t=[],n=[],r=x>=s?x:-1,o=0,l=_;while(a.pos>e)r>=0&&a.id==r&&a.size>=0?(a.end<=l-i&&(p(t,n,k,o,a.end,l,r,S,E),o=t.length,l=a.end),a.next()):w>2500?d(k,e,t,n):h(k,e,t,n,r,w+1);if(r>=0&&o>0&&o<t.length&&p(t,n,k,o,k,l,r,S,E),t.reverse(),n.reverse(),r>-1&&o>0){let e=f(A,E);C=Kc(A,t,n,0,t.length,0,_-k,e,e)}else C=g(A,t,n,_-k,S-_,E)}n.push(C),y.push(D)}function d(e,t,n,o){let s=[],l=0,c=-1;while(a.pos>t){let{id:e,start:t,end:n,size:r}=a;if(r>4)a.next();else{if(c>-1&&t<c)break;c<0&&(c=n-i),s.push(e,t,n),l++,a.next()}}if(l){let t=new Uint16Array(4*l),i=s[s.length-2];for(let e=s.length-3,n=0;e>=0;e-=3)t[n++]=s[e],t[n++]=s[e+1]-i,t[n++]=s[e+2]-i,t[n++]=n;n.push(new Ic(t,s[2]-i,r)),o.push(i-e)}}function f(e,t){return(n,r,i)=>{let o,s,a=0,l=n.length-1;if(l>=0&&(o=n[l])instanceof Rc){if(!l&&o.type==e&&o.length==i)return o;(s=o.prop(Sc.lookAhead))&&(a=r[l]+o.length+s)}return g(e,n,r,i,a,t)}}function p(e,t,n,i,o,s,a,l,c){let u=[],h=[];while(e.length>i)u.push(e.pop()),h.push(t.pop()+n-o);e.push(g(r.types[a],u,h,s-o,l-s,c)),t.push(o-n)}function g(e,t,n,r,i,o,s){if(o){let e=[Sc.contextHash,o];s=s?[e].concat(s):[e]}if(i>25){let e=[Sc.lookAhead,i];s=s?[e].concat(s):[e]}return new Rc(e,t,n,r,s)}function m(e,t){let n=a.fork(),r=0,o=0,l=0,c=n.end-i,u={size:0,start:0,skip:0};e:for(let i=n.pos-e;n.pos>i;){let e=n.size;if(n.id==t&&e>=0){u.size=r,u.start=o,u.skip=l,l+=4,r+=4,n.next();continue}let a=n.pos-e;if(e<0||a<i||n.start<c)break;let h=n.id>=s?4:0,d=n.start;n.next();while(n.pos>a){if(n.size<0){if(-3!=n.size)break e;h+=4}else n.id>=s&&(h+=4);n.next()}o=d,r+=e,l+=h}return(t<0||r==e)&&(u.size=r,u.start=o,u.skip=l),u.size>4?u:void 0}function v(e,t,n){let{id:r,start:i,end:o,size:l}=a;if(a.next(),l>=0&&r<s){let s=n;if(l>4){let r=a.pos-(l-4);while(a.pos>r)n=v(e,t,n)}t[--n]=s,t[--n]=o-e,t[--n]=i-e,t[--n]=r}else-3==l?c=r:-4==l&&(u=r);return n}let y=[],b=[];while(a.pos>0)h(e.start||0,e.bufferStart||0,y,b,-1,0);let w=null!==(t=e.length)&&void 0!==t?t:y.length?b[0]+y[0].length:0;return new Rc(l[e.topID],y.reverse(),b.reverse(),w)}const Zc=new WeakMap;function Gc(e,t){if(!e.isAnonymous||t instanceof Ic||t.type!=e)return 1;let n=Zc.get(t);if(null==n){n=1;for(let r of t.children){if(r.type!=e||!(r instanceof Rc)){n=1;break}n+=Gc(e,r)}Zc.set(t,n)}return n}function Kc(e,t,n,r,i,o,s,a,l){let c=0;for(let p=r;p<i;p++)c+=Gc(e,t[p]);let u=Math.ceil(1.5*c/8),h=[],d=[];function f(t,n,r,i,s){for(let a=r;a<i;){let r=a,c=n[a],p=Gc(e,t[a]);for(a++;a<i;a++){let n=Gc(e,t[a]);if(p+n>=u)break;p+=n}if(a==r+1){if(p>u){let e=t[r];f(e.children,e.positions,0,e.children.length,n[r]+s);continue}h.push(t[r])}else{let i=n[a-1]+t[a-1].length-c;h.push(Kc(e,t,n,r,a,c,i,null,l))}d.push(c+s-o)}}return f(t,n,r,i,0),(a||l)(h,d,s)}class Jc{constructor(e,t,n,r,i=!1,o=!1){this.from=e,this.to=t,this.tree=n,this.offset=r,this.open=(i?1:0)|(o?2:0)}get openStart(){return(1&this.open)>0}get openEnd(){return(2&this.open)>0}static addTree(e,t=[],n=!1){let r=[new Jc(0,e.length,e,0,!1,n)];for(let i of t)i.to>e.length&&r.push(i);return r}static applyChanges(e,t,n=128){if(!t.length)return e;let r=[],i=1,o=e.length?e[0]:null;for(let s=0,a=0,l=0;;s++){let c=s<t.length?t[s]:null,u=c?c.fromA:1e9;if(u-a>=n)while(o&&o.from<u){let t=o;if(a>=t.from||u<=t.to||l){let e=Math.max(t.from,a)-l,n=Math.min(t.to,u)-l;t=e>=n?null:new Jc(e,n,t.tree,t.offset+l,s>0,!!c)}if(t&&r.push(t),o.to>u)break;o=i<e.length?e[i++]:null}if(!c)break;a=c.toA,l=c.toA-c.toB}return r}}class eu{startParse(e,t,n){return"string"==typeof e&&(e=new tu(e)),n=n?n.length?n.map((e=>new Oc(e.from,e.to))):[new Oc(0,0)]:[new Oc(0,e.length)],this.createParse(e,t||[],n)}parse(e,t,n){let r=this.startParse(e,t,n);for(;;){let e=r.advance();if(e)return e}}}class tu{constructor(e){this.string=e}get length(){return this.string.length}chunk(e){return this.string.slice(e)}get lineChunks(){return!1}read(e,t){return this.string.slice(e,t)}}function nu(e){return(t,n,r,i)=>new au(t,e,n,r,i)}class ru{constructor(e,t,n,r,i){this.parser=e,this.parse=t,this.overlay=n,this.target=r,this.from=i}}function iu(e){if(!e.length||e.some((e=>e.from>=e.to)))throw new RangeError("Invalid inner parse ranges given: "+JSON.stringify(e))}class ou{constructor(e,t,n,r,i,o,s){this.parser=e,this.predicate=t,this.mounts=n,this.index=r,this.start=i,this.target=o,this.prev=s,this.depth=0,this.ranges=[]}}const su=new Sc({perNode:!0});class au{constructor(e,t,n,r,i){this.nest=t,this.input=n,this.fragments=r,this.ranges=i,this.inner=[],this.innerDone=0,this.baseTree=null,this.stoppedAt=null,this.baseParse=e}advance(){if(this.baseParse){let e=this.baseParse.advance();if(!e)return null;if(this.baseParse=null,this.baseTree=e,this.startInner(),null!=this.stoppedAt)for(let t of this.inner)t.parse.stopAt(this.stoppedAt)}if(this.innerDone==this.inner.length){let e=this.baseTree;return null!=this.stoppedAt&&(e=new Rc(e.type,e.children,e.positions,e.length,e.propValues.concat([[su,this.stoppedAt]]))),e}let e=this.inner[this.innerDone],t=e.parse.advance();if(t){this.innerDone++;let n=Object.assign(Object.create(null),e.target.props);n[Sc.mounted.id]=new Ec(t,e.overlay,e.parser),e.target.props=n}return null}get parsedPos(){if(this.baseParse)return 0;let e=this.input.length;for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].from<e&&(e=Math.min(e,this.inner[t].parse.parsedPos));return e}stopAt(e){if(this.stoppedAt=e,this.baseParse)this.baseParse.stopAt(e);else for(let t=this.innerDone;t<this.inner.length;t++)this.inner[t].parse.stopAt(e)}startInner(){let e=new du(this.fragments),t=null,n=null,r=new Uc(new jc(this.baseTree,this.ranges[0].from,0,null),Fc.IncludeAnonymous|Fc.IgnoreMounts);e:for(let i,o;;){let s,a=!0;if(null!=this.stoppedAt&&r.from>=this.stoppedAt)a=!1;else if(e.hasNode(r)){if(t){let e=t.mounts.find((e=>e.frag.from<=r.from&&e.frag.to>=r.to&&e.mount.overlay));if(e)for(let n of e.mount.overlay){let i=n.from+e.pos,o=n.to+e.pos;i>=r.from&&o<=r.to&&!t.ranges.some((e=>e.from<o&&e.to>i))&&t.ranges.push({from:i,to:o})}}a=!1}else if(n&&(o=lu(n.ranges,r.from,r.to)))a=2!=o;else if(!r.type.isAnonymous&&(i=this.nest(r,this.input))&&(r.from<r.to||!i.overlay)){r.tree||uu(r);let o=e.findMounts(r.from,i.parser);if("function"==typeof i.overlay)t=new ou(i.parser,i.overlay,o,this.inner.length,r.from,r.tree,t);else{let e=fu(this.ranges,i.overlay||(r.from<r.to?[new Oc(r.from,r.to)]:[]));e.length&&iu(e),!e.length&&i.overlay||this.inner.push(new ru(i.parser,e.length?i.parser.startParse(this.input,gu(o,e),e):i.parser.startParse(""),i.overlay?i.overlay.map((e=>new Oc(e.from-r.from,e.to-r.from))):null,r.tree,e.length?e[0].from:r.from)),i.overlay?e.length&&(n={ranges:e,depth:0,prev:n}):a=!1}}else if(t&&(s=t.predicate(r))&&(!0===s&&(s=new Oc(r.from,r.to)),s.from<s.to)){let e=t.ranges.length-1;e>=0&&t.ranges[e].to==s.from?t.ranges[e]={from:t.ranges[e].from,to:s.to}:t.ranges.push(s)}if(a&&r.firstChild())t&&t.depth++,n&&n.depth++;else for(;;){if(r.nextSibling())break;if(!r.parent())break e;if(t&&! --t.depth){let e=fu(this.ranges,t.ranges);e.length&&(iu(e),this.inner.splice(t.index,0,new ru(t.parser,t.parser.startParse(this.input,gu(t.mounts,e),e),t.ranges.map((e=>new Oc(e.from-t.start,e.to-t.start))),t.target,e[0].from))),t=t.prev}n&&! --n.depth&&(n=n.prev)}}}}function lu(e,t,n){for(let r of e){if(r.from>=n)break;if(r.to>t)return r.from<=t&&r.to>=n?2:1}return 0}function cu(e,t,n,r,i,o){if(t<n){let s=e.buffer[t+1];r.push(e.slice(t,n,s)),i.push(s-o)}}function uu(e){let{node:t}=e,n=[],r=t.context.buffer;do{n.push(e.index),e.parent()}while(!e.tree);let i=e.tree,o=i.children.indexOf(r),s=i.children[o],a=s.buffer,l=[o];function c(e,r,i,o,u,h){let d=n[h],f=[],p=[];cu(s,e,d,f,p,o);let g=a[d+1],m=a[d+2];l.push(f.length);let v=h?c(d+4,a[d+3],s.set.types[a[d]],g,m-g,h-1):t.toTree();return f.push(v),p.push(g-o),cu(s,a[d+3],r,f,p,o),new Rc(i,f,p,u)}i.children[o]=c(0,a.length,Tc.none,0,s.length,n.length-1);for(let u of l){let t=e.tree.children[u],n=e.tree.positions[u];e.yield(new jc(t,n+e.from,u,e._tree))}}class hu{constructor(e,t){this.offset=t,this.done=!1,this.cursor=e.cursor(Fc.IncludeAnonymous|Fc.IgnoreMounts)}moveTo(e){let{cursor:t}=this,n=e-this.offset;while(!this.done&&t.from<n)t.to>=e&&t.enter(n,1,Fc.IgnoreOverlays|Fc.ExcludeBuffers)||t.next(!1)||(this.done=!0)}hasNode(e){if(this.moveTo(e.from),!this.done&&this.cursor.from+this.offset==e.from&&this.cursor.tree)for(let t=this.cursor.tree;;){if(t==e.tree)return!0;if(!(t.children.length&&0==t.positions[0]&&t.children[0]instanceof Rc))break;t=t.children[0]}return!1}}class du{constructor(e){var t;if(this.fragments=e,this.curTo=0,this.fragI=0,e.length){let n=this.curFrag=e[0];this.curTo=null!==(t=n.tree.prop(su))&&void 0!==t?t:n.to,this.inner=new hu(n.tree,-n.offset)}else this.curFrag=this.inner=null}hasNode(e){while(this.curFrag&&e.from>=this.curTo)this.nextFrag();return this.curFrag&&this.curFrag.from<=e.from&&this.curTo>=e.to&&this.inner.hasNode(e)}nextFrag(){var e;if(this.fragI++,this.fragI==this.fragments.length)this.curFrag=this.inner=null;else{let t=this.curFrag=this.fragments[this.fragI];this.curTo=null!==(e=t.tree.prop(su))&&void 0!==e?e:t.to,this.inner=new hu(t.tree,-t.offset)}}findMounts(e,t){var n;let r=[];if(this.inner){this.inner.cursor.moveTo(e,1);for(let e=this.inner.cursor.node;e;e=e.parent){let i=null===(n=e.tree)||void 0===n?void 0:n.prop(Sc.mounted);if(i&&i.parser==t)for(let t=this.fragI;t<this.fragments.length;t++){let n=this.fragments[t];if(n.from>=e.to)break;n.tree==this.curFrag.tree&&r.push({frag:n,pos:e.from-n.offset,mount:i})}}}return r}}function fu(e,t){let n=null,r=t;for(let i=1,o=0;i<e.length;i++){let s=e[i-1].to,a=e[i].from;for(;o<r.length;o++){let e=r[o];if(e.from>=a)break;e.to<=s||(n||(r=n=t.slice()),e.from<s?(n[o]=new Oc(e.from,s),e.to>a&&n.splice(o+1,0,new Oc(a,e.to))):e.to>a?n[o--]=new Oc(a,e.to):n.splice(o--,1))}}return r}function pu(e,t,n,r){let i=0,o=0,s=!1,a=!1,l=-1e9,c=[];for(;;){let u=i==e.length?1e9:s?e[i].to:e[i].from,h=o==t.length?1e9:a?t[o].to:t[o].from;if(s!=a){let e=Math.max(l,n),t=Math.min(u,h,r);e<t&&c.push(new Oc(e,t))}if(l=Math.min(u,h),1e9==l)break;u==l&&(s?(s=!1,i++):s=!0),h==l&&(a?(a=!1,o++):a=!0)}return c}function gu(e,t){let n=[];for(let{pos:r,mount:i,frag:o}of e){let e=r+(i.overlay?i.overlay[0].from:0),s=e+i.tree.length,a=Math.max(o.from,e),l=Math.min(o.to,s);if(i.overlay){let s=i.overlay.map((e=>new Oc(e.from+r,e.to+r))),c=pu(t,s,a,l);for(let t=0,r=a;;t++){let s=t==c.length,a=s?l:c[t].from;if(a>r&&n.push(new Jc(r,a,i.tree,-e,o.from>=r||o.openStart,o.to<=a||o.openEnd)),s)break;r=c[t].to}}else n.push(new Jc(a,l,i.tree,-e,o.from>=e||o.openStart,o.to<=s||o.openEnd))}return n}class mu{constructor(e,t,n,r,i,o,s,a,l,c=0,u){this.p=e,this.stack=t,this.state=n,this.reducePos=r,this.pos=i,this.score=o,this.buffer=s,this.bufferBase=a,this.curContext=l,this.lookAhead=c,this.parent=u}toString(){return`[${this.stack.filter(((e,t)=>t%3==0)).concat(this.state)}]@${this.pos}${this.score?"!"+this.score:""}`}static start(e,t,n=0){let r=e.parser.context;return new mu(e,[],t,n,n,0,[],0,r?new vu(r,r.start):null,0,null)}get context(){return this.curContext?this.curContext.context:null}pushState(e,t){this.stack.push(this.state,t,this.bufferBase+this.buffer.length),this.state=e}reduce(e){var t;let n=e>>19,r=65535&e,{parser:i}=this.p,o=this.reducePos<this.pos-25;o&&this.setLookAhead(this.pos);let s=i.dynamicPrecedence(r);if(s&&(this.score+=s),0==n)return this.pushState(i.getGoto(this.state,r,!0),this.reducePos),r<i.minRepeatTerm&&this.storeNode(r,this.reducePos,this.reducePos,o?8:4,!0),void this.reduceContext(r,this.reducePos);let a=this.stack.length-3*(n-1)-(262144&e?6:0),l=a?this.stack[a-2]:this.p.ranges[0].from,c=this.reducePos-l;c>=2e3&&!(null===(t=this.p.parser.nodeSet.types[r])||void 0===t?void 0:t.isAnonymous)&&(l==this.p.lastBigReductionStart?(this.p.bigReductionCount++,this.p.lastBigReductionSize=c):this.p.lastBigReductionSize<c&&(this.p.bigReductionCount=1,this.p.lastBigReductionStart=l,this.p.lastBigReductionSize=c));let u=a?this.stack[a-1]:0,h=this.bufferBase+this.buffer.length-u;if(r<i.minRepeatTerm||131072&e){let e=i.stateFlag(this.state,1)?this.pos:this.reducePos;this.storeNode(r,l,e,h+4,!0)}if(262144&e)this.state=this.stack[a];else{let e=this.stack[a-3];this.state=i.getGoto(e,r,!0)}while(this.stack.length>a)this.stack.pop();this.reduceContext(r,l)}storeNode(e,t,n,r=4,i=!1){if(0==e&&(!this.stack.length||this.stack[this.stack.length-1]<this.buffer.length+this.bufferBase)){let e=this,r=this.buffer.length;if(0==r&&e.parent&&(r=e.bufferBase-e.parent.bufferBase,e=e.parent),r>0&&0==e.buffer[r-4]&&e.buffer[r-1]>-1){if(t==n)return;if(e.buffer[r-2]>=t)return void(e.buffer[r-2]=n)}}if(i&&this.pos!=n){let i=this.buffer.length;if(i>0&&0!=this.buffer[i-4]){let e=!1;for(let t=i;t>0&&this.buffer[t-2]>n;t-=4)if(this.buffer[t-1]>=0){e=!0;break}if(e)while(i>0&&this.buffer[i-2]>n)this.buffer[i]=this.buffer[i-4],this.buffer[i+1]=this.buffer[i-3],this.buffer[i+2]=this.buffer[i-2],this.buffer[i+3]=this.buffer[i-1],i-=4,r>4&&(r-=4)}this.buffer[i]=e,this.buffer[i+1]=t,this.buffer[i+2]=n,this.buffer[i+3]=r}else this.buffer.push(e,t,n,r)}shift(e,t,n,r){if(131072&e)this.pushState(65535&e,this.pos);else if(0==(262144&e)){let i=e,{parser:o}=this.p;(r>this.pos||t<=o.maxNode)&&(this.pos=r,o.stateFlag(i,1)||(this.reducePos=r)),this.pushState(i,n),this.shiftContext(t,n),t<=o.maxNode&&this.buffer.push(t,n,r,4)}else this.pos=r,this.shiftContext(t,n),t<=this.p.parser.maxNode&&this.buffer.push(t,n,r,4)}apply(e,t,n,r){65536&e?this.reduce(e):this.shift(e,t,n,r)}useNode(e,t){let n=this.p.reused.length-1;(n<0||this.p.reused[n]!=e)&&(this.p.reused.push(e),n++);let r=this.pos;this.reducePos=this.pos=r+e.length,this.pushState(t,r),this.buffer.push(n,r,this.reducePos,-1),this.curContext&&this.updateContext(this.curContext.tracker.reuse(this.curContext.context,e,this,this.p.stream.reset(this.pos-e.length)))}split(){let e=this,t=e.buffer.length;while(t>0&&e.buffer[t-2]>e.reducePos)t-=4;let n=e.buffer.slice(t),r=e.bufferBase+t;while(e&&r==e.bufferBase)e=e.parent;return new mu(this.p,this.stack.slice(),this.state,this.reducePos,this.pos,this.score,n,r,this.curContext,this.lookAhead,e)}recoverByDelete(e,t){let n=e<=this.p.parser.maxNode;n&&this.storeNode(e,this.pos,t,4),this.storeNode(0,this.pos,t,n?8:4),this.pos=this.reducePos=t,this.score-=190}canShift(e){for(let t=new yu(this);;){let n=this.p.parser.stateSlot(t.state,4)||this.p.parser.hasAction(t.state,e);if(0==n)return!1;if(0==(65536&n))return!0;t.reduce(n)}}recoverByInsert(e){if(this.stack.length>=300)return[];let t=this.p.parser.nextStates(this.state);if(t.length>8||this.stack.length>=120){let n=[];for(let r,i=0;i<t.length;i+=2)(r=t[i+1])!=this.state&&this.p.parser.hasAction(r,e)&&n.push(t[i],r);if(this.stack.length<120)for(let e=0;n.length<8&&e<t.length;e+=2){let r=t[e+1];n.some(((e,t)=>1&t&&e==r))||n.push(t[e],r)}t=n}let n=[];for(let r=0;r<t.length&&n.length<4;r+=2){let e=t[r+1];if(e==this.state)continue;let i=this.split();i.pushState(e,this.pos),i.storeNode(0,i.pos,i.pos,4,!0),i.shiftContext(t[r],this.pos),i.reducePos=this.pos,i.score-=200,n.push(i)}return n}forceReduce(){let{parser:e}=this.p,t=e.stateSlot(this.state,5);if(0==(65536&t))return!1;if(!e.validAction(this.state,t)){let n=t>>19,r=65535&t,i=this.stack.length-3*n;if(i<0||e.getGoto(this.stack[i],r,!1)<0){let e=this.findForcedReduction();if(null==e)return!1;t=e}this.storeNode(0,this.pos,this.pos,4,!0),this.score-=100}return this.reducePos=this.pos,this.reduce(t),!0}findForcedReduction(){let{parser:e}=this.p,t=[],n=(r,i)=>{if(!t.includes(r))return t.push(r),e.allActions(r,(t=>{if(393216&t);else if(65536&t){let n=(t>>19)-i;if(n>1){let r=65535&t,i=this.stack.length-3*n;if(i>=0&&e.getGoto(this.stack[i],r,!1)>=0)return n<<19|65536|r}}else{let e=n(t,i+1);if(null!=e)return e}}))};return n(this.state,0)}forceAll(){while(!this.p.parser.stateFlag(this.state,2))if(!this.forceReduce()){this.storeNode(0,this.pos,this.pos,4,!0);break}return this}get deadEnd(){if(3!=this.stack.length)return!1;let{parser:e}=this.p;return 65535==e.data[e.stateSlot(this.state,1)]&&!e.stateSlot(this.state,4)}restart(){this.storeNode(0,this.pos,this.pos,4,!0),this.state=this.stack[0],this.stack.length=0}sameState(e){if(this.state!=e.state||this.stack.length!=e.stack.length)return!1;for(let t=0;t<this.stack.length;t+=3)if(this.stack[t]!=e.stack[t])return!1;return!0}get parser(){return this.p.parser}dialectEnabled(e){return this.p.parser.dialect.flags[e]}shiftContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.shift(this.curContext.context,e,this,this.p.stream.reset(t)))}reduceContext(e,t){this.curContext&&this.updateContext(this.curContext.tracker.reduce(this.curContext.context,e,this,this.p.stream.reset(t)))}emitContext(){let e=this.buffer.length-1;(e<0||-3!=this.buffer[e])&&this.buffer.push(this.curContext.hash,this.pos,this.pos,-3)}emitLookAhead(){let e=this.buffer.length-1;(e<0||-4!=this.buffer[e])&&this.buffer.push(this.lookAhead,this.pos,this.pos,-4)}updateContext(e){if(e!=this.curContext.context){let t=new vu(this.curContext.tracker,e);t.hash!=this.curContext.hash&&this.emitContext(),this.curContext=t}}setLookAhead(e){e>this.lookAhead&&(this.emitLookAhead(),this.lookAhead=e)}close(){this.curContext&&this.curContext.tracker.strict&&this.emitContext(),this.lookAhead>0&&this.emitLookAhead()}}class vu{constructor(e,t){this.tracker=e,this.context=t,this.hash=e.strict?e.hash(t):0}}class yu{constructor(e){this.start=e,this.state=e.state,this.stack=e.stack,this.base=this.stack.length}reduce(e){let t=65535&e,n=e>>19;0==n?(this.stack==this.start.stack&&(this.stack=this.stack.slice()),this.stack.push(this.state,0,0),this.base+=3):this.base-=3*(n-1);let r=this.start.p.parser.getGoto(this.stack[this.base-3],t,!0);this.state=r}}class bu{constructor(e,t,n){this.stack=e,this.pos=t,this.index=n,this.buffer=e.buffer,0==this.index&&this.maybeNext()}static create(e,t=e.bufferBase+e.buffer.length){return new bu(e,t,t-e.bufferBase)}maybeNext(){let e=this.stack.parent;null!=e&&(this.index=this.stack.bufferBase-e.bufferBase,this.stack=e,this.buffer=e.buffer)}get id(){return this.buffer[this.index-4]}get start(){return this.buffer[this.index-3]}get end(){return this.buffer[this.index-2]}get size(){return this.buffer[this.index-1]}next(){this.index-=4,this.pos-=4,0==this.index&&this.maybeNext()}fork(){return new bu(this.stack,this.pos,this.index)}}function wu(e,t=Uint16Array){if("string"!=typeof e)return e;let n=null;for(let r=0,i=0;r<e.length;){let o=0;for(;;){let t=e.charCodeAt(r++),n=!1;if(126==t){o=65535;break}t>=92&&t--,t>=34&&t--;let i=t-32;if(i>=46&&(i-=46,n=!0),o+=i,n)break;o*=46}n?n[i++]=o:n=new t(o)}return n}class xu{constructor(){this.start=-1,this.value=-1,this.end=-1,this.extended=-1,this.lookAhead=0,this.mask=0,this.context=0}}const ku=new xu;class _u{constructor(e,t){this.input=e,this.ranges=t,this.chunk="",this.chunkOff=0,this.chunk2="",this.chunk2Pos=0,this.next=-1,this.token=ku,this.rangeIndex=0,this.pos=this.chunkPos=t[0].from,this.range=t[0],this.end=t[t.length-1].to,this.readNext()}resolveOffset(e,t){let n=this.range,r=this.rangeIndex,i=this.pos+e;while(i<n.from){if(!r)return null;let e=this.ranges[--r];i-=n.from-e.to,n=e}while(t<0?i>n.to:i>=n.to){if(r==this.ranges.length-1)return null;let e=this.ranges[++r];i+=e.from-n.to,n=e}return i}clipPos(e){if(e>=this.range.from&&e<this.range.to)return e;for(let t of this.ranges)if(t.to>e)return Math.max(e,t.from);return this.end}peek(e){let t,n,r=this.chunkOff+e;if(r>=0&&r<this.chunk.length)t=this.pos+e,n=this.chunk.charCodeAt(r);else{let r=this.resolveOffset(e,1);if(null==r)return-1;if(t=r,t>=this.chunk2Pos&&t<this.chunk2Pos+this.chunk2.length)n=this.chunk2.charCodeAt(t-this.chunk2Pos);else{let e=this.rangeIndex,r=this.range;while(r.to<=t)r=this.ranges[++e];this.chunk2=this.input.chunk(this.chunk2Pos=t),t+this.chunk2.length>r.to&&(this.chunk2=this.chunk2.slice(0,r.to-t)),n=this.chunk2.charCodeAt(0)}}return t>=this.token.lookAhead&&(this.token.lookAhead=t+1),n}acceptToken(e,t=0){let n=t?this.resolveOffset(t,-1):this.pos;if(null==n||n<this.token.start)throw new RangeError("Token end out of bounds");this.token.value=e,this.token.end=n}acceptTokenTo(e,t){this.token.value=e,this.token.end=t}getChunk(){if(this.pos>=this.chunk2Pos&&this.pos<this.chunk2Pos+this.chunk2.length){let{chunk:e,chunkPos:t}=this;this.chunk=this.chunk2,this.chunkPos=this.chunk2Pos,this.chunk2=e,this.chunk2Pos=t,this.chunkOff=this.pos-this.chunkPos}else{this.chunk2=this.chunk,this.chunk2Pos=this.chunkPos;let e=this.input.chunk(this.pos),t=this.pos+e.length;this.chunk=t>this.range.to?e.slice(0,this.range.to-this.pos):e,this.chunkPos=this.pos,this.chunkOff=0}}readNext(){return this.chunkOff>=this.chunk.length&&(this.getChunk(),this.chunkOff==this.chunk.length)?this.next=-1:this.next=this.chunk.charCodeAt(this.chunkOff)}advance(e=1){this.chunkOff+=e;while(this.pos+e>=this.range.to){if(this.rangeIndex==this.ranges.length-1)return this.setDone();e-=this.range.to-this.pos,this.range=this.ranges[++this.rangeIndex],this.pos=this.range.from}return this.pos+=e,this.pos>=this.token.lookAhead&&(this.token.lookAhead=this.pos+1),this.readNext()}setDone(){return this.pos=this.chunkPos=this.end,this.range=this.ranges[this.rangeIndex=this.ranges.length-1],this.chunk="",this.next=-1}reset(e,t){if(t?(this.token=t,t.start=e,t.lookAhead=e+1,t.value=t.extended=-1):this.token=ku,this.pos!=e){if(this.pos=e,e==this.end)return this.setDone(),this;while(e<this.range.from)this.range=this.ranges[--this.rangeIndex];while(e>=this.range.to)this.range=this.ranges[++this.rangeIndex];e>=this.chunkPos&&e<this.chunkPos+this.chunk.length?this.chunkOff=e-this.chunkPos:(this.chunk="",this.chunkOff=0),this.readNext()}return this}read(e,t){if(e>=this.chunkPos&&t<=this.chunkPos+this.chunk.length)return this.chunk.slice(e-this.chunkPos,t-this.chunkPos);if(e>=this.chunk2Pos&&t<=this.chunk2Pos+this.chunk2.length)return this.chunk2.slice(e-this.chunk2Pos,t-this.chunk2Pos);if(e>=this.range.from&&t<=this.range.to)return this.input.read(e,t);let n="";for(let r of this.ranges){if(r.from>=t)break;r.to>e&&(n+=this.input.read(Math.max(r.from,e),Math.min(r.to,t)))}return n}}class Ou{constructor(e,t){this.data=e,this.id=t}token(e,t){let{parser:n}=t.p;Cu(this.data,e,t,this.id,n.data,n.tokenPrecTable)}}Ou.prototype.contextual=Ou.prototype.fallback=Ou.prototype.extend=!1;class Su{constructor(e,t,n){this.precTable=t,this.elseToken=n,this.data="string"==typeof e?wu(e):e}token(e,t){let n=e.pos,r=0;for(;;){let n=e.next<0,i=e.resolveOffset(1,1);if(Cu(this.data,e,t,0,this.data,this.precTable),e.token.value>-1)break;if(null==this.elseToken)return;if(n||r++,null==i)break;e.reset(i,e.token)}r&&(e.reset(n,e.token),e.acceptToken(this.elseToken,r))}}Su.prototype.contextual=Ou.prototype.fallback=Ou.prototype.extend=!1;class Eu{constructor(e,t={}){this.token=e,this.contextual=!!t.contextual,this.fallback=!!t.fallback,this.extend=!!t.extend}}function Cu(e,t,n,r,i,o){let s=0,a=1<<r,{dialect:l}=n.p.parser;e:for(;;){if(0==(a&e[s]))break;let n=e[s+1];for(let h=s+3;h<n;h+=2)if((e[h+1]&a)>0){let n=e[h];if(l.allows(n)&&(-1==t.token.value||t.token.value==n||Au(n,t.token.value,i,o))){t.acceptToken(n);break}}let r=t.next,c=0,u=e[s+2];if(!(t.next<0&&u>c&&65535==e[n+3*u-3])){for(;c<u;){let i=c+u>>1,o=n+i+(i<<1),a=e[o],l=e[o+1]||65536;if(r<a)u=i;else{if(!(r>=l)){s=e[o+2],t.advance();continue e}c=i+1}}break}s=e[n+3*u-1]}}function Tu(e,t,n){for(let r,i=t;65535!=(r=e[i]);i++)if(r==n)return i-t;return-1}function Au(e,t,n,r){let i=Tu(n,r,t);return i<0||Tu(n,r,e)<i}const Du="undefined"!=typeof process&&{NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}&&/\bparse\b/.test({NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}.LOG);let Mu=null;function Fu(e,t,n){let r=e.cursor(Fc.IncludeAnonymous);for(r.moveTo(t);;)if(!(n<0?r.childBefore(t):r.childAfter(t)))for(;;){if((n<0?r.to<t:r.from>t)&&!r.type.isError)return n<0?Math.max(0,Math.min(r.to-1,t-25)):Math.min(e.length,Math.max(r.from+1,t+25));if(n<0?r.prevSibling():r.nextSibling())break;if(!r.parent())return n<0?0:e.length}}class Ru{constructor(e,t){this.fragments=e,this.nodeSet=t,this.i=0,this.fragment=null,this.safeFrom=-1,this.safeTo=-1,this.trees=[],this.start=[],this.index=[],this.nextFragment()}nextFragment(){let e=this.fragment=this.i==this.fragments.length?null:this.fragments[this.i++];if(e){this.safeFrom=e.openStart?Fu(e.tree,e.from+e.offset,1)-e.offset:e.from,this.safeTo=e.openEnd?Fu(e.tree,e.to+e.offset,-1)-e.offset:e.to;while(this.trees.length)this.trees.pop(),this.start.pop(),this.index.pop();this.trees.push(e.tree),this.start.push(-e.offset),this.index.push(0),this.nextStart=this.safeFrom}else this.nextStart=1e9}nodeAt(e){if(e<this.nextStart)return null;while(this.fragment&&this.safeTo<=e)this.nextFragment();if(!this.fragment)return null;for(;;){let t=this.trees.length-1;if(t<0)return this.nextFragment(),null;let n=this.trees[t],r=this.index[t];if(r==n.children.length){this.trees.pop(),this.start.pop(),this.index.pop();continue}let i=n.children[r],o=this.start[t]+n.positions[r];if(o>e)return this.nextStart=o,null;if(i instanceof Rc){if(o==e){if(o<this.safeFrom)return null;let e=o+i.length;if(e<=this.safeTo){let t=i.prop(Sc.lookAhead);if(!t||e+t<this.fragment.to)return i}}this.index[t]++,o+i.length>=Math.max(this.safeFrom,e)&&(this.trees.push(i),this.start.push(o),this.index.push(0))}else this.index[t]++,this.nextStart=o+i.length}}}class Pu{constructor(e,t){this.stream=t,this.tokens=[],this.mainToken=null,this.actions=[],this.tokens=e.tokenizers.map((e=>new xu))}getActions(e){let t=0,n=null,{parser:r}=e.p,{tokenizers:i}=r,o=r.stateSlot(e.state,3),s=e.curContext?e.curContext.hash:0,a=0;for(let l=0;l<i.length;l++){if(0==(1<<l&o))continue;let r=i[l],c=this.tokens[l];if((!n||r.fallback)&&((r.contextual||c.start!=e.pos||c.mask!=o||c.context!=s)&&(this.updateCachedToken(c,r,e),c.mask=o,c.context=s),c.lookAhead>c.end+25&&(a=Math.max(c.lookAhead,a)),0!=c.value)){let i=t;if(c.extended>-1&&(t=this.addActions(e,c.extended,c.end,t)),t=this.addActions(e,c.value,c.end,t),!r.extend&&(n=c,t>i))break}}while(this.actions.length>t)this.actions.pop();return a&&e.setLookAhead(a),n||e.pos!=this.stream.end||(n=new xu,n.value=e.p.parser.eofTerm,n.start=n.end=e.pos,t=this.addActions(e,n.value,n.end,t)),this.mainToken=n,this.actions}getMainToken(e){if(this.mainToken)return this.mainToken;let t=new xu,{pos:n,p:r}=e;return t.start=n,t.end=Math.min(n+1,r.stream.end),t.value=n==r.stream.end?r.parser.eofTerm:0,t}updateCachedToken(e,t,n){let r=this.stream.clipPos(n.pos);if(t.token(this.stream.reset(r,e),n),e.value>-1){let{parser:t}=n.p;for(let r=0;r<t.specialized.length;r++)if(t.specialized[r]==e.value){let i=t.specializers[r](this.stream.read(e.start,e.end),n);if(i>=0&&n.p.parser.dialect.allows(i>>1)){0==(1&i)?e.value=i>>1:e.extended=i>>1;break}}}else e.value=0,e.end=this.stream.clipPos(r+1)}putAction(e,t,n,r){for(let i=0;i<r;i+=3)if(this.actions[i]==e)return r;return this.actions[r++]=e,this.actions[r++]=t,this.actions[r++]=n,r}addActions(e,t,n,r){let{state:i}=e,{parser:o}=e.p,{data:s}=o;for(let a=0;a<2;a++)for(let e=o.stateSlot(i,a?2:1);;e+=3){if(65535==s[e]){if(1!=s[e+1]){0==r&&2==s[e+1]&&(r=this.putAction(Vu(s,e+2),t,n,r));break}e=Vu(s,e+2)}s[e]==t&&(r=this.putAction(Vu(s,e+1),t,n,r))}return r}}class Iu{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.recovering=0,this.nextStackID=9812,this.minStackPos=0,this.reused=[],this.stoppedAt=null,this.lastBigReductionStart=-1,this.lastBigReductionSize=0,this.bigReductionCount=0,this.stream=new _u(t,r),this.tokens=new Pu(e,this.stream),this.topTerm=e.top[1];let{from:i}=r[0];this.stacks=[mu.start(this,e.top[0],i)],this.fragments=n.length&&this.stream.end-i>4*e.bufferLength?new Ru(n,e.nodeSet):null}get parsedPos(){return this.minStackPos}advance(){let e,t,n=this.stacks,r=this.minStackPos,i=this.stacks=[];if(this.bigReductionCount>300&&1==n.length){let[e]=n;while(e.forceReduce()&&e.stack.length&&e.stack[e.stack.length-2]>=this.lastBigReductionStart);this.bigReductionCount=this.lastBigReductionSize=0}for(let o=0;o<n.length;o++){let s=n[o];for(;;){if(this.tokens.mainToken=null,s.pos>r)i.push(s);else{if(this.advanceStack(s,i,n))continue;{e||(e=[],t=[]),e.push(s);let n=this.tokens.getMainToken(s);t.push(n.value,n.end)}}break}}if(!i.length){let t=e&&qu(e);if(t)return Du&&console.log("Finish with "+this.stackID(t)),this.stackToTree(t);if(this.parser.strict)throw Du&&e&&console.log("Stuck with token "+(this.tokens.mainToken?this.parser.getName(this.tokens.mainToken.value):"none")),new SyntaxError("No parse at "+r);this.recovering||(this.recovering=5)}if(this.recovering&&e){let n=null!=this.stoppedAt&&e[0].pos>this.stoppedAt?e[0]:this.runRecovery(e,t,i);if(n)return Du&&console.log("Force-finish "+this.stackID(n)),this.stackToTree(n.forceAll())}if(this.recovering){let e=1==this.recovering?1:3*this.recovering;if(i.length>e){i.sort(((e,t)=>t.score-e.score));while(i.length>e)i.pop()}i.some((e=>e.reducePos>r))&&this.recovering--}else if(i.length>1){e:for(let e=0;e<i.length-1;e++){let t=i[e];for(let n=e+1;n<i.length;n++){let r=i[n];if(t.sameState(r)||t.buffer.length>500&&r.buffer.length>500){if(!((t.score-r.score||t.buffer.length-r.buffer.length)>0)){i.splice(e--,1);continue e}i.splice(n--,1)}}}i.length>12&&i.splice(12,i.length-12)}this.minStackPos=i[0].pos;for(let o=1;o<i.length;o++)i[o].pos<this.minStackPos&&(this.minStackPos=i[o].pos);return null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}advanceStack(e,t,n){let r=e.pos,{parser:i}=this,o=Du?this.stackID(e)+" -> ":"";if(null!=this.stoppedAt&&r>this.stoppedAt)return e.forceReduce()?e:null;if(this.fragments){let t=e.curContext&&e.curContext.tracker.strict,n=t?e.curContext.hash:0;for(let s=this.fragments.nodeAt(r);s;){let r=this.parser.nodeSet.types[s.type.id]==s.type?i.getGoto(e.state,s.type.id):-1;if(r>-1&&s.length&&(!t||(s.prop(Sc.contextHash)||0)==n))return e.useNode(s,r),Du&&console.log(o+this.stackID(e)+` (via reuse of ${i.getName(s.type.id)})`),!0;if(!(s instanceof Rc)||0==s.children.length||s.positions[0]>0)break;let a=s.children[0];if(!(a instanceof Rc&&0==s.positions[0]))break;s=a}}let s=i.stateSlot(e.state,4);if(s>0)return e.reduce(s),Du&&console.log(o+this.stackID(e)+` (via always-reduce ${i.getName(65535&s)})`),!0;if(e.stack.length>=8400)while(e.stack.length>6e3&&e.forceReduce());let a=this.tokens.getActions(e);for(let l=0;l<a.length;){let s=a[l++],c=a[l++],u=a[l++],h=l==a.length||!n,d=h?e:e.split(),f=this.tokens.mainToken;if(d.apply(s,c,f?f.start:d.pos,u),Du&&console.log(o+this.stackID(d)+` (via ${0==(65536&s)?"shift":`reduce of ${i.getName(65535&s)}`} for ${i.getName(c)} @ ${r}${d==e?"":", split"})`),h)return!0;d.pos>r?t.push(d):n.push(d)}return!1}advanceFully(e,t){let n=e.pos;for(;;){if(!this.advanceStack(e,null,null))return!1;if(e.pos>n)return Lu(e,t),!0}}runRecovery(e,t,n){let r=null,i=!1;for(let o=0;o<e.length;o++){let s=e[o],a=t[o<<1],l=t[1+(o<<1)],c=Du?this.stackID(s)+" -> ":"";if(s.deadEnd){if(i)continue;i=!0,s.restart(),Du&&console.log(c+this.stackID(s)+" (restarted)");let e=this.advanceFully(s,n);if(e)continue}let u=s.split(),h=c;for(let e=0;u.forceReduce()&&e<10;e++){Du&&console.log(h+this.stackID(u)+" (via force-reduce)");let e=this.advanceFully(u,n);if(e)break;Du&&(h=this.stackID(u)+" -> ")}for(let e of s.recoverByInsert(a))Du&&console.log(c+this.stackID(e)+" (via recover-insert)"),this.advanceFully(e,n);this.stream.end>s.pos?(l==s.pos&&(l++,a=0),s.recoverByDelete(a,l),Du&&console.log(c+this.stackID(s)+` (via recover-delete ${this.parser.getName(a)})`),Lu(s,n)):(!r||r.score<s.score)&&(r=s)}return r}stackToTree(e){return e.close(),Rc.build({buffer:bu.create(e),nodeSet:this.parser.nodeSet,topID:this.topTerm,maxBufferLength:this.parser.bufferLength,reused:this.reused,start:this.ranges[0].from,length:e.pos-this.ranges[0].from,minRepeatType:this.parser.minRepeatTerm})}stackID(e){let t=(Mu||(Mu=new WeakMap)).get(e);return t||Mu.set(e,t=String.fromCodePoint(this.nextStackID++)),t+e}}function Lu(e,t){for(let n=0;n<t.length;n++){let r=t[n];if(r.pos==e.pos&&r.sameState(e))return void(t[n].score<e.score&&(t[n]=e))}t.push(e)}class $u{constructor(e,t,n){this.source=e,this.flags=t,this.disabled=n}allows(e){return!this.disabled||0==this.disabled[e]}}const Nu=e=>e;class ju{constructor(e){this.start=e.start,this.shift=e.shift||Nu,this.reduce=e.reduce||Nu,this.reuse=e.reuse||Nu,this.hash=e.hash||(()=>0),this.strict=!1!==e.strict}}class Bu extends eu{constructor(e){if(super(),this.wrappers=[],14!=e.version)throw new RangeError(`Parser version (${e.version}) doesn't match runtime version (14)`);let t=e.nodeNames.split(" ");this.minRepeatTerm=t.length;for(let s=0;s<e.repeatNodeCount;s++)t.push("");let n=Object.keys(e.topRules).map((t=>e.topRules[t][1])),r=[];for(let s=0;s<t.length;s++)r.push([]);function i(e,t,n){r[e].push([t,t.deserialize(String(n))])}if(e.nodeProps)for(let s of e.nodeProps){let e=s[0];"string"==typeof e&&(e=Sc[e]);for(let t=1;t<s.length;){let n=s[t++];if(n>=0)i(n,e,s[t++]);else{let r=s[t+-n];for(let o=-n;o>0;o--)i(s[t++],e,r);t++}}}this.nodeSet=new Ac(t.map(((t,i)=>Tc.define({name:i>=this.minRepeatTerm?void 0:t,id:i,props:r[i],top:n.indexOf(i)>-1,error:0==i,skipped:e.skippedNodes&&e.skippedNodes.indexOf(i)>-1})))),e.propSources&&(this.nodeSet=this.nodeSet.extend(...e.propSources)),this.strict=!1,this.bufferLength=kc;let o=wu(e.tokenData);this.context=e.context,this.specializerSpecs=e.specialized||[],this.specialized=new Uint16Array(this.specializerSpecs.length);for(let s=0;s<this.specializerSpecs.length;s++)this.specialized[s]=this.specializerSpecs[s].term;this.specializers=this.specializerSpecs.map(zu),this.states=wu(e.states,Uint32Array),this.data=wu(e.stateData),this.goto=wu(e.goto),this.maxTerm=e.maxTerm,this.tokenizers=e.tokenizers.map((e=>"number"==typeof e?new Ou(o,e):e)),this.topRules=e.topRules,this.dialects=e.dialects||{},this.dynamicPrecedences=e.dynamicPrecedences||null,this.tokenPrecTable=e.tokenPrec,this.termNames=e.termNames||null,this.maxNode=this.nodeSet.types.length-1,this.dialect=this.parseDialect(),this.top=this.topRules[Object.keys(this.topRules)[0]]}createParse(e,t,n){let r=new Iu(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}getGoto(e,t,n=!1){let r=this.goto;if(t>=r[0])return-1;for(let i=r[t+1];;){let t=r[i++],o=1&t,s=r[i++];if(o&&n)return s;for(let n=i+(t>>1);i<n;i++)if(r[i]==e)return s;if(o)return-1}}hasAction(e,t){let n=this.data;for(let r=0;r<2;r++)for(let i,o=this.stateSlot(e,r?2:1);;o+=3){if(65535==(i=n[o])){if(1!=n[o+1]){if(2==n[o+1])return Vu(n,o+2);break}i=n[o=Vu(n,o+2)]}if(i==t||0==i)return Vu(n,o+1)}return 0}stateSlot(e,t){return this.states[6*e+t]}stateFlag(e,t){return(this.stateSlot(e,0)&t)>0}validAction(e,t){return!!this.allActions(e,(e=>e==t||null))}allActions(e,t){let n=this.stateSlot(e,4),r=n?t(n):void 0;for(let i=this.stateSlot(e,1);null==r;i+=3){if(65535==this.data[i]){if(1!=this.data[i+1])break;i=Vu(this.data,i+2)}r=t(Vu(this.data,i+1))}return r}nextStates(e){let t=[];for(let n=this.stateSlot(e,1);;n+=3){if(65535==this.data[n]){if(1!=this.data[n+1])break;n=Vu(this.data,n+2)}if(0==(1&this.data[n+2])){let e=this.data[n+1];t.some(((t,n)=>1&n&&t==e))||t.push(this.data[n],e)}}return t}configure(e){let t=Object.assign(Object.create(Bu.prototype),this);if(e.props&&(t.nodeSet=this.nodeSet.extend(...e.props)),e.top){let n=this.topRules[e.top];if(!n)throw new RangeError(`Invalid top rule name ${e.top}`);t.top=n}return e.tokenizers&&(t.tokenizers=this.tokenizers.map((t=>{let n=e.tokenizers.find((e=>e.from==t));return n?n.to:t}))),e.specializers&&(t.specializers=this.specializers.slice(),t.specializerSpecs=this.specializerSpecs.map(((n,r)=>{let i=e.specializers.find((e=>e.from==n.external));if(!i)return n;let o=Object.assign(Object.assign({},n),{external:i.to});return t.specializers[r]=zu(o),o}))),e.contextTracker&&(t.context=e.contextTracker),e.dialect&&(t.dialect=this.parseDialect(e.dialect)),null!=e.strict&&(t.strict=e.strict),e.wrap&&(t.wrappers=t.wrappers.concat(e.wrap)),null!=e.bufferLength&&(t.bufferLength=e.bufferLength),t}hasWrappers(){return this.wrappers.length>0}getName(e){return this.termNames?this.termNames[e]:String(e<=this.maxNode&&this.nodeSet.types[e].name||e)}get eofTerm(){return this.maxNode+1}get topNode(){return this.nodeSet.types[this.top[1]]}dynamicPrecedence(e){let t=this.dynamicPrecedences;return null==t?0:t[e]||0}parseDialect(e){let t=Object.keys(this.dialects),n=t.map((()=>!1));if(e)for(let i of e.split(" ")){let e=t.indexOf(i);e>=0&&(n[e]=!0)}let r=null;for(let i=0;i<t.length;i++)if(!n[i])for(let e,n=this.dialects[t[i]];65535!=(e=this.data[n++]);)(r||(r=new Uint8Array(this.maxTerm+1)))[e]=1;return new $u(e,n,r)}static deserialize(e){return new Bu(e)}}function Vu(e,t){return e[t]|e[t+1]<<16}function qu(e){let t=null;for(let n of e){let e=n.p.stoppedAt;(n.pos==n.p.stream.end||null!=e&&n.pos>e)&&n.p.parser.stateFlag(n.state,2)&&(!t||t.score<n.score)&&(t=n)}return t}function zu(e){if(e.external){let t=e.extend?1:0;return(n,r)=>e.external(n,r)<<1|t}return e.get}let Hu=0;class Wu{constructor(e,t,n,r){this.name=e,this.set=t,this.base=n,this.modified=r,this.id=Hu++}toString(){let{name:e}=this;for(let t of this.modified)t.name&&(e=`${t.name}(${e})`);return e}static define(e,t){let n="string"==typeof e?e:"?";if(e instanceof Wu&&(t=e),null===t||void 0===t?void 0:t.base)throw new Error("Can not derive from a modified tag");let r=new Wu(n,[],null,[]);if(r.set.push(r),t)for(let i of t.set)r.set.push(i);return r}static defineModifier(e){let t=new Uu(e);return e=>e.modified.indexOf(t)>-1?e:Uu.get(e.base||e,e.modified.concat(t).sort(((e,t)=>e.id-t.id)))}}let Qu=0;class Uu{constructor(e){this.name=e,this.instances=[],this.id=Qu++}static get(e,t){if(!t.length)return e;let n=t[0].instances.find((n=>n.base==e&&Yu(t,n.modified)));if(n)return n;let r=[],i=new Wu(e.name,r,e,t);for(let s of t)s.instances.push(i);let o=Xu(t);for(let s of e.set)if(!s.modified.length)for(let e of o)r.push(Uu.get(s,e));return i}}function Yu(e,t){return e.length==t.length&&e.every(((e,n)=>e==t[n]))}function Xu(e){let t=[[]];for(let n=0;n<e.length;n++)for(let r=0,i=t.length;r<i;r++)t.push(t[r].concat(e[n]));return t.sort(((e,t)=>t.length-e.length))}function Zu(e){let t=Object.create(null);for(let n in e){let r=e[n];Array.isArray(r)||(r=[r]);for(let e of n.split(" "))if(e){let n=[],i=2,o=e;for(let t=0;;){if("..."==o&&t>0&&t+3==e.length){i=1;break}let r=/^"(?:[^"\\]|\\.)*?"|[^\/!]+/.exec(o);if(!r)throw new RangeError("Invalid path: "+e);if(n.push("*"==r[0]?"":'"'==r[0][0]?JSON.parse(r[0]):r[0]),t+=r[0].length,t==e.length)break;let s=e[t++];if(t==e.length&&"!"==s){i=0;break}if("/"!=s)throw new RangeError("Invalid path: "+e);o=e.slice(t)}let s=n.length-1,a=n[s];if(!a)throw new RangeError("Invalid path: "+e);let l=new Ku(r,i,s>0?n.slice(0,s):null);t[a]=l.sort(t[a])}}return Gu.add(t)}const Gu=new Sc;class Ku{constructor(e,t,n,r){this.tags=e,this.mode=t,this.context=n,this.next=r}get opaque(){return 0==this.mode}get inherit(){return 1==this.mode}sort(e){return!e||e.depth<this.depth?(this.next=e,this):(e.next=this.sort(e.next),e)}get depth(){return this.context?this.context.length:0}}function Ju(e,t){let n=Object.create(null);for(let o of e)if(Array.isArray(o.tag))for(let e of o.tag)n[e.id]=o.class;else n[o.tag.id]=o.class;let{scope:r,all:i=null}=t||{};return{style:e=>{let t=i;for(let r of e)for(let e of r.set){let r=n[e.id];if(r){t=t?t+" "+r:r;break}}return t},scope:r}}function eh(e,t){let n=null;for(let r of e){let e=r.style(t);e&&(n=n?n+" "+e:e)}return n}function th(e,t,n,r=0,i=e.length){let o=new nh(r,Array.isArray(t)?t:[t],n);o.highlightRange(e.cursor(),r,i,"",o.highlighters),o.flush(i)}Ku.empty=new Ku([],2,null);class nh{constructor(e,t,n){this.at=e,this.highlighters=t,this.span=n,this.class=""}startSpan(e,t){t!=this.class&&(this.flush(e),e>this.at&&(this.at=e),this.class=t)}flush(e){e>this.at&&this.class&&this.span(this.at,e,this.class)}highlightRange(e,t,n,r,i){let{type:o,from:s,to:a}=e;if(s>=n||a<=t)return;o.isTop&&(i=this.highlighters.filter((e=>!e.scope||e.scope(o))));let l=r,c=rh(e)||Ku.empty,u=eh(i,c.tags);if(u&&(l&&(l+=" "),l+=u,1==c.mode&&(r+=(r?" ":"")+u)),this.startSpan(Math.max(t,s),l),c.opaque)return;let h=e.tree&&e.tree.prop(Sc.mounted);if(h&&h.overlay){let o=e.node.enter(h.overlay[0].from+s,1),c=this.highlighters.filter((e=>!e.scope||e.scope(h.tree.type))),u=e.firstChild();for(let d=0,f=s;;d++){let p=d<h.overlay.length?h.overlay[d]:null,g=p?p.from+s:a,m=Math.max(t,f),v=Math.min(n,g);if(m<v&&u)while(e.from<v)if(this.highlightRange(e,m,v,r,i),this.startSpan(Math.min(v,e.to),l),e.to>=g||!e.nextSibling())break;if(!p||g>n)break;f=p.to+s,f>t&&(this.highlightRange(o.cursor(),Math.max(t,p.from+s),Math.min(n,f),"",c),this.startSpan(Math.min(n,f),l))}u&&e.parent()}else if(e.firstChild()){h&&(r="");do{if(!(e.to<=t)){if(e.from>=n)break;this.highlightRange(e,t,n,r,i),this.startSpan(Math.min(n,e.to),l)}}while(e.nextSibling());e.parent()}}}function rh(e){let t=e.type.prop(Gu);while(t&&t.context&&!e.matchContext(t.context))t=t.next;return t||null}const ih=Wu.define,oh=ih(),sh=ih(),ah=ih(sh),lh=ih(sh),ch=ih(),uh=ih(ch),hh=ih(ch),dh=ih(),fh=ih(dh),ph=ih(),gh=ih(),mh=ih(),vh=ih(mh),yh=ih(),bh={comment:oh,lineComment:ih(oh),blockComment:ih(oh),docComment:ih(oh),name:sh,variableName:ih(sh),typeName:ah,tagName:ih(ah),propertyName:lh,attributeName:ih(lh),className:ih(sh),labelName:ih(sh),namespace:ih(sh),macroName:ih(sh),literal:ch,string:uh,docString:ih(uh),character:ih(uh),attributeValue:ih(uh),number:hh,integer:ih(hh),float:ih(hh),bool:ih(ch),regexp:ih(ch),escape:ih(ch),color:ih(ch),url:ih(ch),keyword:ph,self:ih(ph),null:ih(ph),atom:ih(ph),unit:ih(ph),modifier:ih(ph),operatorKeyword:ih(ph),controlKeyword:ih(ph),definitionKeyword:ih(ph),moduleKeyword:ih(ph),operator:gh,derefOperator:ih(gh),arithmeticOperator:ih(gh),logicOperator:ih(gh),bitwiseOperator:ih(gh),compareOperator:ih(gh),updateOperator:ih(gh),definitionOperator:ih(gh),typeOperator:ih(gh),controlOperator:ih(gh),punctuation:mh,separator:ih(mh),bracket:vh,angleBracket:ih(vh),squareBracket:ih(vh),paren:ih(vh),brace:ih(vh),content:dh,heading:fh,heading1:ih(fh),heading2:ih(fh),heading3:ih(fh),heading4:ih(fh),heading5:ih(fh),heading6:ih(fh),contentSeparator:ih(dh),list:ih(dh),quote:ih(dh),emphasis:ih(dh),strong:ih(dh),link:ih(dh),monospace:ih(dh),strikethrough:ih(dh),inserted:ih(),deleted:ih(),changed:ih(),invalid:ih(),meta:yh,documentMeta:ih(yh),annotation:ih(yh),processingInstruction:ih(yh),definition:Wu.defineModifier("definition"),constant:Wu.defineModifier("constant"),function:Wu.defineModifier("function"),standard:Wu.defineModifier("standard"),local:Wu.defineModifier("local"),special:Wu.defineModifier("special")};for(let iK in bh){let e=bh[iK];e instanceof Wu&&(e.name=iK)}Ju([{tag:bh.link,class:"tok-link"},{tag:bh.heading,class:"tok-heading"},{tag:bh.emphasis,class:"tok-emphasis"},{tag:bh.strong,class:"tok-strong"},{tag:bh.keyword,class:"tok-keyword"},{tag:bh.atom,class:"tok-atom"},{tag:bh.bool,class:"tok-bool"},{tag:bh.url,class:"tok-url"},{tag:bh.labelName,class:"tok-labelName"},{tag:bh.inserted,class:"tok-inserted"},{tag:bh.deleted,class:"tok-deleted"},{tag:bh.literal,class:"tok-literal"},{tag:bh.string,class:"tok-string"},{tag:bh.number,class:"tok-number"},{tag:[bh.regexp,bh.escape,bh.special(bh.string)],class:"tok-string2"},{tag:bh.variableName,class:"tok-variableName"},{tag:bh.local(bh.variableName),class:"tok-variableName tok-local"},{tag:bh.definition(bh.variableName),class:"tok-variableName tok-definition"},{tag:bh.special(bh.variableName),class:"tok-variableName2"},{tag:bh.definition(bh.propertyName),class:"tok-propertyName tok-definition"},{tag:bh.typeName,class:"tok-typeName"},{tag:bh.namespace,class:"tok-namespace"},{tag:bh.className,class:"tok-className"},{tag:bh.macroName,class:"tok-macroName"},{tag:bh.propertyName,class:"tok-propertyName"},{tag:bh.operator,class:"tok-operator"},{tag:bh.comment,class:"tok-comment"},{tag:bh.meta,class:"tok-meta"},{tag:bh.invalid,class:"tok-invalid"},{tag:bh.punctuation,class:"tok-punctuation"}]);const wh=121,xh=122,kh=123,_h=124,Oh=128,Sh=4,Eh=131,Ch=7,Th=8,Ah=9,Dh=10,Mh=139,Fh=19,Rh=140,Ph=23,Ih=141,Lh=27,$h=37,Nh=41,jh=145,Bh=146,Vh=147,qh=148,zh=47,Hh=68,Wh=154,Qh=70,Uh=155,Yh=72,Xh=156,Zh=76,Gh=161,Kh=79,Jh=80,ed=81,td=167,nd=89,rd=90,id=169,od=97,sd=171,ad=98,ld=100,cd=101,ud="undefined"!=typeof process&&{NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}&&/\bfparse(:dbg)?\b/.test({NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}.LOG),hd="undefined"!=typeof process&&{NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}&&/\bfparse:dbg\b/.test({NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}.LOG),dd="undefined"!=typeof process&&{NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}&&/\bcontext\b/.test({NODE_ENV:"production",BASE_URL:"/ilpi-administracao-frontend-vue3/"}.LOG),fd=[9,11,12,32,133,160,5760,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8232,8233,8239,8287,12288],pd=vd("\n\r"),gd="*".charCodeAt(0),md=vd("'./-+*^");function vd(e){return Array.from(e).map((e=>e.charCodeAt(0)))}function yd(e){return 63===e||e>=65&&e<=90||95===e||e>=97&&e<=122||e>=192&&e<=214||e>=216&&e<=246||e>=248&&e<=767||e>=880&&e<=893||e>=895&&e<=8191||e>=8204&&e<=8205||e>=8304&&e<=8591||e>=11264&&e<=12271||e>=12289&&e<=55295||e>=63744&&e<=64975||e>=65008&&e<=65533||e>=55296&&e<=56319||e>=56320&&e<=57343}function bd(e){return md.includes(e)}function wd(e){return e>=48&&e<=57||183===e||e>=768&&e<=879||e>=8255&&e<=8256}function xd(e){return fd.includes(e)}function kd(e,t){return t.concat(e.split(/\n/g).join("\n"+t))}function _d(e,t=0){const n=e.peek(t);return n===gd&&e.peek(t+1)===gd?{offset:2,token:"**"}:bd(n)?{offset:1,token:String.fromCharCode(n)}:null}function Od(e,t=0,n=!1){for(let r=!1,i=[],o=0;;o++){const s=e.peek(t+o);if(!(yd(s)||(r||n)&&wd(s)))return i.length?{token:String.fromCharCode(...i),offset:o}:null;r||(r=!0),i.push(s)}}function Sd(e,t){for(let n=!1,r=0;;r++){let i=e.peek(t+r);if(!xd(i))return n?{token:" ",offset:r}:null;n||(n=!0)}}function Ed(e,t){const n=t.contextKeys(),r=t.tokens;for(let i=0,o=[],s=null;;){const t=r.length+o.length>0,a=o.length>0,l=Od(e,i,t)||t&&_d(e,i)||a&&Sd(e,i);if(!l)return s;const{token:c,offset:u}=l;if(i+=u," "===c)continue;o=[...o,c];const h=[...r,...o].join(" ");if(n.some((e=>e===h))){const e=o[0];s={token:e,offset:e.length,term:kh}}if(!n.some((e=>e.startsWith(h)))){if(Ld.some((e=>e===h))){const e=o[0];s={token:e,offset:e.length,term:xh}}if(!Ld.some((e=>e.startsWith(h))))return s}}}const Cd={[xh]:"identifier",[kh]:"nameIdentifier"},Td=new Eu(((e,t)=>{hd&&console.log("%s: T <identifier | nameIdentifier>",e.pos);const n=Ed(e,t.context),r=t.context.tokens,i=n||Od(e,0,r.length>0);i&&(e.advance(i.offset),e.acceptToken(n?n.term:xh),ud&&console.log("%s: MATCH <%s> <%s>",e.pos,n?Cd[n.term]:"identifier",i.token))}),{contextual:!0}),Ad=new Eu(((e,t)=>{hd&&console.log("%s: T <propertyIdentifier>",e.pos);const n=t.context.tokens,r=Od(e,0,n.length>0);r&&(e.advance(r.offset),e.acceptToken(wh),ud&&console.log("%s: MATCH <propertyIdentifier> <%s>",e.pos,r.token))})),Dd=new Eu(((e,t)=>{let n;hd&&console.log("%s: T <insertSemi>",e.pos);let r=!1;for(n=0;;n++){const t=e.peek(n);if(!fd.includes(t)){pd.includes(t)&&(r=!0);break}}if(r){const t=Od(e,n+1),r=Sd(e,n+1);if(r||t&&/^(then|else|return|satisfies)$/.test(t.token))return;ud&&console.log("%s: MATCH <insertSemi>",e.pos),e.acceptToken(_h)}})),Md={[Xh]:"FunctionInvocation",[Uh]:"FilterExpression",[Wh]:"PathExpression"},Fd={[sd]:"Context",[id]:"FunctionDefinition",[Eh]:"ForExpression",[td]:"List",[Rh]:"IfExpression",[Ih]:"QuantifiedExpression"},Rd={[od]:"Context",[rd]:"FunctionDefinition",[Sh]:"ForExpression",[nd]:"List",[Fh]:"IfExpression",[Ph]:"QuantifiedExpression",[Hh]:"PathExpression",[Yh]:"FunctionInvocation",[Qh]:"FilterExpression",[Nh]:"ArithmeticExpression"};class Pd{constructor(e){this.fn=e}get(e){return this.fn(e)}static of(e){return new Pd(e)}}const Id={"date and time":1,date:1,time:1,duration:1},Ld=Object.keys(Id);class $d{constructor(e={}){this.value=e}getKeys(){return Object.keys(this.value)}get(e){const t=this.value[e],n=this.constructor;return n.isAtomic(t)?t:n.of(t)}set(e,t){const n=this.constructor;return n.of({...this.value,[e]:t})}merge(e){const t=this.constructor;return new t(t.__merge(this.value,e))}static isAtomic(e){return!e||e instanceof this||e instanceof Pd||"object"!==typeof e}static of(...e){return e.reduce(((e,t)=>e.merge(t)),new this({}))}static __unwrap(e){return e?e instanceof this?e.value:"object"!==typeof e?{}:{...e}:{}}static __merge(e,t){return F(this.__unwrap(t),((e,t,n)=>t instanceof Pd?{...e,[n]:t}:(t=this.__unwrap(t),C(e,n)&&(t=this.__merge(this.__unwrap(e[n]),t)),{...e,[n]:t})),this.__unwrap(e))}}class Nd{constructor({name:e="Expressions",tokens:t=[],children:n=[],parent:r=null,context:i,value:o,raw:s}){this.name=e,this.tokens=t,this.children=n,this.parent=r,this.context=i,this.value=o,this.raw=s}enterScope(e){const t=this.of({name:e,parent:this});return dd&&console.log("[%s] enter",t.path,t.context),t}exitScope(e){return this.parent?(dd&&console.log("[%s] exit %o\n%s",this.path,this.context,kd(e,"  ")),this.parent.pushChild(this)):(dd&&console.log("[%s] NO exit %o\n%s",this.path,this.context,kd(e,"  ")),this)}token(e){return dd&&console.log("[%s] token <%s> + <%s>",this.path,this.tokens.join(" "),e),this.assign({tokens:[...this.tokens,e]})}literal(e){return dd&&console.log("[%s] literal %o",this.path,e),this.pushChild(this.of({name:"Literal",value:e}))}computedValue(){for(let e=this;;e=Wd(e.children)){if(!e)return null;if(e.value)return e.value}}contextKeys(){return this.context.getKeys().map(jd)}get path(){return this.parent?.path?.concat(" > ",this.name)||this.name}get(e){const t=[e,e&&jd(e)],n=this.context.getKeys().find((e=>t.includes(jd(e))));if("undefined"===typeof n)return;const r=this.context.get(n);return r instanceof Pd?r.get(this):r}resolveName(){const e=this.tokens.join(" "),t=[],n=this.assign({tokens:t}),r=this.of({name:"VariableName",parent:n,value:this.get(e),raw:e});return dd&&console.log("[%s] resolve name <%s=%s>",r.path,e,this.get(e)),n.pushChild(r)}pushChild(e){if(!e)return this;const t=this.assign({children:[...this.children,e]});return e.parent=t,t}pushChildren(e){let t=this;for(const n of e)t=t.pushChild(n);return t}declareName(){if(0===this.tokens.length)throw Error("no tokens to declare name");const e=this.tokens.join(" ");return dd&&console.log("[%s] declareName <%s>",this.path,e),this.assign({tokens:[]}).pushChild(this.of({name:"Name",value:e}))}define(e,t){if("string"!==typeof e)return dd&&console.log("[%s] no define <%s=%s>",this.path,e,t),this;dd&&console.log("[%s] define <%s=%s>",this.path,e,t);const n=this.context.set(e,t);return this.assign({context:n})}assign(e={}){return Nd.of({...this,...e})}of(e={}){const t={context:this.context,parent:this.parent};return Nd.of({...t,...e})}static of(e){const{name:t,tokens:n=[],children:r=[],parent:i=null,context:o,value:s,raw:a}=e;if(!o)throw new Error("must provide <context>");return new Nd({name:t,tokens:[...n],children:[...r],context:o,parent:i,value:s,raw:a})}}function jd(e){return e.replace(/\s*([./\-'+]|\*\*?)\s*/g," $1 ").replace(/\s{2,}/g," ").trim()}function Bd(e,t,n){const r=e.children.filter((e=>e.name!==t)),i=e.children.filter((e=>e.name===t)),o=r[0],s=r[Math.max(1,r.length-1)],a=o?.computedValue(),l=s?.computedValue()||null;return e.assign({children:i}).enterScope(t).pushChildren(r).exitScope(n).define(a,l)}function Vd(e={},t=$d){const n=Nd.of({context:t.of(e)});return new ju({start:n,reduce(e,n,r,i){if(n===Fh){const[n,r]=e.children.slice(-2);e=e.assign({value:t.of(n?.computedValue(),r?.computedValue())})}if(n===nd&&(e=e.assign({value:t.of(...e.children.map((e=>e?.computedValue())))})),n===Qh){const[t,n]=e.children.slice(-2);e=e.assign({value:t?.computedValue()})}if(n===Yh){const[t,...n]=e.children;"get value"===t?.raw&&(e=zd(e,n))}const o=Fd[n];if(o)return e.enterScope(o);const s=Md[n];if(s){const{children:r,context:i}=e,o=r.slice(0,-1),a=Wd(r);let l=null;return n===Wh&&(l=t.of(a?.computedValue())),n===Uh&&(l=t.of(i,a?.computedValue()).set("item",a?.computedValue())),e.assign({children:o}).enterScope(s).pushChild(a).assign({context:l||i})}const a=i.read(i.pos,r.pos),l=Rd[n];if(l)return e.exitScope(a);if(n===ad){const n=e.children.filter((e=>"ContextEntry"!==e.name)),r=n[0],i=Wd(n);return Bd(e,"ContextEntry",a).assign({value:t.of(e.value).set(r?.computedValue(),i?.computedValue())})}if(n===Ch||n===Lh)return Bd(e,"InExpression",a);if(n===Mh)return e.define("partial",Pd.of((e=>Wd(e.children)?.computedValue())));if(n===Zh){const t=Wd(e.children).computedValue();return e.define(t,1)}if(n===jh||n===Bh||n===Vh){const t=e.children.slice(0,-1),n=Wd(e.children);return e.assign({children:t}).enterScope("ArithmeticExpression").pushChild(n)}if(n===qh)return e.enterScope("ArithmeticExpression");if(n===Ah||n===Dh||n===cd)return e.token(a);if(n===Jh)return e.literal(a.replace(/^"|"$/g,""));if(n===ed)return e.literal("true"===a);if(n===Kh)return e.literal(parseFloat(a));if(n===Gh)return e.literal(null);if(n===zh)return e.resolveName();if(n===Th||n===ld)return e.declareName();if((n===Oh||n===$h)&&e.tokens.length>0)throw new Error("uncleared name");if(n===Oh){let t=e;while(t.parent)t=t.exitScope(a);return t}return e}})}const qd=Vd({});function zd(e,t){if(!t.length)return e.assign({value:null});if("Name"===t[0].name&&(t=Hd(t,["m","key"])),2!==t.length)return e.assign({value:null});const[n,r]=t,i=r?.computedValue(),o=n?.computedValue();return o&&"object"===typeof o&&"string"===typeof i?e.assign({value:[jd(i),i].reduce(((e,t)=>o.get(t)||e),null)}):e.assign({value:null})}function Hd(e,t){const n={};for(let r=0;r<e.length;r+=2){const[t,i]=e.slice(r,r+2);n[t.value]=i}return t.map((e=>n[e]))}function Wd(e){return e[e.length-1]}const Qd=Zu({StringLiteral:bh.string,NumericLiteral:bh.number,BooleanLiteral:bh.bool,"AtLiteral!":bh.special(bh.string),CompareOp:bh.compareOperator,ArithOp:bh.arithmeticOperator,"for if then else some every satisfies between return":bh.controlKeyword,"in instance of and or":bh.operatorKeyword,function:bh.definitionKeyword,as:bh.keyword,"Type/...":bh.typeName,Wildcard:bh.special(bh.variableName),null:bh.null,LineComment:bh.lineComment,BlockComment:bh.blockComment,'VariableName! "?"':bh.variableName,"DateTimeConstructor! SpecialFunctionName!":bh.function(bh.special(bh.variableName)),"List Interval":bh.list,Context:bh.definition(bh.literal),"Name!":bh.definition(bh.variableName),"Key/Name! ContextEntryType/Name!":bh.definition(bh.propertyName),"PathExpression/VariableName!":bh.function(bh.propertyName),"FormalParameter/ParameterName!":bh.function(bh.definition(bh.variableName)),"( )":bh.paren,"[ ]":bh.squareBracket,"{ }":bh.brace,".":bh.derefOperator,", ;":bh.separator,"..":bh.punctuation}),Ud={__proto__:null,for:10,in:32,return:36,if:40,then:42,else:44,some:48,every:50,satisfies:56,or:60,and:64,between:72,instance:86,of:89,days:101,time:103,duration:105,years:107,months:109,date:111,list:117,context:123,function:130,null:156,true:330,false:330,"?":170,external:186,not:211},Yd=Bu.deserialize({version:14,states:"C|O`QYOOO`QYOOO$mQYOOOOQU'#Ce'#CeO$wQYO'#C`O&QQYO'#FQOOQQ'#Ff'#FfO&[QYO'#FfO`QYO'#DVOOQU'#En'#EnO'{Q^O'#D]OOQU'#D^'#D^OOQU'#D]'#D]OOQO'#Fn'#FnO)xQWO'#DvOOQQ'#D}'#D}OOQQ'#EO'#EOOOQQ'#EP'#EPO)}OWO'#ESO)xQWO'#EQOOQQ'#EQ'#EQOOQQ'#Ft'#FtOOQQ'#Fr'#FrOOQQ'#Fy'#FyOOQQ'#EU'#EUO`QYO'#EWOOQQ'#FS'#FSO*SQ^O'#FSO+yQYO'#EXO,QQWO'#EYOOQP'#F}'#F}O,VQXO'#EaOOQQ'#Fz'#FzOOQQ'#FR'#FRQOQWOOOOQQ'#FT'#FTOOQQ'#F^'#F^O`QYO'#CoOOQQ'#F_'#F_O$wQYO'#CsO,bQYO'#DwOOQQ'#Fs'#FsO,gQYO'#EROOQO'#ER'#ERO`QYO'#EVO`QYO'#EUOOQO'#F{'#F{Q,oQWOOO,tQYO'#DRO-kQWO'#FbOOQO'#DT'#DTO-vQYO'#FfO-}QWOOO.tQYO'#CdO/RQYO'#FVOOQQ'#Cc'#CcO/WQYO'#FUOOQQ'#Cb'#CbO/`QYO,58zO`QYO,59iOOQQ'#Fc'#FcOOQQ'#Fd'#FdOOQQ'#Fe'#FeO`QYO,59qO`QYO,59qO`QYO,59qOOQQ'#Fl'#FlO/eQYO,5:^OOQQ'#Fm'#FmO`QYO,5:`O`QYO,59eO`QYO,59gO`QYO,59iO1^QYO,59iO1eQYO,59rOOQQ,5:i,5:iO1jQYO,59qOOQU-E8l-E8lO3^QYO'#FoOOQQ,5:b,5:bOOQQ,5:n,5:nOOQQ,5:l,5:lO3eQYO,5:rOOQQ,5;n,5;nO3oQYO,5:qO3|QWO,5:sO4RQYO,5:tOOQP'#Ee'#EeO4xQXO'#EdOOQO'#Ec'#EcO5PQWO'#EbO5UQWO'#GOO5^QWO,5:{O5cQYO,59ZO/RQYO'#FaOOQQ'#Cw'#CwO5jQYO'#F`OOQQ'#Cv'#CvO5rQYO,59_O5wQYO,5:cO5|QYO,5:mO3hQYO,5:qO6RQYO,5:pO`QYO'#EwQ,oQWOOO`QYO'#EmO6xQWO,5;|O`QYOOOOQR'#Cf'#CfOOQQ'#Ej'#EjO7rQYO,59OO`QYO,5;qOOQQ'#FY'#FYO$wQYO'#EkO8SQYO,5;pO`QYO1G.fOOQQ'#F]'#F]O8yQYO1G/TO;pQYO1G/]O;zQYO1G/]O<UQYO1G/]OOQQ1G/x1G/xO=xQYO1G/zO>PQYO1G/PO?YQYO1G/RO@cQYO1G/TO`QYO1G/TOOQQ1G/T1G/TO@yQYO1G/^OAhQ^O'#CdOBzQYO'#FqOOQO'#Dz'#DzOCUQWO'#DyOCZQWO'#FpOOQO'#Dx'#DxOOQO'#D{'#D{OCcQWO,5<ZOOQQ1G0^1G0^O`QYO1G0]O`QYO'#EsOChQWO,5<]OOQQ1G0_1G0_OCsQWO'#E[ODOQWO'#F|OOQO'#EZ'#EZODWQWO1G0`OOQP'#Eu'#EuOD]QXO,5;OO`QYO,5:|ODdQXO'#EvODlQWO,5<jOOQQ1G0g1G0gO`QYO1G.uO`QYO,5;{O$wQYO'#ElODtQYO,5;zO`QYO1G.yOD|QYO1G/}OOQO1G0X1G0XOOQO,5;c,5;cOOQO-E8u-E8uOOQO,5;X,5;XOOQO-E8k-E8kOERQWOOOOQQ-E8h-E8hOEWQYO'#CmOOQQ1G1]1G1]OOQQ,5;V,5;VOOQQ-E8i-E8iOEeQYO7+$QOOQQ7+%f7+%fO`QYO7+$oOF[QYO,5:rOFiQWO7+$oOFnQYO'#D[OOQQ'#DZ'#DZOHbQYO'#D_OHgQYO'#D_OHlQYO'#D_OHqQ`O'#DgOHvQ`O'#DjOH{Q`O'#DnOOQQ7+$x7+$xO`QYO,5:eO$wQYO'#ErOIQQWO,5<[OOQQ1G1u1G1uOJWQYO7+%wOJeQYO,5;_OOQO-E8q-E8qO@yQYO,5:vO$wQYO'#EtOJrQWO,5<hOJzQYO7+%zOOQP-E8s-E8sOKRQYO1G0hOOQO,5;b,5;bOOQO-E8t-E8tOK]QYO7+$aOKdQYO1G1gOOQQ,5;W,5;WOOQQ-E8j-E8jOKnQYO7+$eOOQO7+%i7+%iO`QYO,59XOLeQYO<<HZOOQQ<<HZ<<HZO/eQYO'#EoOMnQYO,59vO! bQYO,59yO! gQYO,59yO! lQYO,59yO! qQYO,5:RO$wQYO,5:UO!!`QbO,5:YO!!gQYO1G0POOQO,5;^,5;^OOQO-E8p-E8pO!!qQYO<<IcOOQQ<<Ic<<IcOOQO1G0b1G0bOOQO,5;`,5;`OOQO-E8r-E8rO!%pQYO'#E^OOQQ<<If<<IfO`QYO<<IfO`QYO<<G{O!&gQYO1G.sOOQQ,5;Z,5;ZOOQQ-E8m-E8mO!&qQYO1G/eOOQQ1G/e1G/eO!&vQbO'#D]O!'XQ`O'#D[O!'dQ`O1G/mO!'iQWO'#DmO!'nQ`O'#FhOOQO'#Dl'#DlO!'vQ`O1G/pOOQO'#Dq'#DqO!'{Q`O'#FjOOQO'#Dp'#DpO!(TQ`O1G/tOOQQAN?QAN?QO!(YQYOAN=gOOQQ7+%P7+%PO!)PQ`O,59vOOQQ7+%X7+%XO! qQYO,5:XO$wQYO'#EpO!)[Q`O,5<SOOQQ7+%[7+%[O! qQYO'#EqO!)dQ`O,5<UO!)lQ`O7+%`OOQO1G/s1G/sOOQO,5;[,5;[OOQO-E8n-E8nOOQO,5;],5;]OOQO-E8o-E8oO@yQYO<<HzOOQQAN>fAN>fO/eQYO'#EoO! qQYO<<HzO!)qQ`O7+%`O!)vQ`O1G/tO!!`QbO,5:YO!){Q`O'#Dn",stateData:"!*[~O#rOS#sOSPOSQOS~OTsOZVO[UOdtOhvOivOs}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~OTsO[UOdtOhvOivOs}OviO!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~OZ!TO#]!UO~P#PO#nRO#oRO~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO!i!fO#z!dOv$bX~O#l#tX$s#tX~P%PO$i!mOT$YXZ$YX[$YXd$YXh$YXi$YXs$YXv$YX!T$YX!U$YX!V$YX!X$YX!c$YX!g$YX!i$YX!p$YX!w$YX#S$YX#n$YX#o$YX$Z$YX$j$YX$k$YX$l$YX~O#nRO#oROZ!PX[!PX]!PX^!PX_!PX`!PXn!PXp!PXr!PXs!PXt!PXv!PX{!PX!i!PX#l!PX#p!PX#z!PX$s!PX$O!PXx!PX#}!PX!g!PXe!PXb!PX#R!PXf!PXl!PX~Ov!pO~O$j`O~O#p!uOZ#vX[#vX]#vX^#vX_#vX`#vXn#vXp#vXr#vXs#vXt#vXv#vX{#vX!i#vX#l#vX#z#vX$s#vX$O#vXx#vX#}#vX!g#vXe#vXb#vX#R#vXf#vXl#vX~O!g$eP~P`Ov!xO~O#m!yO$j`O#R$rP~Op#VO~Op#WOv!uX~O$s#ZO~O#luX$OuX$suXxuX#}uX!guXeuXbuX#RuXfuXluX~P%PO$O#]O#l$UXx$UX~O#l#[X~P&[Ov#_O~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O$]WX~O`WXxWX$OWX~P.SO`#dO~O$O#eOb#xX~Ob#hO~O#nRO#oRO$ZZO~OTsOZVO[UOdtOhvOivOs}O!T{O!U{O!VxO!XzO!c!OO!g|O!igO!pyO!wjO#SnO#nRO#oRO$ZZO$i_O$j`O$kaO$lbO~Ov#rO~P/pO|#tO~O{!lO!i!fO#z!dOZya[ya]ya^ya_ya`yanyapyaryasyatyav$bX#lya$sya$Oyaxya#}ya!gyaeyabya#Ryafyalya~Ox$eP~P`Ox#}O#}$OO~P%PO#}$OO$O$PO!g$eX~P%PO!g$RO~O#nRO#oROx$pP~OZ#`O[#`O]#`O^#`O_#`O#m!yO#z#`O#{#`O~O$]#WX~P4^O$]$YO~O$O$ZO#R$rX~O#R$]O~Oe$^O~P%PO$O$`Ol$SX~Ol$bO~O!W$cO~O!T$dO~O#l!xa$s!xa$O!xax!xa#}!xa!g!xae!xab!xa#R!xaf!xal!xa~P%PO$O#]O#l$Uax$Ua~OZ#`O[#`O]#`O^#`O_#`O#nRO#oRO#z#`O#{#`O~O`Wa$]WaxWa$OWa~P7TO$O#eOb#xa~OZ!^O[!^O]!_O^!_O_!`O{!lO!i!fO#z!dOv$bX~O`qinqipqirqisqitqi#lqi$sqi$Oqixqi#}qi!gqieqibqi#Rqifqilqi~P8[O_!`O{!lO!i!fO#z!dOZyi[yi`yinyipyiryisyityiv$bX#lyi$syi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O]!_O^!_O~P:SO]yi^yi~P:SO{!lO!i!fO#z!dOZyi[yi]yi^yi_yi`yinyipyiryisyityiv$bX#lyi$syi$Oyixyi#}yi!gyieyibyi#Ryifyilyi~O!g$pO~P%PO`!kOp!iOr!]Os!]Ot!jOnmi#lmi$smi$Omixmi#}mi!gmiemibmi#Rmifmilmi~P8[O`!kOr!]Os!]Ot!jOnoipoi#loi$soi$Ooixoi#}oi!goieoiboi#Roifoiloi~P8[O`!kOn!hOp$qOr!]Os!]Ot!jO~P8[O!S$vO!V$wO!X$xO![$yO!_$zO!c${O#nRO#oRO$ZZO~OZ#bX[#bX]#bX^#bX_#bX`#bXn#bXp#bXr#bXs#bXt#bXv#bXx#bX{#bX!i#bX#n#bX#o#bX#p#bX#z#bX$O#bX~P.SO$O$POx$eX~P%PO$]$}O~O$O%OOx$dX~Ox%QO~O$O$PO!g$eax$ea~O$]%UOx#OX$O#OX~O$O%VOx$pX~Ox%XO~O$]#Wa~P4^O#m!yO$j`O~O$O$ZO#R$ra~O$O$`Ol$Sa~O!U%cO~OxrO~O#}%dObaX$OaX~P%PO#lSq$sSq$OSqxSq#}Sq!gSqeSqbSq#RSqfSqlSq~P%POx#}O#}$OO$OuX~P%POx%fO~O#z%gOZ!OX[!OX]!OX^!OX_!OX`!OXn!OXp!OXr!OXs!OXt!OXv!OX{!OX!i!OX#l!OX$s!OX$O!OXx!OX#}!OX!g!OXe!OXb!OX#R!OXf!OXl!OX~Op%iO~Op%jO~Op%kO~O!]%lO~O!]%mO~O!]%nO~O$O%OOx$da~OZ!^O[!^O]!_O^!_O_!`O`!kOn!hOp!iOr!]Os!]Ot!jO{!lO#z!dOv$bX~Ox%sO!g%sO!i%rO~PIYO!g#ga$O#gax#ga~P%PO$O%VOx$pa~O#P%yO~P`O#R#Ui$O#Ui~P%POf%zO~P%POl$Ti$O$Ti~P%PO#lgq$sgq$Ogqxgq#}gq!ggqegqbgq#Rgqfgqlgq~P%PO`qynqypqyrqysqytqy#lqy$sqy$Oqyxqy#}qy!gqyeqybqy#Rqyfqylqy~P8[O#z%gOZ!Oa[!Oa]!Oa^!Oa_!Oa`!Oan!Oap!Oar!Oas!Oat!Oav!Oa{!Oa!i!Oa#l!Oa$s!Oa$O!Oax!Oa#}!Oa!g!Oae!Oab!Oa#R!Oaf!Oal!Oa~O!T&OO~O!W&OO~O!T&PO~O!S$vO!V$wO!X$xO![$yO!_$zO!c&uO#nRO#oRO$ZZO~O!Y$^P~P! qOx!mi$O!mi~P%POT$aXZ$aX[$aX]!yy^!yy_!yy`!yyd$aXh$aXi$aXn!yyp!yyr!yys$aXt!yyv$aX{!yy!T$aX!U$aX!V$aX!X$aX!c$aX!g$aX!i$aX!p$aX!w$aX#S$aX#l!yy#n$aX#o$aX#z!yy$Z$aX$i$aX$j$aX$k$aX$l$aX$s!yy$O!yyx!yy#}!yye!yyb!yy#R!yyf!yyl!yy~O#l#QX$s#QX$O#QXx#QX#}#QX!g#QXe#QXb#QX#R#QXf#QXl#QX~P%PObai$Oai~P%PO!U&_O~O#nRO#oRO!Y!PX#z!PX$O!PX~O#z&pO!Y!OX$O!OX~O!Y&aO~O$]&bO~O$O&cO!Y$[X~O!Y&eO~O$O&fO!Y$^X~O!Y&hO~O#lc!R$sc!R$Oc!Rxc!R#}c!R!gc!Rec!Rbc!R#Rc!Rfc!Rlc!R~P%PO#z&pO!Y!Oa$O!Oa~O$O&cO!Y$[a~O$O&fO!Y$^a~O$_&nO~O$_&qO~O!Y&rO~O!]&tO~O$Z~QP_^$i]#z~",goto:"E|$sPPPP$tP%m%p%v&Y'sPPPPPP'|P$tPPP$tPP(P(SP$tP$tP$tPPP(YP(eP$t$tPP(n)T)`*m)TPPPPPPP)TPP)TP+r+u)TP+{,R$tP$tP$t,Y-R-U-[-RP-d.]-d-d/]0UP$t0}$t1v1v2o2rP2xPP1v3O3U/X3YPP3bP3e3l3r3x4O5Z5e5k5q5w6O6U6[6bPPPPPPPP6h6q8x9q:j:mPP:qPP:w:z;s<l<o<s<x=g>V>vP?oP?rP?v@iA[BTBZB^$tBdBdPPPPC]8xDUD}EQEy!mjOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR![SQ!YSR$m#eS!WS#eS#Qw$`W#w!p!x%O%VT&T%m&c#WXOPQWYilu|}!]!a!b!c!e!g!h!i!j!k#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&Q&b&f&n&p&q&tb!VSw!x#e$`%O%V%m&cU#a!V#b#uR#u!pU#a!V#b#uT$W!z$XR$l#cR#UwQ#SwR%`$`U!RQ#_#rQ#s!kR$g#]QrQQ$i#_R$s#rQ$|#tQ%t%UQ&S%lU&X%n&f&tQ&i&bT&o&n&qc$u#t%U%l%n&b&f&n&q&t!lkOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ#m!eU$t#t%U&nS%|%g&p]&R%l%n&b&f&q&t#V[OPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%l%n%y%z&b&f&n&p&q&tR&W%mQ&U%mR&j&cQ&[%nR&s&tS&Y%n&tR&l&f!m]OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#|!pQ#y!pR%p%OS#x!p%OT$S!x%V!meOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!leOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!rbT!{o$Z!mcOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mdOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mhOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mpOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$V!xQ$T!xR%u%VQ%x%XR&]%yQ!}oR%[$ZT!|o$ZS!zo$ZT$W!z$XRrQS#b!V#uR$j#bQ#f!YR$n#fQ$a#SR%a$aQ#^!RR$h#^!vYOPQWilu|}!]!a!b!c!e!g!h!i!j!k!p#Z#]#_#c#g#r#t$O$P$Y$^$_$b$q$}%U%X%d%g%y%z&nS!oY&Q_&Q%l%n&b&f&p&q&tQ%h$tS%}%h&`R&`&RQ&d&UR&k&dQ&g&YR&m&gQ%P#yR%q%PS$Q!v#vR%T$QQ%W$TR%v%WQ$X!zR%Y$XQ$[!}R%]$[Q#[!PR$f#[QrOQ!PPR$e#ZUTOP#ZW!QQ!k#]#_Q!nWQ!tiQ!vlQ#PuQ#X|Q#Y}Q#i!]Q#j!aQ#k!bQ#l!cQ#n!gQ#o!hQ#p!iQ#q!jQ#v!pQ$k#cQ$o#gQ$r#rQ%R$OQ%S$PQ%Z$YQ%^$^Q%_$_Q%b$bQ%e$qQ%o$}S%w%X%yQ%{%dR&^%z!mqOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mSOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR!ZST!XS#eQ#c!WR$_#QR#g![!muOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mwOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#TwT#Rw$`V!SQ#_#r!X!aT!Q!t!v#P#X#Y#i#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!Z!bT!Q!t!v#P#X#Y#i#j#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!]!cT!Q!t!v#P#X#Y#i#j#k#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!mWOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR&V%mT&Z%n&t!a!eT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!a!gT!Q!n!t!v#P#X#Y#i#j#k#l#n#o#p#q#v$k$o$r%R%S%Z%^%_%b%e%o%w%{&^!m^OPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zQ!q^R!scR#z!pQ!wlR#{!p!mfOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mlOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%z!mmOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR$U!x!moOPQWilu|}!]!a!b!c!g!h!i!j!k!p#Z#]#_#c#g#r$O$P$Y$^$_$b$q$}%X%d%y%zR#Oo",nodeNames:"⚠ LineComment BlockComment Expression ForExpression for InExpressions InExpression Name Identifier Identifier ArithOp ArithOp ArithOp ArithOp ArithOp in IterationContext return IfExpression if then else QuantifiedExpression some every InExpressions InExpression satisfies Disjunction or Conjunction and Comparison CompareOp CompareOp between PositiveUnaryTest ( PositiveUnaryTests ) ArithmeticExpression InstanceOfExpression instance of Type QualifiedName VariableName BacktickIdentifier SpecialType days time duration years months date > ListType list < ContextType context ContextEntryTypes ContextEntryType FunctionType function ArgumentTypes ArgumentType PathExpression ] FilterExpression [ FunctionInvocation SpecialFunctionName NamedParameters NamedParameter ParameterName PositionalParameters null NumericLiteral StringLiteral BooleanLiteral DateTimeLiteral DateTimeConstructor AtLiteral ? SimplePositiveUnaryTest Interval ParenthesizedExpression List FunctionDefinition FormalParameters FormalParameter external FunctionBody } { Context ContextEntry Key Name Identifier Expressions UnaryTests Wildcard not",maxTerm:173,context:qd,nodeProps:[["closedBy",38,")",71,"]",96,"}"],["openedBy",40,"(",69,"[",95,"{"],["group",-5,78,79,80,81,82,"Literal"]],propSources:[Qd],skippedNodes:[0,1,2],repeatNodeCount:14,tokenData:"-c~RvXY#iYZ$^Z[#i]^$^pq#iqr$crs$nwx&fxy&kyz&pz{&u{|'S|}'X}!O'^!O!P'k!P!Q(T!Q![*O![!]*a!]!^*f!^!_*k!_!`$i!`!a*z!b!c+U!}#O+Z#P#Q+`#Q#R&}#S#T+e#o#p-X#q#r-^$f$g#i#BY#BZ#i$IS$I_#i$I|$I}$^$I}$JO$^$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~#nY#r~XY#iZ[#ipq#i$f$g#i#BY#BZ#i$IS$I_#i$JT$JU#i$KV$KW#i&FU&FV#i?HT?HU#i~$cO#s~~$fP!_!`$i~$nOr~~$sW$j~OY$nZr$nrs%]s#O$n#O#P%b#P;'S$n;'S;=`&`<%lO$n~%bO$j~~%eRO;'S$n;'S;=`%n;=`O$n~%sX$j~OY$nZr$nrs%]s#O$n#O#P%b#P;'S$n;'S;=`&`;=`<%l$n<%lO$n~&cP;=`<%l$n~&kO#{~~&pOv~~&uOx~~&zP^~z{&}~'SO_~~'XO[~~'^O$O~R'cPZP!`!a'fQ'kO$_Q~'pQ#z~!O!P'v!Q!['{~'{O#}~~(QP$i~!Q!['{~(YQ]~z{(`!P!Q)g~(cTOz(`z{(r{;'S(`;'S;=`)a<%lO(`~(uVOz(`z{(r{!P(`!P!Q)[!Q;'S(`;'S;=`)a<%lO(`~)aOQ~~)dP;=`<%l(`~)lSP~OY)gZ;'S)g;'S;=`)x<%lO)g~){P;=`<%l)g~*TQ$i~!O!P*Z!Q![*O~*^P!Q!['{~*fO$]~~*kO$s~R*rP!]QsP!_!`*uP*zOsPR+RP!YQsP!_!`*u~+ZO$l~~+`O!i~~+eO!g~~+hWOY+eZ#O+e#O#P,Q#P#S+e#S#T,|#T;'S+e;'S;=`-R<%lO+e~,TRO;'S+e;'S;=`,^;=`O+e~,aXOY+eZ#O+e#O#P,Q#P#S+e#S#T,|#T;'S+e;'S;=`-R;=`<%l+e<%lO+e~-RO$Z~~-UP;=`<%l+e~-^O#S~~-cO#R~",tokenizers:[Ad,Td,Dd,0,1],topRules:{Expression:[0,3],Expressions:[1,102],UnaryTests:[2,103]},dialects:{camunda:2532},dynamicPrecedences:{31:-1,68:1,72:-1,74:-1},specialized:[{term:122,get:e=>Ud[e]||-1}],tokenPrec:2534});function Xd(e){return Object.getPrototypeOf(e)===Object.prototype}function Zd(e){return Gs.isDateTime(e)}function Gd(e){return Ho.isDuration(e)}function Kd(e){return Array.isArray(e)}function Jd(e){return"boolean"===typeof e}function ef(e){return null===e||void 0===e?"nil":Jd(e)?"boolean":of(e)?"number":sf(e)?"string":Xd(e)?"context":Kd(e)?"list":Gd(e)?"duration":Zd(e)?1900===e.year&&1===e.month&&1===e.day?"time":0===e.hour&&0===e.minute&&0===e.second&&0===e.millisecond&&e.zone===Zn.utcInstance?"date":"date time":e instanceof rf?"range":e instanceof lf?"function":"literal"}function tf(e,t){return ef(e)===t}function nf(e,t){if(Zd(e)){if("time"===t)return e.set({year:1900,month:1,day:1});if("date"===t)return e.setZone("utc",{keepLocalTime:!0}).startOf("day");if("date time"===t)return e}return null}class rf{constructor(e){Object.assign(this,e)}}function of(e){return"number"===typeof e}function sf(e){return"string"===typeof e}function af(e,t,n=!1){if(null===e&&null!==t||null!==e&&null===t)return!1;Kd(e)&&e.length<2&&(e=e[0]),Kd(t)&&t.length<2&&(t=t[0]);const r=ef(e),i=ef(t),o=["date time","time","date"];if(o.includes(r))return o.includes(i)?"time"===r&&"time"!==i||"time"===i&&"time"!==r?null:n||e.zone===yn.instance||t.zone===yn.instance?e.equals(t):e.toUTC().valueOf()===t.toUTC().valueOf():null;if(r!==i)return null;if("nil"===r)return!0;if("list"===r)return e.length===t.length&&e.every(((e,n)=>af(e,t[n])));if("duration"===r)return Math.abs(e.as("days"))>180?0===Math.trunc(e.minus(t).as("months")):0===Math.trunc(e.minus(t).as("seconds"));if("context"===r){const n=Object.entries(e),r=Object.entries(t);return n.length===r.length&&n.every((([e,n])=>e in t&&af(n,t[e])))}return"range"===r?[[e.start,t.start],[e.end,t.end],[e["start included"],t["start included"]],[e["end included"],t["end included"]]].every((([e,t])=>e===t)):e==t||r!==i&&null}class lf{constructor(e,t){this.fn=e,this.parameterNames=t}invoke(e){let t;if(Kd(e)){if(t=e,t.length>this.parameterNames.length){const e=this.parameterNames[this.parameterNames.length-1];if(!e||!e.startsWith("..."))return null}}else{if(Object.keys(e).some((e=>!this.parameterNames.includes(e)&&!this.parameterNames.includes(`...${e}`))))return null;t=this.parameterNames.reduce(((t,n)=>{if(n.startsWith("...")){n=n.slice(3);const r=e[n];return r?[...t,...Kd(r)?r:[r]]:t}return[...t,e[n]]}),[])}return this.fn.call(null,...t)}}function cf(e){if(Array.isArray(e.$args))return e.$args;const t=e.toString(),n=/^(?:[^(]*\s*)?\(([^)]+)?\)/.exec(t);if(!n)throw new Error("failed to parse params: "+t);const[r,i]=n;return i?i.split(",").map((e=>e.trim())):[]}function uf(e){return new Error(`not implemented: ${e}`)}function hf(e,t){if(["nil","boolean","number","string"].includes(ef(t)))return;if(e in t)return t[e];const n=jd(e);if(n in t)return t[n];const r=Object.entries(t).find((([e])=>n===jd(e)));return r?r[1]:void 0}function df(e){return"number"===typeof e?Ho.fromMillis(e):Ho.fromISO(e)}function ff(e=null,t=null,n=null){if(t){if(e)throw new Error("<str> and <time> provided");return ff(`1900-01-01T${t}`,null)}if("string"===typeof e){if(e.startsWith("-"))throw uf("negative date");if(!e.includes("T"))return ff(e+"T00:00:00",null,n||Zn.utcInstance);if(e.includes("@")){if(n)throw new Error("<zone> already provided");const[t,r]=e.split("@");return ff(t,null,Yo.normalizeZone(r))}return Gs.fromISO(e.toUpperCase(),{setZone:!0,zone:n})}return Gs.now()}const pf={number:xf((function(e,t,n){if(3!==arguments.length)return null;t&&(e=e.split(t).join("")),n&&"."!==n&&(e=e.split(".").join("#").split(n).join("."));const r=+e;return isNaN(r)?null:r}),["string","string?","string?"],["from","grouping separator","decimal separator"]),string:xf((function(e){return null===e?null:Af(e)}),["any"]),date:xf((function(e,t,n,r){let i;return r||of(e)||(r=e,e=null),sf(r)&&(i=ff(r)),Zd(r)&&(i=r),e&&(i=ff().setZone("utc").set({year:e,month:t,day:n})),i&&Lf(i.setZone("utc").startOf("day"))||null}),["any?","number?","number?","any?"]),"date and time":xf((function(e,t,n){let r;if(Zd(e)&&Zd(t)){const n=e.toLocal();r=t.set({year:n.year,month:n.month,day:n.day})}return sf(e)&&(n=e,e=null),sf(n)&&(r=ff(n,null,n.includes("@")?null:yn.instance)),r&&Lf(r)||null}),["any?","time?","string?"],["date","time","from"]),time:xf((function(e,t,n,r,i){let o;if(r)throw uf("time(..., offset)");return(sf(e)||Zd(e))&&(i=e,e=null),sf(i)&&(o=ff(null,i)),Zd(i)&&(o=i.set({year:1900,month:1,day:1})),of(e)&&(o=ff().set({hour:e,minute:t,second:n}).set({year:1900,month:1,day:1,millisecond:0})),o&&Lf(o)||null}),["any?","number?","number?","any?","any?"]),duration:xf((function(e){return Lf(df(e))}),["string"]),"years and months duration":xf((function(e,t){return Lf(t.diff(e,["years","months"]))}),["date","date"]),"@":xf((function(e){let t;return t=/^-?P/.test(e)?df(e):/^[\d]{1,2}:[\d]{1,2}:[\d]{1,2}/.test(e)?ff(null,e):ff(e),t&&Lf(t)||null}),["string"]),now:xf((function(){return ff()}),[]),today:xf((function(){return ff().startOf("day")}),[]),not:xf((function(e){return tf(e,"boolean")?!e:null}),["any"]),substring:xf((function(e,t,n){const r=t<0?e.length+t:t-1,i=Array.from(e);return("undefined"!==typeof n?i.slice(r,r+n):i.slice(r)).join("")}),["string","number","number?"],["string","start position","length"]),"string length":xf((function(e){return Df(e)}),["string"]),"upper case":xf((function(e){return e.toUpperCase()}),["string"]),"lower case":xf((function(e){return e.toLowerCase()}),["string"]),"substring before":xf((function(e,t){const n=e.indexOf(t);return-1===n?"":e.substring(0,n)}),["string","string"]),"substring after":xf((function(e,t){const n=e.indexOf(t);return-1===n?"":e.substring(n+t.length)}),["string","string"]),replace:xf((function(e,t,n,r){return e.replace(new RegExp(t,"ug"+(r||"").replace(/[x]/g,"")),n.replace(/\$0/g,"$$&"))}),["string","string","string","string?"]),contains:xf((function(e,t){return e.includes(t)}),["string","string"]),matches:xf((function(e,t,n){throw uf("matches")}),["string","string","string?"]),"starts with":xf((function(e,t){return e.startsWith(t)}),["string","string"]),"ends with":xf((function(e,t){return e.endsWith(t)}),["string","string"]),split:xf((function(e,t){return e.split(new RegExp(t,"u"))}),["string","string"]),"string join":xf((function(e,t){return e.some((e=>!sf(e)&&null!==e))?null:e.filter((e=>null!==e)).join(t||"")}),["list","string?"]),"list contains":xf((function(e,t){return e.some((e=>mf(e,t)))}),["list","any?"]),"list replace":xf((function(e,t,n,r){const i=t||r;return["number","function"].includes(ef(i))?Rf(e,t||r,n):null}),["list","any?","any","function?"]),count:xf((function(e){return e.length}),["list"]),min:wf((function(...e){return e.reduce(((e,t)=>null===e?t:Math.min(e,t)),null)}),"number"),max:wf((function(...e){return e.reduce(((e,t)=>null===e?t:Math.max(e,t)),null)}),"number"),sum:wf((function(...e){return Of(e)}),"number"),mean:wf((function(...e){const t=Of(e);return null===t?t:t/e.length}),"number"),all:wf((function(...e){let t=!1;for(const n of e){if(!1===n)return!1;"boolean"!==typeof n&&(t=!0)}return!t||null}),"any?"),any:wf((function(...e){let t=!1;for(const n of e){if(!0===n)return!0;"boolean"!==typeof n&&(t=!0)}return!!t&&null}),"any?"),sublist:xf((function(e,t,n){const r=t<0?e.length+t:t-1;return"undefined"!==typeof n?e.slice(r,r+n):e.slice(r)}),["list","number","number?"]),append:xf((function(e,...t){return e.concat(t)}),["list","any?"]),concatenate:xf((function(...e){return e.reduce(((e,t)=>e.concat(t)),[])}),["any"]),"insert before":xf((function(e,t,n){return e.slice(0,t-1).concat([n],e.slice(t-1))}),["list","number","any?"]),remove:xf((function(e,t){return e.slice(0,t-1).concat(e.slice(t))}),["list","number"]),reverse:xf((function(e){return e.slice().reverse()}),["list"]),"index of":xf((function(e,t){return e.reduce((function(e,n,r){return mf(n,t)&&e.push(r+1),e}),[])}),["list","any"]),union:wf((function(...e){return e.reduce(((e,t)=>t.reduce(((e,t)=>(e.some((e=>af(t,e)))||e.push(t),e)),e)),[])}),"list"),"distinct values":xf((function(e){return e.reduce(((e,t)=>(e.some((e=>af(t,e)))||e.push(t),e)),[])}),["list"]),flatten:xf((function(e){return Sf(e)}),["list"]),product:wf((function(...e){return 0===e.length?null:e.reduce(((e,t)=>e*t),1)}),"number"),median:wf((function(...e){return 0===e.length?null:Pf(e)}),"number"),stddev:wf((function(...e){return e.length<2?null:Ff(e)}),"number"),mode:wf((function(...e){return If(e)}),"number"),decimal:xf((function(e,t){if(!t)return Mf(e);const n=Math.pow(10,t);return Mf(e*n)/n}),["number","number"]),floor:xf((function(e,t=0){if(null===t)return null;const n=Math.pow(10,t);return Math.floor(e*n)/n}),["number","number?"]),ceiling:xf((function(e,t=0){if(null===t)return null;const n=Math.pow(10,t);return Math.ceil(e*n)/n}),["number","number?"]),abs:xf((function(e){return"number"!==typeof e?null:Math.abs(e)}),["number"]),"round up":xf((function(e,t){throw uf("round up")}),["number","number"]),"round down":xf((function(e,t){throw uf("round down")}),["number","number"]),"round half up":xf((function(e,t){throw uf("round half up")}),["number","number"]),"round half down":xf((function(e,t){throw uf("round half down")}),["number","number"]),modulo:xf((function(e,t){if(!t)return null;const n=1e9;return Math.round((e%t+t)%t*n)/n}),["number","number"]),sqrt:xf((function(e){return e<0?null:Math.sqrt(e)}),["number"]),log:xf((function(e){return e<=0?null:Math.log(e)}),["number"]),exp:xf((function(e){return Math.exp(e)}),["number"]),odd:xf((function(e){return Math.abs(e)%2===1}),["number"]),even:xf((function(e){return Math.abs(e)%2===0}),["number"]),is:xf((function(e,t){return"undefined"!==typeof e&&"undefined"!==typeof t&&af(e,t,!0)}),["any?","any?"]),before:xf((function(e,t){return _f(e,t)}),["any","any"]),after:xf((function(e,t){return _f(t,e)}),["any","any"]),meets:xf((function(e,t){return kf(e,t)}),["range","range"]),"met by":xf((function(e,t){return kf(t,e)}),["range","range"]),overlaps:xf((function(e,t){return!_f(e,t)&&!_f(t,e)}),["range","range"]),"overlaps before":xf((function(){throw uf("overlaps before")}),["any?"]),"overlaps after":xf((function(){throw uf("overlaps after")}),["any?"]),finishes:xf((function(){throw uf("finishes")}),["any?"]),"finished by":xf((function(){throw uf("finished by")}),["any?"]),includes:xf((function(){throw uf("includes")}),["any?"]),during:xf((function(){throw uf("during")}),["any?"]),starts:xf((function(){throw uf("starts")}),["any?"]),"started by":xf((function(){throw uf("started by")}),["any?"]),coincides:xf((function(){throw uf("coincides")}),["any?"]),"day of year":xf((function(e){return e.ordinal}),["date time"]),"day of week":xf((function(e){return e.weekdayLong}),["date time"]),"month of year":xf((function(e){return e.monthLong}),["date time"]),"week of year":xf((function(e){return e.weekNumber}),["date time"]),sort:xf((function(e,t){return Array.from(e).sort(((e,n)=>t.invoke([e,n])?-1:1))}),["list","function"]),"get value":xf((function(e,t){const n=hf(t,e);return void 0!=n?n:null}),["context","string"]),"get entries":xf((function(e){return 1!==arguments.length||Array.isArray(e)?null:Object.entries(e).map((([e,t])=>({key:e,value:t})))}),["context"]),context:wf((function(...e){const t=e.reduce(((e,t)=>{if(e===vf||!["key","value"].every((e=>e in t)))return vf;const n=t.key;return null===n||n in e?vf:Object.assign(Object.assign({},e),{[t.key]:t.value})}),{});return t===vf?null:t}),"context"),"context merge":wf((function(...e){return Object.assign({},...e)}),"context"),"context put":xf((function(e,t,n,r){return"undefined"===typeof t&&"undefined"===typeof r?null:gf(e,t||[r],n)}),["context","list?","any","string?"],["context","keys","value","key"])};function gf(e,t,n){const[r,...i]=t;return"string"!==ef(r)||"nil"===ef(e)||i.length&&(n=gf(e[r],i,n),null===n)?null:Object.assign(Object.assign({},e),{[r]:n})}function mf(e,t){return e===t}const vf={};function yf(e){const t=e.endsWith("?"),n=t?e.substring(0,e.length-1):e;return function(e){const r=Array.isArray(e);if("list"===n)return r||t&&"undefined"===typeof e?e:null===e?vf:[e];"any"!==n&&r&&1===e.length&&(e=e[0]);const i=ef(e);return"any"===n||n===i?t||"undefined"!==typeof e?e:vf:"nil"===i?t?e:vf:nf(e,n)||vf}}function bf(e){const t=e.map(yf);return function(n){while(n.length<e.length)n.push(void 0);return n.reduce(((e,n,r)=>{if(!1===e)return e;const i=t[r],o=i?i(n):n;return o!==vf&&(e.push(o),e)}),[])}}function wf(e,t,n=null){const r=yf(t),i=function(...t){return 0===t.length?null:(Array.isArray(t[0])&&1===t.length&&(t=t[0]),t.every((e=>r(e)!==vf))?e(...t):null)};return i.$args=n||cf(e),i}function xf(e,t,n=null){const r=bf(t);n=n||cf(e);const i=function(...t){const n=r(t);return n?e(...n):null};return i.$args=n,i}function kf(e,t){return[e.end===t.start,!0===e["end included"],!0===t["start included"]].every((e=>e))}function _f(e,t){return e instanceof rf&&t instanceof rf?e.end<t.start||(!e["end included"]||!t["start included"])&&e.end==t.start:e instanceof rf?e.end<t||!e["end included"]&&e.end===t:t instanceof rf?t.start>e||!t["start included"]&&t.start===e:e<t}function Of(e){return e.reduce(((e,t)=>null===e?t:e+t),null)}function Sf([e,...t]){return void 0!==e?[...Array.isArray(e)?Sf(e):[e],...Sf(t)]:[]}function Ef(e){return"string"===typeof e&&/\W/.test(e)?Af(e,!0):e}function Cf(e){return Af(e,!0)}function Tf(e){return e.replace(/("|\\)/g,"\\$1")}function Af(e,t=!1){var n,r,i,o;const s=ef(e);if("nil"===s)return"null";if("string"===s)return t?`"${Tf(e)}"`:e;if("boolean"===s||"number"===s)return String(e);if("list"===s)return"["+e.map(Cf).join(", ")+"]";if("context"===s)return"{"+Object.entries(e).map((([e,t])=>Ef(e)+": "+Cf(t))).join(", ")+"}";if("duration"===s)return e.shiftTo("years","months","days","hours","minutes","seconds").normalize().toISO();if("date time"===s)return e.zone===yn.instance?e.toISO({suppressMilliseconds:!0,includeOffset:!1}):(null===(n=e.zone)||void 0===n?void 0:n.zoneName)?e.toISO({suppressMilliseconds:!0,includeOffset:!1})+"@"+(null===(r=e.zone)||void 0===r?void 0:r.zoneName):e.toISO({suppressMilliseconds:!0});if("date"===s)return e.toISODate();if("range"===s)return"<range>";if("time"===s)return e.zone===yn.instance?e.toISOTime({suppressMilliseconds:!0,includeOffset:!1}):(null===(i=e.zone)||void 0===i?void 0:i.zoneName)?e.toISOTime({suppressMilliseconds:!0,includeOffset:!1})+"@"+(null===(o=e.zone)||void 0===o?void 0:o.zoneName):e.toISOTime({suppressMilliseconds:!0});if("function"===s)return"<function>";throw uf("string("+s+")")}function Df(e){return e.replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"_").length}function Mf(e){const t=Math.floor(e),n=e-t;return.5===n?t%2===0?t:t+1:Math.round(e)}function Ff(e){const t=e.length,n=e.reduce(((e,t)=>e+t))/t;return Math.sqrt(e.map((e=>Math.pow(e-n,2))).reduce(((e,t)=>e+t))/(t-1))}function Rf(e,t,n){return of(t)?[...e.slice(0,t-1),n,...e.slice(t)]:e.map(((e,r)=>t.invoke([e,n])?n:e))}function Pf(e){const t=e.length,n=e.slice().sort(),r=t/2-1,i=Math.ceil(r);return r===i?(n[i]+n[i+1])/2:n[i]}function If(e){if(e.length<2)return e;const t={};for(const r of e)t[r]=(t[r]||0)+1;const n=Object.entries(t).sort(((e,t)=>t[1]-e[1]));return n.filter((e=>e[1]===n[0][1])).map((e=>+e[0]))}function Lf(e){return e.isValid?e:null}function $f(e,t={},n){return Yd.configure({top:"Expression",contextTracker:Vd(t),dialect:n}).parse(e)}function Nf(e,t={},n){return Yd.configure({top:"UnaryTests",contextTracker:Vd(t),dialect:n}).parse(e)}class jf extends Error{constructor(e,t){super(e),Object.assign(this,t)}}class Bf{_buildExecutionTree(e,t){const n={args:[],nodeInput:t},r=[n];return e.iterate({enter(e){const{isError:n,isSkipped:i}=e.type,{from:o,to:s}=e;if(n){const{from:n,to:r,message:i}=yp(e);throw new jf(i,{input:t.slice(n,r),position:{from:n,to:r}})}if(i)return!1;const a=t.slice(o,s);r.push({nodeInput:a,args:[]})},leave(e){if(e.type.isSkipped)return;const{nodeInput:t,args:n}=r.pop(),i=r[r.length-1],o=Hf(e,t,n);i.args.push(o)}}),n.args[n.args.length-1]}evaluate(e,t={},n){const r=$f(e,t,n),i=this._buildExecutionTree(r,e);return{parseTree:r,root:i}}unaryTest(e,t={},n){const r=Nf(e,t,n),i=this._buildExecutionTree(r,e);return{parseTree:r,root:i}}}const Vf=new Bf;function qf(e,t={},n){const r=void 0!==t["?"]?t["?"]:null,{root:i}=Vf.unaryTest(e,t,n),o=i(t);return o(r)}function zf(e,t={},n){const{root:r}=Vf.evaluate(e,t,n);return r(t)}function Hf(e,t,n){switch(e.name){case"ArithOp":return e=>{const n=(t,n=["number"])=>(r,i)=>{const o=r(e),s=i(e);if(Kd(o))return null;if(Kd(s))return null;const a=ef(o),l=ef(s),c=["date","time","date time","duration"];if(c.includes(a)){if(!c.includes(l))return null}else if(a!==l||!n.includes(a))return null;return t(o,s)};switch(t){case"+":return n(((e,t)=>{if(Gd(e)&&!Gd(t)){const n=e;e=t,t=n}return tf(e,"time")&&Gd(t)?e.plus(t).set({year:1900,month:1,day:1}):Zd(e)&&Zd(t)?null:Zd(e)&&Gd(t)||Gd(e)&&Gd(t)?e.plus(t):e+t}),["string","number","date","time","duration","date time"]);case"-":return n(((e,t)=>tf(e,"time")&&Gd(t)?e.minus(t).set({year:1900,month:1,day:1}):Zd(e)&&Zd(t)?e.diff(t):Zd(e)&&Gd(t)||Gd(e)&&Gd(t)?e.minus(t):e-t),["number","date","time","duration","date time"]);case"*":return n(((e,t)=>e*t));case"/":return n(((e,t)=>t?e/t:null));case"**":case"^":return n(((e,t)=>Math.pow(e,t)))}};case"CompareOp":return dp((()=>{switch(t){case">":return e=>Kf(e,null,!1,!1);case">=":return e=>Kf(e,null,!0,!1);case"<":return e=>Kf(null,e,!1,!1);case"<=":return e=>Kf(null,e,!1,!0);case"=":return e=>t=>af(t,e);case"!=":return e=>t=>!af(t,e)}}),gp("boolean"));case"BacktickIdentifier":return t.replace(/`/g,"");case"Wildcard":return e=>!0;case"null":return e=>null;case"Disjunction":return dp((e=>{const t=n[0](e),r=n[2](e),i=[[!0,!0,!0],[!0,!1,!0],[!0,null,!0],[!1,!0,!0],[!1,!1,!1],[!1,null,null],[null,!0,!0],[null,!1,null],[null,null,null]],o="boolean"===typeof t?t:null,s="boolean"===typeof r?r:null;return i.find((e=>e[0]===o&&e[1]===s))[2]}),gp("boolean"));case"Conjunction":return dp((e=>{const t=n[0](e),r=n[2](e),i=[[!0,!0,!0],[!0,!1,!1],[!0,null,null],[!1,!0,!1],[!1,!1,!1],[!1,null,!1],[null,!0,null],[null,!1,!1],[null,null,null]],o="boolean"===typeof t?t:null,s="boolean"===typeof r?r:null;return i.find((e=>e[0]===o&&e[1]===s))[2]}),gp("boolean"));case"Context":return e=>n.slice(1,-1).reduce(((t,n)=>{const[r,i]=n(Object.assign(Object.assign({},e),t));return Object.assign(Object.assign({},t),{[r]:i})}),{});case"FunctionBody":return n[0];case"FormalParameters":return n;case"FormalParameter":return n[0];case"ParameterName":return n.join(" ");case"FunctionDefinition":return e=>{const t=n[2],r=n[4];return mp(((...n)=>{const i=t.reduce(((e,t,r)=>(e[t]=n[r],e)),Object.assign({},e));return r(i)}),t)};case"ContextEntry":return e=>{const t="function"===typeof n[0]?n[0](e):n[0],r=n[1](e);return[t,r]};case"Key":return n[0];case"Identifier":return t;case"SpecialFunctionName":return e=>Wf(t);case"Name":return t.replace(/\s{2,}/g," ");case"VariableName":return e=>{const t=n.join(" "),r=hf(t,e);return"undefined"!==typeof r?r:Wf(t)||null};case"QualifiedName":return e=>n.reduce(((e,t)=>t(e)),e);case"?":return e=>hf("?",e);case"IterationContext":return e=>{const t=n[0](e),r=n[1]&&n[1](e);return r?Kf(t,r):t};case"Type":return n[0];case"InExpressions":return e=>{const t=n.map((t=>t(e)));return t.some((e=>"list"!==ef(e)))?null:up(t).map((t=>(Kd(t)||(t=[t]),Object.assign({},e,...t))))};case"InExpression":return e=>Qf(e,n[0],n[2]);case"SpecialType":throw uf("SpecialType");case"InstanceOfExpression":return dp((e=>{const t=n[0](e),r=n[3](e);return t instanceof r}),gp("boolean"));case"every":return dp((e=>(t,n)=>{const r=t(e);return"list"!==ef(r)?r:r.every((e=>pp(n(e))))}),gp("boolean"));case"some":return dp((e=>(t,n)=>{const r=t(e);return"list"!==ef(r)?r:r.some((e=>pp(n(e))))}),gp("boolean"));case"NumericLiteral":return dp((e=>t.includes(".")?parseFloat(t):parseInt(t)),"number");case"BooleanLiteral":return dp((e=>"true"===t),"boolean");case"StringLiteral":return dp((e=>vp(t)),"string");case"PositionalParameters":return e=>n.map((t=>t(e)));case"NamedParameter":return e=>{const t=n[0],r=n[1](e);return[t,r]};case"NamedParameters":return e=>n.reduce(((t,n)=>{const[r,i]=n(e);return t[r]=i,t}),{});case"DateTimeConstructor":return e=>Wf(t);case"DateTimeLiteral":return e=>{if(1===n.length)return n[0](e);{const t=mp(n[0](e));if(!t)return null;const r=n[2](e);return t.invoke(r)}};case"AtLiteral":return e=>{const t=mp(Wf("@"));return t?t.invoke([n[0](e)]):null};case"FunctionInvocation":return e=>{const t=mp(n[0](e));if(!t)return null;const r=n[2](e);return t.invoke(r)};case"IfExpression":return function(){const e=n[1],t=n[3],r=n[5],i=hp(t,r);return dp((n=>pp(e(n))?t(n):r?r(n):null),i)}();case"Parameters":return 3===n.length?n[1]:e=>[];case"Comparison":return e=>{const t=n[1];if("in"===t)return Uf(n[0](e),(n[3]||n[2])(e));if("between"===t){const t=n[2](e),r=n[4](e);return null===t||null===r?null:Kf(t,r).includes(n[0](e))}const r=n[0](e),i=n[2](e),o=t()(i);return Yf(o,r)};case"QuantifiedExpression":return e=>{const t=n[0](e),r=n[1],i=n[3];return t(r,i)};case"ForExpression":return e=>{const t=n[n.length-1],r=n[1](e);if("list"!==ef(r))return r;const i=[];for(const n of r)i.push(t(Object.assign(Object.assign({},n),{partial:i})));return i};case"ArithmeticExpression":return function(){if(3===n.length){const[e,t,r]=n;return dp((n=>t(n)(e,r)),hp(e,r))}if(2===n.length){const[e,t]=n;return dp((n=>e(n)((()=>0),t)),t.type)}}();case"PositiveUnaryTest":return n[0];case"ParenthesizedExpression":return n[1];case"PathExpression":return e=>{const t=n[0](e),r=n[1];return Kd(t)?t.map(r):r(t)};case"FilterExpression":return e=>{const t=n[0](e),r=n[2],i=Kd(t)?t:[t];if(null===t)return null;if("undefined"===typeof r.type)try{const t=r(e);of(t)&&(r.type="number")}catch(o){}if("number"===r.type){const t=r(e),n=i[t<0?i.length+t:t-1];return"undefined"===typeof n?null:n}if("boolean"===r.type)return r(e)?i:[];if("string"===r.type){const t=r(e);return i.filter((e=>e===t))}return i.map((t=>{const n=Object.assign(Object.assign(Object.assign({},e),{item:t}),t);let i=r(n);return"function"===typeof i&&(i=i(t)),i instanceof rf&&(i=i.includes(t)),!0===i?t:i})).filter(pp)};case"SimplePositiveUnaryTest":return dp((e=>1===n.length?n[0](e):n[0](e)(n[1](e))),"test");case"List":return e=>n.slice(1,-1).map((t=>t(e)));case"Interval":return dp((e=>{const t=n[1](e),r=n[2](e),i=null!==t&&"["===n[0],o=null!==r&&"]"===n[3];return Kf(t,r,i,o)}),gp("boolean"));case"PositiveUnaryTests":case"Expressions":return e=>n.map((t=>t(e)));case"Expression":return e=>n[0](e);case"UnaryTests":return e=>(t=null)=>{const r="not"===n[0],i=r?n.slice(2,-1):n,o=i.map((t=>t(e))).flat(1).map((e=>Kd(e)?e.includes(t):null===e?null:"boolean"===typeof e?e:Yf(e,t))).reduce(fp,void 0);return null===o?null:r?!o:o};default:return e.name}}function Wf(e,t){return hf(e,pf)}function Qf(e,t,n){const r=n(e);return["list","range"].includes(ef(r))?r.map((e=>({[t]:e}))):null}function Uf(e,t){if(!Kd(t)){if("nil"===ef(t))return null;t=[t]}return t.some((t=>Yf(t,e)))}function Yf(e,t){return"function"===typeof e?e(t):e instanceof rf?e.includes(t):af(e,t)}const Xf=Array.from("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ");function Zf(e,t){return t.some((t=>ef(t)===e))&&t.every((t=>null===t||ef(t)===e))}const Gf=new rf({start:null,end:null,"start included":!1,"end included":!1,map(){return[]},includes(){return null}});function Kf(e,t,n=!0,r=!0){if(Zf("string",[e,t]))return sp(e,t,n,r);if(Zf("number",[e,t]))return ap(e,t,n,r);if(Zf("duration",[e,t]))return lp(e,t,n,r);if(Zf("time",[e,t]))return cp(e,t,n,r);if(Zf("date time",[e,t]))return cp(e,t,n,r);if(Zf("date",[e,t]))return cp(e,t,n,r);if(null===e&&null===t)return Gf;throw new Error(`unsupported range: ${e}..${t}`)}function Jf(){return()=>{throw new Error("unsupported range operation: map")}}function ep(e){return t=>e.map(t)}function tp(e){return t=>e.includes(t)}function np(e,t,n,r){const i=e>t?-1:1;return o=>{const s=[];for(let a=e;;a+=i)if(0!==a||n){if(a===t&&!r)break;if(s.push(o(a)),a===t)break}return s}}function rp(e,t){return t?t=>e<=t:t=>e<t}function ip(e,t){return t?t=>e>=t:t=>e>t}function op(e,t,n,r,i=e=>e){let o=[];return null===e&&null===t?()=>null:(null!==e&&null!==t?o=e>t?[rp(t,r),ip(e,n)]:[rp(e,n),ip(t,r)]:null!==t?o=[ip(t,r)]:null!==e&&(o=[rp(e,n)]),e=>null===e?null:o.every((t=>t(i(e)))))}function sp(e,t,n=!0,r=!0){if(null!==e&&!Xf.includes(e))throw new Error("illegal range start: "+e);if(null!==t&&!Xf.includes(t))throw new Error("illegal range end: "+t);let i;if(null!==e&&null!==t){let o=Xf.indexOf(e),s=Xf.indexOf(t);const a=o>s?-1:1;!1===n&&(o+=a),!1===r&&(s-=a),i=Xf.slice(o,s+1)}const o=i?ep(i):Jf(),s=i?tp(i):op(e,t,n,r);return new rf({start:e,end:t,"start included":n,"end included":r,map:o,includes:s})}function ap(e,t,n,r){const i=null!==e&&null!==t?np(e,t,n,r):Jf(),o=op(e,t,n,r);return new rf({start:e,end:t,"start included":n,"end included":r,map:i,includes:o})}function lp(e,t,n,r){const i=e=>e?Ho.fromDurationLike(e).toMillis():null,o=Jf(),s=op(i(e),i(t),n,r,i);return new rf({start:e,end:t,"start included":n,"end included":r,map:o,includes:s})}function cp(e,t,n,r){const i=Jf(),o=op(e,t,n,r);return new rf({start:e,end:t,"start included":n,"end included":r,map:i,includes:o})}function up(e){if(e.some((e=>"nil"===ef(e))))return null;const t=(e,t)=>[].concat(...e.map((e=>t.map((t=>[].concat(e,t)))))),n=(e,r,...i)=>r?n(t(e,r),...i):e||[];return n(...e)}function hp(e,t){return t?e.type===t.type?e.type:"any":e.type}function dp(e,t){return Object.assign(e,{type:t,toString(){return`TaggedFunction[${t}] ${Function.prototype.toString.call(e)}`}})}function fp(e,t){return e||t}function pp(e){return!1!==e&&null!==e}function gp(e){return`Test<${e}>`}function mp(e,t=null){return e?e instanceof lf?e:e instanceof rf?new lf((t=>e.includes(t)),["value"]):"function"!==typeof e?null:new lf(e,t||cf(e)):null}function vp(e){return e.startsWith('"')&&(e=e.slice(1)),e.endsWith('"')&&(e=e.slice(0,-1)),e.replace(/(\\")|(\\\\)|(\\u[a-fA-F0-9]{5,6})|((?:\\u[a-fA-F0-9]{1,4})+)/gi,(function(e,...t){const[n,r,i,o]=t;if(n)return'"';if(r)return"\\";const s=/\\u([a-fA-F0-9]+)/gi;if(i){const e=s.exec(i);return String.fromCodePoint(parseInt(e[1],16))}if(o){const t=[];let n;while(null!==(n=s.exec(e)))t.push(parseInt(n[1],16));return String.fromCharCode(...t)}throw new Error("illegal match")}))}function yp(e){const t=e.node,n=t.parent;if(t.from!==t.to)return{from:t.from,to:t.to,message:`Unrecognized token in <${n.name}>`};const r=bp(t);if(r)return{from:t.from,to:r.to,message:`Unrecognized token <${r.name}> in <${n.name}>`};{const r=n.enterUnfinishedNodesBefore(e.to);return{from:t.from,to:t.to,message:`Incomplete <${(r||n).name}>`}}}function bp(e){const t=e.node;let n,r=t;do{if(n=r.nextSibling,n)return n;r=r.parent}while(r);return null}class wp{lineAt(e){if(e<0||e>this.length)throw new RangeError(`Invalid position ${e} in document of length ${this.length}`);return this.lineInner(e,!1,1,0)}line(e){if(e<1||e>this.lines)throw new RangeError(`Invalid line number ${e} in ${this.lines}-line document`);return this.lineInner(e,!0,1,0)}replace(e,t,n){[e,t]=Dp(this,e,t);let r=[];return this.decompose(0,e,r,2),n.length&&n.decompose(0,n.length,r,3),this.decompose(t,this.length,r,1),kp.from(r,this.length-(t-e)+n.length)}append(e){return this.replace(this.length,this.length,e)}slice(e,t=this.length){[e,t]=Dp(this,e,t);let n=[];return this.decompose(e,t,n,0),kp.from(n,t-e)}eq(e){if(e==this)return!0;if(e.length!=this.length||e.lines!=this.lines)return!1;let t=this.scanIdentical(e,1),n=this.length-this.scanIdentical(e,-1),r=new Ep(this),i=new Ep(e);for(let o=t,s=t;;){if(r.next(o),i.next(o),o=0,r.lineBreak!=i.lineBreak||r.done!=i.done||r.value!=i.value)return!1;if(s+=r.value.length,r.done||s>=n)return!0}}iter(e=1){return new Ep(this,e)}iterRange(e,t=this.length){return new Cp(this,e,t)}iterLines(e,t){let n;if(null==e)n=this.iter();else{null==t&&(t=this.lines+1);let r=this.line(e).from;n=this.iterRange(r,Math.max(r,t==this.lines+1?this.length:t<=1?0:this.line(t-1).to))}return new Tp(n)}toString(){return this.sliceString(0)}toJSON(){let e=[];return this.flatten(e),e}constructor(){}static of(e){if(0==e.length)throw new RangeError("A document must have at least one line");return 1!=e.length||e[0]?e.length<=32?new xp(e):kp.from(xp.split(e,[])):wp.empty}}class xp extends wp{constructor(e,t=_p(e)){super(),this.text=e,this.length=t}get lines(){return this.text.length}get children(){return null}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.text[i],s=r+o.length;if((t?n:s)>=e)return new Ap(r,s,n,o);r=s+1,n++}}decompose(e,t,n,r){let i=e<=0&&t>=this.length?this:new xp(Sp(this.text,e,t),Math.min(t,this.length)-Math.max(0,e));if(1&r){let e=n.pop(),t=Op(i.text,e.text.slice(),0,i.length);if(t.length<=32)n.push(new xp(t,e.length+i.length));else{let e=t.length>>1;n.push(new xp(t.slice(0,e)),new xp(t.slice(e)))}}else n.push(i)}replace(e,t,n){if(!(n instanceof xp))return super.replace(e,t,n);[e,t]=Dp(this,e,t);let r=Op(this.text,Op(n.text,Sp(this.text,0,e)),t),i=this.length+n.length-(t-e);return r.length<=32?new xp(r,i):kp.from(xp.split(r,[]),i)}sliceString(e,t=this.length,n="\n"){[e,t]=Dp(this,e,t);let r="";for(let i=0,o=0;i<=t&&o<this.text.length;o++){let s=this.text[o],a=i+s.length;i>e&&o&&(r+=n),e<a&&t>i&&(r+=s.slice(Math.max(0,e-i),t-i)),i=a+1}return r}flatten(e){for(let t of this.text)e.push(t)}scanIdentical(){return 0}static split(e,t){let n=[],r=-1;for(let i of e)n.push(i),r+=i.length+1,32==n.length&&(t.push(new xp(n,r)),n=[],r=-1);return r>-1&&t.push(new xp(n,r)),t}}class kp extends wp{constructor(e,t){super(),this.children=e,this.length=t,this.lines=0;for(let n of e)this.lines+=n.lines}lineInner(e,t,n,r){for(let i=0;;i++){let o=this.children[i],s=r+o.length,a=n+o.lines-1;if((t?a:s)>=e)return o.lineInner(e,t,n,r);r=s+1,n=a+1}}decompose(e,t,n,r){for(let i=0,o=0;o<=t&&i<this.children.length;i++){let s=this.children[i],a=o+s.length;if(e<=a&&t>=o){let i=r&((o<=e?1:0)|(a>=t?2:0));o>=e&&a<=t&&!i?n.push(s):s.decompose(e-o,t-o,n,i)}o=a+1}}replace(e,t,n){if([e,t]=Dp(this,e,t),n.lines<this.lines)for(let r=0,i=0;r<this.children.length;r++){let o=this.children[r],s=i+o.length;if(e>=i&&t<=s){let a=o.replace(e-i,t-i,n),l=this.lines-o.lines+a.lines;if(a.lines<l>>4&&a.lines>l>>6){let i=this.children.slice();return i[r]=a,new kp(i,this.length-(t-e)+n.length)}return super.replace(i,s,a)}i=s+1}return super.replace(e,t,n)}sliceString(e,t=this.length,n="\n"){[e,t]=Dp(this,e,t);let r="";for(let i=0,o=0;i<this.children.length&&o<=t;i++){let s=this.children[i],a=o+s.length;o>e&&i&&(r+=n),e<a&&t>o&&(r+=s.sliceString(e-o,t-o,n)),o=a+1}return r}flatten(e){for(let t of this.children)t.flatten(e)}scanIdentical(e,t){if(!(e instanceof kp))return 0;let n=0,[r,i,o,s]=t>0?[0,0,this.children.length,e.children.length]:[this.children.length-1,e.children.length-1,-1,-1];for(;;r+=t,i+=t){if(r==o||i==s)return n;let a=this.children[r],l=e.children[i];if(a!=l)return n+a.scanIdentical(l,t);n+=a.length+1}}static from(e,t=e.reduce(((e,t)=>e+t.length+1),-1)){let n=0;for(let d of e)n+=d.lines;if(n<32){let n=[];for(let t of e)t.flatten(n);return new xp(n,t)}let r=Math.max(32,n>>5),i=r<<1,o=r>>1,s=[],a=0,l=-1,c=[];function u(e){let t;if(e.lines>i&&e instanceof kp)for(let n of e.children)u(n);else e.lines>o&&(a>o||!a)?(h(),s.push(e)):e instanceof xp&&a&&(t=c[c.length-1])instanceof xp&&e.lines+t.lines<=32?(a+=e.lines,l+=e.length+1,c[c.length-1]=new xp(t.text.concat(e.text),t.length+1+e.length)):(a+e.lines>r&&h(),a+=e.lines,l+=e.length+1,c.push(e))}function h(){0!=a&&(s.push(1==c.length?c[0]:kp.from(c,l)),l=-1,a=c.length=0)}for(let d of e)u(d);return h(),1==s.length?s[0]:new kp(s,t)}}function _p(e){let t=-1;for(let n of e)t+=n.length+1;return t}function Op(e,t,n=0,r=1e9){for(let i=0,o=0,s=!0;o<e.length&&i<=r;o++){let a=e[o],l=i+a.length;l>=n&&(l>r&&(a=a.slice(0,r-i)),i<n&&(a=a.slice(n-i)),s?(t[t.length-1]+=a,s=!1):t.push(a)),i=l+1}return t}function Sp(e,t,n){return Op(e,[""],t,n)}wp.empty=new xp([""],0);class Ep{constructor(e,t=1){this.dir=t,this.done=!1,this.lineBreak=!1,this.value="",this.nodes=[e],this.offsets=[t>0?1:(e instanceof xp?e.text.length:e.children.length)<<1]}nextInner(e,t){for(this.done=this.lineBreak=!1;;){let n=this.nodes.length-1,r=this.nodes[n],i=this.offsets[n],o=i>>1,s=r instanceof xp?r.text.length:r.children.length;if(o==(t>0?s:0)){if(0==n)return this.done=!0,this.value="",this;t>0&&this.offsets[n-1]++,this.nodes.pop(),this.offsets.pop()}else if((1&i)==(t>0?0:1)){if(this.offsets[n]+=t,0==e)return this.lineBreak=!0,this.value="\n",this;e--}else if(r instanceof xp){let i=r.text[o+(t<0?-1:0)];if(this.offsets[n]+=t,i.length>Math.max(0,e))return this.value=0==e?i:t>0?i.slice(e):i.slice(0,i.length-e),this;e-=i.length}else{let i=r.children[o+(t<0?-1:0)];e>i.length?(e-=i.length,this.offsets[n]+=t):(t<0&&this.offsets[n]--,this.nodes.push(i),this.offsets.push(t>0?1:(i instanceof xp?i.text.length:i.children.length)<<1))}}}next(e=0){return e<0&&(this.nextInner(-e,-this.dir),e=this.value.length),this.nextInner(e,this.dir)}}class Cp{constructor(e,t,n){this.value="",this.done=!1,this.cursor=new Ep(e,t>n?-1:1),this.pos=t>n?e.length:0,this.from=Math.min(t,n),this.to=Math.max(t,n)}nextInner(e,t){if(t<0?this.pos<=this.from:this.pos>=this.to)return this.value="",this.done=!0,this;e+=Math.max(0,t<0?this.pos-this.to:this.from-this.pos);let n=t<0?this.pos-this.from:this.to-this.pos;e>n&&(e=n),n-=e;let{value:r}=this.cursor.next(e);return this.pos+=(r.length+e)*t,this.value=r.length<=n?r:t<0?r.slice(r.length-n):r.slice(0,n),this.done=!this.value,this}next(e=0){return e<0?e=Math.max(e,this.from-this.pos):e>0&&(e=Math.min(e,this.to-this.pos)),this.nextInner(e,this.cursor.dir)}get lineBreak(){return this.cursor.lineBreak&&""!=this.value}}class Tp{constructor(e){this.inner=e,this.afterBreak=!0,this.value="",this.done=!1}next(e=0){let{done:t,lineBreak:n,value:r}=this.inner.next(e);return t&&this.afterBreak?(this.value="",this.afterBreak=!1):t?(this.done=!0,this.value=""):n?this.afterBreak?this.value="":(this.afterBreak=!0,this.next()):(this.value=r,this.afterBreak=!1),this}get lineBreak(){return!1}}"undefined"!=typeof Symbol&&(wp.prototype[Symbol.iterator]=function(){return this.iter()},Ep.prototype[Symbol.iterator]=Cp.prototype[Symbol.iterator]=Tp.prototype[Symbol.iterator]=function(){return this});class Ap{constructor(e,t,n,r){this.from=e,this.to=t,this.number=n,this.text=r}get length(){return this.to-this.from}}function Dp(e,t,n){return t=Math.max(0,Math.min(e.length,t)),[t,Math.max(t,Math.min(e.length,n))]}let Mp="lc,34,7n,7,7b,19,,,,2,,2,,,20,b,1c,l,g,,2t,7,2,6,2,2,,4,z,,u,r,2j,b,1m,9,9,,o,4,,9,,3,,5,17,3,3b,f,,w,1j,,,,4,8,4,,3,7,a,2,t,,1m,,,,2,4,8,,9,,a,2,q,,2,2,1l,,4,2,4,2,2,3,3,,u,2,3,,b,2,1l,,4,5,,2,4,,k,2,m,6,,,1m,,,2,,4,8,,7,3,a,2,u,,1n,,,,c,,9,,14,,3,,1l,3,5,3,,4,7,2,b,2,t,,1m,,2,,2,,3,,5,2,7,2,b,2,s,2,1l,2,,,2,4,8,,9,,a,2,t,,20,,4,,2,3,,,8,,29,,2,7,c,8,2q,,2,9,b,6,22,2,r,,,,,,1j,e,,5,,2,5,b,,10,9,,2u,4,,6,,2,2,2,p,2,4,3,g,4,d,,2,2,6,,f,,jj,3,qa,3,t,3,t,2,u,2,1s,2,,7,8,,2,b,9,,19,3,3b,2,y,,3a,3,4,2,9,,6,3,63,2,2,,1m,,,7,,,,,2,8,6,a,2,,1c,h,1r,4,1c,7,,,5,,14,9,c,2,w,4,2,2,,3,1k,,,2,3,,,3,1m,8,2,2,48,3,,d,,7,4,,6,,3,2,5i,1m,,5,ek,,5f,x,2da,3,3x,,2o,w,fe,6,2x,2,n9w,4,,a,w,2,28,2,7k,,3,,4,,p,2,5,,47,2,q,i,d,,12,8,p,b,1a,3,1c,,2,4,2,2,13,,1v,6,2,2,2,2,c,,8,,1b,,1f,,,3,2,2,5,2,,,16,2,8,,6m,,2,,4,,fn4,,kh,g,g,g,a6,2,gt,,6a,,45,5,1ae,3,,2,5,4,14,3,4,,4l,2,fx,4,ar,2,49,b,4w,,1i,f,1k,3,1d,4,2,2,1x,3,10,5,,8,1q,,c,2,1g,9,a,4,2,,2n,3,2,,,2,6,,4g,,3,8,l,2,1l,2,,,,,m,,e,7,3,5,5f,8,2,3,,,n,,29,,2,6,,,2,,,2,,2,6j,,2,4,6,2,,2,r,2,2d,8,2,,,2,2y,,,,2,6,,,2t,3,2,4,,5,77,9,,2,6t,,a,2,,,4,,40,4,2,2,4,,w,a,14,6,2,4,8,,9,6,2,3,1a,d,,2,ba,7,,6,,,2a,m,2,7,,2,,2,3e,6,3,,,2,,7,,,20,2,3,,,,9n,2,f0b,5,1n,7,t4,,1r,4,29,,f5k,2,43q,,,3,4,5,8,8,2,7,u,4,44,3,1iz,1j,4,1e,8,,e,,m,5,,f,11s,7,,h,2,7,,2,,5,79,7,c5,4,15s,7,31,7,240,5,gx7k,2o,3k,6o".split(",").map((e=>e?parseInt(e,36):1));for(let iK=1;iK<Mp.length;iK++)Mp[iK]+=Mp[iK-1];function Fp(e){for(let t=1;t<Mp.length;t+=2)if(Mp[t]>e)return Mp[t-1]<=e;return!1}function Rp(e){return e>=127462&&e<=127487}const Pp=8205;function Ip(e,t,n=!0,r=!0){return(n?Lp:$p)(e,t,r)}function Lp(e,t,n){if(t==e.length)return t;t&&Np(e.charCodeAt(t))&&jp(e.charCodeAt(t-1))&&t--;let r=Bp(e,t);t+=qp(r);while(t<e.length){let i=Bp(e,t);if(r==Pp||i==Pp||n&&Fp(i))t+=qp(i),r=i;else{if(!Rp(i))break;{let n=0,r=t-2;while(r>=0&&Rp(Bp(e,r)))n++,r-=2;if(n%2==0)break;t+=2}}}return t}function $p(e,t,n){while(t>0){let r=Lp(e,t-2,n);if(r<t)return r;t--}return 0}function Np(e){return e>=56320&&e<57344}function jp(e){return e>=55296&&e<56320}function Bp(e,t){let n=e.charCodeAt(t);if(!jp(n)||t+1==e.length)return n;let r=e.charCodeAt(t+1);return Np(r)?r-56320+(n-55296<<10)+65536:n}function Vp(e){return e<=65535?String.fromCharCode(e):(e-=65536,String.fromCharCode(55296+(e>>10),56320+(1023&e)))}function qp(e){return e<65536?1:2}const zp=/\r\n?|\n/;var Hp=function(e){return e[e["Simple"]=0]="Simple",e[e["TrackDel"]=1]="TrackDel",e[e["TrackBefore"]=2]="TrackBefore",e[e["TrackAfter"]=3]="TrackAfter",e}(Hp||(Hp={}));class Wp{constructor(e){this.sections=e}get length(){let e=0;for(let t=0;t<this.sections.length;t+=2)e+=this.sections[t];return e}get newLength(){let e=0;for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t+1];e+=n<0?this.sections[t]:n}return e}get empty(){return 0==this.sections.length||2==this.sections.length&&this.sections[1]<0}iterGaps(e){for(let t=0,n=0,r=0;t<this.sections.length;){let i=this.sections[t++],o=this.sections[t++];o<0?(e(n,r,i),r+=i):r+=o,n+=i}}iterChangedRanges(e,t=!1){Xp(this,e,t)}get invertedDesc(){let e=[];for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];r<0?e.push(n,r):e.push(r,n)}return new Wp(e)}composeDesc(e){return this.empty?e:e.empty?this:Gp(this,e)}mapDesc(e,t=!1){return e.empty?this:Zp(this,e,t)}mapPos(e,t=-1,n=Hp.Simple){let r=0,i=0;for(let o=0;o<this.sections.length;){let s=this.sections[o++],a=this.sections[o++],l=r+s;if(a<0){if(l>e)return i+(e-r);i+=s}else{if(n!=Hp.Simple&&l>=e&&(n==Hp.TrackDel&&r<e&&l>e||n==Hp.TrackBefore&&r<e||n==Hp.TrackAfter&&l>e))return null;if(l>e||l==e&&t<0&&!s)return e==r||t<0?i:i+a;i+=a}r=l}if(e>r)throw new RangeError(`Position ${e} is out of range for changeset of length ${r}`);return i}touchesRange(e,t=e){for(let n=0,r=0;n<this.sections.length&&r<=t;){let i=this.sections[n++],o=this.sections[n++],s=r+i;if(o>=0&&r<=t&&s>=e)return!(r<e&&s>t)||"cover";r=s}return!1}toString(){let e="";for(let t=0;t<this.sections.length;){let n=this.sections[t++],r=this.sections[t++];e+=(e?" ":"")+n+(r>=0?":"+r:"")}return e}toJSON(){return this.sections}static fromJSON(e){if(!Array.isArray(e)||e.length%2||e.some((e=>"number"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeDesc");return new Wp(e)}static create(e){return new Wp(e)}}class Qp extends Wp{constructor(e,t){super(e),this.inserted=t}apply(e){if(this.length!=e.length)throw new RangeError("Applying change set to a document with the wrong length");return Xp(this,((t,n,r,i,o)=>e=e.replace(r,r+(n-t),o)),!1),e}mapDesc(e,t=!1){return Zp(this,e,t,!0)}invert(e){let t=this.sections.slice(),n=[];for(let r=0,i=0;r<t.length;r+=2){let o=t[r],s=t[r+1];if(s>=0){t[r]=s,t[r+1]=o;let a=r>>1;while(n.length<a)n.push(wp.empty);n.push(o?e.slice(i,i+o):wp.empty)}i+=o}return new Qp(t,n)}compose(e){return this.empty?e:e.empty?this:Gp(this,e,!0)}map(e,t=!1){return e.empty?this:Zp(this,e,t,!0)}iterChanges(e,t=!1){Xp(this,e,t)}get desc(){return Wp.create(this.sections)}filter(e){let t=[],n=[],r=[],i=new Kp(this);e:for(let o=0,s=0;;){let a=o==e.length?1e9:e[o++];while(s<a||s==a&&0==i.len){if(i.done)break e;let e=Math.min(i.len,a-s);Up(r,e,-1);let o=-1==i.ins?-1:0==i.off?i.ins:0;Up(t,e,o),o>0&&Yp(n,t,i.text),i.forward(e),s+=e}let l=e[o++];while(s<l){if(i.done)break e;let e=Math.min(i.len,l-s);Up(t,e,-1),Up(r,e,-1==i.ins?-1:0==i.off?i.ins:0),i.forward(e),s+=e}}return{changes:new Qp(t,n),filtered:Wp.create(r)}}toJSON(){let e=[];for(let t=0;t<this.sections.length;t+=2){let n=this.sections[t],r=this.sections[t+1];r<0?e.push(n):0==r?e.push([n]):e.push([n].concat(this.inserted[t>>1].toJSON()))}return e}static of(e,t,n){let r=[],i=[],o=0,s=null;function a(e=!1){if(!e&&!r.length)return;o<t&&Up(r,t-o,-1);let n=new Qp(r,i);s=s?s.compose(n.map(s)):n,r=[],i=[],o=0}function l(e){if(Array.isArray(e))for(let t of e)l(t);else if(e instanceof Qp){if(e.length!=t)throw new RangeError(`Mismatched change set length (got ${e.length}, expected ${t})`);a(),s=s?s.compose(e.map(s)):e}else{let{from:s,to:l=s,insert:c}=e;if(s>l||s<0||l>t)throw new RangeError(`Invalid change range ${s} to ${l} (in doc of length ${t})`);let u=c?"string"==typeof c?wp.of(c.split(n||zp)):c:wp.empty,h=u.length;if(s==l&&0==h)return;s<o&&a(),s>o&&Up(r,s-o,-1),Up(r,l-s,h),Yp(i,r,u),o=l}}return l(e),a(!s),s}static empty(e){return new Qp(e?[e,-1]:[],[])}static fromJSON(e){if(!Array.isArray(e))throw new RangeError("Invalid JSON representation of ChangeSet");let t=[],n=[];for(let r=0;r<e.length;r++){let i=e[r];if("number"==typeof i)t.push(i,-1);else{if(!Array.isArray(i)||"number"!=typeof i[0]||i.some(((e,t)=>t&&"string"!=typeof e)))throw new RangeError("Invalid JSON representation of ChangeSet");if(1==i.length)t.push(i[0],0);else{while(n.length<r)n.push(wp.empty);n[r]=wp.of(i.slice(1)),t.push(i[0],n[r].length)}}}return new Qp(t,n)}static createSet(e,t){return new Qp(e,t)}}function Up(e,t,n,r=!1){if(0==t&&n<=0)return;let i=e.length-2;i>=0&&n<=0&&n==e[i+1]?e[i]+=t:0==t&&0==e[i]?e[i+1]+=n:r?(e[i]+=t,e[i+1]+=n):e.push(t,n)}function Yp(e,t,n){if(0==n.length)return;let r=t.length-2>>1;if(r<e.length)e[e.length-1]=e[e.length-1].append(n);else{while(e.length<r)e.push(wp.empty);e.push(n)}}function Xp(e,t,n){let r=e.inserted;for(let i=0,o=0,s=0;s<e.sections.length;){let a=e.sections[s++],l=e.sections[s++];if(l<0)i+=a,o+=a;else{let c=i,u=o,h=wp.empty;for(;;){if(c+=a,u+=l,l&&r&&(h=h.append(r[s-2>>1])),n||s==e.sections.length||e.sections[s+1]<0)break;a=e.sections[s++],l=e.sections[s++]}t(i,c,o,u,h),i=c,o=u}}}function Zp(e,t,n,r=!1){let i=[],o=r?[]:null,s=new Kp(e),a=new Kp(t);for(let l=-1;;)if(-1==s.ins&&-1==a.ins){let e=Math.min(s.len,a.len);Up(i,e,-1),s.forward(e),a.forward(e)}else if(a.ins>=0&&(s.ins<0||l==s.i||0==s.off&&(a.len<s.len||a.len==s.len&&!n))){let e=a.len;Up(i,a.ins,-1);while(e){let t=Math.min(s.len,e);s.ins>=0&&l<s.i&&s.len<=t&&(Up(i,0,s.ins),o&&Yp(o,i,s.text),l=s.i),s.forward(t),e-=t}a.next()}else{if(!(s.ins>=0)){if(s.done&&a.done)return o?Qp.createSet(i,o):Wp.create(i);throw new Error("Mismatched change set lengths")}{let e=0,t=s.len;while(t)if(-1==a.ins){let n=Math.min(t,a.len);e+=n,t-=n,a.forward(n)}else{if(!(0==a.ins&&a.len<t))break;t-=a.len,a.next()}Up(i,e,l<s.i?s.ins:0),o&&l<s.i&&Yp(o,i,s.text),l=s.i,s.forward(s.len-t)}}}function Gp(e,t,n=!1){let r=[],i=n?[]:null,o=new Kp(e),s=new Kp(t);for(let a=!1;;){if(o.done&&s.done)return i?Qp.createSet(r,i):Wp.create(r);if(0==o.ins)Up(r,o.len,0,a),o.next();else if(0!=s.len||s.done){if(o.done||s.done)throw new Error("Mismatched change set lengths");{let e=Math.min(o.len2,s.len),t=r.length;if(-1==o.ins){let t=-1==s.ins?-1:s.off?0:s.ins;Up(r,e,t,a),i&&t&&Yp(i,r,s.text)}else-1==s.ins?(Up(r,o.off?0:o.len,e,a),i&&Yp(i,r,o.textBit(e))):(Up(r,o.off?0:o.len,s.off?0:s.ins,a),i&&!s.off&&Yp(i,r,s.text));a=(o.ins>e||s.ins>=0&&s.len>e)&&(a||r.length>t),o.forward2(e),s.forward(e)}}else Up(r,0,s.ins,a),i&&Yp(i,r,s.text),s.next()}}class Kp{constructor(e){this.set=e,this.i=0,this.next()}next(){let{sections:e}=this.set;this.i<e.length?(this.len=e[this.i++],this.ins=e[this.i++]):(this.len=0,this.ins=-2),this.off=0}get done(){return-2==this.ins}get len2(){return this.ins<0?this.len:this.ins}get text(){let{inserted:e}=this.set,t=this.i-2>>1;return t>=e.length?wp.empty:e[t]}textBit(e){let{inserted:t}=this.set,n=this.i-2>>1;return n>=t.length&&!e?wp.empty:t[n].slice(this.off,null==e?void 0:this.off+e)}forward(e){e==this.len?this.next():(this.len-=e,this.off+=e)}forward2(e){-1==this.ins?this.forward(e):e==this.ins?this.next():(this.ins-=e,this.off+=e)}}class Jp{constructor(e,t,n){this.from=e,this.to=t,this.flags=n}get anchor(){return 32&this.flags?this.to:this.from}get head(){return 32&this.flags?this.from:this.to}get empty(){return this.from==this.to}get assoc(){return 8&this.flags?-1:16&this.flags?1:0}get bidiLevel(){let e=7&this.flags;return 7==e?null:e}get goalColumn(){let e=this.flags>>6;return 16777215==e?void 0:e}map(e,t=-1){let n,r;return this.empty?n=r=e.mapPos(this.from,t):(n=e.mapPos(this.from,1),r=e.mapPos(this.to,-1)),n==this.from&&r==this.to?this:new Jp(n,r,this.flags)}extend(e,t=e){if(e<=this.anchor&&t>=this.anchor)return eg.range(e,t);let n=Math.abs(e-this.anchor)>Math.abs(t-this.anchor)?e:t;return eg.range(this.anchor,n)}eq(e,t=!1){return this.anchor==e.anchor&&this.head==e.head&&(!t||!this.empty||this.assoc==e.assoc)}toJSON(){return{anchor:this.anchor,head:this.head}}static fromJSON(e){if(!e||"number"!=typeof e.anchor||"number"!=typeof e.head)throw new RangeError("Invalid JSON representation for SelectionRange");return eg.range(e.anchor,e.head)}static create(e,t,n){return new Jp(e,t,n)}}class eg{constructor(e,t){this.ranges=e,this.mainIndex=t}map(e,t=-1){return e.empty?this:eg.create(this.ranges.map((n=>n.map(e,t))),this.mainIndex)}eq(e,t=!1){if(this.ranges.length!=e.ranges.length||this.mainIndex!=e.mainIndex)return!1;for(let n=0;n<this.ranges.length;n++)if(!this.ranges[n].eq(e.ranges[n],t))return!1;return!0}get main(){return this.ranges[this.mainIndex]}asSingle(){return 1==this.ranges.length?this:new eg([this.main],0)}addRange(e,t=!0){return eg.create([e].concat(this.ranges),t?0:this.mainIndex+1)}replaceRange(e,t=this.mainIndex){let n=this.ranges.slice();return n[t]=e,eg.create(n,this.mainIndex)}toJSON(){return{ranges:this.ranges.map((e=>e.toJSON())),main:this.mainIndex}}static fromJSON(e){if(!e||!Array.isArray(e.ranges)||"number"!=typeof e.main||e.main>=e.ranges.length)throw new RangeError("Invalid JSON representation for EditorSelection");return new eg(e.ranges.map((e=>Jp.fromJSON(e))),e.main)}static single(e,t=e){return new eg([eg.range(e,t)],0)}static create(e,t=0){if(0==e.length)throw new RangeError("A selection needs at least one range");for(let n=0,r=0;r<e.length;r++){let i=e[r];if(i.empty?i.from<=n:i.from<n)return eg.normalized(e.slice(),t);n=i.to}return new eg(e,t)}static cursor(e,t=0,n,r){return Jp.create(e,e,(0==t?0:t<0?8:16)|(null==n?7:Math.min(6,n))|(null!==r&&void 0!==r?r:16777215)<<6)}static range(e,t,n,r){let i=(null!==n&&void 0!==n?n:16777215)<<6|(null==r?7:Math.min(6,r));return t<e?Jp.create(t,e,48|i):Jp.create(e,t,(t>e?8:0)|i)}static normalized(e,t=0){let n=e[t];e.sort(((e,t)=>e.from-t.from)),t=e.indexOf(n);for(let r=1;r<e.length;r++){let n=e[r],i=e[r-1];if(n.empty?n.from<=i.to:n.from<i.to){let o=i.from,s=Math.max(n.to,i.to);r<=t&&t--,e.splice(--r,2,n.anchor>n.head?eg.range(s,o):eg.range(o,s))}}return new eg(e,t)}}function tg(e,t){for(let n of e.ranges)if(n.to>t)throw new RangeError("Selection points outside of document")}let ng=0;class rg{constructor(e,t,n,r,i){this.combine=e,this.compareInput=t,this.compare=n,this.isStatic=r,this.id=ng++,this.default=e([]),this.extensions="function"==typeof i?i(this):i}get reader(){return this}static define(e={}){return new rg(e.combine||(e=>e),e.compareInput||((e,t)=>e===t),e.compare||(e.combine?(e,t)=>e===t:ig),!!e.static,e.enables)}of(e){return new og([],this,0,e)}compute(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new og(e,this,1,t)}computeN(e,t){if(this.isStatic)throw new Error("Can't compute a static facet");return new og(e,this,2,t)}from(e,t){return t||(t=e=>e),this.compute([e],(n=>t(n.field(e))))}}function ig(e,t){return e==t||e.length==t.length&&e.every(((e,n)=>e===t[n]))}class og{constructor(e,t,n,r){this.dependencies=e,this.facet=t,this.type=n,this.value=r,this.id=ng++}dynamicSlot(e){var t;let n=this.value,r=this.facet.compareInput,i=this.id,o=e[i]>>1,s=2==this.type,a=!1,l=!1,c=[];for(let u of this.dependencies)"doc"==u?a=!0:"selection"==u?l=!0:0==(1&(null!==(t=e[u.id])&&void 0!==t?t:1))&&c.push(e[u.id]);return{create(e){return e.values[o]=n(e),1},update(e,t){if(a&&t.docChanged||l&&(t.docChanged||t.selection)||ag(e,c)){let t=n(e);if(s?!sg(t,e.values[o],r):!r(t,e.values[o]))return e.values[o]=t,1}return 0},reconfigure:(e,t)=>{let a,l=t.config.address[i];if(null!=l){let i=wg(t,l);if(this.dependencies.every((n=>n instanceof rg?t.facet(n)===e.facet(n):!(n instanceof ug)||t.field(n,!1)==e.field(n,!1)))||(s?sg(a=n(e),i,r):r(a=n(e),i)))return e.values[o]=i,0}else a=n(e);return e.values[o]=a,1}}}}function sg(e,t,n){if(e.length!=t.length)return!1;for(let r=0;r<e.length;r++)if(!n(e[r],t[r]))return!1;return!0}function ag(e,t){let n=!1;for(let r of t)1&bg(e,r)&&(n=!0);return n}function lg(e,t,n){let r=n.map((t=>e[t.id])),i=n.map((e=>e.type)),o=r.filter((e=>!(1&e))),s=e[t.id]>>1;function a(e){let n=[];for(let t=0;t<r.length;t++){let o=wg(e,r[t]);if(2==i[t])for(let e of o)n.push(e);else n.push(o)}return t.combine(n)}return{create(e){for(let t of r)bg(e,t);return e.values[s]=a(e),1},update(e,n){if(!ag(e,o))return 0;let r=a(e);return t.compare(r,e.values[s])?0:(e.values[s]=r,1)},reconfigure(e,i){let o=ag(e,r),l=i.config.facets[t.id],c=i.facet(t);if(l&&!o&&ig(n,l))return e.values[s]=c,0;let u=a(e);return t.compare(u,c)?(e.values[s]=c,0):(e.values[s]=u,1)}}}const cg=rg.define({static:!0});class ug{constructor(e,t,n,r,i){this.id=e,this.createF=t,this.updateF=n,this.compareF=r,this.spec=i,this.provides=void 0}static define(e){let t=new ug(ng++,e.create,e.update,e.compare||((e,t)=>e===t),e);return e.provide&&(t.provides=e.provide(t)),t}create(e){let t=e.facet(cg).find((e=>e.field==this));return((null===t||void 0===t?void 0:t.create)||this.createF)(e)}slot(e){let t=e[this.id]>>1;return{create:e=>(e.values[t]=this.create(e),1),update:(e,n)=>{let r=e.values[t],i=this.updateF(r,n);return this.compareF(r,i)?0:(e.values[t]=i,1)},reconfigure:(e,n)=>null!=n.config.address[this.id]?(e.values[t]=n.field(this),0):(e.values[t]=this.create(e),1)}}init(e){return[this,cg.of({field:this,create:e})]}get extension(){return this}}const hg={lowest:4,low:3,default:2,high:1,highest:0};function dg(e){return t=>new pg(t,e)}const fg={highest:dg(hg.highest),high:dg(hg.high),default:dg(hg.default),low:dg(hg.low),lowest:dg(hg.lowest)};class pg{constructor(e,t){this.inner=e,this.prec=t}}class gg{of(e){return new mg(this,e)}reconfigure(e){return gg.reconfigure.of({compartment:this,extension:e})}get(e){return e.config.compartments.get(this)}}class mg{constructor(e,t){this.compartment=e,this.inner=t}}class vg{constructor(e,t,n,r,i,o){this.base=e,this.compartments=t,this.dynamicSlots=n,this.address=r,this.staticValues=i,this.facets=o,this.statusTemplate=[];while(this.statusTemplate.length<n.length)this.statusTemplate.push(0)}staticFacet(e){let t=this.address[e.id];return null==t?e.default:this.staticValues[t>>1]}static resolve(e,t,n){let r=[],i=Object.create(null),o=new Map;for(let h of yg(e,t,o))h instanceof ug?r.push(h):(i[h.facet.id]||(i[h.facet.id]=[])).push(h);let s=Object.create(null),a=[],l=[];for(let h of r)s[h.id]=l.length<<1,l.push((e=>h.slot(e)));let c=null===n||void 0===n?void 0:n.config.facets;for(let h in i){let e=i[h],t=e[0].facet,r=c&&c[h]||[];if(e.every((e=>0==e.type)))if(s[t.id]=a.length<<1|1,ig(r,e))a.push(n.facet(t));else{let r=t.combine(e.map((e=>e.value)));a.push(n&&t.compare(r,n.facet(t))?n.facet(t):r)}else{for(let t of e)0==t.type?(s[t.id]=a.length<<1|1,a.push(t.value)):(s[t.id]=l.length<<1,l.push((e=>t.dynamicSlot(e))));s[t.id]=l.length<<1,l.push((n=>lg(n,t,e)))}}let u=l.map((e=>e(s)));return new vg(e,o,u,s,a,i)}}function yg(e,t,n){let r=[[],[],[],[],[]],i=new Map;function o(e,s){let a=i.get(e);if(null!=a){if(a<=s)return;let t=r[a].indexOf(e);t>-1&&r[a].splice(t,1),e instanceof mg&&n.delete(e.compartment)}if(i.set(e,s),Array.isArray(e))for(let t of e)o(t,s);else if(e instanceof mg){if(n.has(e.compartment))throw new RangeError("Duplicate use of compartment in extensions");let r=t.get(e.compartment)||e.inner;n.set(e.compartment,r),o(r,s)}else if(e instanceof pg)o(e.inner,e.prec);else if(e instanceof ug)r[s].push(e),e.provides&&o(e.provides,s);else if(e instanceof og)r[s].push(e),e.facet.extensions&&o(e.facet.extensions,hg.default);else{let t=e.extension;if(!t)throw new Error(`Unrecognized extension value in extension set (${e}). This sometimes happens because multiple instances of @codemirror/state are loaded, breaking instanceof checks.`);o(t,s)}}return o(e,hg.default),r.reduce(((e,t)=>e.concat(t)))}function bg(e,t){if(1&t)return 2;let n=t>>1,r=e.status[n];if(4==r)throw new Error("Cyclic dependency between fields and/or facets");if(2&r)return r;e.status[n]=4;let i=e.computeSlot(e,e.config.dynamicSlots[n]);return e.status[n]=2|i}function wg(e,t){return 1&t?e.config.staticValues[t>>1]:e.values[t>>1]}const xg=rg.define(),kg=rg.define({combine:e=>e.some((e=>e)),static:!0}),_g=rg.define({combine:e=>e.length?e[0]:void 0,static:!0}),Og=rg.define(),Sg=rg.define(),Eg=rg.define(),Cg=rg.define({combine:e=>!!e.length&&e[0]});class Tg{constructor(e,t){this.type=e,this.value=t}static define(){return new Ag}}class Ag{of(e){return new Tg(this,e)}}class Dg{constructor(e){this.map=e}of(e){return new Mg(this,e)}}class Mg{constructor(e,t){this.type=e,this.value=t}map(e){let t=this.type.map(this.value,e);return void 0===t?void 0:t==this.value?this:new Mg(this.type,t)}is(e){return this.type==e}static define(e={}){return new Dg(e.map||(e=>e))}static mapEffects(e,t){if(!e.length)return e;let n=[];for(let r of e){let e=r.map(t);e&&n.push(e)}return n}}Mg.reconfigure=Mg.define(),Mg.appendConfig=Mg.define();class Fg{constructor(e,t,n,r,i,o){this.startState=e,this.changes=t,this.selection=n,this.effects=r,this.annotations=i,this.scrollIntoView=o,this._doc=null,this._state=null,n&&tg(n,t.newLength),i.some((e=>e.type==Fg.time))||(this.annotations=i.concat(Fg.time.of(Date.now())))}static create(e,t,n,r,i,o){return new Fg(e,t,n,r,i,o)}get newDoc(){return this._doc||(this._doc=this.changes.apply(this.startState.doc))}get newSelection(){return this.selection||this.startState.selection.map(this.changes)}get state(){return this._state||this.startState.applyTransaction(this),this._state}annotation(e){for(let t of this.annotations)if(t.type==e)return t.value}get docChanged(){return!this.changes.empty}get reconfigured(){return this.startState.config!=this.state.config}isUserEvent(e){let t=this.annotation(Fg.userEvent);return!(!t||!(t==e||t.length>e.length&&t.slice(0,e.length)==e&&"."==t[e.length]))}}function Rg(e,t){let n=[];for(let r=0,i=0;;){let o,s;if(r<e.length&&(i==t.length||t[i]>=e[r]))o=e[r++],s=e[r++];else{if(!(i<t.length))return n;o=t[i++],s=t[i++]}!n.length||n[n.length-1]<o?n.push(o,s):n[n.length-1]<s&&(n[n.length-1]=s)}}function Pg(e,t,n){var r;let i,o,s;return n?(i=t.changes,o=Qp.empty(t.changes.length),s=e.changes.compose(t.changes)):(i=t.changes.map(e.changes),o=e.changes.mapDesc(t.changes,!0),s=e.changes.compose(i)),{changes:s,selection:t.selection?t.selection.map(o):null===(r=e.selection)||void 0===r?void 0:r.map(i),effects:Mg.mapEffects(e.effects,i).concat(Mg.mapEffects(t.effects,o)),annotations:e.annotations.length?e.annotations.concat(t.annotations):t.annotations,scrollIntoView:e.scrollIntoView||t.scrollIntoView}}function Ig(e,t,n){let r=t.selection,i=Bg(t.annotations);return t.userEvent&&(i=i.concat(Fg.userEvent.of(t.userEvent))),{changes:t.changes instanceof Qp?t.changes:Qp.of(t.changes||[],n,e.facet(_g)),selection:r&&(r instanceof eg?r:eg.single(r.anchor,r.head)),effects:Bg(t.effects),annotations:i,scrollIntoView:!!t.scrollIntoView}}function Lg(e,t,n){let r=Ig(e,t.length?t[0]:{},e.doc.length);t.length&&!1===t[0].filter&&(n=!1);for(let o=1;o<t.length;o++){!1===t[o].filter&&(n=!1);let i=!!t[o].sequential;r=Pg(r,Ig(e,t[o],i?r.changes.newLength:e.doc.length),i)}let i=Fg.create(e,r.changes,r.selection,r.effects,r.annotations,r.scrollIntoView);return Ng(n?$g(i):i)}function $g(e){let t=e.startState,n=!0;for(let i of t.facet(Og)){let t=i(e);if(!1===t){n=!1;break}Array.isArray(t)&&(n=!0===n?t:Rg(n,t))}if(!0!==n){let r,i;if(!1===n)i=e.changes.invertedDesc,r=Qp.empty(t.doc.length);else{let t=e.changes.filter(n);r=t.changes,i=t.filtered.mapDesc(t.changes).invertedDesc}e=Fg.create(t,r,e.selection&&e.selection.map(i),Mg.mapEffects(e.effects,i),e.annotations,e.scrollIntoView)}let r=t.facet(Sg);for(let i=r.length-1;i>=0;i--){let n=r[i](e);e=n instanceof Fg?n:Array.isArray(n)&&1==n.length&&n[0]instanceof Fg?n[0]:Lg(t,Bg(n),!1)}return e}function Ng(e){let t=e.startState,n=t.facet(Eg),r=e;for(let i=n.length-1;i>=0;i--){let o=n[i](e);o&&Object.keys(o).length&&(r=Pg(r,Ig(t,o,e.changes.newLength),!0))}return r==e?e:Fg.create(t,e.changes,e.selection,r.effects,r.annotations,r.scrollIntoView)}Fg.time=Tg.define(),Fg.userEvent=Tg.define(),Fg.addToHistory=Tg.define(),Fg.remote=Tg.define();const jg=[];function Bg(e){return null==e?jg:Array.isArray(e)?e:[e]}var Vg=function(e){return e[e["Word"]=0]="Word",e[e["Space"]=1]="Space",e[e["Other"]=2]="Other",e}(Vg||(Vg={}));const qg=/[\u00df\u0587\u0590-\u05f4\u0600-\u06ff\u3040-\u309f\u30a0-\u30ff\u3400-\u4db5\u4e00-\u9fcc\uac00-\ud7af]/;let zg;try{zg=new RegExp("[\\p{Alphabetic}\\p{Number}_]","u")}catch(Re){}function Hg(e){if(zg)return zg.test(e);for(let t=0;t<e.length;t++){let n=e[t];if(/\w/.test(n)||n>""&&(n.toUpperCase()!=n.toLowerCase()||qg.test(n)))return!0}return!1}function Wg(e){return t=>{if(!/\S/.test(t))return Vg.Space;if(Hg(t))return Vg.Word;for(let n=0;n<e.length;n++)if(t.indexOf(e[n])>-1)return Vg.Word;return Vg.Other}}class Qg{constructor(e,t,n,r,i,o){this.config=e,this.doc=t,this.selection=n,this.values=r,this.status=e.statusTemplate.slice(),this.computeSlot=i,o&&(o._state=this);for(let s=0;s<this.config.dynamicSlots.length;s++)bg(this,s<<1);this.computeSlot=null}field(e,t=!0){let n=this.config.address[e.id];if(null!=n)return bg(this,n),wg(this,n);if(t)throw new RangeError("Field is not present in this state")}update(...e){return Lg(this,e,!0)}applyTransaction(e){let t,n=this.config,{base:r,compartments:i}=n;for(let s of e.effects)s.is(gg.reconfigure)?(n&&(i=new Map,n.compartments.forEach(((e,t)=>i.set(t,e))),n=null),i.set(s.value.compartment,s.value.extension)):s.is(Mg.reconfigure)?(n=null,r=s.value):s.is(Mg.appendConfig)&&(n=null,r=Bg(r).concat(s.value));if(n)t=e.startState.values.slice();else{n=vg.resolve(r,i,this);let e=new Qg(n,this.doc,this.selection,n.dynamicSlots.map((()=>null)),((e,t)=>t.reconfigure(e,this)),null);t=e.values}let o=e.startState.facet(kg)?e.newSelection:e.newSelection.asSingle();new Qg(n,e.newDoc,o,t,((t,n)=>n.update(t,e)),e)}replaceSelection(e){return"string"==typeof e&&(e=this.toText(e)),this.changeByRange((t=>({changes:{from:t.from,to:t.to,insert:e},range:eg.cursor(t.from+e.length)})))}changeByRange(e){let t=this.selection,n=e(t.ranges[0]),r=this.changes(n.changes),i=[n.range],o=Bg(n.effects);for(let s=1;s<t.ranges.length;s++){let n=e(t.ranges[s]),a=this.changes(n.changes),l=a.map(r);for(let e=0;e<s;e++)i[e]=i[e].map(l);let c=r.mapDesc(a,!0);i.push(n.range.map(c)),r=r.compose(l),o=Mg.mapEffects(o,l).concat(Mg.mapEffects(Bg(n.effects),c))}return{changes:r,selection:eg.create(i,t.mainIndex),effects:o}}changes(e=[]){return e instanceof Qp?e:Qp.of(e,this.doc.length,this.facet(Qg.lineSeparator))}toText(e){return wp.of(e.split(this.facet(Qg.lineSeparator)||zp))}sliceDoc(e=0,t=this.doc.length){return this.doc.sliceString(e,t,this.lineBreak)}facet(e){let t=this.config.address[e.id];return null==t?e.default:(bg(this,t),wg(this,t))}toJSON(e){let t={doc:this.sliceDoc(),selection:this.selection.toJSON()};if(e)for(let n in e){let r=e[n];r instanceof ug&&null!=this.config.address[r.id]&&(t[n]=r.spec.toJSON(this.field(e[n]),this))}return t}static fromJSON(e,t={},n){if(!e||"string"!=typeof e.doc)throw new RangeError("Invalid JSON representation for EditorState");let r=[];if(n)for(let i in n)if(Object.prototype.hasOwnProperty.call(e,i)){let t=n[i],o=e[i];r.push(t.init((e=>t.spec.fromJSON(o,e))))}return Qg.create({doc:e.doc,selection:eg.fromJSON(e.selection),extensions:t.extensions?r.concat([t.extensions]):r})}static create(e={}){let t=vg.resolve(e.extensions||[],new Map),n=e.doc instanceof wp?e.doc:wp.of((e.doc||"").split(t.staticFacet(Qg.lineSeparator)||zp)),r=e.selection?e.selection instanceof eg?e.selection:eg.single(e.selection.anchor,e.selection.head):eg.single(0);return tg(r,n.length),t.staticFacet(kg)||(r=r.asSingle()),new Qg(t,n,r,t.dynamicSlots.map((()=>null)),((e,t)=>t.create(e)),null)}get tabSize(){return this.facet(Qg.tabSize)}get lineBreak(){return this.facet(Qg.lineSeparator)||"\n"}get readOnly(){return this.facet(Cg)}phrase(e,...t){for(let n of this.facet(Qg.phrases))if(Object.prototype.hasOwnProperty.call(n,e)){e=n[e];break}return t.length&&(e=e.replace(/\$(\$|\d*)/g,((e,n)=>{if("$"==n)return"$";let r=+(n||1);return!r||r>t.length?e:t[r-1]}))),e}languageDataAt(e,t,n=-1){let r=[];for(let i of this.facet(xg))for(let o of i(this,t,n))Object.prototype.hasOwnProperty.call(o,e)&&r.push(o[e]);return r}charCategorizer(e){return Wg(this.languageDataAt("wordChars",e).join(""))}wordAt(e){let{text:t,from:n,length:r}=this.doc.lineAt(e),i=this.charCategorizer(e),o=e-n,s=e-n;while(o>0){let e=Ip(t,o,!1);if(i(t.slice(e,o))!=Vg.Word)break;o=e}while(s<r){let e=Ip(t,s);if(i(t.slice(s,e))!=Vg.Word)break;s=e}return o==s?null:eg.range(o+n,s+n)}}function Ug(e,t,n={}){let r={};for(let i of e)for(let e of Object.keys(i)){let t=i[e],o=r[e];if(void 0===o)r[e]=t;else if(o===t||void 0===t);else{if(!Object.hasOwnProperty.call(n,e))throw new Error("Config merge conflict for field "+e);r[e]=n[e](o,t)}}for(let i in t)void 0===r[i]&&(r[i]=t[i]);return r}Qg.allowMultipleSelections=kg,Qg.tabSize=rg.define({combine:e=>e.length?e[0]:4}),Qg.lineSeparator=_g,Qg.readOnly=Cg,Qg.phrases=rg.define({compare(e,t){let n=Object.keys(e),r=Object.keys(t);return n.length==r.length&&n.every((n=>e[n]==t[n]))}}),Qg.languageData=xg,Qg.changeFilter=Og,Qg.transactionFilter=Sg,Qg.transactionExtender=Eg,gg.reconfigure=Mg.define();class Yg{eq(e){return this==e}range(e,t=e){return Xg.create(e,t,this)}}Yg.prototype.startSide=Yg.prototype.endSide=0,Yg.prototype.point=!1,Yg.prototype.mapMode=Hp.TrackDel;class Xg{constructor(e,t,n){this.from=e,this.to=t,this.value=n}static create(e,t,n){return new Xg(e,t,n)}}function Zg(e,t){return e.from-t.from||e.value.startSide-t.value.startSide}class Gg{constructor(e,t,n,r){this.from=e,this.to=t,this.value=n,this.maxPoint=r}get length(){return this.to[this.to.length-1]}findIndex(e,t,n,r=0){let i=n?this.to:this.from;for(let o=r,s=i.length;;){if(o==s)return o;let r=o+s>>1,a=i[r]-e||(n?this.value[r].endSide:this.value[r].startSide)-t;if(r==o)return a>=0?o:s;a>=0?s=r:o=r+1}}between(e,t,n,r){for(let i=this.findIndex(t,-1e9,!0),o=this.findIndex(n,1e9,!1,i);i<o;i++)if(!1===r(this.from[i]+e,this.to[i]+e,this.value[i]))return!1}map(e,t){let n=[],r=[],i=[],o=-1,s=-1;for(let a=0;a<this.value.length;a++){let l,c,u=this.value[a],h=this.from[a]+e,d=this.to[a]+e;if(h==d){let e=t.mapPos(h,u.startSide,u.mapMode);if(null==e)continue;if(l=c=e,u.startSide!=u.endSide&&(c=t.mapPos(h,u.endSide),c<l))continue}else if(l=t.mapPos(h,u.startSide),c=t.mapPos(d,u.endSide),l>c||l==c&&u.startSide>0&&u.endSide<=0)continue;(c-l||u.endSide-u.startSide)<0||(o<0&&(o=l),u.point&&(s=Math.max(s,c-l)),n.push(u),r.push(l-o),i.push(c-o))}return{mapped:n.length?new Gg(r,i,n,s):null,pos:o}}}class Kg{constructor(e,t,n,r){this.chunkPos=e,this.chunk=t,this.nextLayer=n,this.maxPoint=r}static create(e,t,n,r){return new Kg(e,t,n,r)}get length(){let e=this.chunk.length-1;return e<0?0:Math.max(this.chunkEnd(e),this.nextLayer.length)}get size(){if(this.isEmpty)return 0;let e=this.nextLayer.size;for(let t of this.chunk)e+=t.value.length;return e}chunkEnd(e){return this.chunkPos[e]+this.chunk[e].length}update(e){let{add:t=[],sort:n=!1,filterFrom:r=0,filterTo:i=this.length}=e,o=e.filter;if(0==t.length&&!o)return this;if(n&&(t=t.slice().sort(Zg)),this.isEmpty)return t.length?Kg.of(t):this;let s=new nm(this,null,-1).goto(0),a=0,l=[],c=new em;while(s.value||a<t.length)if(a<t.length&&(s.from-t[a].from||s.startSide-t[a].value.startSide)>=0){let e=t[a++];c.addInner(e.from,e.to,e.value)||l.push(e)}else 1==s.rangeIndex&&s.chunkIndex<this.chunk.length&&(a==t.length||this.chunkEnd(s.chunkIndex)<t[a].from)&&(!o||r>this.chunkEnd(s.chunkIndex)||i<this.chunkPos[s.chunkIndex])&&c.addChunk(this.chunkPos[s.chunkIndex],this.chunk[s.chunkIndex])?s.nextChunk():((!o||r>s.to||i<s.from||o(s.from,s.to,s.value))&&(c.addInner(s.from,s.to,s.value)||l.push(Xg.create(s.from,s.to,s.value))),s.next());return c.finishInner(this.nextLayer.isEmpty&&!l.length?Kg.empty:this.nextLayer.update({add:l,filter:o,filterFrom:r,filterTo:i}))}map(e){if(e.empty||this.isEmpty)return this;let t=[],n=[],r=-1;for(let o=0;o<this.chunk.length;o++){let i=this.chunkPos[o],s=this.chunk[o],a=e.touchesRange(i,i+s.length);if(!1===a)r=Math.max(r,s.maxPoint),t.push(s),n.push(e.mapPos(i));else if(!0===a){let{mapped:o,pos:a}=s.map(i,e);o&&(r=Math.max(r,o.maxPoint),t.push(o),n.push(a))}}let i=this.nextLayer.map(e);return 0==t.length?i:new Kg(n,t,i||Kg.empty,r)}between(e,t,n){if(!this.isEmpty){for(let r=0;r<this.chunk.length;r++){let i=this.chunkPos[r],o=this.chunk[r];if(t>=i&&e<=i+o.length&&!1===o.between(i,e-i,t-i,n))return}this.nextLayer.between(e,t,n)}}iter(e=0){return rm.from([this]).goto(e)}get isEmpty(){return this.nextLayer==this}static iter(e,t=0){return rm.from(e).goto(t)}static compare(e,t,n,r,i=-1){let o=e.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),s=t.filter((e=>e.maxPoint>0||!e.isEmpty&&e.maxPoint>=i)),a=tm(o,s,n),l=new om(o,a,i),c=new om(s,a,i);n.iterGaps(((e,t,n)=>sm(l,e,c,t,n,r))),n.empty&&0==n.length&&sm(l,0,c,0,0,r)}static eq(e,t,n=0,r){null==r&&(r=999999999);let i=e.filter((e=>!e.isEmpty&&t.indexOf(e)<0)),o=t.filter((t=>!t.isEmpty&&e.indexOf(t)<0));if(i.length!=o.length)return!1;if(!i.length)return!0;let s=tm(i,o),a=new om(i,s,0).goto(n),l=new om(o,s,0).goto(n);for(;;){if(a.to!=l.to||!am(a.active,l.active)||a.point&&(!l.point||!a.point.eq(l.point)))return!1;if(a.to>r)return!0;a.next(),l.next()}}static spans(e,t,n,r,i=-1){let o=new om(e,null,i).goto(t),s=t,a=o.openStart;for(;;){let e=Math.min(o.to,n);if(o.point){let n=o.activeForPoint(o.to),i=o.pointFrom<t?n.length+1:o.point.startSide<0?n.length:Math.min(n.length,a);r.point(s,e,o.point,n,i,o.pointRank),a=Math.min(o.openEnd(e),n.length)}else e>s&&(r.span(s,e,o.active,a),a=o.openEnd(e));if(o.to>n)return a+(o.point&&o.to>n?1:0);s=o.to,o.next()}}static of(e,t=!1){let n=new em;for(let r of e instanceof Xg?[e]:t?Jg(e):e)n.add(r.from,r.to,r.value);return n.finish()}static join(e){if(!e.length)return Kg.empty;let t=e[e.length-1];for(let n=e.length-2;n>=0;n--)for(let r=e[n];r!=Kg.empty;r=r.nextLayer)t=new Kg(r.chunkPos,r.chunk,t,Math.max(r.maxPoint,t.maxPoint));return t}}function Jg(e){if(e.length>1)for(let t=e[0],n=1;n<e.length;n++){let r=e[n];if(Zg(t,r)>0)return e.slice().sort(Zg);t=r}return e}Kg.empty=new Kg([],[],null,-1),Kg.empty.nextLayer=Kg.empty;class em{finishChunk(e){this.chunks.push(new Gg(this.from,this.to,this.value,this.maxPoint)),this.chunkPos.push(this.chunkStart),this.chunkStart=-1,this.setMaxPoint=Math.max(this.setMaxPoint,this.maxPoint),this.maxPoint=-1,e&&(this.from=[],this.to=[],this.value=[])}constructor(){this.chunks=[],this.chunkPos=[],this.chunkStart=-1,this.last=null,this.lastFrom=-1e9,this.lastTo=-1e9,this.from=[],this.to=[],this.value=[],this.maxPoint=-1,this.setMaxPoint=-1,this.nextLayer=null}add(e,t,n){this.addInner(e,t,n)||(this.nextLayer||(this.nextLayer=new em)).add(e,t,n)}addInner(e,t,n){let r=e-this.lastTo||n.startSide-this.last.endSide;if(r<=0&&(e-this.lastFrom||n.startSide-this.last.startSide)<0)throw new Error("Ranges must be added sorted by `from` position and `startSide`");return!(r<0)&&(250==this.from.length&&this.finishChunk(!0),this.chunkStart<0&&(this.chunkStart=e),this.from.push(e-this.chunkStart),this.to.push(t-this.chunkStart),this.last=n,this.lastFrom=e,this.lastTo=t,this.value.push(n),n.point&&(this.maxPoint=Math.max(this.maxPoint,t-e)),!0)}addChunk(e,t){if((e-this.lastTo||t.value[0].startSide-this.last.endSide)<0)return!1;this.from.length&&this.finishChunk(!0),this.setMaxPoint=Math.max(this.setMaxPoint,t.maxPoint),this.chunks.push(t),this.chunkPos.push(e);let n=t.value.length-1;return this.last=t.value[n],this.lastFrom=t.from[n]+e,this.lastTo=t.to[n]+e,!0}finish(){return this.finishInner(Kg.empty)}finishInner(e){if(this.from.length&&this.finishChunk(!1),0==this.chunks.length)return e;let t=Kg.create(this.chunkPos,this.chunks,this.nextLayer?this.nextLayer.finishInner(e):e,this.setMaxPoint);return this.from=null,t}}function tm(e,t,n){let r=new Map;for(let o of e)for(let e=0;e<o.chunk.length;e++)o.chunk[e].maxPoint<=0&&r.set(o.chunk[e],o.chunkPos[e]);let i=new Set;for(let o of t)for(let e=0;e<o.chunk.length;e++){let t=r.get(o.chunk[e]);null==t||(n?n.mapPos(t):t)!=o.chunkPos[e]||(null===n||void 0===n?void 0:n.touchesRange(t,t+o.chunk[e].length))||i.add(o.chunk[e])}return i}class nm{constructor(e,t,n,r=0){this.layer=e,this.skip=t,this.minPoint=n,this.rank=r}get startSide(){return this.value?this.value.startSide:0}get endSide(){return this.value?this.value.endSide:0}goto(e,t=-1e9){return this.chunkIndex=this.rangeIndex=0,this.gotoInner(e,t,!1),this}gotoInner(e,t,n){while(this.chunkIndex<this.layer.chunk.length){let t=this.layer.chunk[this.chunkIndex];if(!(this.skip&&this.skip.has(t)||this.layer.chunkEnd(this.chunkIndex)<e||t.maxPoint<this.minPoint))break;this.chunkIndex++,n=!1}if(this.chunkIndex<this.layer.chunk.length){let r=this.layer.chunk[this.chunkIndex].findIndex(e-this.layer.chunkPos[this.chunkIndex],t,!0);(!n||this.rangeIndex<r)&&this.setRangeIndex(r)}this.next()}forward(e,t){(this.to-e||this.endSide-t)<0&&this.gotoInner(e,t,!0)}next(){for(;;){if(this.chunkIndex==this.layer.chunk.length){this.from=this.to=1e9,this.value=null;break}{let e=this.layer.chunkPos[this.chunkIndex],t=this.layer.chunk[this.chunkIndex],n=e+t.from[this.rangeIndex];if(this.from=n,this.to=e+t.to[this.rangeIndex],this.value=t.value[this.rangeIndex],this.setRangeIndex(this.rangeIndex+1),this.minPoint<0||this.value.point&&this.to-this.from>=this.minPoint)break}}}setRangeIndex(e){if(e==this.layer.chunk[this.chunkIndex].value.length){if(this.chunkIndex++,this.skip)while(this.chunkIndex<this.layer.chunk.length&&this.skip.has(this.layer.chunk[this.chunkIndex]))this.chunkIndex++;this.rangeIndex=0}else this.rangeIndex=e}nextChunk(){this.chunkIndex++,this.rangeIndex=0,this.next()}compare(e){return this.from-e.from||this.startSide-e.startSide||this.rank-e.rank||this.to-e.to||this.endSide-e.endSide}}class rm{constructor(e){this.heap=e}static from(e,t=null,n=-1){let r=[];for(let i=0;i<e.length;i++)for(let o=e[i];!o.isEmpty;o=o.nextLayer)o.maxPoint>=n&&r.push(new nm(o,t,n,i));return 1==r.length?r[0]:new rm(r)}get startSide(){return this.value?this.value.startSide:0}goto(e,t=-1e9){for(let n of this.heap)n.goto(e,t);for(let n=this.heap.length>>1;n>=0;n--)im(this.heap,n);return this.next(),this}forward(e,t){for(let n of this.heap)n.forward(e,t);for(let n=this.heap.length>>1;n>=0;n--)im(this.heap,n);(this.to-e||this.value.endSide-t)<0&&this.next()}next(){if(0==this.heap.length)this.from=this.to=1e9,this.value=null,this.rank=-1;else{let e=this.heap[0];this.from=e.from,this.to=e.to,this.value=e.value,this.rank=e.rank,e.value&&e.next(),im(this.heap,0)}}}function im(e,t){for(let n=e[t];;){let r=1+(t<<1);if(r>=e.length)break;let i=e[r];if(r+1<e.length&&i.compare(e[r+1])>=0&&(i=e[r+1],r++),n.compare(i)<0)break;e[r]=n,e[t]=i,t=r}}class om{constructor(e,t,n){this.minPoint=n,this.active=[],this.activeTo=[],this.activeRank=[],this.minActive=-1,this.point=null,this.pointFrom=0,this.pointRank=0,this.to=-1e9,this.endSide=0,this.openStart=-1,this.cursor=rm.from(e,t,n)}goto(e,t=-1e9){return this.cursor.goto(e,t),this.active.length=this.activeTo.length=this.activeRank.length=0,this.minActive=-1,this.to=e,this.endSide=t,this.openStart=-1,this.next(),this}forward(e,t){while(this.minActive>-1&&(this.activeTo[this.minActive]-e||this.active[this.minActive].endSide-t)<0)this.removeActive(this.minActive);this.cursor.forward(e,t)}removeActive(e){lm(this.active,e),lm(this.activeTo,e),lm(this.activeRank,e),this.minActive=um(this.active,this.activeTo)}addActive(e){let t=0,{value:n,to:r,rank:i}=this.cursor;while(t<this.activeRank.length&&(i-this.activeRank[t]||r-this.activeTo[t])>0)t++;cm(this.active,t,n),cm(this.activeTo,t,r),cm(this.activeRank,t,i),e&&cm(e,t,this.cursor.from),this.minActive=um(this.active,this.activeTo)}next(){let e=this.to,t=this.point;this.point=null;let n=this.openStart<0?[]:null;for(;;){let r=this.minActive;if(r>-1&&(this.activeTo[r]-this.cursor.from||this.active[r].endSide-this.cursor.startSide)<0){if(this.activeTo[r]>e){this.to=this.activeTo[r],this.endSide=this.active[r].endSide;break}this.removeActive(r),n&&lm(n,r)}else{if(!this.cursor.value){this.to=this.endSide=1e9;break}if(this.cursor.from>e){this.to=this.cursor.from,this.endSide=this.cursor.startSide;break}{let e=this.cursor.value;if(e.point){if(!(t&&this.cursor.to==this.to&&this.cursor.from<this.cursor.to)){this.point=e,this.pointFrom=this.cursor.from,this.pointRank=this.cursor.rank,this.to=this.cursor.to,this.endSide=e.endSide,this.cursor.next(),this.forward(this.to,this.endSide);break}this.cursor.next()}else this.addActive(n),this.cursor.next()}}}if(n){this.openStart=0;for(let t=n.length-1;t>=0&&n[t]<e;t--)this.openStart++}}activeForPoint(e){if(!this.active.length)return this.active;let t=[];for(let n=this.active.length-1;n>=0;n--){if(this.activeRank[n]<this.pointRank)break;(this.activeTo[n]>e||this.activeTo[n]==e&&this.active[n].endSide>=this.point.endSide)&&t.push(this.active[n])}return t.reverse()}openEnd(e){let t=0;for(let n=this.activeTo.length-1;n>=0&&this.activeTo[n]>e;n--)t++;return t}}function sm(e,t,n,r,i,o){e.goto(t),n.goto(r);let s=r+i,a=r,l=r-t;for(;;){let t=e.to+l-n.to||e.endSide-n.endSide,r=t<0?e.to+l:n.to,i=Math.min(r,s);if(e.point||n.point?e.point&&n.point&&(e.point==n.point||e.point.eq(n.point))&&am(e.activeForPoint(e.to),n.activeForPoint(n.to))||o.comparePoint(a,i,e.point,n.point):i>a&&!am(e.active,n.active)&&o.compareRange(a,i,e.active,n.active),r>s)break;a=r,t<=0&&e.next(),t>=0&&n.next()}}function am(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(e[n]!=t[n]&&!e[n].eq(t[n]))return!1;return!0}function lm(e,t){for(let n=t,r=e.length-1;n<r;n++)e[n]=e[n+1];e.pop()}function cm(e,t,n){for(let r=e.length-1;r>=t;r--)e[r+1]=e[r];e[t]=n}function um(e,t){let n=-1,r=1e9;for(let i=0;i<t.length;i++)(t[i]-r||e[i].endSide-e[n].endSide)<0&&(n=i,r=t[i]);return n}function hm(e,t,n=e.length){let r=0;for(let i=0;i<n;)9==e.charCodeAt(i)?(r+=t-r%t,i++):(r++,i=Ip(e,i));return r}function dm(e,t,n,r){for(let i=0,o=0;;){if(o>=t)return i;if(i==e.length)break;o+=9==e.charCodeAt(i)?n-o%n:1,i=Ip(e,i)}return!0===r?-1:e.length}const fm="ͼ",pm="undefined"==typeof Symbol?"__"+fm:Symbol.for(fm),gm="undefined"==typeof Symbol?"__styleSet"+Math.floor(1e8*Math.random()):Symbol("styleSet"),mm="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:{};class vm{constructor(e,t){this.rules=[];let{finish:n}=t||{};function r(e){return/^@/.test(e)?[e]:e.split(/,\s*/)}function i(e,t,o,s){let a=[],l=/^@(\w+)\b/.exec(e[0]),c=l&&"keyframes"==l[1];if(l&&null==t)return o.push(e[0]+";");for(let n in t){let s=t[n];if(/&/.test(n))i(n.split(/,\s*/).map((t=>e.map((e=>t.replace(/&/,e))))).reduce(((e,t)=>e.concat(t))),s,o);else if(s&&"object"==typeof s){if(!l)throw new RangeError("The value of a property ("+n+") should be a primitive value.");i(r(n),s,a,c)}else null!=s&&a.push(n.replace(/_.*/,"").replace(/[A-Z]/g,(e=>"-"+e.toLowerCase()))+": "+s+";")}(a.length||c)&&o.push((!n||l||s?e:e.map(n)).join(", ")+" {"+a.join(" ")+"}")}for(let o in e)i(r(o),e[o],this.rules)}getRules(){return this.rules.join("\n")}static newName(){let e=mm[pm]||1;return mm[pm]=e+1,fm+e.toString(36)}static mount(e,t,n){let r=e[gm],i=n&&n.nonce;r?i&&r.setNonce(i):r=new bm(e,i),r.mount(Array.isArray(t)?t:[t],e)}}let ym=new Map;class bm{constructor(e,t){let n=e.ownerDocument||e,r=n.defaultView;if(!e.head&&e.adoptedStyleSheets&&r.CSSStyleSheet){let t=ym.get(n);if(t)return e[gm]=t;this.sheet=new r.CSSStyleSheet,ym.set(n,this)}else this.styleTag=n.createElement("style"),t&&this.styleTag.setAttribute("nonce",t);this.modules=[],e[gm]=this}mount(e,t){let n=this.sheet,r=0,i=0;for(let o=0;o<e.length;o++){let t=e[o],s=this.modules.indexOf(t);if(s<i&&s>-1&&(this.modules.splice(s,1),i--,s=-1),-1==s){if(this.modules.splice(i++,0,t),n)for(let e=0;e<t.rules.length;e++)n.insertRule(t.rules[e],r++)}else{while(i<s)r+=this.modules[i++].rules.length;r+=t.rules.length,i++}}if(n)t.adoptedStyleSheets.indexOf(this.sheet)<0&&(t.adoptedStyleSheets=[this.sheet,...t.adoptedStyleSheets]);else{let e="";for(let t=0;t<this.modules.length;t++)e+=this.modules[t].getRules()+"\n";this.styleTag.textContent=e;let n=t.head||t;this.styleTag.parentNode!=n&&n.insertBefore(this.styleTag,n.firstChild)}}setNonce(e){this.styleTag&&this.styleTag.getAttribute("nonce")!=e&&this.styleTag.setAttribute("nonce",e)}}for(var wm={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"},xm={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:":",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"'},km="undefined"!=typeof navigator&&/Mac/.test(navigator.platform),_m="undefined"!=typeof navigator&&/MSIE \d|Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent),Om=0;Om<10;Om++)wm[48+Om]=wm[96+Om]=String(Om);for(Om=1;Om<=24;Om++)wm[Om+111]="F"+Om;for(Om=65;Om<=90;Om++)wm[Om]=String.fromCharCode(Om+32),xm[Om]=String.fromCharCode(Om);for(var Sm in wm)xm.hasOwnProperty(Sm)||(xm[Sm]=wm[Sm]);function Em(e){var t=km&&e.metaKey&&e.shiftKey&&!e.ctrlKey&&!e.altKey||_m&&e.shiftKey&&e.key&&1==e.key.length||"Unidentified"==e.key,n=!t&&e.key||(e.shiftKey?xm:wm)[e.keyCode]||e.key||"Unidentified";return"Esc"==n&&(n="Escape"),"Del"==n&&(n="Delete"),"Left"==n&&(n="ArrowLeft"),"Up"==n&&(n="ArrowUp"),"Right"==n&&(n="ArrowRight"),"Down"==n&&(n="ArrowDown"),n}function Cm(e){let t;return t=11==e.nodeType?e.getSelection?e:e.ownerDocument:e,t.getSelection()}function Tm(e,t){return!!t&&(e==t||e.contains(1!=t.nodeType?t.parentNode:t))}function Am(e,t){if(!t.anchorNode)return!1;try{return Tm(e,t.anchorNode)}catch(Re){return!1}}function Dm(e){return 3==e.nodeType?Wm(e,0,e.nodeValue.length).getClientRects():1==e.nodeType?e.getClientRects():[]}function Mm(e,t,n,r){return!!n&&(Pm(e,t,n,r,-1)||Pm(e,t,n,r,1))}function Fm(e){for(var t=0;;t++)if(e=e.previousSibling,!e)return t}function Rm(e){return 1==e.nodeType&&/^(DIV|P|LI|UL|OL|BLOCKQUOTE|DD|DT|H\d|SECTION|PRE)$/.test(e.nodeName)}function Pm(e,t,n,r,i){for(;;){if(e==n&&t==r)return!0;if(t==(i<0?0:Im(e))){if("DIV"==e.nodeName)return!1;let n=e.parentNode;if(!n||1!=n.nodeType)return!1;t=Fm(e)+(i<0?0:1),e=n}else{if(1!=e.nodeType)return!1;if(e=e.childNodes[t+(i<0?-1:0)],1==e.nodeType&&"false"==e.contentEditable)return!1;t=i<0?Im(e):0}}}function Im(e){return 3==e.nodeType?e.nodeValue.length:e.childNodes.length}function Lm(e,t){let n=t?e.left:e.right;return{left:n,right:n,top:e.top,bottom:e.bottom}}function $m(e){let t=e.visualViewport;return t?{left:0,right:t.width,top:0,bottom:t.height}:{left:0,right:e.innerWidth,top:0,bottom:e.innerHeight}}function Nm(e,t){let n=t.width/e.offsetWidth,r=t.height/e.offsetHeight;return(n>.995&&n<1.005||!isFinite(n)||Math.abs(t.width-e.offsetWidth)<1)&&(n=1),(r>.995&&r<1.005||!isFinite(r)||Math.abs(t.height-e.offsetHeight)<1)&&(r=1),{scaleX:n,scaleY:r}}function jm(e,t,n,r,i,o,s,a){let l=e.ownerDocument,c=l.defaultView||window;for(let u=e,h=!1;u&&!h;)if(1==u.nodeType){let e,d=u==l.body,f=1,p=1;if(d)e=$m(c);else{if(/^(fixed|sticky)$/.test(getComputedStyle(u).position)&&(h=!0),u.scrollHeight<=u.clientHeight&&u.scrollWidth<=u.clientWidth){u=u.assignedSlot||u.parentNode;continue}let t=u.getBoundingClientRect();({scaleX:f,scaleY:p}=Nm(u,t)),e={left:t.left,right:t.left+u.clientWidth*f,top:t.top,bottom:t.top+u.clientHeight*p}}let g=0,m=0;if("nearest"==i)t.top<e.top?(m=-(e.top-t.top+s),n>0&&t.bottom>e.bottom+m&&(m=t.bottom-e.bottom+m+s)):t.bottom>e.bottom&&(m=t.bottom-e.bottom+s,n<0&&t.top-m<e.top&&(m=-(e.top+m-t.top+s)));else{let r=t.bottom-t.top,o=e.bottom-e.top,a="center"==i&&r<=o?t.top+r/2-o/2:"start"==i||"center"==i&&n<0?t.top-s:t.bottom-o+s;m=a-e.top}if("nearest"==r)t.left<e.left?(g=-(e.left-t.left+o),n>0&&t.right>e.right+g&&(g=t.right-e.right+g+o)):t.right>e.right&&(g=t.right-e.right+o,n<0&&t.left<e.left+g&&(g=-(e.left+g-t.left+o)));else{let n="center"==r?t.left+(t.right-t.left)/2-(e.right-e.left)/2:"start"==r==a?t.left-o:t.right-(e.right-e.left)+o;g=n-e.left}if(g||m)if(d)c.scrollBy(g,m);else{let e=0,n=0;if(m){let e=u.scrollTop;u.scrollTop+=m/p,n=(u.scrollTop-e)*p}if(g){let t=u.scrollLeft;u.scrollLeft+=g/f,e=(u.scrollLeft-t)*f}t={left:t.left-e,top:t.top-n,right:t.right-e,bottom:t.bottom-n},e&&Math.abs(e-g)<1&&(r="nearest"),n&&Math.abs(n-m)<1&&(i="nearest")}if(d)break;u=u.assignedSlot||u.parentNode}else{if(11!=u.nodeType)break;u=u.host}}function Bm(e){let t,n,r=e.ownerDocument;for(let i=e.parentNode;i;){if(i==r.body||t&&n)break;if(1==i.nodeType)!n&&i.scrollHeight>i.clientHeight&&(n=i),!t&&i.scrollWidth>i.clientWidth&&(t=i),i=i.assignedSlot||i.parentNode;else{if(11!=i.nodeType)break;i=i.host}}return{x:t,y:n}}class Vm{constructor(){this.anchorNode=null,this.anchorOffset=0,this.focusNode=null,this.focusOffset=0}eq(e){return this.anchorNode==e.anchorNode&&this.anchorOffset==e.anchorOffset&&this.focusNode==e.focusNode&&this.focusOffset==e.focusOffset}setRange(e){let{anchorNode:t,focusNode:n}=e;this.set(t,Math.min(e.anchorOffset,t?Im(t):0),n,Math.min(e.focusOffset,n?Im(n):0))}set(e,t,n,r){this.anchorNode=e,this.anchorOffset=t,this.focusNode=n,this.focusOffset=r}}let qm,zm=null;function Hm(e){if(e.setActive)return e.setActive();if(zm)return e.focus(zm);let t=[];for(let n=e;n;n=n.parentNode)if(t.push(n,n.scrollTop,n.scrollLeft),n==n.ownerDocument)break;if(e.focus(null==zm?{get preventScroll(){return zm={preventScroll:!0},!0}}:void 0),!zm){zm=!1;for(let e=0;e<t.length;){let n=t[e++],r=t[e++],i=t[e++];n.scrollTop!=r&&(n.scrollTop=r),n.scrollLeft!=i&&(n.scrollLeft=i)}}}function Wm(e,t,n=t){let r=qm||(qm=document.createRange());return r.setEnd(e,n),r.setStart(e,t),r}function Qm(e,t,n,r){let i={key:t,code:t,keyCode:n,which:n,cancelable:!0};r&&({altKey:i.altKey,ctrlKey:i.ctrlKey,shiftKey:i.shiftKey,metaKey:i.metaKey}=r);let o=new KeyboardEvent("keydown",i);o.synthetic=!0,e.dispatchEvent(o);let s=new KeyboardEvent("keyup",i);return s.synthetic=!0,e.dispatchEvent(s),o.defaultPrevented||s.defaultPrevented}function Um(e){while(e){if(e&&(9==e.nodeType||11==e.nodeType&&e.host))return e;e=e.assignedSlot||e.parentNode}return null}function Ym(e){while(e.attributes.length)e.removeAttributeNode(e.attributes[0])}function Xm(e,t){let n=t.focusNode,r=t.focusOffset;if(!n||t.anchorNode!=n||t.anchorOffset!=r)return!1;for(r=Math.min(r,Im(n));;)if(r){if(1!=n.nodeType)return!1;let e=n.childNodes[r-1];"false"==e.contentEditable?r--:(n=e,r=Im(n))}else{if(n==e)return!0;r=Fm(n),n=n.parentNode}}function Zm(e){return e.scrollTop>Math.max(1,e.scrollHeight-e.clientHeight-4)}function Gm(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r>0)return{node:n,offset:r};if(1==n.nodeType&&r>0){if("false"==n.contentEditable)return null;n=n.childNodes[r-1],r=Im(n)}else{if(!n.parentNode||Rm(n))return null;r=Fm(n),n=n.parentNode}}}function Km(e,t){for(let n=e,r=t;;){if(3==n.nodeType&&r<n.nodeValue.length)return{node:n,offset:r};if(1==n.nodeType&&r<n.childNodes.length){if("false"==n.contentEditable)return null;n=n.childNodes[r],r=0}else{if(!n.parentNode||Rm(n))return null;r=Fm(n)+1,n=n.parentNode}}}class Jm{constructor(e,t,n=!0){this.node=e,this.offset=t,this.precise=n}static before(e,t){return new Jm(e.parentNode,Fm(e),t)}static after(e,t){return new Jm(e.parentNode,Fm(e)+1,t)}}const ev=[];class tv{constructor(){this.parent=null,this.dom=null,this.flags=2}get overrideDOMText(){return null}get posAtStart(){return this.parent?this.parent.posBefore(this):0}get posAtEnd(){return this.posAtStart+this.length}posBefore(e){let t=this.posAtStart;for(let n of this.children){if(n==e)return t;t+=n.length+n.breakAfter}throw new RangeError("Invalid child in posBefore")}posAfter(e){return this.posBefore(e)+e.length}sync(e,t){if(2&this.flags){let n,r=this.dom,i=null;for(let o of this.children){if(7&o.flags){if(!o.dom&&(n=i?i.nextSibling:r.firstChild)){let e=tv.get(n);(!e||!e.parent&&e.canReuseDOM(o))&&o.reuseDOM(n)}o.sync(e,t),o.flags&=-8}if(n=i?i.nextSibling:r.firstChild,t&&!t.written&&t.node==r&&n!=o.dom&&(t.written=!0),o.dom.parentNode==r)while(n&&n!=o.dom)n=nv(n);else r.insertBefore(o.dom,n);i=o.dom}n=i?i.nextSibling:r.firstChild,n&&t&&t.node==r&&(t.written=!0);while(n)n=nv(n)}else if(1&this.flags)for(let n of this.children)7&n.flags&&(n.sync(e,t),n.flags&=-8)}reuseDOM(e){}localPosFromDOM(e,t){let n;if(e==this.dom)n=this.dom.childNodes[t];else{let r=0==Im(e)?0:0==t?-1:1;for(;;){let t=e.parentNode;if(t==this.dom)break;0==r&&t.firstChild!=t.lastChild&&(r=e==t.firstChild?-1:1),e=t}n=r<0?e:e.nextSibling}if(n==this.dom.firstChild)return 0;while(n&&!tv.get(n))n=n.nextSibling;if(!n)return this.length;for(let r=0,i=0;;r++){let e=this.children[r];if(e.dom==n)return i;i+=e.length+e.breakAfter}}domBoundsAround(e,t,n=0){let r=-1,i=-1,o=-1,s=-1;for(let a=0,l=n,c=n;a<this.children.length;a++){let n=this.children[a],u=l+n.length;if(l<e&&u>t)return n.domBoundsAround(e,t,l);if(u>=e&&-1==r&&(r=a,i=l),l>t&&n.dom.parentNode==this.dom){o=a,s=c;break}c=u,l=u+n.breakAfter}return{from:i,to:s<0?n+this.length:s,startDOM:(r?this.children[r-1].dom.nextSibling:null)||this.dom.firstChild,endDOM:o<this.children.length&&o>=0?this.children[o].dom:null}}markDirty(e=!1){this.flags|=2,this.markParentsDirty(e)}markParentsDirty(e){for(let t=this.parent;t;t=t.parent){if(e&&(t.flags|=2),1&t.flags)return;t.flags|=1,e=!1}}setParent(e){this.parent!=e&&(this.parent=e,7&this.flags&&this.markParentsDirty(!0))}setDOM(e){this.dom!=e&&(this.dom&&(this.dom.cmView=null),this.dom=e,e.cmView=this)}get rootView(){for(let e=this;;){let t=e.parent;if(!t)return e;e=t}}replaceChildren(e,t,n=ev){this.markDirty();for(let r=e;r<t;r++){let e=this.children[r];e.parent==this&&n.indexOf(e)<0&&e.destroy()}n.length<250?this.children.splice(e,t-e,...n):this.children=[].concat(this.children.slice(0,e),n,this.children.slice(t));for(let r=0;r<n.length;r++)n[r].setParent(this)}ignoreMutation(e){return!1}ignoreEvent(e){return!1}childCursor(e=this.length){return new rv(this.children,e,this.children.length)}childPos(e,t=1){return this.childCursor().findPos(e,t)}toString(){let e=this.constructor.name.replace("View","");return e+(this.children.length?"("+this.children.join()+")":this.length?"["+("Text"==e?this.text:this.length)+"]":"")+(this.breakAfter?"#":"")}static get(e){return e.cmView}get isEditable(){return!0}get isWidget(){return!1}get isHidden(){return!1}merge(e,t,n,r,i,o){return!1}become(e){return!1}canReuseDOM(e){return e.constructor==this.constructor&&!(8&(this.flags|e.flags))}getSide(){return 0}destroy(){for(let e of this.children)e.parent==this&&e.destroy();this.parent=null}}function nv(e){let t=e.nextSibling;return e.parentNode.removeChild(e),t}tv.prototype.breakAfter=0;class rv{constructor(e,t,n){this.children=e,this.pos=t,this.i=n,this.off=0}findPos(e,t=1){for(;;){if(e>this.pos||e==this.pos&&(t>0||0==this.i||this.children[this.i-1].breakAfter))return this.off=e-this.pos,this;let n=this.children[--this.i];this.pos-=n.length+n.breakAfter}}}function iv(e,t,n,r,i,o,s,a,l){let{children:c}=e,u=c.length?c[t]:null,h=o.length?o[o.length-1]:null,d=h?h.breakAfter:s;if(!(t==r&&u&&!s&&!d&&o.length<2&&u.merge(n,i,o.length?h:null,0==n,a,l))){if(r<c.length){let e=c[r];e&&(i<e.length||e.breakAfter&&(null===h||void 0===h?void 0:h.breakAfter))?(t==r&&(e=e.split(i),i=0),!d&&h&&e.merge(0,i,h,!0,0,l)?o[o.length-1]=e:((i||e.children.length&&!e.children[0].length)&&e.merge(0,i,null,!1,0,l),o.push(e))):(null===e||void 0===e?void 0:e.breakAfter)&&(h?h.breakAfter=1:s=1),r++}u&&(u.breakAfter=s,n>0&&(!s&&o.length&&u.merge(n,u.length,o[0],!1,a,0)?u.breakAfter=o.shift().breakAfter:(n<u.length||u.children.length&&0==u.children[u.children.length-1].length)&&u.merge(n,u.length,null,!1,a,0),t++));while(t<r&&o.length)if(c[r-1].become(o[o.length-1]))r--,o.pop(),l=o.length?0:a;else{if(!c[t].become(o[0]))break;t++,o.shift(),a=o.length?0:l}!o.length&&t&&r<c.length&&!c[t-1].breakAfter&&c[r].merge(0,0,c[t-1],!1,a,l)&&t--,(t<r||o.length)&&e.replaceChildren(t,r,o)}}function ov(e,t,n,r,i,o){let s=e.childCursor(),{i:a,off:l}=s.findPos(n,1),{i:c,off:u}=s.findPos(t,-1),h=t-n;for(let d of r)h+=d.length;e.length+=h,iv(e,c,u,a,l,r,0,i,o)}let sv="undefined"!=typeof navigator?navigator:{userAgent:"",vendor:"",platform:""},av="undefined"!=typeof document?document:{documentElement:{style:{}}};const lv=/Edge\/(\d+)/.exec(sv.userAgent),cv=/MSIE \d/.test(sv.userAgent),uv=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(sv.userAgent),hv=!!(cv||uv||lv),dv=!hv&&/gecko\/(\d+)/i.test(sv.userAgent),fv=!hv&&/Chrome\/(\d+)/.exec(sv.userAgent),pv="webkitFontSmoothing"in av.documentElement.style,gv=!hv&&/Apple Computer/.test(sv.vendor),mv=gv&&(/Mobile\/\w+/.test(sv.userAgent)||sv.maxTouchPoints>2);var vv={mac:mv||/Mac/.test(sv.platform),windows:/Win/.test(sv.platform),linux:/Linux|X11/.test(sv.platform),ie:hv,ie_version:cv?av.documentMode||6:uv?+uv[1]:lv?+lv[1]:0,gecko:dv,gecko_version:dv?+(/Firefox\/(\d+)/.exec(sv.userAgent)||[0,0])[1]:0,chrome:!!fv,chrome_version:fv?+fv[1]:0,ios:mv,android:/Android\b/.test(sv.userAgent),webkit:pv,safari:gv,webkit_version:pv?+(/\bAppleWebKit\/(\d+)/.exec(sv.userAgent)||[0,0])[1]:0,tabSize:null!=av.documentElement.style.tabSize?"tab-size":"-moz-tab-size"};const yv=256;class bv extends tv{constructor(e){super(),this.text=e}get length(){return this.text.length}createDOM(e){this.setDOM(e||document.createTextNode(this.text))}sync(e,t){this.dom||this.createDOM(),this.dom.nodeValue!=this.text&&(t&&t.node==this.dom&&(t.written=!0),this.dom.nodeValue=this.text)}reuseDOM(e){3==e.nodeType&&this.createDOM(e)}merge(e,t,n){return!(8&this.flags||n&&(!(n instanceof bv)||this.length-(t-e)+n.length>yv||8&n.flags))&&(this.text=this.text.slice(0,e)+(n?n.text:"")+this.text.slice(t),this.markDirty(),!0)}split(e){let t=new bv(this.text.slice(e));return this.text=this.text.slice(0,e),this.markDirty(),t.flags|=8&this.flags,t}localPosFromDOM(e,t){return e==this.dom?t:t?this.text.length:0}domAtPos(e){return new Jm(this.dom,e)}domBoundsAround(e,t,n){return{from:n,to:n+this.length,startDOM:this.dom,endDOM:this.dom.nextSibling}}coordsAt(e,t){return xv(this.dom,e,t)}}class wv extends tv{constructor(e,t=[],n=0){super(),this.mark=e,this.children=t,this.length=n;for(let r of t)r.setParent(this)}setAttrs(e){if(Ym(e),this.mark.class&&(e.className=this.mark.class),this.mark.attrs)for(let t in this.mark.attrs)e.setAttribute(t,this.mark.attrs[t]);return e}canReuseDOM(e){return super.canReuseDOM(e)&&!(8&(this.flags|e.flags))}reuseDOM(e){e.nodeName==this.mark.tagName.toUpperCase()&&(this.setDOM(e),this.flags|=6)}sync(e,t){this.dom?4&this.flags&&this.setAttrs(this.dom):this.setDOM(this.setAttrs(document.createElement(this.mark.tagName))),super.sync(e,t)}merge(e,t,n,r,i,o){return(!n||!(!(n instanceof wv&&n.mark.eq(this.mark))||e&&i<=0||t<this.length&&o<=0))&&(ov(this,e,t,n?n.children.slice():[],i-1,o-1),this.markDirty(),!0)}split(e){let t=[],n=0,r=-1,i=0;for(let s of this.children){let o=n+s.length;o>e&&t.push(n<e?s.split(e-n):s),r<0&&n>=e&&(r=i),n=o,i++}let o=this.length-e;return this.length=e,r>-1&&(this.children.length=r,this.markDirty()),new wv(this.mark,t,o)}domAtPos(e){return Ov(this,e)}coordsAt(e,t){return Ev(this,e,t)}}function xv(e,t,n){let r=e.nodeValue.length;t>r&&(t=r);let i=t,o=t,s=0;0==t&&n<0||t==r&&n>=0?vv.chrome||vv.gecko||(t?(i--,s=1):o<r&&(o++,s=-1)):n<0?i--:o<r&&o++;let a=Wm(e,i,o).getClientRects();if(!a.length)return null;let l=a[(s?s<0:n>=0)?0:a.length-1];return vv.safari&&!s&&0==l.width&&(l=Array.prototype.find.call(a,(e=>e.width))||l),s?Lm(l,s<0):l||null}class kv extends tv{static create(e,t,n){return new kv(e,t,n)}constructor(e,t,n){super(),this.widget=e,this.length=t,this.side=n,this.prevWidget=null}split(e){let t=kv.create(this.widget,this.length-e,this.side);return this.length-=e,t}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}getSide(){return this.side}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof kv&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}become(e){return e instanceof kv&&e.side==this.side&&this.widget.constructor==e.widget.constructor&&(this.widget.compare(e.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get overrideDOMText(){if(0==this.length)return wp.empty;let e=this;while(e.parent)e=e.parent;let{view:t}=e,n=t&&t.state.doc,r=this.posAtStart;return n?n.slice(r,r+this.length):wp.empty}domAtPos(e){return(this.length?0==e:this.side>0)?Jm.before(this.dom):Jm.after(this.dom,e==this.length)}domBoundsAround(){return null}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);if(n)return n;let r=this.dom.getClientRects(),i=null;if(!r.length)return null;let o=this.side?this.side<0:e>0;for(let s=o?r.length-1:0;;s+=o?-1:1)if(i=r[s],e>0?0==s:s==r.length-1||i.top<i.bottom)break;return Lm(i,!o)}get isEditable(){return!1}get isWidget(){return!0}get isHidden(){return this.widget.isHidden}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}}class _v extends tv{constructor(e){super(),this.side=e}get length(){return 0}merge(){return!1}become(e){return e instanceof _v&&e.side==this.side}split(){return new _v(this.side)}sync(){if(!this.dom){let e=document.createElement("img");e.className="cm-widgetBuffer",e.setAttribute("aria-hidden","true"),this.setDOM(e)}}getSide(){return this.side}domAtPos(e){return this.side>0?Jm.before(this.dom):Jm.after(this.dom)}localPosFromDOM(){return 0}domBoundsAround(){return null}coordsAt(e){return this.dom.getBoundingClientRect()}get overrideDOMText(){return wp.empty}get isHidden(){return!0}}function Ov(e,t){let n=e.dom,{children:r}=e,i=0;for(let o=0;i<r.length;i++){let e=r[i],s=o+e.length;if(!(s==o&&e.getSide()<=0)){if(t>o&&t<s&&e.dom.parentNode==n)return e.domAtPos(t-o);if(t<=o)break;o=s}}for(let o=i;o>0;o--){let e=r[o-1];if(e.dom.parentNode==n)return e.domAtPos(e.length)}for(let o=i;o<r.length;o++){let e=r[o];if(e.dom.parentNode==n)return e.domAtPos(0)}return new Jm(n,0)}function Sv(e,t,n){let r,{children:i}=e;n>0&&t instanceof wv&&i.length&&(r=i[i.length-1])instanceof wv&&r.mark.eq(t.mark)?Sv(r,t.children[0],n-1):(i.push(t),t.setParent(e)),e.length+=t.length}function Ev(e,t,n){let r=null,i=-1,o=null,s=-1;function a(e,t){for(let l=0,c=0;l<e.children.length&&c<=t;l++){let u=e.children[l],h=c+u.length;h>=t&&(u.children.length?a(u,t-c):(!o||o.isHidden&&n>0)&&(h>t||c==h&&u.getSide()>0)?(o=u,s=t-c):(c<t||c==h&&u.getSide()<0&&!u.isHidden)&&(r=u,i=t-c)),c=h}}a(e,t);let l=(n<0?r:o)||r||o;return l?l.coordsAt(Math.max(0,l==r?i:s),n):Cv(e)}function Cv(e){let t=e.dom.lastChild;if(!t)return e.dom.getBoundingClientRect();let n=Dm(t);return n[n.length-1]||null}function Tv(e,t){for(let n in e)"class"==n&&t.class?t.class+=" "+e.class:"style"==n&&t.style?t.style+=";"+e.style:t[n]=e[n];return t}bv.prototype.children=kv.prototype.children=_v.prototype.children=ev;const Av=Object.create(null);function Dv(e,t,n){if(e==t)return!0;e||(e=Av),t||(t=Av);let r=Object.keys(e),i=Object.keys(t);if(r.length-(n&&r.indexOf(n)>-1?1:0)!=i.length-(n&&i.indexOf(n)>-1?1:0))return!1;for(let o of r)if(o!=n&&(-1==i.indexOf(o)||e[o]!==t[o]))return!1;return!0}function Mv(e,t,n){let r=!1;if(t)for(let i in t)n&&i in n||(r=!0,"style"==i?e.style.cssText="":e.removeAttribute(i));if(n)for(let i in n)t&&t[i]==n[i]||(r=!0,"style"==i?e.style.cssText=n[i]:e.setAttribute(i,n[i]));return r}function Fv(e){let t=Object.create(null);for(let n=0;n<e.attributes.length;n++){let r=e.attributes[n];t[r.name]=r.value}return t}class Rv{eq(e){return!1}updateDOM(e,t){return!1}compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}get estimatedHeight(){return-1}get lineBreaks(){return 0}ignoreEvent(e){return!0}coordsAt(e,t,n){return null}get isHidden(){return!1}get editable(){return!1}destroy(e){}}var Pv=function(e){return e[e["Text"]=0]="Text",e[e["WidgetBefore"]=1]="WidgetBefore",e[e["WidgetAfter"]=2]="WidgetAfter",e[e["WidgetRange"]=3]="WidgetRange",e}(Pv||(Pv={}));class Iv extends Yg{constructor(e,t,n,r){super(),this.startSide=e,this.endSide=t,this.widget=n,this.spec=r}get heightRelevant(){return!1}static mark(e){return new Lv(e)}static widget(e){let t=Math.max(-1e4,Math.min(1e4,e.side||0)),n=!!e.block;return t+=n&&!e.inlineOrder?t>0?3e8:-4e8:t>0?1e8:-1e8,new Nv(e,t,t,n,e.widget||null,!1)}static replace(e){let t,n,r=!!e.block;if(e.isBlockGap)t=-5e8,n=4e8;else{let{start:i,end:o}=jv(e,r);t=(i?r?-3e8:-1:5e8)-1,n=1+(o?r?2e8:1:-6e8)}return new Nv(e,t,n,r,e.widget||null,!0)}static line(e){return new $v(e)}static set(e,t=!1){return Kg.of(e,t)}hasHeight(){return!!this.widget&&this.widget.estimatedHeight>-1}}Iv.none=Kg.empty;class Lv extends Iv{constructor(e){let{start:t,end:n}=jv(e);super(t?-1:5e8,n?1:-6e8,null,e),this.tagName=e.tagName||"span",this.class=e.class||"",this.attrs=e.attributes||null}eq(e){var t,n;return this==e||e instanceof Lv&&this.tagName==e.tagName&&(this.class||(null===(t=this.attrs)||void 0===t?void 0:t.class))==(e.class||(null===(n=e.attrs)||void 0===n?void 0:n.class))&&Dv(this.attrs,e.attrs,"class")}range(e,t=e){if(e>=t)throw new RangeError("Mark decorations may not be empty");return super.range(e,t)}}Lv.prototype.point=!1;class $v extends Iv{constructor(e){super(-2e8,-2e8,null,e)}eq(e){return e instanceof $v&&this.spec.class==e.spec.class&&Dv(this.spec.attributes,e.spec.attributes)}range(e,t=e){if(t!=e)throw new RangeError("Line decoration ranges must be zero-length");return super.range(e,t)}}$v.prototype.mapMode=Hp.TrackBefore,$v.prototype.point=!0;class Nv extends Iv{constructor(e,t,n,r,i,o){super(t,n,i,e),this.block=r,this.isReplace=o,this.mapMode=r?t<=0?Hp.TrackBefore:Hp.TrackAfter:Hp.TrackDel}get type(){return this.startSide!=this.endSide?Pv.WidgetRange:this.startSide<=0?Pv.WidgetBefore:Pv.WidgetAfter}get heightRelevant(){return this.block||!!this.widget&&(this.widget.estimatedHeight>=5||this.widget.lineBreaks>0)}eq(e){return e instanceof Nv&&Bv(this.widget,e.widget)&&this.block==e.block&&this.startSide==e.startSide&&this.endSide==e.endSide}range(e,t=e){if(this.isReplace&&(e>t||e==t&&this.startSide>0&&this.endSide<=0))throw new RangeError("Invalid range for replacement decoration");if(!this.isReplace&&t!=e)throw new RangeError("Widget decorations can only have zero-length ranges");return super.range(e,t)}}function jv(e,t=!1){let{inclusiveStart:n,inclusiveEnd:r}=e;return null==n&&(n=e.inclusive),null==r&&(r=e.inclusive),{start:null!==n&&void 0!==n?n:t,end:null!==r&&void 0!==r?r:t}}function Bv(e,t){return e==t||!!(e&&t&&e.compare(t))}function Vv(e,t,n,r=0){let i=n.length-1;i>=0&&n[i]+r>=e?n[i]=Math.max(n[i],t):n.push(e,t)}Nv.prototype.point=!0;class qv extends tv{constructor(){super(...arguments),this.children=[],this.length=0,this.prevAttrs=void 0,this.attrs=null,this.breakAfter=0}merge(e,t,n,r,i,o){if(n){if(!(n instanceof qv))return!1;this.dom||n.transferDOM(this)}return r&&this.setDeco(n?n.attrs:null),ov(this,e,t,n?n.children.slice():[],i,o),!0}split(e){let t=new qv;if(t.breakAfter=this.breakAfter,0==this.length)return t;let{i:n,off:r}=this.childPos(e);r&&(t.append(this.children[n].split(r),0),this.children[n].merge(r,this.children[n].length,null,!1,0,0),n++);for(let i=n;i<this.children.length;i++)t.append(this.children[i],0);while(n>0&&0==this.children[n-1].length)this.children[--n].destroy();return this.children.length=n,this.markDirty(),this.length=e,t}transferDOM(e){this.dom&&(this.markDirty(),e.setDOM(this.dom),e.prevAttrs=void 0===this.prevAttrs?this.attrs:this.prevAttrs,this.prevAttrs=void 0,this.dom=null)}setDeco(e){Dv(this.attrs,e)||(this.dom&&(this.prevAttrs=this.attrs,this.markDirty()),this.attrs=e)}append(e,t){Sv(this,e,t)}addLineDeco(e){let t=e.spec.attributes,n=e.spec.class;t&&(this.attrs=Tv(t,this.attrs||{})),n&&(this.attrs=Tv({class:n},this.attrs||{}))}domAtPos(e){return Ov(this,e)}reuseDOM(e){"DIV"==e.nodeName&&(this.setDOM(e),this.flags|=6)}sync(e,t){var n;this.dom?4&this.flags&&(Ym(this.dom),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0):(this.setDOM(document.createElement("div")),this.dom.className="cm-line",this.prevAttrs=this.attrs?null:void 0),void 0!==this.prevAttrs&&(Mv(this.dom,this.prevAttrs,this.attrs),this.dom.classList.add("cm-line"),this.prevAttrs=void 0),super.sync(e,t);let r=this.dom.lastChild;while(r&&tv.get(r)instanceof wv)r=r.lastChild;if(!r||!this.length||"BR"!=r.nodeName&&0==(null===(n=tv.get(r))||void 0===n?void 0:n.isEditable)&&(!vv.ios||!this.children.some((e=>e instanceof bv)))){let e=document.createElement("BR");e.cmIgnore=!0,this.dom.appendChild(e)}}measureTextSize(){if(0==this.children.length||this.length>20)return null;let e,t=0;for(let n of this.children){if(!(n instanceof bv)||/[^ -~]/.test(n.text))return null;let r=Dm(n.dom);if(1!=r.length)return null;t+=r[0].width,e=r[0].height}return t?{lineHeight:this.dom.getBoundingClientRect().height,charWidth:t/this.length,textHeight:e}:null}coordsAt(e,t){let n=Ev(this,e,t);if(!this.children.length&&n&&this.parent){let{heightOracle:e}=this.parent.view.viewState,t=n.bottom-n.top;if(Math.abs(t-e.lineHeight)<2&&e.textHeight<t){let r=(t-e.textHeight)/2;return{top:n.top+r,bottom:n.bottom-r,left:n.left,right:n.left}}}return n}become(e){return e instanceof qv&&0==this.children.length&&0==e.children.length&&Dv(this.attrs,e.attrs)&&this.breakAfter==e.breakAfter}covers(){return!0}static find(e,t){for(let n=0,r=0;n<e.children.length;n++){let i=e.children[n],o=r+i.length;if(o>=t){if(i instanceof qv)return i;if(o>t)break}r=o+i.breakAfter}return null}}class zv extends tv{constructor(e,t,n){super(),this.widget=e,this.length=t,this.deco=n,this.breakAfter=0,this.prevWidget=null}merge(e,t,n,r,i,o){return!(n&&(!(n instanceof zv&&this.widget.compare(n.widget))||e>0&&i<=0||t<this.length&&o<=0))&&(this.length=e+(n?n.length:0)+(this.length-t),!0)}domAtPos(e){return 0==e?Jm.before(this.dom):Jm.after(this.dom,e==this.length)}split(e){let t=this.length-e;this.length=e;let n=new zv(this.widget,t,this.deco);return n.breakAfter=this.breakAfter,n}get children(){return ev}sync(e){this.dom&&this.widget.updateDOM(this.dom,e)||(this.dom&&this.prevWidget&&this.prevWidget.destroy(this.dom),this.prevWidget=null,this.setDOM(this.widget.toDOM(e)),this.widget.editable||(this.dom.contentEditable="false"))}get overrideDOMText(){return this.parent?this.parent.view.state.doc.slice(this.posAtStart,this.posAtEnd):wp.empty}domBoundsAround(){return null}become(e){return e instanceof zv&&e.widget.constructor==this.widget.constructor&&(e.widget.compare(this.widget)||this.markDirty(!0),this.dom&&!this.prevWidget&&(this.prevWidget=this.widget),this.widget=e.widget,this.length=e.length,this.deco=e.deco,this.breakAfter=e.breakAfter,!0)}ignoreMutation(){return!0}ignoreEvent(e){return this.widget.ignoreEvent(e)}get isEditable(){return!1}get isWidget(){return!0}coordsAt(e,t){let n=this.widget.coordsAt(this.dom,e,t);return n||(this.widget instanceof Hv?null:Lm(this.dom.getBoundingClientRect(),this.length?0==e:t<=0))}destroy(){super.destroy(),this.dom&&this.widget.destroy(this.dom)}covers(e){let{startSide:t,endSide:n}=this.deco;return t!=n&&(e<0?t<0:n>0)}}class Hv extends Rv{constructor(e){super(),this.height=e}toDOM(){let e=document.createElement("div");return e.className="cm-gap",this.updateDOM(e),e}eq(e){return e.height==this.height}updateDOM(e){return e.style.height=this.height+"px",!0}get editable(){return!0}get estimatedHeight(){return this.height}ignoreEvent(){return!1}}class Wv{constructor(e,t,n,r){this.doc=e,this.pos=t,this.end=n,this.disallowBlockEffectsFor=r,this.content=[],this.curLine=null,this.breakAtStart=0,this.pendingBuffer=0,this.bufferMarks=[],this.atCursorPos=!0,this.openStart=-1,this.openEnd=-1,this.text="",this.textOff=0,this.cursor=e.iter(),this.skip=t}posCovered(){if(0==this.content.length)return!this.breakAtStart&&this.doc.lineAt(this.pos).from!=this.pos;let e=this.content[this.content.length-1];return!(e.breakAfter||e instanceof zv&&e.deco.endSide<0)}getLine(){return this.curLine||(this.content.push(this.curLine=new qv),this.atCursorPos=!0),this.curLine}flushBuffer(e=this.bufferMarks){this.pendingBuffer&&(this.curLine.append(Qv(new _v(-1),e),e.length),this.pendingBuffer=0)}addBlockWidget(e){this.flushBuffer(),this.curLine=null,this.content.push(e)}finish(e){this.pendingBuffer&&e<=this.bufferMarks.length?this.flushBuffer():this.pendingBuffer=0,this.posCovered()||e&&this.content.length&&this.content[this.content.length-1]instanceof zv||this.getLine()}buildText(e,t,n){while(e>0){if(this.textOff==this.text.length){let{value:t,lineBreak:n,done:r}=this.cursor.next(this.skip);if(this.skip=0,r)throw new Error("Ran out of text content when drawing inline views");if(n){this.posCovered()||this.getLine(),this.content.length?this.content[this.content.length-1].breakAfter=1:this.breakAtStart=1,this.flushBuffer(),this.curLine=null,this.atCursorPos=!0,e--;continue}this.text=t,this.textOff=0}let r=Math.min(this.text.length-this.textOff,e,512);this.flushBuffer(t.slice(t.length-n)),this.getLine().append(Qv(new bv(this.text.slice(this.textOff,this.textOff+r)),t),n),this.atCursorPos=!0,this.textOff+=r,e-=r,n=0}}span(e,t,n,r){this.buildText(t-e,n,r),this.pos=t,this.openStart<0&&(this.openStart=r)}point(e,t,n,r,i,o){if(this.disallowBlockEffectsFor[o]&&n instanceof Nv){if(n.block)throw new RangeError("Block decorations may not be specified via plugins");if(t>this.doc.lineAt(this.pos).to)throw new RangeError("Decorations that replace line breaks may not be specified via plugins")}let s=t-e;if(n instanceof Nv)if(n.block)n.startSide>0&&!this.posCovered()&&this.getLine(),this.addBlockWidget(new zv(n.widget||Uv.block,s,n));else{let o=kv.create(n.widget||Uv.inline,s,s?0:n.startSide),a=this.atCursorPos&&!o.isEditable&&i<=r.length&&(e<t||n.startSide>0),l=!o.isEditable&&(e<t||i>r.length||n.startSide<=0),c=this.getLine();2!=this.pendingBuffer||a||o.isEditable||(this.pendingBuffer=0),this.flushBuffer(r),a&&(c.append(Qv(new _v(1),r),i),i=r.length+Math.max(0,i-r.length)),c.append(Qv(o,r),i),this.atCursorPos=l,this.pendingBuffer=l?e<t||i>r.length?1:2:0,this.pendingBuffer&&(this.bufferMarks=r.slice())}else this.doc.lineAt(this.pos).from==this.pos&&this.getLine().addLineDeco(n);s&&(this.textOff+s<=this.text.length?this.textOff+=s:(this.skip+=s-(this.text.length-this.textOff),this.text="",this.textOff=0),this.pos=t),this.openStart<0&&(this.openStart=i)}static build(e,t,n,r,i){let o=new Wv(e,t,n,i);return o.openEnd=Kg.spans(r,t,n,o),o.openStart<0&&(o.openStart=o.openEnd),o.finish(o.openEnd),o}}function Qv(e,t){for(let n of t)e=new wv(n,[e],e.length);return e}class Uv extends Rv{constructor(e){super(),this.tag=e}eq(e){return e.tag==this.tag}toDOM(){return document.createElement(this.tag)}updateDOM(e){return e.nodeName.toLowerCase()==this.tag}get isHidden(){return!0}}Uv.inline=new Uv("span"),Uv.block=new Uv("div");var Yv=function(e){return e[e["LTR"]=0]="LTR",e[e["RTL"]=1]="RTL",e}(Yv||(Yv={}));const Xv=Yv.LTR,Zv=Yv.RTL;function Gv(e){let t=[];for(let n=0;n<e.length;n++)t.push(1<<+e[n]);return t}const Kv=Gv("88888888888888888888888888888888888666888888787833333333337888888000000000000000000000000008888880000000000000000000000000088888888888888888888888888888888888887866668888088888663380888308888800000000000000000000000800000000000000000000000000000008"),Jv=Gv("4444448826627288999999999992222222222222222222222222222222222222222222222229999999999999999999994444444444644222822222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222222999999949999999229989999223333333333"),ey=Object.create(null),ty=[];for(let iK of["()","[]","{}"]){let e=iK.charCodeAt(0),t=iK.charCodeAt(1);ey[e]=t,ey[t]=-e}function ny(e){return e<=247?Kv[e]:1424<=e&&e<=1524?2:1536<=e&&e<=1785?Jv[e-1536]:1774<=e&&e<=2220?4:8192<=e&&e<=8204?256:64336<=e&&e<=65023?4:1}const ry=/[\u0590-\u05f4\u0600-\u06ff\u0700-\u08ac\ufb50-\ufdff]/;class iy{get dir(){return this.level%2?Zv:Xv}constructor(e,t,n){this.from=e,this.to=t,this.level=n}side(e,t){return this.dir==t==e?this.to:this.from}forward(e,t){return e==(this.dir==t)}static find(e,t,n,r){let i=-1;for(let o=0;o<e.length;o++){let s=e[o];if(s.from<=t&&s.to>=t){if(s.level==n)return o;(i<0||(0!=r?r<0?s.from<t:s.to>t:e[i].level>s.level))&&(i=o)}}if(i<0)throw new RangeError("Index out of range");return i}}function oy(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.direction!=i.direction||!oy(r.inner,i.inner))return!1}return!0}const sy=[];function ay(e,t,n,r,i){for(let o=0;o<=r.length;o++){let s=o?r[o-1].to:t,a=o<r.length?r[o].from:n,l=o?256:i;for(let t=s,n=l,r=l;t<a;t++){let i=ny(e.charCodeAt(t));512==i?i=n:8==i&&4==r&&(i=16),sy[t]=4==i?2:i,7&i&&(r=i),n=i}for(let e=s,t=l,r=l;e<a;e++){let i=sy[e];if(128==i)e<a-1&&t==sy[e+1]&&24&t?i=sy[e]=t:sy[e]=256;else if(64==i){let i=e+1;while(i<a&&64==sy[i])i++;let o=e&&8==t||i<n&&8==sy[i]?1==r?1:8:256;for(let t=e;t<i;t++)sy[t]=o;e=i-1}else 8==i&&1==r&&(sy[e]=1);t=i,7&i&&(r=i)}}}function ly(e,t,n,r,i){let o=1==i?2:1;for(let s=0,a=0,l=0;s<=r.length;s++){let c=s?r[s-1].to:t,u=s<r.length?r[s].from:n;for(let t,n,r,s=c;s<u;s++)if(n=ey[t=e.charCodeAt(s)])if(n<0){for(let e=a-3;e>=0;e-=3)if(ty[e+1]==-n){let t=ty[e+2],n=2&t?i:4&t?1&t?o:i:0;n&&(sy[s]=sy[ty[e]]=n),a=e;break}}else{if(189==ty.length)break;ty[a++]=s,ty[a++]=t,ty[a++]=l}else if(2==(r=sy[s])||1==r){let e=r==i;l=e?0:1;for(let t=a-3;t>=0;t-=3){let n=ty[t+2];if(2&n)break;if(e)ty[t+2]|=2;else{if(4&n)break;ty[t+2]|=4}}}}}function cy(e,t,n,r){for(let i=0,o=r;i<=n.length;i++){let s=i?n[i-1].to:e,a=i<n.length?n[i].from:t;for(let l=s;l<a;){let s=sy[l];if(256==s){let s=l+1;for(;;)if(s==a){if(i==n.length)break;s=n[i++].to,a=i<n.length?n[i].from:t}else{if(256!=sy[s])break;s++}let c=1==o,u=1==(s<t?sy[s]:r),h=c==u?c?1:2:r;for(let t=s,r=i,o=r?n[r-1].to:e;t>l;)t==o&&(t=n[--r].from,o=r?n[r-1].to:e),sy[--t]=h;l=s}else o=s,l++}}}function uy(e,t,n,r,i,o,s){let a=r%2?2:1;if(r%2==i%2)for(let l=t,c=0;l<n;){let t=!0,u=!1;if(c==o.length||l<o[c].from){let e=sy[l];e!=a&&(t=!1,u=16==e)}let h=t||1!=a?null:[],d=t?r:r+1,f=l;e:for(;;)if(c<o.length&&f==o[c].from){if(u)break e;let p=o[c];if(!t)for(let e=p.to,t=c+1;;){if(e==n)break e;if(!(t<o.length&&o[t].from==e)){if(sy[e]==a)break e;break}e=o[t++].to}if(c++,h)h.push(p);else{p.from>l&&s.push(new iy(l,p.from,d));let t=p.direction==Xv!=!(d%2);hy(e,t?r+1:r,i,p.inner,p.from,p.to,s),l=p.to}f=p.to}else{if(f==n||(t?sy[f]!=a:sy[f]==a))break;f++}h?uy(e,l,f,r+1,i,h,s):l<f&&s.push(new iy(l,f,d)),l=f}else for(let l=n,c=o.length;l>t;){let n=!0,u=!1;if(!c||l>o[c-1].to){let e=sy[l-1];e!=a&&(n=!1,u=16==e)}let h=n||1!=a?null:[],d=n?r:r+1,f=l;e:for(;;)if(c&&f==o[c-1].to){if(u)break e;let p=o[--c];if(!n)for(let e=p.from,n=c;;){if(e==t)break e;if(!n||o[n-1].to!=e){if(sy[e-1]==a)break e;break}e=o[--n].from}if(h)h.push(p);else{p.to<l&&s.push(new iy(p.to,l,d));let t=p.direction==Xv!=!(d%2);hy(e,t?r+1:r,i,p.inner,p.from,p.to,s),l=p.from}f=p.from}else{if(f==t||(n?sy[f-1]!=a:sy[f-1]==a))break;f--}h?uy(e,f,l,r+1,i,h,s):f<l&&s.push(new iy(f,l,d)),l=f}}function hy(e,t,n,r,i,o,s){let a=t%2?2:1;ay(e,i,o,r,a),ly(e,i,o,r,a),cy(i,o,r,a),uy(e,i,o,t,n,r,s)}function dy(e,t,n){if(!e)return[new iy(0,0,t==Zv?1:0)];if(t==Xv&&!n.length&&!ry.test(e))return fy(e.length);if(n.length)while(e.length>sy.length)sy[sy.length]=256;let r=[],i=t==Xv?0:1;return hy(e,i,i,n,0,e.length,r),r}function fy(e){return[new iy(0,e,0)]}let py="";function gy(e,t,n,r,i){var o;let s=r.head-e.from,a=iy.find(t,s,null!==(o=r.bidiLevel)&&void 0!==o?o:-1,r.assoc),l=t[a],c=l.side(i,n);if(s==c){let e=a+=i?1:-1;if(e<0||e>=t.length)return null;l=t[a=e],s=l.side(!i,n),c=l.side(i,n)}let u=Ip(e.text,s,l.forward(i,n));(u<l.from||u>l.to)&&(u=c),py=e.text.slice(Math.min(s,u),Math.max(s,u));let h=a==(i?t.length-1:0)?null:t[a+(i?1:-1)];return h&&u==c&&h.level+(i?0:1)<l.level?eg.cursor(h.side(!i,n)+e.from,h.forward(i,n)?1:-1,h.level):eg.cursor(u+e.from,l.forward(i,n)?-1:1,l.level)}function my(e,t,n){for(let r=t;r<n;r++){let t=ny(e.charCodeAt(r));if(1==t)return Xv;if(2==t||4==t)return Zv}return Xv}const vy=rg.define(),yy=rg.define(),by=rg.define(),wy=rg.define(),xy=rg.define(),ky=rg.define(),_y=rg.define(),Oy=rg.define(),Sy=rg.define(),Ey=rg.define({combine:e=>e.some((e=>e))}),Cy=rg.define({combine:e=>e.some((e=>e))}),Ty=rg.define();class Ay{constructor(e,t="nearest",n="nearest",r=5,i=5,o=!1){this.range=e,this.y=t,this.x=n,this.yMargin=r,this.xMargin=i,this.isSnapshot=o}map(e){return e.empty?this:new Ay(this.range.map(e),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}clip(e){return this.range.to<=e.doc.length?this:new Ay(eg.cursor(e.doc.length),this.y,this.x,this.yMargin,this.xMargin,this.isSnapshot)}}const Dy=Mg.define({map:(e,t)=>e.map(t)}),My=Mg.define();function Fy(e,t,n){let r=e.facet(wy);r.length?r[0](t):window.onerror?window.onerror(String(t),n,void 0,void 0,t):n?console.error(n+":",t):console.error(t)}const Ry=rg.define({combine:e=>!e.length||e[0]});let Py=0;const Iy=rg.define();class Ly{constructor(e,t,n,r,i){this.id=e,this.create=t,this.domEventHandlers=n,this.domEventObservers=r,this.extension=i(this)}static define(e,t){const{eventHandlers:n,eventObservers:r,provide:i,decorations:o}=t||{};return new Ly(Py++,e,n,r,(e=>{let t=[Iy.of(e)];return o&&t.push(By.of((t=>{let n=t.plugin(e);return n?o(n):Iv.none}))),i&&t.push(i(e)),t}))}static fromClass(e,t){return Ly.define((t=>new e(t)),t)}}class $y{constructor(e){this.spec=e,this.mustUpdate=null,this.value=null}update(e){if(this.value){if(this.mustUpdate){let e=this.mustUpdate;if(this.mustUpdate=null,this.value.update)try{this.value.update(e)}catch(t){if(Fy(e.state,t,"CodeMirror plugin crashed"),this.value.destroy)try{this.value.destroy()}catch(Re){}this.deactivate()}}}else if(this.spec)try{this.value=this.spec.create(e)}catch(t){Fy(e.state,t,"CodeMirror plugin crashed"),this.deactivate()}return this}destroy(e){var t;if(null===(t=this.value)||void 0===t?void 0:t.destroy)try{this.value.destroy()}catch(n){Fy(e.state,n,"CodeMirror plugin crashed")}}deactivate(){this.spec=this.value=null}}const Ny=rg.define(),jy=rg.define(),By=rg.define(),Vy=rg.define(),qy=rg.define(),zy=rg.define();function Hy(e,t){let n=e.state.facet(zy);if(!n.length)return n;let r=n.map((t=>t instanceof Function?t(e):t)),i=[];return Kg.spans(r,t.from,t.to,{point(){},span(e,n,r,o){let s=e-t.from,a=n-t.from,l=i;for(let i=r.length-1;i>=0;i--,o--){let e,n=r[i].spec.bidiIsolate;if(null==n&&(n=my(t.text,s,a)),o>0&&l.length&&(e=l[l.length-1]).to==s&&e.direction==n)e.to=a,l=e.inner;else{let e={from:s,to:a,direction:n,inner:[]};l.push(e),l=e.inner}}}}),i}const Wy=rg.define();function Qy(e){let t=0,n=0,r=0,i=0;for(let o of e.state.facet(Wy)){let s=o(e);s&&(null!=s.left&&(t=Math.max(t,s.left)),null!=s.right&&(n=Math.max(n,s.right)),null!=s.top&&(r=Math.max(r,s.top)),null!=s.bottom&&(i=Math.max(i,s.bottom)))}return{left:t,right:n,top:r,bottom:i}}const Uy=rg.define();class Yy{constructor(e,t,n,r){this.fromA=e,this.toA=t,this.fromB=n,this.toB=r}join(e){return new Yy(Math.min(this.fromA,e.fromA),Math.max(this.toA,e.toA),Math.min(this.fromB,e.fromB),Math.max(this.toB,e.toB))}addToSet(e){let t=e.length,n=this;for(;t>0;t--){let r=e[t-1];if(!(r.fromA>n.toA)){if(r.toA<n.fromA)break;n=n.join(r),e.splice(t-1,1)}}return e.splice(t,0,n),e}static extendWithRanges(e,t){if(0==t.length)return e;let n=[];for(let r=0,i=0,o=0,s=0;;r++){let a=r==e.length?null:e[r],l=o-s,c=a?a.fromB:1e9;while(i<t.length&&t[i]<c){let e=t[i],r=t[i+1],o=Math.max(s,e),a=Math.min(c,r);if(o<=a&&new Yy(o+l,a+l,o,a).addToSet(n),r>c)break;i+=2}if(!a)return n;new Yy(a.fromA,a.toA,a.fromB,a.toB).addToSet(n),o=a.toA,s=a.toB}}}class Xy{constructor(e,t,n){this.view=e,this.state=t,this.transactions=n,this.flags=0,this.startState=e.state,this.changes=Qp.empty(this.startState.doc.length);for(let i of n)this.changes=this.changes.compose(i.changes);let r=[];this.changes.iterChangedRanges(((e,t,n,i)=>r.push(new Yy(e,t,n,i)))),this.changedRanges=r}static create(e,t,n){return new Xy(e,t,n)}get viewportChanged(){return(4&this.flags)>0}get heightChanged(){return(2&this.flags)>0}get geometryChanged(){return this.docChanged||(10&this.flags)>0}get focusChanged(){return(1&this.flags)>0}get docChanged(){return!this.changes.empty}get selectionSet(){return this.transactions.some((e=>e.selection))}get empty(){return 0==this.flags&&0==this.transactions.length}}class Zy extends tv{get length(){return this.view.state.doc.length}constructor(e){super(),this.view=e,this.decorations=[],this.dynamicDecorationMap=[!1],this.domChanged=null,this.hasComposition=null,this.markedForComposition=new Set,this.editContextFormatting=Iv.none,this.lastCompositionAfterCursor=!1,this.minWidth=0,this.minWidthFrom=0,this.minWidthTo=0,this.impreciseAnchor=null,this.impreciseHead=null,this.forceSelection=!1,this.lastUpdate=Date.now(),this.setDOM(e.contentDOM),this.children=[new qv],this.children[0].setParent(this),this.updateDeco(),this.updateInner([new Yy(0,0,0,e.state.doc.length)],0,null)}update(e){var t;let n=e.changedRanges;this.minWidth>0&&n.length&&(n.every((({fromA:e,toA:t})=>t<this.minWidthFrom||e>this.minWidthTo))?(this.minWidthFrom=e.changes.mapPos(this.minWidthFrom,1),this.minWidthTo=e.changes.mapPos(this.minWidthTo,1)):this.minWidth=this.minWidthFrom=this.minWidthTo=0),this.updateEditContextFormatting(e);let r=-1;this.view.inputState.composing>=0&&!this.view.observer.editContext&&((null===(t=this.domChanged)||void 0===t?void 0:t.newSel)?r=this.domChanged.newSel.head:ib(e.changes,this.hasComposition)||e.selectionSet||(r=e.state.selection.main.head));let i=r>-1?Jy(this.view,e.changes,r):null;if(this.domChanged=null,this.hasComposition){this.markedForComposition.clear();let{from:t,to:r}=this.hasComposition;n=new Yy(t,r,e.changes.mapPos(t,-1),e.changes.mapPos(r,1)).addToSet(n.slice())}this.hasComposition=i?{from:i.range.fromB,to:i.range.toB}:null,(vv.ie||vv.chrome)&&!i&&e&&e.state.doc.lines!=e.startState.doc.lines&&(this.forceSelection=!0);let o=this.decorations,s=this.updateDeco(),a=nb(o,s,e.changes);return n=Yy.extendWithRanges(n,a),!!(7&this.flags||0!=n.length)&&(this.updateInner(n,e.startState.doc.length,i),e.transactions.length&&(this.lastUpdate=Date.now()),!0)}updateInner(e,t,n){this.view.viewState.mustMeasureContent=!0,this.updateChildren(e,t,n);let{observer:r}=this.view;r.ignore((()=>{this.dom.style.height=this.view.viewState.contentHeight/this.view.scaleY+"px",this.dom.style.flexBasis=this.minWidth?this.minWidth+"px":"";let e=vv.chrome||vv.ios?{node:r.selectionRange.focusNode,written:!1}:void 0;this.sync(this.view,e),this.flags&=-8,e&&(e.written||r.selectionRange.focusNode!=e.node)&&(this.forceSelection=!0),this.dom.style.height=""})),this.markedForComposition.forEach((e=>e.flags&=-9));let i=[];if(this.view.viewport.from||this.view.viewport.to<this.view.state.doc.length)for(let o of this.children)o instanceof zv&&o.widget instanceof Hv&&i.push(o.dom);r.updateGaps(i)}updateChildren(e,t,n){let r=n?n.range.addToSet(e.slice()):e,i=this.childCursor(t);for(let o=r.length-1;;o--){let e=o>=0?r[o]:null;if(!e)break;let t,s,a,l,{fromA:c,toA:u,fromB:h,toB:d}=e;if(n&&n.range.fromB<d&&n.range.toB>h){let e=Wv.build(this.view.state.doc,h,n.range.fromB,this.decorations,this.dynamicDecorationMap),r=Wv.build(this.view.state.doc,n.range.toB,d,this.decorations,this.dynamicDecorationMap);s=e.breakAtStart,a=e.openStart,l=r.openEnd;let i=this.compositionView(n);r.breakAtStart?i.breakAfter=1:r.content.length&&i.merge(i.length,i.length,r.content[0],!1,r.openStart,0)&&(i.breakAfter=r.content[0].breakAfter,r.content.shift()),e.content.length&&i.merge(0,0,e.content[e.content.length-1],!0,0,e.openEnd)&&e.content.pop(),t=e.content.concat(i).concat(r.content)}else({content:t,breakAtStart:s,openStart:a,openEnd:l}=Wv.build(this.view.state.doc,h,d,this.decorations,this.dynamicDecorationMap));let{i:f,off:p}=i.findPos(u,1),{i:g,off:m}=i.findPos(c,-1);iv(this,g,m,f,p,t,s,a,l)}n&&this.fixCompositionDOM(n)}updateEditContextFormatting(e){this.editContextFormatting=this.editContextFormatting.map(e.changes);for(let t of e.transactions)for(let e of t.effects)e.is(My)&&(this.editContextFormatting=e.value)}compositionView(e){let t=new bv(e.text.nodeValue);t.flags|=8;for(let{deco:r}of e.marks)t=new wv(r,[t],t.length);let n=new qv;return n.append(t,0),n}fixCompositionDOM(e){let t=(e,t)=>{t.flags|=8|(t.children.some((e=>7&e.flags))?1:0),this.markedForComposition.add(t);let n=tv.get(e);n&&n!=t&&(n.dom=null),t.setDOM(e)},n=this.childPos(e.range.fromB,1),r=this.children[n.i];t(e.line,r);for(let i=e.marks.length-1;i>=-1;i--)n=r.childPos(n.off,1),r=r.children[n.i],t(i>=0?e.marks[i].node:e.text,r)}updateSelection(e=!1,t=!1){!e&&this.view.observer.selectionRange.focusNode||this.view.observer.readSelectionRange();let n=this.view.root.activeElement,r=n==this.dom,i=!r&&Am(this.dom,this.view.observer.selectionRange)&&!(n&&this.dom.contains(n));if(!(r||t||i))return;let o=this.forceSelection;this.forceSelection=!1;let s=this.view.state.selection.main,a=this.moveToLine(this.domAtPos(s.anchor)),l=s.empty?a:this.moveToLine(this.domAtPos(s.head));if(vv.gecko&&s.empty&&!this.hasComposition&&Gy(a)){let e=document.createTextNode("");this.view.observer.ignore((()=>a.node.insertBefore(e,a.node.childNodes[a.offset]||null))),a=l=new Jm(e,0),o=!0}let c=this.view.observer.selectionRange;!o&&c.focusNode&&(Mm(a.node,a.offset,c.anchorNode,c.anchorOffset)&&Mm(l.node,l.offset,c.focusNode,c.focusOffset)||this.suppressWidgetCursorChange(c,s))||(this.view.observer.ignore((()=>{vv.android&&vv.chrome&&this.dom.contains(c.focusNode)&&rb(c.focusNode,this.dom)&&(this.dom.blur(),this.dom.focus({preventScroll:!0}));let e=Cm(this.view.root);if(e)if(s.empty){if(vv.gecko){let e=eb(a.node,a.offset);if(e&&3!=e){let t=(1==e?Gm:Km)(a.node,a.offset);t&&(a=new Jm(t.node,t.offset))}}e.collapse(a.node,a.offset),null!=s.bidiLevel&&void 0!==e.caretBidiLevel&&(e.caretBidiLevel=s.bidiLevel)}else if(e.extend){e.collapse(a.node,a.offset);try{e.extend(l.node,l.offset)}catch(Re){}}else{let t=document.createRange();s.anchor>s.head&&([a,l]=[l,a]),t.setEnd(l.node,l.offset),t.setStart(a.node,a.offset),e.removeAllRanges(),e.addRange(t)}else;i&&this.view.root.activeElement==this.dom&&(this.dom.blur(),n&&n.focus())})),this.view.observer.setSelectionRange(a,l)),this.impreciseAnchor=a.precise?null:new Jm(c.anchorNode,c.anchorOffset),this.impreciseHead=l.precise?null:new Jm(c.focusNode,c.focusOffset)}suppressWidgetCursorChange(e,t){return this.hasComposition&&t.empty&&Mm(e.focusNode,e.focusOffset,e.anchorNode,e.anchorOffset)&&this.posFromDOM(e.focusNode,e.focusOffset)==t.head}enforceCursorAssoc(){if(this.hasComposition)return;let{view:e}=this,t=e.state.selection.main,n=Cm(e.root),{anchorNode:r,anchorOffset:i}=e.observer.selectionRange;if(!n||!t.empty||!t.assoc||!n.modify)return;let o=qv.find(this,t.head);if(!o)return;let s=o.posAtStart;if(t.head==s||t.head==s+o.length)return;let a=this.coordsAt(t.head,-1),l=this.coordsAt(t.head,1);if(!a||!l||a.bottom>l.top)return;let c=this.domAtPos(t.head+t.assoc);n.collapse(c.node,c.offset),n.modify("move",t.assoc<0?"forward":"backward","lineboundary"),e.observer.readSelectionRange();let u=e.observer.selectionRange;e.docView.posFromDOM(u.anchorNode,u.anchorOffset)!=t.from&&n.collapse(r,i)}moveToLine(e){let t,n=this.dom;if(e.node!=n)return e;for(let r=e.offset;!t&&r<n.childNodes.length;r++){let e=tv.get(n.childNodes[r]);e instanceof qv&&(t=e.domAtPos(0))}for(let r=e.offset-1;!t&&r>=0;r--){let e=tv.get(n.childNodes[r]);e instanceof qv&&(t=e.domAtPos(e.length))}return t?new Jm(t.node,t.offset,!0):e}nearest(e){for(let t=e;t;){let e=tv.get(t);if(e&&e.rootView==this)return e;t=t.parentNode}return null}posFromDOM(e,t){let n=this.nearest(e);if(!n)throw new RangeError("Trying to find position for a DOM position outside of the document");return n.localPosFromDOM(e,t)+n.posAtStart}domAtPos(e){let{i:t,off:n}=this.childCursor().findPos(e,-1);for(;t<this.children.length-1;){let e=this.children[t];if(n<e.length||e instanceof qv)break;t++,n=0}return this.children[t].domAtPos(n)}coordsAt(e,t){let n=null,r=0;for(let i=this.length,o=this.children.length-1;o>=0;o--){let s=this.children[o],a=i-s.breakAfter,l=a-s.length;if(a<e)break;if(l<=e&&(l<e||s.covers(-1))&&(a>e||s.covers(1))&&(!n||s instanceof qv&&!(n instanceof qv&&t>=0)))n=s,r=l;else if(n&&l==e&&a==e&&s instanceof zv&&Math.abs(t)<2){if(s.deco.startSide<0)break;o&&(n=null)}i=l}return n?n.coordsAt(e-r,t):null}coordsForChar(e){let{i:t,off:n}=this.childPos(e,1),r=this.children[t];if(!(r instanceof qv))return null;while(r.children.length){let{i:e,off:t}=r.childPos(n,1);for(;;e++){if(e==r.children.length)return null;if((r=r.children[e]).length)break}n=t}if(!(r instanceof bv))return null;let i=Ip(r.text,n);if(i==n)return null;let o=Wm(r.dom,n,i).getClientRects();for(let s=0;s<o.length;s++){let e=o[s];if(s==o.length-1||e.top<e.bottom&&e.left<e.right)return e}return null}measureVisibleLineHeights(e){let t=[],{from:n,to:r}=e,i=this.view.contentDOM.clientWidth,o=i>Math.max(this.view.scrollDOM.clientWidth,this.minWidth)+1,s=-1,a=this.view.textDirection==Yv.LTR;for(let l=0,c=0;c<this.children.length;c++){let e=this.children[c],u=l+e.length;if(u>r)break;if(l>=n){let n=e.dom.getBoundingClientRect();if(t.push(n.height),o){let t=e.dom.lastChild,r=t?Dm(t):[];if(r.length){let e=r[r.length-1],t=a?e.right-n.left:n.right-e.left;t>s&&(s=t,this.minWidth=i,this.minWidthFrom=l,this.minWidthTo=u)}}}l=u+e.breakAfter}return t}textDirectionAt(e){let{i:t}=this.childPos(e,1);return"rtl"==getComputedStyle(this.children[t].dom).direction?Yv.RTL:Yv.LTR}measureTextSize(){for(let i of this.children)if(i instanceof qv){let e=i.measureTextSize();if(e)return e}let e,t,n,r=document.createElement("div");return r.className="cm-line",r.style.width="99999px",r.style.position="absolute",r.textContent="abc def ghi jkl mno pqr stu",this.view.observer.ignore((()=>{this.dom.appendChild(r);let i=Dm(r.firstChild)[0];e=r.getBoundingClientRect().height,t=i?i.width/27:7,n=i?i.height:e,r.remove()})),{lineHeight:e,charWidth:t,textHeight:n}}childCursor(e=this.length){let t=this.children.length;return t&&(e-=this.children[--t].length),new rv(this.children,e,t)}computeBlockGapDeco(){let e=[],t=this.view.viewState;for(let n=0,r=0;;r++){let i=r==t.viewports.length?null:t.viewports[r],o=i?i.from-1:this.length;if(o>n){let r=(t.lineBlockAt(o).bottom-t.lineBlockAt(n).top)/this.view.scaleY;e.push(Iv.replace({widget:new Hv(r),block:!0,inclusive:!0,isBlockGap:!0}).range(n,o))}if(!i)break;n=i.to+1}return Iv.set(e)}updateDeco(){let e=1,t=this.view.state.facet(By).map((t=>{let n=this.dynamicDecorationMap[e++]="function"==typeof t;return n?t(this.view):t})),n=!1,r=this.view.state.facet(Vy).map(((e,t)=>{let r="function"==typeof e;return r&&(n=!0),r?e(this.view):e}));r.length&&(this.dynamicDecorationMap[e++]=n,t.push(Kg.join(r))),this.decorations=[this.editContextFormatting,...t,this.computeBlockGapDeco(),this.view.viewState.lineGapDeco];while(e<this.decorations.length)this.dynamicDecorationMap[e++]=!1;return this.decorations}scrollIntoView(e){if(e.isSnapshot){let t=this.view.viewState.lineBlockAt(e.range.head);return this.view.scrollDOM.scrollTop=t.top-e.yMargin,void(this.view.scrollDOM.scrollLeft=e.xMargin)}for(let c of this.view.state.facet(Ty))try{if(c(this.view,e.range,e))return!0}catch(l){Fy(this.view.state,l,"scroll handler")}let t,{range:n}=e,r=this.coordsAt(n.head,n.empty?n.assoc:n.head>n.anchor?-1:1);if(!r)return;!n.empty&&(t=this.coordsAt(n.anchor,n.anchor>n.head?-1:1))&&(r={left:Math.min(r.left,t.left),top:Math.min(r.top,t.top),right:Math.max(r.right,t.right),bottom:Math.max(r.bottom,t.bottom)});let i=Qy(this.view),o={left:r.left-i.left,top:r.top-i.top,right:r.right+i.right,bottom:r.bottom+i.bottom},{offsetWidth:s,offsetHeight:a}=this.view.scrollDOM;jm(this.view.scrollDOM,o,n.head<n.anchor?-1:1,e.x,e.y,Math.max(Math.min(e.xMargin,s),-s),Math.max(Math.min(e.yMargin,a),-a),this.view.textDirection==Yv.LTR)}}function Gy(e){return 1==e.node.nodeType&&e.node.firstChild&&(0==e.offset||"false"==e.node.childNodes[e.offset-1].contentEditable)&&(e.offset==e.node.childNodes.length||"false"==e.node.childNodes[e.offset].contentEditable)}function Ky(e,t){let n=e.observer.selectionRange;if(!n.focusNode)return null;let r=Gm(n.focusNode,n.focusOffset),i=Km(n.focusNode,n.focusOffset),o=r||i;if(i&&r&&i.node!=r.node){let t=tv.get(i.node);if(!t||t instanceof bv&&t.text!=i.node.nodeValue)o=i;else if(e.docView.lastCompositionAfterCursor){let e=tv.get(r.node);!e||e instanceof bv&&e.text!=r.node.nodeValue||(o=i)}}if(e.docView.lastCompositionAfterCursor=o!=r,!o)return null;let s=t-o.offset;return{from:s,to:s+o.node.nodeValue.length,node:o.node}}function Jy(e,t,n){let r=Ky(e,n);if(!r)return null;let{node:i,from:o,to:s}=r,a=i.nodeValue;if(/[\n\r]/.test(a))return null;if(e.state.doc.sliceString(r.from,r.to)!=a)return null;let l=t.invertedDesc,c=new Yy(l.mapPos(o),l.mapPos(s),o,s),u=[];for(let h=i.parentNode;;h=h.parentNode){let t=tv.get(h);if(t instanceof wv)u.push({node:h,deco:t.mark});else{if(t instanceof qv||"DIV"==h.nodeName&&h.parentNode==e.contentDOM)return{range:c,text:i,marks:u,line:h};if(h==e.contentDOM)return null;u.push({node:h,deco:new Lv({inclusive:!0,attributes:Fv(h),tagName:h.tagName.toLowerCase()})})}}}function eb(e,t){return 1!=e.nodeType?0:(t&&"false"==e.childNodes[t-1].contentEditable?1:0)|(t<e.childNodes.length&&"false"==e.childNodes[t].contentEditable?2:0)}let tb=class{constructor(){this.changes=[]}compareRange(e,t){Vv(e,t,this.changes)}comparePoint(e,t){Vv(e,t,this.changes)}};function nb(e,t,n){let r=new tb;return Kg.compare(e,t,n,r),r.changes}function rb(e,t){for(let n=e;n&&n!=t;n=n.assignedSlot||n.parentNode)if(1==n.nodeType&&"false"==n.contentEditable)return!0;return!1}function ib(e,t){let n=!1;return t&&e.iterChangedRanges(((e,r)=>{e<t.to&&r>t.from&&(n=!0)})),n}function ob(e,t,n=1){let r=e.charCategorizer(t),i=e.doc.lineAt(t),o=t-i.from;if(0==i.length)return eg.cursor(t);0==o?n=1:o==i.length&&(n=-1);let s=o,a=o;n<0?s=Ip(i.text,o,!1):a=Ip(i.text,o);let l=r(i.text.slice(s,a));while(s>0){let e=Ip(i.text,s,!1);if(r(i.text.slice(e,s))!=l)break;s=e}while(a<i.length){let e=Ip(i.text,a);if(r(i.text.slice(a,e))!=l)break;a=e}return eg.range(s+i.from,a+i.from)}function sb(e,t){return t.left>e?t.left-e:Math.max(0,e-t.right)}function ab(e,t){return t.top>e?t.top-e:Math.max(0,e-t.bottom)}function lb(e,t){return e.top<t.bottom-1&&e.bottom>t.top+1}function cb(e,t){return t<e.top?{top:t,left:e.left,right:e.right,bottom:e.bottom}:e}function ub(e,t){return t>e.bottom?{top:e.top,left:e.left,right:e.right,bottom:t}:e}function hb(e,t,n){let r,i,o,s,a,l,c,u,h=!1;for(let p=e.firstChild;p;p=p.nextSibling){let e=Dm(p);for(let d=0;d<e.length;d++){let f=e[d];i&&lb(i,f)&&(f=cb(ub(f,i.bottom),i.top));let g=sb(t,f),m=ab(n,f);if(0==g&&0==m)return 3==p.nodeType?db(p,t,n):hb(p,t,n);if(!r||s>m||s==m&&o>g){r=p,i=f,o=g,s=m;let a=m?n<f.top?-1:1:g?t<f.left?-1:1:0;h=!a||(a>0?d<e.length-1:d>0)}0==g?n>f.bottom&&(!c||c.bottom<f.bottom)?(a=p,c=f):n<f.top&&(!u||u.top>f.top)&&(l=p,u=f):c&&lb(c,f)?c=ub(c,f.bottom):u&&lb(u,f)&&(u=cb(u,f.top))}}if(c&&c.bottom>=n?(r=a,i=c):u&&u.top<=n&&(r=l,i=u),!r)return{node:e,offset:0};let d=Math.max(i.left,Math.min(i.right,t));if(3==r.nodeType)return db(r,d,n);if(h&&"false"!=r.contentEditable)return hb(r,d,n);let f=Array.prototype.indexOf.call(e.childNodes,r)+(t>=(i.left+i.right)/2?1:0);return{node:e,offset:f}}function db(e,t,n){let r=e.nodeValue.length,i=-1,o=1e9,s=0;for(let a=0;a<r;a++){let r=Wm(e,a,a+1).getClientRects();for(let l=0;l<r.length;l++){let c=r[l];if(c.top==c.bottom)continue;s||(s=t-c.left);let u=(c.top>n?c.top-n:n-c.bottom)-1;if(c.left-1<=t&&c.right+1>=t&&u<o){let n=t>=(c.left+c.right)/2,r=n;if(vv.chrome||vv.gecko){let t=Wm(e,a).getBoundingClientRect();t.left==c.right&&(r=!n)}if(u<=0)return{node:e,offset:a+(r?1:0)};i=a+(r?1:0),o=u}}}return{node:e,offset:i>-1?i:s>0?e.nodeValue.length:0}}function fb(e,t,n,r=-1){var i,o;let s,a=e.contentDOM.getBoundingClientRect(),l=a.top+e.viewState.paddingTop,{docHeight:c}=e.viewState,{x:u,y:h}=t,d=h-l;if(d<0)return 0;if(d>c)return e.state.doc.length;for(let w=e.viewState.heightOracle.textHeight/2,x=!1;;){if(s=e.elementAtHeight(d),s.type==Pv.Text)break;for(;;){if(d=r>0?s.bottom+w:s.top-w,d>=0&&d<=c)break;if(x)return n?null:0;x=!0,r=-r}}h=l+d;let f=s.from;if(f<e.viewport.from)return 0==e.viewport.from?0:n?null:pb(e,a,s,u,h);if(f>e.viewport.to)return e.viewport.to==e.state.doc.length?e.state.doc.length:n?null:pb(e,a,s,u,h);let p=e.dom.ownerDocument,g=e.root.elementFromPoint?e.root:p,m=g.elementFromPoint(u,h);m&&!e.contentDOM.contains(m)&&(m=null),m||(u=Math.max(a.left+1,Math.min(a.right-1,u)),m=g.elementFromPoint(u,h),m&&!e.contentDOM.contains(m)&&(m=null));let v,y=-1;if(m&&0!=(null===(i=e.docView.nearest(m))||void 0===i?void 0:i.isEditable)){if(p.caretPositionFromPoint){let e=p.caretPositionFromPoint(u,h);e&&({offsetNode:v,offset:y}=e)}else if(p.caretRangeFromPoint){let t=p.caretRangeFromPoint(u,h);t&&(({startContainer:v,startOffset:y}=t),(!e.contentDOM.contains(v)||vv.safari&&gb(v,y,u)||vv.chrome&&mb(v,y,u))&&(v=void 0))}v&&(y=Math.min(Im(v),y))}if(!v||!e.docView.dom.contains(v)){let t=qv.find(e.docView,f);if(!t)return d>s.top+s.height/2?s.to:s.from;({node:v,offset:y}=hb(t.dom,u,h))}let b=e.docView.nearest(v);if(!b)return null;if(b.isWidget&&1==(null===(o=b.dom)||void 0===o?void 0:o.nodeType)){let e=b.dom.getBoundingClientRect();return t.y<e.top||t.y<=e.bottom&&t.x<=(e.left+e.right)/2?b.posAtStart:b.posAtEnd}return b.localPosFromDOM(v,y)+b.posAtStart}function pb(e,t,n,r,i){let o=Math.round((r-t.left)*e.defaultCharacterWidth);if(e.lineWrapping&&n.height>1.5*e.defaultLineHeight){let t=e.viewState.heightOracle.textHeight,r=Math.floor((i-n.top-.5*(e.defaultLineHeight-t))/t);o+=r*e.viewState.heightOracle.lineLength}let s=e.state.sliceDoc(n.from,n.to);return n.from+dm(s,o,e.state.tabSize)}function gb(e,t,n){let r;if(3!=e.nodeType||t!=(r=e.nodeValue.length))return!1;for(let i=e.nextSibling;i;i=i.nextSibling)if(1!=i.nodeType||"BR"!=i.nodeName)return!1;return Wm(e,r-1,r).getBoundingClientRect().left>n}function mb(e,t,n){if(0!=t)return!1;for(let i=e;;){let e=i.parentNode;if(!e||1!=e.nodeType||e.firstChild!=i)return!1;if(e.classList.contains("cm-line"))break;i=e}let r=1==e.nodeType?e.getBoundingClientRect():Wm(e,0,Math.max(e.nodeValue.length,1)).getBoundingClientRect();return n-r.left>5}function vb(e,t){let n=e.lineBlockAt(t);if(Array.isArray(n.type))for(let r of n.type)if(r.to>t||r.to==t&&(r.to==n.to||r.type==Pv.Text))return r;return n}function yb(e,t,n,r){let i=vb(e,t.head),o=r&&i.type==Pv.Text&&(e.lineWrapping||i.widgetLineBreaks)?e.coordsAtPos(t.assoc<0&&t.head>i.from?t.head-1:t.head):null;if(o){let t=e.dom.getBoundingClientRect(),r=e.textDirectionAt(i.from),s=e.posAtCoords({x:n==(r==Yv.LTR)?t.right-1:t.left+1,y:(o.top+o.bottom)/2});if(null!=s)return eg.cursor(s,n?-1:1)}return eg.cursor(n?i.to:i.from,n?-1:1)}function bb(e,t,n,r){let i=e.state.doc.lineAt(t.head),o=e.bidiSpans(i),s=e.textDirectionAt(i.from);for(let a=t,l=null;;){let t=gy(i,o,s,a,n),c=py;if(!t){if(i.number==(n?e.state.doc.lines:1))return a;c="\n",i=e.state.doc.line(i.number+(n?1:-1)),o=e.bidiSpans(i),t=e.visualLineSide(i,!n)}if(l){if(!l(c))return a}else{if(!r)return t;l=r(c)}a=t}}function wb(e,t,n){let r=e.state.charCategorizer(t),i=r(n);return e=>{let t=r(e);return i==Vg.Space&&(i=t),i==t}}function xb(e,t,n,r){let i=t.head,o=n?1:-1;if(i==(n?e.state.doc.length:0))return eg.cursor(i,t.assoc);let s,a=t.goalColumn,l=e.contentDOM.getBoundingClientRect(),c=e.coordsAtPos(i,t.assoc||-1),u=e.documentTop;if(c)null==a&&(a=c.left-l.left),s=o<0?c.top:c.bottom;else{let t=e.viewState.lineBlockAt(i);null==a&&(a=Math.min(l.right-l.left,e.defaultCharacterWidth*(i-t.from))),s=(o<0?t.top:t.bottom)+u}let h=l.left+a,d=null!==r&&void 0!==r?r:e.viewState.heightOracle.textHeight>>1;for(let f=0;;f+=10){let t=s+(d+f)*o,n=fb(e,{x:h,y:t},!1,o);if(t<l.top||t>l.bottom||(o<0?n<i:n>i)){let r=e.docView.coordsForChar(n),i=!r||t<r.top?-1:1;return eg.cursor(n,i,void 0,a)}}}function kb(e,t,n){for(;;){let r=0;for(let i of e)i.between(t-1,t+1,((e,i,o)=>{if(t>e&&t<i){let o=r||n||(t-e<i-t?-1:1);t=o<0?e:i,r=o}}));if(!r)return t}}function _b(e,t,n){let r=kb(e.state.facet(qy).map((t=>t(e))),n.from,t.head>n.from?-1:1);return r==n.from?n:eg.cursor(r,r<n.from?1:-1)}const Ob="￿";class Sb{constructor(e,t){this.points=e,this.text="",this.lineSeparator=t.facet(Qg.lineSeparator)}append(e){this.text+=e}lineBreak(){this.text+=Ob}readRange(e,t){if(!e)return this;let n=e.parentNode;for(let r=e;;){this.findPointBefore(n,r);let e=this.text.length;this.readNode(r);let i=r.nextSibling;if(i==t)break;let o=tv.get(r),s=tv.get(i);(o&&s?o.breakAfter:(o?o.breakAfter:Rm(r))||Rm(i)&&("BR"!=r.nodeName||r.cmIgnore)&&this.text.length>e)&&this.lineBreak(),r=i}return this.findPointBefore(n,t),this}readTextNode(e){let t=e.nodeValue;for(let n of this.points)n.node==e&&(n.pos=this.text.length+Math.min(n.offset,t.length));for(let n=0,r=this.lineSeparator?null:/\r\n?|\n/g;;){let i,o=-1,s=1;if(this.lineSeparator?(o=t.indexOf(this.lineSeparator,n),s=this.lineSeparator.length):(i=r.exec(t))&&(o=i.index,s=i[0].length),this.append(t.slice(n,o<0?t.length:o)),o<0)break;if(this.lineBreak(),s>1)for(let t of this.points)t.node==e&&t.pos>this.text.length&&(t.pos-=s-1);n=o+s}}readNode(e){if(e.cmIgnore)return;let t=tv.get(e),n=t&&t.overrideDOMText;if(null!=n){this.findPointInside(e,n.length);for(let e=n.iter();!e.next().done;)e.lineBreak?this.lineBreak():this.append(e.value)}else 3==e.nodeType?this.readTextNode(e):"BR"==e.nodeName?e.nextSibling&&this.lineBreak():1==e.nodeType&&this.readRange(e.firstChild,null)}findPointBefore(e,t){for(let n of this.points)n.node==e&&e.childNodes[n.offset]==t&&(n.pos=this.text.length)}findPointInside(e,t){for(let n of this.points)(3==e.nodeType?n.node==e:e.contains(n.node))&&(n.pos=this.text.length+(Eb(e,n.node,n.offset)?t:0))}}function Eb(e,t,n){for(;;){if(!t||n<Im(t))return!1;if(t==e)return!0;n=Fm(t)+1,t=t.parentNode}}class Cb{constructor(e,t){this.node=e,this.offset=t,this.pos=-1}}class Tb{constructor(e,t,n,r){this.typeOver=r,this.bounds=null,this.text="",this.domChanged=t>-1;let{impreciseHead:i,impreciseAnchor:o}=e.docView;if(e.state.readOnly&&t>-1)this.newSel=null;else if(t>-1&&(this.bounds=e.docView.domBoundsAround(t,n,0))){let t=i||o?[]:Rb(e),n=new Sb(t,e.state);n.readRange(this.bounds.startDOM,this.bounds.endDOM),this.text=n.text,this.newSel=Pb(t,this.bounds.from)}else{let t=e.observer.selectionRange,n=i&&i.node==t.focusNode&&i.offset==t.focusOffset||!Tm(e.contentDOM,t.focusNode)?e.state.selection.main.head:e.docView.posFromDOM(t.focusNode,t.focusOffset),r=o&&o.node==t.anchorNode&&o.offset==t.anchorOffset||!Tm(e.contentDOM,t.anchorNode)?e.state.selection.main.anchor:e.docView.posFromDOM(t.anchorNode,t.anchorOffset),s=e.viewport;if((vv.ios||vv.chrome)&&e.state.selection.main.empty&&n!=r&&(s.from>0||s.to<e.state.doc.length)){let t=Math.min(n,r),i=Math.max(n,r),o=s.from-t,a=s.to-i;0!=o&&1!=o&&0!=t||0!=a&&-1!=a&&i!=e.state.doc.length||(n=0,r=e.state.doc.length)}this.newSel=eg.single(r,n)}}}function Ab(e,t){let n,{newSel:r}=t,i=e.state.selection.main,o=e.inputState.lastKeyTime>Date.now()-100?e.inputState.lastKeyCode:-1;if(t.bounds){let{from:r,to:s}=t.bounds,a=i.from,l=null;(8===o||vv.android&&t.text.length<s-r)&&(a=i.to,l="end");let c=Fb(e.state.doc.sliceString(r,s,Ob),t.text,a-r,l);c&&(vv.chrome&&13==o&&c.toB==c.from+2&&t.text.slice(c.from,c.toB)==Ob+Ob&&c.toB--,n={from:r+c.from,to:r+c.toA,insert:wp.of(t.text.slice(c.from,c.toB).split(Ob))})}else r&&(!e.hasFocus&&e.state.facet(Ry)||r.main.eq(i))&&(r=null);if(!n&&!r)return!1;if(!n&&t.typeOver&&!i.empty&&r&&r.main.empty?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,i.to)}:n&&n.from>=i.from&&n.to<=i.to&&(n.from!=i.from||n.to!=i.to)&&i.to-i.from-(n.to-n.from)<=4?n={from:i.from,to:i.to,insert:e.state.doc.slice(i.from,n.from).append(n.insert).append(e.state.doc.slice(n.to,i.to))}:(vv.mac||vv.android)&&n&&n.from==n.to&&n.from==i.head-1&&/^\. ?$/.test(n.insert.toString())&&"off"==e.contentDOM.getAttribute("autocorrect")?(r&&2==n.insert.length&&(r=eg.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:wp.of([" "])}):vv.chrome&&n&&n.from==n.to&&n.from==i.head&&"\n "==n.insert.toString()&&e.lineWrapping&&(r&&(r=eg.single(r.main.anchor-1,r.main.head-1)),n={from:i.from,to:i.to,insert:wp.of([" "])}),n)return Db(e,n,r,o);if(r&&!r.main.eq(i)){let t=!1,n="select";return e.inputState.lastSelectionTime>Date.now()-50&&("select"==e.inputState.lastSelectionOrigin&&(t=!0),n=e.inputState.lastSelectionOrigin),e.dispatch({selection:r,scrollIntoView:t,userEvent:n}),!0}return!1}function Db(e,t,n,r=-1){if(vv.ios&&e.inputState.flushIOSKey(t))return!0;let i=e.state.selection.main;if(vv.android&&(t.to==i.to&&(t.from==i.from||t.from==i.from-1&&" "==e.state.sliceDoc(t.from,i.from))&&1==t.insert.length&&2==t.insert.lines&&Qm(e.contentDOM,"Enter",13)||(t.from==i.from-1&&t.to==i.to&&0==t.insert.length||8==r&&t.insert.length<t.to-t.from&&t.to>i.head)&&Qm(e.contentDOM,"Backspace",8)||t.from==i.from&&t.to==i.to+1&&0==t.insert.length&&Qm(e.contentDOM,"Delete",46)))return!0;let o,s=t.insert.toString();e.inputState.composing>=0&&e.inputState.composing++;let a=()=>o||(o=Mb(e,t,n));return e.state.facet(ky).some((n=>n(e,t.from,t.to,s,a)))||e.dispatch(a()),!0}function Mb(e,t,n){let r,i=e.state,o=i.selection.main;if(t.from>=o.from&&t.to<=o.to&&t.to-t.from>=(o.to-o.from)/3&&(!n||n.main.empty&&n.main.from==t.from+t.insert.length)&&e.inputState.composing<0){let n=o.from<t.from?i.sliceDoc(o.from,t.from):"",s=o.to>t.to?i.sliceDoc(t.to,o.to):"";r=i.replaceSelection(e.state.toText(n+t.insert.sliceString(0,void 0,e.state.lineBreak)+s))}else{let s=i.changes(t),a=n&&n.main.to<=s.newLength?n.main:void 0;if(i.selection.ranges.length>1&&e.inputState.composing>=0&&t.to<=o.to&&t.to>=o.to-10){let l,c=e.state.sliceDoc(t.from,t.to),u=n&&Ky(e,n.main.head);if(u){let e=t.insert.length-(t.to-t.from);l={from:u.from,to:u.to-e}}else l=e.state.doc.lineAt(o.head);let h=o.to-t.to,d=o.to-o.from;r=i.changeByRange((n=>{if(n.from==o.from&&n.to==o.to)return{changes:s,range:a||n.map(s)};let r=n.to-h,u=r-c.length;if(n.to-n.from!=d||e.state.sliceDoc(u,r)!=c||n.to>=l.from&&n.from<=l.to)return{range:n};let f=i.changes({from:u,to:r,insert:t.insert}),p=n.to-o.to;return{changes:f,range:a?eg.range(Math.max(0,a.anchor+p),Math.max(0,a.head+p)):n.map(f)}}))}else r={changes:s,selection:a&&i.selection.replaceRange(a)}}let s="input.type";return(e.composing||e.inputState.compositionPendingChange&&e.inputState.compositionEndedAt>Date.now()-50)&&(e.inputState.compositionPendingChange=!1,s+=".compose",e.inputState.compositionFirstChange&&(s+=".start",e.inputState.compositionFirstChange=!1)),i.update(r,{userEvent:s,scrollIntoView:!0})}function Fb(e,t,n,r){let i=Math.min(e.length,t.length),o=0;while(o<i&&e.charCodeAt(o)==t.charCodeAt(o))o++;if(o==i&&e.length==t.length)return null;let s=e.length,a=t.length;while(s>0&&a>0&&e.charCodeAt(s-1)==t.charCodeAt(a-1))s--,a--;if("end"==r){let e=Math.max(0,o-Math.min(s,a));n-=s+e-o}if(s<o&&e.length<t.length){let e=n<=o&&n>=s?o-n:0;o-=e,a=o+(a-s),s=o}else if(a<o){let e=n<=o&&n>=a?o-n:0;o-=e,s=o+(s-a),a=o}return{from:o,toA:s,toB:a}}function Rb(e){let t=[];if(e.root.activeElement!=e.contentDOM)return t;let{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}=e.observer.selectionRange;return n&&(t.push(new Cb(n,r)),i==n&&o==r||t.push(new Cb(i,o))),t}function Pb(e,t){if(0==e.length)return null;let n=e[0].pos,r=2==e.length?e[1].pos:n;return n>-1&&r>-1?eg.single(n+t,r+t):null}class Ib{setSelectionOrigin(e){this.lastSelectionOrigin=e,this.lastSelectionTime=Date.now()}constructor(e){this.view=e,this.lastKeyCode=0,this.lastKeyTime=0,this.lastTouchTime=0,this.lastFocusTime=0,this.lastScrollTop=0,this.lastScrollLeft=0,this.pendingIOSKey=void 0,this.tabFocusMode=-1,this.lastSelectionOrigin=null,this.lastSelectionTime=0,this.lastContextMenu=0,this.scrollHandlers=[],this.handlers=Object.create(null),this.composing=-1,this.compositionFirstChange=null,this.compositionEndedAt=0,this.compositionPendingKey=!1,this.compositionPendingChange=!1,this.mouseSelection=null,this.draggedContent=null,this.handleEvent=this.handleEvent.bind(this),this.notifiedFocused=e.hasFocus,vv.safari&&e.contentDOM.addEventListener("input",(()=>null)),vv.gecko&&ww(e.contentDOM.ownerDocument)}handleEvent(e){Yb(this.view,e)&&!this.ignoreDuringComposition(e)&&("keydown"==e.type&&this.keydown(e)||this.runHandlers(e.type,e))}runHandlers(e,t){let n=this.handlers[e];if(n){for(let e of n.observers)e(this.view,t);for(let e of n.handlers){if(t.defaultPrevented)break;if(e(this.view,t)){t.preventDefault();break}}}}ensureHandlers(e){let t=$b(e),n=this.handlers,r=this.view.contentDOM;for(let i in t)if("scroll"!=i){let e=!t[i].handlers.length,o=n[i];o&&e!=!o.handlers.length&&(r.removeEventListener(i,this.handleEvent),o=null),o||r.addEventListener(i,this.handleEvent,{passive:e})}for(let i in n)"scroll"==i||t[i]||r.removeEventListener(i,this.handleEvent);this.handlers=t}keydown(e){if(this.lastKeyCode=e.keyCode,this.lastKeyTime=Date.now(),9==e.keyCode&&this.tabFocusMode>-1&&(!this.tabFocusMode||Date.now()<=this.tabFocusMode))return!0;if(this.tabFocusMode>0&&27!=e.keyCode&&Bb.indexOf(e.keyCode)<0&&(this.tabFocusMode=-1),vv.android&&vv.chrome&&!e.synthetic&&(13==e.keyCode||8==e.keyCode))return this.view.observer.delayAndroidKey(e.key,e.keyCode),!0;let t;return!vv.ios||e.synthetic||e.altKey||e.metaKey||!((t=Nb.find((t=>t.keyCode==e.keyCode)))&&!e.ctrlKey||jb.indexOf(e.key)>-1&&e.ctrlKey&&!e.shiftKey)?(229!=e.keyCode&&this.view.observer.forceFlush(),!1):(this.pendingIOSKey=t||e,setTimeout((()=>this.flushIOSKey()),250),!0)}flushIOSKey(e){let t=this.pendingIOSKey;return!!t&&(!("Enter"==t.key&&e&&e.from<e.to&&/^\S+$/.test(e.insert.toString()))&&(this.pendingIOSKey=void 0,Qm(this.view.contentDOM,t.key,t.keyCode,t instanceof KeyboardEvent?t:void 0)))}ignoreDuringComposition(e){return!!/^key/.test(e.type)&&(this.composing>0||!!(vv.safari&&!vv.ios&&this.compositionPendingKey&&Date.now()-this.compositionEndedAt<100)&&(this.compositionPendingKey=!1,!0))}startMouseSelection(e){this.mouseSelection&&this.mouseSelection.destroy(),this.mouseSelection=e}update(e){this.view.observer.update(e),this.mouseSelection&&this.mouseSelection.update(e),this.draggedContent&&e.docChanged&&(this.draggedContent=this.draggedContent.map(e.changes)),e.transactions.length&&(this.lastKeyCode=this.lastSelectionTime=0)}destroy(){this.mouseSelection&&this.mouseSelection.destroy()}}function Lb(e,t){return(n,r)=>{try{return t.call(e,r,n)}catch(i){Fy(n.state,i)}}}function $b(e){let t=Object.create(null);function n(e){return t[e]||(t[e]={observers:[],handlers:[]})}for(let r of e){let e=r.spec;if(e&&e.domEventHandlers)for(let t in e.domEventHandlers){let i=e.domEventHandlers[t];i&&n(t).handlers.push(Lb(r.value,i))}if(e&&e.domEventObservers)for(let t in e.domEventObservers){let i=e.domEventObservers[t];i&&n(t).observers.push(Lb(r.value,i))}}for(let r in Xb)n(r).handlers.push(Xb[r]);for(let r in Zb)n(r).observers.push(Zb[r]);return t}const Nb=[{key:"Backspace",keyCode:8,inputType:"deleteContentBackward"},{key:"Enter",keyCode:13,inputType:"insertParagraph"},{key:"Enter",keyCode:13,inputType:"insertLineBreak"},{key:"Delete",keyCode:46,inputType:"deleteContentForward"}],jb="dthko",Bb=[16,17,18,20,91,92,224,225],Vb=6;function qb(e){return.7*Math.max(0,e)+8}function zb(e,t){return Math.max(Math.abs(e.clientX-t.clientX),Math.abs(e.clientY-t.clientY))}class Hb{constructor(e,t,n,r){this.view=e,this.startEvent=t,this.style=n,this.mustSelect=r,this.scrollSpeed={x:0,y:0},this.scrolling=-1,this.lastEvent=t,this.scrollParents=Bm(e.contentDOM),this.atoms=e.state.facet(qy).map((t=>t(e)));let i=e.contentDOM.ownerDocument;i.addEventListener("mousemove",this.move=this.move.bind(this)),i.addEventListener("mouseup",this.up=this.up.bind(this)),this.extend=t.shiftKey,this.multiple=e.state.facet(Qg.allowMultipleSelections)&&Wb(e,t),this.dragging=!(!Ub(e,t)||1!=cw(t))&&null}start(e){!1===this.dragging&&this.select(e)}move(e){if(0==e.buttons)return this.destroy();if(this.dragging||null==this.dragging&&zb(this.startEvent,e)<10)return;this.select(this.lastEvent=e);let t=0,n=0,r=0,i=0,o=this.view.win.innerWidth,s=this.view.win.innerHeight;this.scrollParents.x&&({left:r,right:o}=this.scrollParents.x.getBoundingClientRect()),this.scrollParents.y&&({top:i,bottom:s}=this.scrollParents.y.getBoundingClientRect());let a=Qy(this.view);e.clientX-a.left<=r+Vb?t=-qb(r-e.clientX):e.clientX+a.right>=o-Vb&&(t=qb(e.clientX-o)),e.clientY-a.top<=i+Vb?n=-qb(i-e.clientY):e.clientY+a.bottom>=s-Vb&&(n=qb(e.clientY-s)),this.setScrollSpeed(t,n)}up(e){null==this.dragging&&this.select(this.lastEvent),this.dragging||e.preventDefault(),this.destroy()}destroy(){this.setScrollSpeed(0,0);let e=this.view.contentDOM.ownerDocument;e.removeEventListener("mousemove",this.move),e.removeEventListener("mouseup",this.up),this.view.inputState.mouseSelection=this.view.inputState.draggedContent=null}setScrollSpeed(e,t){this.scrollSpeed={x:e,y:t},e||t?this.scrolling<0&&(this.scrolling=setInterval((()=>this.scroll()),50)):this.scrolling>-1&&(clearInterval(this.scrolling),this.scrolling=-1)}scroll(){let{x:e,y:t}=this.scrollSpeed;e&&this.scrollParents.x&&(this.scrollParents.x.scrollLeft+=e,e=0),t&&this.scrollParents.y&&(this.scrollParents.y.scrollTop+=t,t=0),(e||t)&&this.view.win.scrollBy(e,t),!1===this.dragging&&this.select(this.lastEvent)}skipAtoms(e){let t=null;for(let n=0;n<e.ranges.length;n++){let r=e.ranges[n],i=null;if(r.empty){let e=kb(this.atoms,r.from,0);e!=r.from&&(i=eg.cursor(e,-1))}else{let e=kb(this.atoms,r.from,-1),t=kb(this.atoms,r.to,1);e==r.from&&t==r.to||(i=eg.range(r.from==r.anchor?e:t,r.from==r.head?e:t))}i&&(t||(t=e.ranges.slice()),t[n]=i)}return t?eg.create(t,e.mainIndex):e}select(e){let{view:t}=this,n=this.skipAtoms(this.style.get(e,this.extend,this.multiple));!this.mustSelect&&n.eq(t.state.selection,!1===this.dragging)||this.view.dispatch({selection:n,userEvent:"select.pointer"}),this.mustSelect=!1}update(e){e.transactions.some((e=>e.isUserEvent("input.type")))?this.destroy():this.style.update(e)&&setTimeout((()=>this.select(this.lastEvent)),20)}}function Wb(e,t){let n=e.state.facet(vy);return n.length?n[0](t):vv.mac?t.metaKey:t.ctrlKey}function Qb(e,t){let n=e.state.facet(yy);return n.length?n[0](t):vv.mac?!t.altKey:!t.ctrlKey}function Ub(e,t){let{main:n}=e.state.selection;if(n.empty)return!1;let r=Cm(e.root);if(!r||0==r.rangeCount)return!0;let i=r.getRangeAt(0).getClientRects();for(let o=0;o<i.length;o++){let e=i[o];if(e.left<=t.clientX&&e.right>=t.clientX&&e.top<=t.clientY&&e.bottom>=t.clientY)return!0}return!1}function Yb(e,t){if(!t.bubbles)return!0;if(t.defaultPrevented)return!1;for(let n,r=t.target;r!=e.contentDOM;r=r.parentNode)if(!r||11==r.nodeType||(n=tv.get(r))&&n.ignoreEvent(t))return!1;return!0}const Xb=Object.create(null),Zb=Object.create(null),Gb=vv.ie&&vv.ie_version<15||vv.ios&&vv.webkit_version<604;function Kb(e){let t=e.dom.parentNode;if(!t)return;let n=t.appendChild(document.createElement("textarea"));n.style.cssText="position: fixed; left: -10000px; top: 10px",n.focus(),setTimeout((()=>{e.focus(),n.remove(),ew(e,n.value)}),50)}function Jb(e,t,n){for(let r of e.facet(t))n=r(n,e);return n}function ew(e,t){t=Jb(e.state,Oy,t);let n,{state:r}=e,i=1,o=r.toText(t),s=o.lines==r.selection.ranges.length,a=null!=gw&&r.selection.ranges.every((e=>e.empty))&&gw==o.toString();if(a){let e=-1;n=r.changeByRange((n=>{let a=r.doc.lineAt(n.from);if(a.from==e)return{range:n};e=a.from;let l=r.toText((s?o.line(i++).text:t)+r.lineBreak);return{changes:{from:a.from,insert:l},range:eg.cursor(n.from+l.length)}}))}else n=s?r.changeByRange((e=>{let t=o.line(i++);return{changes:{from:e.from,to:e.to,insert:t.text},range:eg.cursor(e.from+t.length)}})):r.replaceSelection(o);e.dispatch(n,{userEvent:"input.paste",scrollIntoView:!0})}function tw(e,t,n,r){if(1==r)return eg.cursor(t,n);if(2==r)return ob(e.state,t,n);{let n=qv.find(e.docView,t),r=e.state.doc.lineAt(n?n.posAtEnd:t),i=n?n.posAtStart:r.from,o=n?n.posAtEnd:r.to;return o<e.state.doc.length&&o==r.to&&o++,eg.range(i,o)}}Zb.scroll=e=>{e.inputState.lastScrollTop=e.scrollDOM.scrollTop,e.inputState.lastScrollLeft=e.scrollDOM.scrollLeft},Xb.keydown=(e,t)=>(e.inputState.setSelectionOrigin("select"),27==t.keyCode&&0!=e.inputState.tabFocusMode&&(e.inputState.tabFocusMode=Date.now()+2e3),!1),Zb.touchstart=(e,t)=>{e.inputState.lastTouchTime=Date.now(),e.inputState.setSelectionOrigin("select.pointer")},Zb.touchmove=e=>{e.inputState.setSelectionOrigin("select.pointer")},Xb.mousedown=(e,t)=>{if(e.observer.flush(),e.inputState.lastTouchTime>Date.now()-2e3)return!1;let n=null;for(let r of e.state.facet(by))if(n=r(e,t),n)break;if(n||0!=t.button||(n=uw(e,t)),n){let r=!e.hasFocus;e.inputState.startMouseSelection(new Hb(e,t,n,r)),r&&e.observer.ignore((()=>{Hm(e.contentDOM);let t=e.root.activeElement;t&&!t.contains(e.contentDOM)&&t.blur()}));let i=e.inputState.mouseSelection;if(i)return i.start(t),!1===i.dragging}return!1};let nw=(e,t,n)=>t>=n.top&&t<=n.bottom&&e>=n.left&&e<=n.right;function rw(e,t,n,r){let i=qv.find(e.docView,t);if(!i)return 1;let o=t-i.posAtStart;if(0==o)return 1;if(o==i.length)return-1;let s=i.coordsAt(o,-1);if(s&&nw(n,r,s))return-1;let a=i.coordsAt(o,1);return a&&nw(n,r,a)?1:s&&s.bottom>=r?-1:1}function iw(e,t){let n=e.posAtCoords({x:t.clientX,y:t.clientY},!1);return{pos:n,bias:rw(e,n,t.clientX,t.clientY)}}const ow=vv.ie&&vv.ie_version<=11;let sw=null,aw=0,lw=0;function cw(e){if(!ow)return e.detail;let t=sw,n=lw;return sw=e,lw=Date.now(),aw=!t||n>Date.now()-400&&Math.abs(t.clientX-e.clientX)<2&&Math.abs(t.clientY-e.clientY)<2?(aw+1)%3:1}function uw(e,t){let n=iw(e,t),r=cw(t),i=e.state.selection;return{update(e){e.docChanged&&(n.pos=e.changes.mapPos(n.pos),i=i.map(e.changes))},get(t,o,s){let a,l=iw(e,t),c=tw(e,l.pos,l.bias,r);if(n.pos!=l.pos&&!o){let t=tw(e,n.pos,n.bias,r),i=Math.min(t.from,c.from),o=Math.max(t.to,c.to);c=i<c.from?eg.range(i,o):eg.range(o,i)}return o?i.replaceRange(i.main.extend(c.from,c.to)):s&&1==r&&i.ranges.length>1&&(a=hw(i,l.pos))?a:s?i.addRange(c):eg.create([c])}}}function hw(e,t){for(let n=0;n<e.ranges.length;n++){let{from:r,to:i}=e.ranges[n];if(r<=t&&i>=t)return eg.create(e.ranges.slice(0,n).concat(e.ranges.slice(n+1)),e.mainIndex==n?0:e.mainIndex-(e.mainIndex>n?1:0))}return null}function dw(e,t,n,r){if(n=Jb(e.state,Oy,n),!n)return;let i=e.posAtCoords({x:t.clientX,y:t.clientY},!1),{draggedContent:o}=e.inputState,s=r&&o&&Qb(e,t)?{from:o.from,to:o.to}:null,a={from:i,insert:n},l=e.state.changes(s?[s,a]:a);e.focus(),e.dispatch({changes:l,selection:{anchor:l.mapPos(i,-1),head:l.mapPos(i,1)},userEvent:s?"move.drop":"input.drop"}),e.inputState.draggedContent=null}function fw(e,t){let n=e.dom.parentNode;if(!n)return;let r=n.appendChild(document.createElement("textarea"));r.style.cssText="position: fixed; left: -10000px; top: 10px",r.value=t,r.focus(),r.selectionEnd=t.length,r.selectionStart=0,setTimeout((()=>{r.remove(),e.focus()}),50)}function pw(e){let t=[],n=[],r=!1;for(let i of e.selection.ranges)i.empty||(t.push(e.sliceDoc(i.from,i.to)),n.push(i));if(!t.length){let i=-1;for(let{from:r}of e.selection.ranges){let o=e.doc.lineAt(r);o.number>i&&(t.push(o.text),n.push({from:o.from,to:Math.min(e.doc.length,o.to+1)})),i=o.number}r=!0}return{text:Jb(e,Sy,t.join(e.lineBreak)),ranges:n,linewise:r}}Xb.dragstart=(e,t)=>{let{selection:{main:n}}=e.state;if(t.target.draggable){let r=e.docView.nearest(t.target);if(r&&r.isWidget){let e=r.posAtStart,t=e+r.length;(e>=n.to||t<=n.from)&&(n=eg.range(e,t))}}let{inputState:r}=e;return r.mouseSelection&&(r.mouseSelection.dragging=!0),r.draggedContent=n,t.dataTransfer&&(t.dataTransfer.setData("Text",Jb(e.state,Sy,e.state.sliceDoc(n.from,n.to))),t.dataTransfer.effectAllowed="copyMove"),!1},Xb.dragend=e=>(e.inputState.draggedContent=null,!1),Xb.drop=(e,t)=>{if(!t.dataTransfer)return!1;if(e.state.readOnly)return!0;let n=t.dataTransfer.files;if(n&&n.length){let r=Array(n.length),i=0,o=()=>{++i==n.length&&dw(e,t,r.filter((e=>null!=e)).join(e.state.lineBreak),!1)};for(let e=0;e<n.length;e++){let t=new FileReader;t.onerror=o,t.onload=()=>{/[\x00-\x08\x0e-\x1f]{2}/.test(t.result)||(r[e]=t.result),o()},t.readAsText(n[e])}return!0}{let n=t.dataTransfer.getData("Text");if(n)return dw(e,t,n,!0),!0}return!1},Xb.paste=(e,t)=>{if(e.state.readOnly)return!0;e.observer.flush();let n=Gb?null:t.clipboardData;return n?(ew(e,n.getData("text/plain")||n.getData("text/uri-list")),!0):(Kb(e),!1)};let gw=null;Xb.copy=Xb.cut=(e,t)=>{let{text:n,ranges:r,linewise:i}=pw(e.state);if(!n&&!i)return!1;gw=i?n:null,"cut"!=t.type||e.state.readOnly||e.dispatch({changes:r,scrollIntoView:!0,userEvent:"delete.cut"});let o=Gb?null:t.clipboardData;return o?(o.clearData(),o.setData("text/plain",n),!0):(fw(e,n),!1)};const mw=Tg.define();function vw(e,t){let n=[];for(let r of e.facet(_y)){let i=r(e,t);i&&n.push(i)}return n?e.update({effects:n,annotations:mw.of(!0)}):null}function yw(e){setTimeout((()=>{let t=e.hasFocus;if(t!=e.inputState.notifiedFocused){let n=vw(e.state,t);n?e.dispatch(n):e.update([])}}),10)}Zb.focus=e=>{e.inputState.lastFocusTime=Date.now(),e.scrollDOM.scrollTop||!e.inputState.lastScrollTop&&!e.inputState.lastScrollLeft||(e.scrollDOM.scrollTop=e.inputState.lastScrollTop,e.scrollDOM.scrollLeft=e.inputState.lastScrollLeft),yw(e)},Zb.blur=e=>{e.observer.clearSelectionRange(),yw(e)},Zb.compositionstart=Zb.compositionupdate=e=>{e.observer.editContext||(null==e.inputState.compositionFirstChange&&(e.inputState.compositionFirstChange=!0),e.inputState.composing<0&&(e.inputState.composing=0))},Zb.compositionend=e=>{e.observer.editContext||(e.inputState.composing=-1,e.inputState.compositionEndedAt=Date.now(),e.inputState.compositionPendingKey=!0,e.inputState.compositionPendingChange=e.observer.pendingRecords().length>0,e.inputState.compositionFirstChange=null,vv.chrome&&vv.android?e.observer.flushSoon():e.inputState.compositionPendingChange?Promise.resolve().then((()=>e.observer.flush())):setTimeout((()=>{e.inputState.composing<0&&e.docView.hasComposition&&e.update([])}),50))},Zb.contextmenu=e=>{e.inputState.lastContextMenu=Date.now()},Xb.beforeinput=(e,t)=>{var n,r;if("insertReplacementText"==t.inputType&&e.observer.editContext){let r=null===(n=t.dataTransfer)||void 0===n?void 0:n.getData("text/plain"),i=t.getTargetRanges();if(r&&i.length){let t=i[0],n=e.posAtDOM(t.startContainer,t.startOffset),o=e.posAtDOM(t.endContainer,t.endOffset);return Db(e,{from:n,to:o,insert:e.state.toText(r)},null),!0}}let i;if(vv.chrome&&vv.android&&(i=Nb.find((e=>e.inputType==t.inputType)))&&(e.observer.delayAndroidKey(i.key,i.keyCode),"Backspace"==i.key||"Delete"==i.key)){let t=(null===(r=window.visualViewport)||void 0===r?void 0:r.height)||0;setTimeout((()=>{var n;((null===(n=window.visualViewport)||void 0===n?void 0:n.height)||0)>t+10&&e.hasFocus&&(e.contentDOM.blur(),e.focus())}),100)}return vv.ios&&"deleteContentForward"==t.inputType&&e.observer.flushSoon(),vv.safari&&"insertText"==t.inputType&&e.inputState.composing>=0&&setTimeout((()=>Zb.compositionend(e,t)),20),!1};const bw=new Set;function ww(e){bw.has(e)||(bw.add(e),e.addEventListener("copy",(()=>{})),e.addEventListener("cut",(()=>{})))}const xw=["pre-wrap","normal","pre-line","break-spaces"];let kw=!1;function _w(){kw=!1}class Ow{constructor(e){this.lineWrapping=e,this.doc=wp.empty,this.heightSamples={},this.lineHeight=14,this.charWidth=7,this.textHeight=14,this.lineLength=30}heightForGap(e,t){let n=this.doc.lineAt(t).number-this.doc.lineAt(e).number+1;return this.lineWrapping&&(n+=Math.max(0,Math.ceil((t-e-n*this.lineLength*.5)/this.lineLength))),this.lineHeight*n}heightForLine(e){if(!this.lineWrapping)return this.lineHeight;let t=1+Math.max(0,Math.ceil((e-this.lineLength)/(this.lineLength-5)));return t*this.lineHeight}setDoc(e){return this.doc=e,this}mustRefreshForWrapping(e){return xw.indexOf(e)>-1!=this.lineWrapping}mustRefreshForHeights(e){let t=!1;for(let n=0;n<e.length;n++){let r=e[n];r<0?n++:this.heightSamples[Math.floor(10*r)]||(t=!0,this.heightSamples[Math.floor(10*r)]=!0)}return t}refresh(e,t,n,r,i,o){let s=xw.indexOf(e)>-1,a=Math.round(t)!=Math.round(this.lineHeight)||this.lineWrapping!=s;if(this.lineWrapping=s,this.lineHeight=t,this.charWidth=n,this.textHeight=r,this.lineLength=i,a){this.heightSamples={};for(let e=0;e<o.length;e++){let t=o[e];t<0?e++:this.heightSamples[Math.floor(10*t)]=!0}}return a}}class Sw{constructor(e,t){this.from=e,this.heights=t,this.index=0}get more(){return this.index<this.heights.length}}class Ew{constructor(e,t,n,r,i){this.from=e,this.length=t,this.top=n,this.height=r,this._content=i}get type(){return"number"==typeof this._content?Pv.Text:Array.isArray(this._content)?this._content:this._content.type}get to(){return this.from+this.length}get bottom(){return this.top+this.height}get widget(){return this._content instanceof Nv?this._content.widget:null}get widgetLineBreaks(){return"number"==typeof this._content?this._content:0}join(e){let t=(Array.isArray(this._content)?this._content:[this]).concat(Array.isArray(e._content)?e._content:[e]);return new Ew(this.from,this.length+e.length,this.top,this.height+e.height,t)}}var Cw=function(e){return e[e["ByPos"]=0]="ByPos",e[e["ByHeight"]=1]="ByHeight",e[e["ByPosNoHeight"]=2]="ByPosNoHeight",e}(Cw||(Cw={}));const Tw=.001;class Aw{constructor(e,t,n=2){this.length=e,this.height=t,this.flags=n}get outdated(){return(2&this.flags)>0}set outdated(e){this.flags=(e?2:0)|-3&this.flags}setHeight(e){this.height!=e&&(Math.abs(this.height-e)>Tw&&(kw=!0),this.height=e)}replace(e,t,n){return Aw.of(n)}decomposeLeft(e,t){t.push(this)}decomposeRight(e,t){t.push(this)}applyChanges(e,t,n,r){let i=this,o=n.doc;for(let s=r.length-1;s>=0;s--){let{fromA:a,toA:l,fromB:c,toB:u}=r[s],h=i.lineAt(a,Cw.ByPosNoHeight,n.setDoc(t),0,0),d=h.to>=l?h:i.lineAt(l,Cw.ByPosNoHeight,n,0,0);u+=d.to-l,l=d.to;while(s>0&&h.from<=r[s-1].toA)a=r[s-1].fromA,c=r[s-1].fromB,s--,a<h.from&&(h=i.lineAt(a,Cw.ByPosNoHeight,n,0,0));c+=h.from-a,a=h.from;let f=$w.build(n.setDoc(o),e,c,u);i=Dw(i,i.replace(a,l,f))}return i.updateHeight(n,0)}static empty(){return new Fw(0,0)}static of(e){if(1==e.length)return e[0];let t=0,n=e.length,r=0,i=0;for(;;)if(t==n)if(r>2*i){let i=e[t-1];i.break?e.splice(--t,1,i.left,null,i.right):e.splice(--t,1,i.left,i.right),n+=1+i.break,r-=i.size}else{if(!(i>2*r))break;{let t=e[n];t.break?e.splice(n,1,t.left,null,t.right):e.splice(n,1,t.left,t.right),n+=2+t.break,i-=t.size}}else if(r<i){let n=e[t++];n&&(r+=n.size)}else{let t=e[--n];t&&(i+=t.size)}let o=0;return null==e[t-1]?(o=1,t--):null==e[t]&&(o=1,n++),new Pw(Aw.of(e.slice(0,t)),o,Aw.of(e.slice(n)))}}function Dw(e,t){return e==t?e:(e.constructor!=t.constructor&&(kw=!0),t)}Aw.prototype.size=1;class Mw extends Aw{constructor(e,t,n){super(e,t),this.deco=n}blockAt(e,t,n,r){return new Ew(r,this.length,n,this.height,this.deco||0)}lineAt(e,t,n,r,i){return this.blockAt(0,n,r,i)}forEachLine(e,t,n,r,i,o){e<=i+this.length&&t>=i&&o(this.blockAt(0,n,r,i))}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more&&this.setHeight(r.heights[r.index++]),this.outdated=!1,this}toString(){return`block(${this.length})`}}class Fw extends Mw{constructor(e,t){super(e,t,null),this.collapsed=0,this.widgetHeight=0,this.breaks=0}blockAt(e,t,n,r){return new Ew(r,this.length,n,this.height,this.breaks)}replace(e,t,n){let r=n[0];return 1==n.length&&(r instanceof Fw||r instanceof Rw&&4&r.flags)&&Math.abs(this.length-r.length)<10?(r instanceof Rw?r=new Fw(r.length,this.height):r.height=this.height,this.outdated||(r.outdated=!1),r):Aw.of(n)}updateHeight(e,t=0,n=!1,r){return r&&r.from<=t&&r.more?this.setHeight(r.heights[r.index++]):(n||this.outdated)&&this.setHeight(Math.max(this.widgetHeight,e.heightForLine(this.length-this.collapsed))+this.breaks*e.lineHeight),this.outdated=!1,this}toString(){return`line(${this.length}${this.collapsed?-this.collapsed:""}${this.widgetHeight?":"+this.widgetHeight:""})`}}class Rw extends Aw{constructor(e){super(e,0)}heightMetrics(e,t){let n,r=e.doc.lineAt(t).number,i=e.doc.lineAt(t+this.length).number,o=i-r+1,s=0;if(e.lineWrapping){let t=Math.min(this.height,e.lineHeight*o);n=t/o,this.length>o+1&&(s=(this.height-t)/(this.length-o-1))}else n=this.height/o;return{firstLine:r,lastLine:i,perLine:n,perChar:s}}blockAt(e,t,n,r){let{firstLine:i,lastLine:o,perLine:s,perChar:a}=this.heightMetrics(t,r);if(t.lineWrapping){let i=r+(e<t.lineHeight?0:Math.round(Math.max(0,Math.min(1,(e-n)/this.height))*this.length)),o=t.doc.lineAt(i),l=s+o.length*a,c=Math.max(n,e-l/2);return new Ew(o.from,o.length,c,l,0)}{let r=Math.max(0,Math.min(o-i,Math.floor((e-n)/s))),{from:a,length:l}=t.doc.line(i+r);return new Ew(a,l,n+s*r,s,0)}}lineAt(e,t,n,r,i){if(t==Cw.ByHeight)return this.blockAt(e,n,r,i);if(t==Cw.ByPosNoHeight){let{from:t,to:r}=n.doc.lineAt(e);return new Ew(t,r-t,0,0,0)}let{firstLine:o,perLine:s,perChar:a}=this.heightMetrics(n,i),l=n.doc.lineAt(e),c=s+l.length*a,u=l.number-o,h=r+s*u+a*(l.from-i-u);return new Ew(l.from,l.length,Math.max(r,Math.min(h,r+this.height-c)),c,0)}forEachLine(e,t,n,r,i,o){e=Math.max(e,i),t=Math.min(t,i+this.length);let{firstLine:s,perLine:a,perChar:l}=this.heightMetrics(n,i);for(let c=e,u=r;c<=t;){let t=n.doc.lineAt(c);if(c==e){let n=t.number-s;u+=a*n+l*(e-i-n)}let r=a+l*t.length;o(new Ew(t.from,t.length,u,r,0)),u+=r,c=t.to+1}}replace(e,t,n){let r=this.length-t;if(r>0){let e=n[n.length-1];e instanceof Rw?n[n.length-1]=new Rw(e.length+r):n.push(null,new Rw(r-1))}if(e>0){let t=n[0];t instanceof Rw?n[0]=new Rw(e+t.length):n.unshift(new Rw(e-1),null)}return Aw.of(n)}decomposeLeft(e,t){t.push(new Rw(e-1),null)}decomposeRight(e,t){t.push(null,new Rw(this.length-e-1))}updateHeight(e,t=0,n=!1,r){let i=t+this.length;if(r&&r.from<=t+this.length&&r.more){let n=[],o=Math.max(t,r.from),s=-1;r.from>t&&n.push(new Rw(r.from-t-1).updateHeight(e,t));while(o<=i&&r.more){let t=e.doc.lineAt(o).length;n.length&&n.push(null);let i=r.heights[r.index++];-1==s?s=i:Math.abs(i-s)>=Tw&&(s=-2);let a=new Fw(t,i);a.outdated=!1,n.push(a),o+=t+1}o<=i&&n.push(null,new Rw(i-o).updateHeight(e,o));let a=Aw.of(n);return(s<0||Math.abs(a.height-this.height)>=Tw||Math.abs(s-this.heightMetrics(e,t).perLine)>=Tw)&&(kw=!0),Dw(this,a)}return(n||this.outdated)&&(this.setHeight(e.heightForGap(t,t+this.length)),this.outdated=!1),this}toString(){return`gap(${this.length})`}}class Pw extends Aw{constructor(e,t,n){super(e.length+t+n.length,e.height+n.height,t|(e.outdated||n.outdated?2:0)),this.left=e,this.right=n,this.size=e.size+n.size}get break(){return 1&this.flags}blockAt(e,t,n,r){let i=n+this.left.height;return e<i?this.left.blockAt(e,t,n,r):this.right.blockAt(e,t,i,r+this.left.length+this.break)}lineAt(e,t,n,r,i){let o=r+this.left.height,s=i+this.left.length+this.break,a=t==Cw.ByHeight?e<o:e<s,l=a?this.left.lineAt(e,t,n,r,i):this.right.lineAt(e,t,n,o,s);if(this.break||(a?l.to<s:l.from>s))return l;let c=t==Cw.ByPosNoHeight?Cw.ByPosNoHeight:Cw.ByPos;return a?l.join(this.right.lineAt(s,c,n,o,s)):this.left.lineAt(s,c,n,r,i).join(l)}forEachLine(e,t,n,r,i,o){let s=r+this.left.height,a=i+this.left.length+this.break;if(this.break)e<a&&this.left.forEachLine(e,t,n,r,i,o),t>=a&&this.right.forEachLine(e,t,n,s,a,o);else{let l=this.lineAt(a,Cw.ByPos,n,r,i);e<l.from&&this.left.forEachLine(e,l.from-1,n,r,i,o),l.to>=e&&l.from<=t&&o(l),t>l.to&&this.right.forEachLine(l.to+1,t,n,s,a,o)}}replace(e,t,n){let r=this.left.length+this.break;if(t<r)return this.balanced(this.left.replace(e,t,n),this.right);if(e>this.left.length)return this.balanced(this.left,this.right.replace(e-r,t-r,n));let i=[];e>0&&this.decomposeLeft(e,i);let o=i.length;for(let s of n)i.push(s);if(e>0&&Iw(i,o-1),t<this.length){let e=i.length;this.decomposeRight(t,i),Iw(i,e)}return Aw.of(i)}decomposeLeft(e,t){let n=this.left.length;if(e<=n)return this.left.decomposeLeft(e,t);t.push(this.left),this.break&&(n++,e>=n&&t.push(null)),e>n&&this.right.decomposeLeft(e-n,t)}decomposeRight(e,t){let n=this.left.length,r=n+this.break;if(e>=r)return this.right.decomposeRight(e-r,t);e<n&&this.left.decomposeRight(e,t),this.break&&e<r&&t.push(null),t.push(this.right)}balanced(e,t){return e.size>2*t.size||t.size>2*e.size?Aw.of(this.break?[e,null,t]:[e,t]):(this.left=Dw(this.left,e),this.right=Dw(this.right,t),this.setHeight(e.height+t.height),this.outdated=e.outdated||t.outdated,this.size=e.size+t.size,this.length=e.length+this.break+t.length,this)}updateHeight(e,t=0,n=!1,r){let{left:i,right:o}=this,s=t+i.length+this.break,a=null;return r&&r.from<=t+i.length&&r.more?a=i=i.updateHeight(e,t,n,r):i.updateHeight(e,t,n),r&&r.from<=s+o.length&&r.more?a=o=o.updateHeight(e,s,n,r):o.updateHeight(e,s,n),a?this.balanced(i,o):(this.height=this.left.height+this.right.height,this.outdated=!1,this)}toString(){return this.left+(this.break?" ":"-")+this.right}}function Iw(e,t){let n,r;null==e[t]&&(n=e[t-1])instanceof Rw&&(r=e[t+1])instanceof Rw&&e.splice(t-1,3,new Rw(n.length+1+r.length))}const Lw=5;class $w{constructor(e,t){this.pos=e,this.oracle=t,this.nodes=[],this.lineStart=-1,this.lineEnd=-1,this.covering=null,this.writtenTo=e}get isCovered(){return this.covering&&this.nodes[this.nodes.length-1]==this.covering}span(e,t){if(this.lineStart>-1){let e=Math.min(t,this.lineEnd),n=this.nodes[this.nodes.length-1];n instanceof Fw?n.length+=e-this.pos:(e>this.pos||!this.isCovered)&&this.nodes.push(new Fw(e-this.pos,-1)),this.writtenTo=e,t>e&&(this.nodes.push(null),this.writtenTo++,this.lineStart=-1)}this.pos=t}point(e,t,n){if(e<t||n.heightRelevant){let r=n.widget?n.widget.estimatedHeight:0,i=n.widget?n.widget.lineBreaks:0;r<0&&(r=this.oracle.lineHeight);let o=t-e;n.block?this.addBlock(new Mw(o,r,n)):(o||i||r>=Lw)&&this.addLineDeco(r,i,o)}else t>e&&this.span(e,t);this.lineEnd>-1&&this.lineEnd<this.pos&&(this.lineEnd=this.oracle.doc.lineAt(this.pos).to)}enterLine(){if(this.lineStart>-1)return;let{from:e,to:t}=this.oracle.doc.lineAt(this.pos);this.lineStart=e,this.lineEnd=t,this.writtenTo<e&&((this.writtenTo<e-1||null==this.nodes[this.nodes.length-1])&&this.nodes.push(this.blankContent(this.writtenTo,e-1)),this.nodes.push(null)),this.pos>e&&this.nodes.push(new Fw(this.pos-e,-1)),this.writtenTo=this.pos}blankContent(e,t){let n=new Rw(t-e);return this.oracle.doc.lineAt(e).to==t&&(n.flags|=4),n}ensureLine(){this.enterLine();let e=this.nodes.length?this.nodes[this.nodes.length-1]:null;if(e instanceof Fw)return e;let t=new Fw(0,-1);return this.nodes.push(t),t}addBlock(e){this.enterLine();let t=e.deco;t&&t.startSide>0&&!this.isCovered&&this.ensureLine(),this.nodes.push(e),this.writtenTo=this.pos=this.pos+e.length,t&&t.endSide>0&&(this.covering=e)}addLineDeco(e,t,n){let r=this.ensureLine();r.length+=n,r.collapsed+=n,r.widgetHeight=Math.max(r.widgetHeight,e),r.breaks+=t,this.writtenTo=this.pos=this.pos+n}finish(e){let t=0==this.nodes.length?null:this.nodes[this.nodes.length-1];!(this.lineStart>-1)||t instanceof Fw||this.isCovered?(this.writtenTo<this.pos||null==t)&&this.nodes.push(this.blankContent(this.writtenTo,this.pos)):this.nodes.push(new Fw(0,-1));let n=e;for(let r of this.nodes)r instanceof Fw&&r.updateHeight(this.oracle,n),n+=r?r.length:1;return this.nodes}static build(e,t,n,r){let i=new $w(n,e);return Kg.spans(t,n,r,i,0),i.finish(n)}}function Nw(e,t,n){let r=new jw;return Kg.compare(e,t,n,r,0),r.changes}class jw{constructor(){this.changes=[]}compareRange(){}comparePoint(e,t,n,r){(e<t||n&&n.heightRelevant||r&&r.heightRelevant)&&Vv(e,t,this.changes,5)}}function Bw(e,t){let n=e.getBoundingClientRect(),r=e.ownerDocument,i=r.defaultView||window,o=Math.max(0,n.left),s=Math.min(i.innerWidth,n.right),a=Math.max(0,n.top),l=Math.min(i.innerHeight,n.bottom);for(let c=e.parentNode;c&&c!=r.body;)if(1==c.nodeType){let t=c,n=window.getComputedStyle(t);if((t.scrollHeight>t.clientHeight||t.scrollWidth>t.clientWidth)&&"visible"!=n.overflow){let n=t.getBoundingClientRect();o=Math.max(o,n.left),s=Math.min(s,n.right),a=Math.max(a,n.top),l=Math.min(c==e.parentNode?i.innerHeight:l,n.bottom)}c="absolute"==n.position||"fixed"==n.position?t.offsetParent:t.parentNode}else{if(11!=c.nodeType)break;c=c.host}return{left:o-n.left,right:Math.max(o,s)-n.left,top:a-(n.top+t),bottom:Math.max(a,l)-(n.top+t)}}function Vw(e,t){let n=e.getBoundingClientRect();return{left:0,right:n.right-n.left,top:t,bottom:n.bottom-(n.top+t)}}class qw{constructor(e,t,n,r){this.from=e,this.to=t,this.size=n,this.displaySize=r}static same(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++){let r=e[n],i=t[n];if(r.from!=i.from||r.to!=i.to||r.size!=i.size)return!1}return!0}draw(e,t){return Iv.replace({widget:new zw(this.displaySize*(t?e.scaleY:e.scaleX),t)}).range(this.from,this.to)}}class zw extends Rv{constructor(e,t){super(),this.size=e,this.vertical=t}eq(e){return e.size==this.size&&e.vertical==this.vertical}toDOM(){let e=document.createElement("div");return this.vertical?e.style.height=this.size+"px":(e.style.width=this.size+"px",e.style.height="2px",e.style.display="inline-block"),e}get estimatedHeight(){return this.vertical?this.size:-1}}class Hw{constructor(e){this.state=e,this.pixelViewport={left:0,right:window.innerWidth,top:0,bottom:0},this.inView=!0,this.paddingTop=0,this.paddingBottom=0,this.contentDOMWidth=0,this.contentDOMHeight=0,this.editorHeight=0,this.editorWidth=0,this.scrollTop=0,this.scrolledToBottom=!1,this.scaleX=1,this.scaleY=1,this.scrollAnchorPos=0,this.scrollAnchorHeight=-1,this.scaler=Zw,this.scrollTarget=null,this.printing=!1,this.mustMeasureContent=!0,this.defaultTextDirection=Yv.LTR,this.visibleRanges=[],this.mustEnforceCursorAssoc=!1;let t=e.facet(jy).some((e=>"function"!=typeof e&&"cm-lineWrapping"==e.class));this.heightOracle=new Ow(t),this.stateDeco=e.facet(By).filter((e=>"function"!=typeof e)),this.heightMap=Aw.empty().applyChanges(this.stateDeco,wp.empty,this.heightOracle.setDoc(e.doc),[new Yy(0,0,0,e.doc.length)]);for(let n=0;n<2;n++)if(this.viewport=this.getViewport(0,null),!this.updateForViewport())break;this.updateViewportLines(),this.lineGaps=this.ensureLineGaps([]),this.lineGapDeco=Iv.set(this.lineGaps.map((e=>e.draw(this,!1)))),this.computeVisibleRanges()}updateForViewport(){let e=[this.viewport],{main:t}=this.state.selection;for(let n=0;n<=1;n++){let r=n?t.head:t.anchor;if(!e.some((({from:e,to:t})=>r>=e&&r<=t))){let{from:t,to:n}=this.lineBlockAt(r);e.push(new Ww(t,n))}}return this.viewports=e.sort(((e,t)=>e.from-t.from)),this.updateScaler()}updateScaler(){let e=this.scaler;return this.scaler=this.heightMap.height<=7e6?Zw:new Gw(this.heightOracle,this.heightMap,this.viewports),e.eq(this.scaler)?0:2}updateViewportLines(){this.viewportLines=[],this.heightMap.forEachLine(this.viewport.from,this.viewport.to,this.heightOracle.setDoc(this.state.doc),0,0,(e=>{this.viewportLines.push(Kw(e,this.scaler))}))}update(e,t=null){this.state=e.state;let n=this.stateDeco;this.stateDeco=this.state.facet(By).filter((e=>"function"!=typeof e));let r=e.changedRanges,i=Yy.extendWithRanges(r,Nw(n,this.stateDeco,e?e.changes:Qp.empty(this.state.doc.length))),o=this.heightMap.height,s=this.scrolledToBottom?null:this.scrollAnchorAt(this.scrollTop);_w(),this.heightMap=this.heightMap.applyChanges(this.stateDeco,e.startState.doc,this.heightOracle.setDoc(this.state.doc),i),(this.heightMap.height!=o||kw)&&(e.flags|=2),s?(this.scrollAnchorPos=e.changes.mapPos(s.from,-1),this.scrollAnchorHeight=s.top):(this.scrollAnchorPos=-1,this.scrollAnchorHeight=this.heightMap.height);let a=i.length?this.mapViewport(this.viewport,e.changes):this.viewport;(t&&(t.range.head<a.from||t.range.head>a.to)||!this.viewportIsAppropriate(a))&&(a=this.getViewport(0,t));let l=a.from!=this.viewport.from||a.to!=this.viewport.to;this.viewport=a,e.flags|=this.updateForViewport(),(l||!e.changes.empty||2&e.flags)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(this.mapLineGaps(this.lineGaps,e.changes))),e.flags|=this.computeVisibleRanges(),t&&(this.scrollTarget=t),!this.mustEnforceCursorAssoc&&e.selectionSet&&e.view.lineWrapping&&e.state.selection.main.empty&&e.state.selection.main.assoc&&!e.state.facet(Cy)&&(this.mustEnforceCursorAssoc=!0)}measure(e){let t=e.contentDOM,n=window.getComputedStyle(t),r=this.heightOracle,i=n.whiteSpace;this.defaultTextDirection="rtl"==n.direction?Yv.RTL:Yv.LTR;let o=this.heightOracle.mustRefreshForWrapping(i),s=t.getBoundingClientRect(),a=o||this.mustMeasureContent||this.contentDOMHeight!=s.height;this.contentDOMHeight=s.height,this.mustMeasureContent=!1;let l=0,c=0;if(s.width&&s.height){let{scaleX:e,scaleY:n}=Nm(t,s);(e>.005&&Math.abs(this.scaleX-e)>.005||n>.005&&Math.abs(this.scaleY-n)>.005)&&(this.scaleX=e,this.scaleY=n,l|=8,o=a=!0)}let u=(parseInt(n.paddingTop)||0)*this.scaleY,h=(parseInt(n.paddingBottom)||0)*this.scaleY;this.paddingTop==u&&this.paddingBottom==h||(this.paddingTop=u,this.paddingBottom=h,l|=10),this.editorWidth!=e.scrollDOM.clientWidth&&(r.lineWrapping&&(a=!0),this.editorWidth=e.scrollDOM.clientWidth,l|=8);let d=e.scrollDOM.scrollTop*this.scaleY;this.scrollTop!=d&&(this.scrollAnchorHeight=-1,this.scrollTop=d),this.scrolledToBottom=Zm(e.scrollDOM);let f=(this.printing?Vw:Bw)(t,this.paddingTop),p=f.top-this.pixelViewport.top,g=f.bottom-this.pixelViewport.bottom;this.pixelViewport=f;let m=this.pixelViewport.bottom>this.pixelViewport.top&&this.pixelViewport.right>this.pixelViewport.left;if(m!=this.inView&&(this.inView=m,m&&(a=!0)),!this.inView&&!this.scrollTarget)return 0;let v=s.width;if(this.contentDOMWidth==v&&this.editorHeight==e.scrollDOM.clientHeight||(this.contentDOMWidth=s.width,this.editorHeight=e.scrollDOM.clientHeight,l|=8),a){let t=e.docView.measureVisibleLineHeights(this.viewport);if(r.mustRefreshForHeights(t)&&(o=!0),o||r.lineWrapping&&Math.abs(v-this.contentDOMWidth)>r.charWidth){let{lineHeight:n,charWidth:s,textHeight:a}=e.docView.measureTextSize();o=n>0&&r.refresh(i,n,s,a,v/s,t),o&&(e.docView.minWidth=0,l|=8)}p>0&&g>0?c=Math.max(p,g):p<0&&g<0&&(c=Math.min(p,g)),_w();for(let n of this.viewports){let i=n.from==this.viewport.from?t:e.docView.measureVisibleLineHeights(n);this.heightMap=(o?Aw.empty().applyChanges(this.stateDeco,wp.empty,this.heightOracle,[new Yy(0,0,0,e.state.doc.length)]):this.heightMap).updateHeight(r,0,o,new Sw(n.from,i))}kw&&(l|=2)}let y=!this.viewportIsAppropriate(this.viewport,c)||this.scrollTarget&&(this.scrollTarget.range.head<this.viewport.from||this.scrollTarget.range.head>this.viewport.to);return y&&(2&l&&(l|=this.updateScaler()),this.viewport=this.getViewport(c,this.scrollTarget),l|=this.updateForViewport()),(2&l||y)&&this.updateViewportLines(),(this.lineGaps.length||this.viewport.to-this.viewport.from>4e3)&&this.updateLineGaps(this.ensureLineGaps(o?[]:this.lineGaps,e)),l|=this.computeVisibleRanges(),this.mustEnforceCursorAssoc&&(this.mustEnforceCursorAssoc=!1,e.docView.enforceCursorAssoc()),l}get visibleTop(){return this.scaler.fromDOM(this.pixelViewport.top)}get visibleBottom(){return this.scaler.fromDOM(this.pixelViewport.bottom)}getViewport(e,t){let n=.5-Math.max(-.5,Math.min(.5,e/1e3/2)),r=this.heightMap,i=this.heightOracle,{visibleTop:o,visibleBottom:s}=this,a=new Ww(r.lineAt(o-1e3*n,Cw.ByHeight,i,0,0).from,r.lineAt(s+1e3*(1-n),Cw.ByHeight,i,0,0).to);if(t){let{head:e}=t.range;if(e<a.from||e>a.to){let n,o=Math.min(this.editorHeight,this.pixelViewport.bottom-this.pixelViewport.top),s=r.lineAt(e,Cw.ByPos,i,0,0);n="center"==t.y?(s.top+s.bottom)/2-o/2:"start"==t.y||"nearest"==t.y&&e<a.from?s.top:s.bottom-o,a=new Ww(r.lineAt(n-500,Cw.ByHeight,i,0,0).from,r.lineAt(n+o+500,Cw.ByHeight,i,0,0).to)}}return a}mapViewport(e,t){let n=t.mapPos(e.from,-1),r=t.mapPos(e.to,1);return new Ww(this.heightMap.lineAt(n,Cw.ByPos,this.heightOracle,0,0).from,this.heightMap.lineAt(r,Cw.ByPos,this.heightOracle,0,0).to)}viewportIsAppropriate({from:e,to:t},n=0){if(!this.inView)return!0;let{top:r}=this.heightMap.lineAt(e,Cw.ByPos,this.heightOracle,0,0),{bottom:i}=this.heightMap.lineAt(t,Cw.ByPos,this.heightOracle,0,0),{visibleTop:o,visibleBottom:s}=this;return(0==e||r<=o-Math.max(10,Math.min(-n,250)))&&(t==this.state.doc.length||i>=s+Math.max(10,Math.min(n,250)))&&r>o-2e3&&i<s+2e3}mapLineGaps(e,t){if(!e.length||t.empty)return e;let n=[];for(let r of e)t.touchesRange(r.from,r.to)||n.push(new qw(t.mapPos(r.from),t.mapPos(r.to),r.size,r.displaySize));return n}ensureLineGaps(e,t){let n=this.heightOracle.lineWrapping,r=n?1e4:2e3,i=r>>1,o=r<<1;if(this.defaultTextDirection!=Yv.LTR&&!n)return[];let s=[],a=(r,o,l,c)=>{if(o-r<i)return;let u=this.state.selection.main,h=[u.from];u.empty||h.push(u.to);for(let e of h)if(e>r&&e<o)return a(r,e-10,l,c),void a(e+10,o,l,c);let d=Xw(e,(e=>e.from>=l.from&&e.to<=l.to&&Math.abs(e.from-r)<i&&Math.abs(e.to-o)<i&&!h.some((t=>e.from<t&&e.to>t))));if(!d){if(o<l.to&&t&&n&&t.visibleRanges.some((e=>e.from<=o&&e.to>=o))){let e=t.moveToLineBoundary(eg.cursor(o),!1,!0).head;e>r&&(o=e)}let e=this.gapSize(l,r,o,c),i=n||e<2e6?e:2e6;d=new qw(r,o,e,i)}s.push(d)},l=t=>{if(t.length<o||t.type!=Pv.Text)return;let i=Qw(t.from,t.to,this.stateDeco);if(i.total<o)return;let s,l,c=this.scrollTarget?this.scrollTarget.range.head:null;if(n){let e,n,o=r/this.heightOracle.lineLength*this.heightOracle.lineHeight;if(null!=c){let r=Yw(i,c),s=((this.visibleBottom-this.visibleTop)/2+o)/t.height;e=r-s,n=r+s}else e=(this.visibleTop-t.top-o)/t.height,n=(this.visibleBottom-t.top+o)/t.height;s=Uw(i,e),l=Uw(i,n)}else{let n=i.total*this.heightOracle.charWidth,o=r*this.heightOracle.charWidth,a=0;if(n>2e6)for(let r of e)r.from>=t.from&&r.from<t.to&&r.size!=r.displaySize&&r.from*this.heightOracle.charWidth+a<this.pixelViewport.left&&(a=r.size-r.displaySize);let u,h,d=this.pixelViewport.left+a,f=this.pixelViewport.right+a;if(null!=c){let e=Yw(i,c),t=((f-d)/2+o)/n;u=e-t,h=e+t}else u=(d-o)/n,h=(f+o)/n;s=Uw(i,u),l=Uw(i,h)}s>t.from&&a(t.from,s,t,i),l<t.to&&a(l,t.to,t,i)};for(let c of this.viewportLines)Array.isArray(c.type)?c.type.forEach(l):l(c);return s}gapSize(e,t,n,r){let i=Yw(r,n)-Yw(r,t);return this.heightOracle.lineWrapping?e.height*i:r.total*this.heightOracle.charWidth*i}updateLineGaps(e){qw.same(e,this.lineGaps)||(this.lineGaps=e,this.lineGapDeco=Iv.set(e.map((e=>e.draw(this,this.heightOracle.lineWrapping)))))}computeVisibleRanges(){let e=this.stateDeco;this.lineGaps.length&&(e=e.concat(this.lineGapDeco));let t=[];Kg.spans(e,this.viewport.from,this.viewport.to,{span(e,n){t.push({from:e,to:n})},point(){}},20);let n=t.length!=this.visibleRanges.length||this.visibleRanges.some(((e,n)=>e.from!=t[n].from||e.to!=t[n].to));return this.visibleRanges=t,n?4:0}lineBlockAt(e){return e>=this.viewport.from&&e<=this.viewport.to&&this.viewportLines.find((t=>t.from<=e&&t.to>=e))||Kw(this.heightMap.lineAt(e,Cw.ByPos,this.heightOracle,0,0),this.scaler)}lineBlockAtHeight(e){return e>=this.viewportLines[0].top&&e<=this.viewportLines[this.viewportLines.length-1].bottom&&this.viewportLines.find((t=>t.top<=e&&t.bottom>=e))||Kw(this.heightMap.lineAt(this.scaler.fromDOM(e),Cw.ByHeight,this.heightOracle,0,0),this.scaler)}scrollAnchorAt(e){let t=this.lineBlockAtHeight(e+8);return t.from>=this.viewport.from||this.viewportLines[0].top-e>200?t:this.viewportLines[0]}elementAtHeight(e){return Kw(this.heightMap.blockAt(this.scaler.fromDOM(e),this.heightOracle,0,0),this.scaler)}get docHeight(){return this.scaler.toDOM(this.heightMap.height)}get contentHeight(){return this.docHeight+this.paddingTop+this.paddingBottom}}class Ww{constructor(e,t){this.from=e,this.to=t}}function Qw(e,t,n){let r=[],i=e,o=0;return Kg.spans(n,e,t,{span(){},point(e,t){e>i&&(r.push({from:i,to:e}),o+=e-i),i=t}},20),i<t&&(r.push({from:i,to:t}),o+=t-i),{total:o,ranges:r}}function Uw({total:e,ranges:t},n){if(n<=0)return t[0].from;if(n>=1)return t[t.length-1].to;let r=Math.floor(e*n);for(let i=0;;i++){let{from:e,to:n}=t[i],o=n-e;if(r<=o)return e+r;r-=o}}function Yw(e,t){let n=0;for(let{from:r,to:i}of e.ranges){if(t<=i){n+=t-r;break}n+=i-r}return n/e.total}function Xw(e,t){for(let n of e)if(t(n))return n}const Zw={toDOM(e){return e},fromDOM(e){return e},scale:1,eq(e){return e==this}};class Gw{constructor(e,t,n){let r=0,i=0,o=0;this.viewports=n.map((({from:n,to:i})=>{let o=t.lineAt(n,Cw.ByPos,e,0,0).top,s=t.lineAt(i,Cw.ByPos,e,0,0).bottom;return r+=s-o,{from:n,to:i,top:o,bottom:s,domTop:0,domBottom:0}})),this.scale=(7e6-r)/(t.height-r);for(let s of this.viewports)s.domTop=o+(s.top-i)*this.scale,o=s.domBottom=s.domTop+(s.bottom-s.top),i=s.bottom}toDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.top)return r+(e-n)*this.scale;if(e<=i.bottom)return i.domTop+(e-i.top);n=i.bottom,r=i.domBottom}}fromDOM(e){for(let t=0,n=0,r=0;;t++){let i=t<this.viewports.length?this.viewports[t]:null;if(!i||e<i.domTop)return n+(e-r)/this.scale;if(e<=i.domBottom)return i.top+(e-i.domTop);n=i.bottom,r=i.domBottom}}eq(e){return e instanceof Gw&&(this.scale==e.scale&&this.viewports.length==e.viewports.length&&this.viewports.every(((t,n)=>t.from==e.viewports[n].from&&t.to==e.viewports[n].to)))}}function Kw(e,t){if(1==t.scale)return e;let n=t.toDOM(e.top),r=t.toDOM(e.bottom);return new Ew(e.from,e.length,n,r-n,Array.isArray(e._content)?e._content.map((e=>Kw(e,t))):e._content)}const Jw=rg.define({combine:e=>e.join(" ")}),ex=rg.define({combine:e=>e.indexOf(!0)>-1}),tx=vm.newName(),nx=vm.newName(),rx=vm.newName(),ix={"&light":"."+nx,"&dark":"."+rx};function ox(e,t,n){return new vm(t,{finish(t){return/&/.test(t)?t.replace(/&\w*/,(t=>{if("&"==t)return e;if(!n||!n[t])throw new RangeError(`Unsupported selector: ${t}`);return n[t]})):e+" "+t}})}const sx=ox("."+tx,{"&":{position:"relative !important",boxSizing:"border-box","&.cm-focused":{outline:"1px dotted #212121"},display:"flex !important",flexDirection:"column"},".cm-scroller":{display:"flex !important",alignItems:"flex-start !important",fontFamily:"monospace",lineHeight:1.4,height:"100%",overflowX:"auto",position:"relative",zIndex:0,overflowAnchor:"none"},".cm-content":{margin:0,flexGrow:2,flexShrink:0,display:"block",whiteSpace:"pre",wordWrap:"normal",boxSizing:"border-box",minHeight:"100%",padding:"4px 0",outline:"none","&[contenteditable=true]":{WebkitUserModify:"read-write-plaintext-only"}},".cm-lineWrapping":{whiteSpace_fallback:"pre-wrap",whiteSpace:"break-spaces",wordBreak:"break-word",overflowWrap:"anywhere",flexShrink:1},"&light .cm-content":{caretColor:"black"},"&dark .cm-content":{caretColor:"white"},".cm-line":{display:"block",padding:"0 2px 0 6px"},".cm-layer":{position:"absolute",left:0,top:0,contain:"size style","& > *":{position:"absolute"}},"&light .cm-selectionBackground":{background:"#d9d9d9"},"&dark .cm-selectionBackground":{background:"#222"},"&light.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#d7d4f0"},"&dark.cm-focused > .cm-scroller > .cm-selectionLayer .cm-selectionBackground":{background:"#233"},".cm-cursorLayer":{pointerEvents:"none"},"&.cm-focused > .cm-scroller > .cm-cursorLayer":{animation:"steps(1) cm-blink 1.2s infinite"},"@keyframes cm-blink":{"0%":{},"50%":{opacity:0},"100%":{}},"@keyframes cm-blink2":{"0%":{},"50%":{opacity:0},"100%":{}},".cm-cursor, .cm-dropCursor":{borderLeft:"1.2px solid black",marginLeft:"-0.6px",pointerEvents:"none"},".cm-cursor":{display:"none"},"&dark .cm-cursor":{borderLeftColor:"#ddd"},".cm-dropCursor":{position:"absolute"},"&.cm-focused > .cm-scroller > .cm-cursorLayer .cm-cursor":{display:"block"},".cm-iso":{unicodeBidi:"isolate"},".cm-announced":{position:"fixed",top:"-10000px"},"@media print":{".cm-announced":{display:"none"}},"&light .cm-activeLine":{backgroundColor:"#cceeff44"},"&dark .cm-activeLine":{backgroundColor:"#99eeff33"},"&light .cm-specialChar":{color:"red"},"&dark .cm-specialChar":{color:"#f78"},".cm-gutters":{flexShrink:0,display:"flex",height:"100%",boxSizing:"border-box",insetInlineStart:0,zIndex:200},"&light .cm-gutters":{backgroundColor:"#f5f5f5",color:"#6c6c6c",borderRight:"1px solid #ddd"},"&dark .cm-gutters":{backgroundColor:"#333338",color:"#ccc"},".cm-gutter":{display:"flex !important",flexDirection:"column",flexShrink:0,boxSizing:"border-box",minHeight:"100%",overflow:"hidden"},".cm-gutterElement":{boxSizing:"border-box"},".cm-lineNumbers .cm-gutterElement":{padding:"0 3px 0 5px",minWidth:"20px",textAlign:"right",whiteSpace:"nowrap"},"&light .cm-activeLineGutter":{backgroundColor:"#e2f2ff"},"&dark .cm-activeLineGutter":{backgroundColor:"#222227"},".cm-panels":{boxSizing:"border-box",position:"sticky",left:0,right:0,zIndex:300},"&light .cm-panels":{backgroundColor:"#f5f5f5",color:"black"},"&light .cm-panels-top":{borderBottom:"1px solid #ddd"},"&light .cm-panels-bottom":{borderTop:"1px solid #ddd"},"&dark .cm-panels":{backgroundColor:"#333338",color:"white"},".cm-tab":{display:"inline-block",overflow:"hidden",verticalAlign:"bottom"},".cm-widgetBuffer":{verticalAlign:"text-top",height:"1em",width:0,display:"inline"},".cm-placeholder":{color:"#888",display:"inline-block",verticalAlign:"top"},".cm-highlightSpace":{backgroundImage:"radial-gradient(circle at 50% 55%, #aaa 20%, transparent 5%)",backgroundPosition:"center"},".cm-highlightTab":{backgroundImage:'url(\'data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" width="200" height="20"><path stroke="%23888" stroke-width="1" fill="none" d="M1 10H196L190 5M190 15L196 10M197 4L197 16"/></svg>\')',backgroundSize:"auto 100%",backgroundPosition:"right 90%",backgroundRepeat:"no-repeat"},".cm-trailingSpace":{backgroundColor:"#ff332255"},".cm-button":{verticalAlign:"middle",color:"inherit",fontSize:"70%",padding:".2em 1em",borderRadius:"1px"},"&light .cm-button":{backgroundImage:"linear-gradient(#eff1f5, #d9d9df)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#b4b4b4, #d0d3d6)"}},"&dark .cm-button":{backgroundImage:"linear-gradient(#393939, #111)",border:"1px solid #888","&:active":{backgroundImage:"linear-gradient(#111, #333)"}},".cm-textfield":{verticalAlign:"middle",color:"inherit",fontSize:"70%",border:"1px solid silver",padding:".2em .5em"},"&light .cm-textfield":{backgroundColor:"white"},"&dark .cm-textfield":{border:"1px solid #555",backgroundColor:"inherit"}},ix),ax={childList:!0,characterData:!0,subtree:!0,attributes:!0,characterDataOldValue:!0},lx=vv.ie&&vv.ie_version<=11;class cx{constructor(e){this.view=e,this.active=!1,this.editContext=null,this.selectionRange=new Vm,this.selectionChanged=!1,this.delayedFlush=-1,this.resizeTimeout=-1,this.queue=[],this.delayedAndroidKey=null,this.flushingAndroidKey=-1,this.lastChange=0,this.scrollTargets=[],this.intersection=null,this.resizeScroll=null,this.intersecting=!1,this.gapIntersection=null,this.gaps=[],this.printQuery=null,this.parentCheck=-1,this.dom=e.contentDOM,this.observer=new MutationObserver((t=>{for(let e of t)this.queue.push(e);(vv.ie&&vv.ie_version<=11||vv.ios&&e.composing)&&t.some((e=>"childList"==e.type&&e.removedNodes.length||"characterData"==e.type&&e.oldValue.length>e.target.nodeValue.length))?this.flushSoon():this.flush()})),!window.EditContext||!1===e.constructor.EDIT_CONTEXT||vv.chrome&&vv.chrome_version<126||(this.editContext=new fx(e),e.state.facet(Ry)&&(e.contentDOM.editContext=this.editContext.editContext)),lx&&(this.onCharData=e=>{this.queue.push({target:e.target,type:"characterData",oldValue:e.prevValue}),this.flushSoon()}),this.onSelectionChange=this.onSelectionChange.bind(this),this.onResize=this.onResize.bind(this),this.onPrint=this.onPrint.bind(this),this.onScroll=this.onScroll.bind(this),window.matchMedia&&(this.printQuery=window.matchMedia("print")),"function"==typeof ResizeObserver&&(this.resizeScroll=new ResizeObserver((()=>{var e;(null===(e=this.view.docView)||void 0===e?void 0:e.lastUpdate)<Date.now()-75&&this.onResize()})),this.resizeScroll.observe(e.scrollDOM)),this.addWindowListeners(this.win=e.win),this.start(),"function"==typeof IntersectionObserver&&(this.intersection=new IntersectionObserver((e=>{this.parentCheck<0&&(this.parentCheck=setTimeout(this.listenForScroll.bind(this),1e3)),e.length>0&&e[e.length-1].intersectionRatio>0!=this.intersecting&&(this.intersecting=!this.intersecting,this.intersecting!=this.view.inView&&this.onScrollChanged(document.createEvent("Event")))}),{threshold:[0,.001]}),this.intersection.observe(this.dom),this.gapIntersection=new IntersectionObserver((e=>{e.length>0&&e[e.length-1].intersectionRatio>0&&this.onScrollChanged(document.createEvent("Event"))}),{})),this.listenForScroll(),this.readSelectionRange()}onScrollChanged(e){this.view.inputState.runHandlers("scroll",e),this.intersecting&&this.view.measure()}onScroll(e){this.intersecting&&this.flush(!1),this.editContext&&this.view.requestMeasure(this.editContext.measureReq),this.onScrollChanged(e)}onResize(){this.resizeTimeout<0&&(this.resizeTimeout=setTimeout((()=>{this.resizeTimeout=-1,this.view.requestMeasure()}),50))}onPrint(e){("change"!=e.type&&e.type||e.matches)&&(this.view.viewState.printing=!0,this.view.measure(),setTimeout((()=>{this.view.viewState.printing=!1,this.view.requestMeasure()}),500))}updateGaps(e){if(this.gapIntersection&&(e.length!=this.gaps.length||this.gaps.some(((t,n)=>t!=e[n])))){this.gapIntersection.disconnect();for(let t of e)this.gapIntersection.observe(t);this.gaps=e}}onSelectionChange(e){let t=this.selectionChanged;if(!this.readSelectionRange()||this.delayedAndroidKey)return;let{view:n}=this,r=this.selectionRange;if(n.state.facet(Ry)?n.root.activeElement!=this.dom:!Am(this.dom,r))return;let i=r.anchorNode&&n.docView.nearest(r.anchorNode);i&&i.ignoreEvent(e)?t||(this.selectionChanged=!1):(vv.ie&&vv.ie_version<=11||vv.android&&vv.chrome)&&!n.state.selection.main.empty&&r.focusNode&&Mm(r.focusNode,r.focusOffset,r.anchorNode,r.anchorOffset)?this.flushSoon():this.flush(!1)}readSelectionRange(){let{view:e}=this,t=Cm(e.root);if(!t)return!1;let n=vv.safari&&11==e.root.nodeType&&e.root.activeElement==this.dom&&dx(this.view,t)||t;if(!n||this.selectionRange.eq(n))return!1;let r=Am(this.dom,n);return r&&!this.selectionChanged&&e.inputState.lastFocusTime>Date.now()-200&&e.inputState.lastTouchTime<Date.now()-300&&Xm(this.dom,n)?(this.view.inputState.lastFocusTime=0,e.docView.updateSelection(),!1):(this.selectionRange.setRange(n),r&&(this.selectionChanged=!0),!0)}setSelectionRange(e,t){this.selectionRange.set(e.node,e.offset,t.node,t.offset),this.selectionChanged=!1}clearSelectionRange(){this.selectionRange.set(null,0,null,0)}listenForScroll(){this.parentCheck=-1;let e=0,t=null;for(let n=this.dom;n;)if(1==n.nodeType)!t&&e<this.scrollTargets.length&&this.scrollTargets[e]==n?e++:t||(t=this.scrollTargets.slice(0,e)),t&&t.push(n),n=n.assignedSlot||n.parentNode;else{if(11!=n.nodeType)break;n=n.host}if(e<this.scrollTargets.length&&!t&&(t=this.scrollTargets.slice(0,e)),t){for(let e of this.scrollTargets)e.removeEventListener("scroll",this.onScroll);for(let e of this.scrollTargets=t)e.addEventListener("scroll",this.onScroll)}}ignore(e){if(!this.active)return e();try{return this.stop(),e()}finally{this.start(),this.clear()}}start(){this.active||(this.observer.observe(this.dom,ax),lx&&this.dom.addEventListener("DOMCharacterDataModified",this.onCharData),this.active=!0)}stop(){this.active&&(this.active=!1,this.observer.disconnect(),lx&&this.dom.removeEventListener("DOMCharacterDataModified",this.onCharData))}clear(){this.processRecords(),this.queue.length=0,this.selectionChanged=!1}delayAndroidKey(e,t){var n;if(!this.delayedAndroidKey){let e=()=>{let e=this.delayedAndroidKey;if(e){this.clearDelayedAndroidKey(),this.view.inputState.lastKeyCode=e.keyCode,this.view.inputState.lastKeyTime=Date.now();let t=this.flush();!t&&e.force&&Qm(this.dom,e.key,e.keyCode)}};this.flushingAndroidKey=this.view.win.requestAnimationFrame(e)}this.delayedAndroidKey&&"Enter"!=e||(this.delayedAndroidKey={key:e,keyCode:t,force:this.lastChange<Date.now()-50||!!(null===(n=this.delayedAndroidKey)||void 0===n?void 0:n.force)})}clearDelayedAndroidKey(){this.win.cancelAnimationFrame(this.flushingAndroidKey),this.delayedAndroidKey=null,this.flushingAndroidKey=-1}flushSoon(){this.delayedFlush<0&&(this.delayedFlush=this.view.win.requestAnimationFrame((()=>{this.delayedFlush=-1,this.flush()})))}forceFlush(){this.delayedFlush>=0&&(this.view.win.cancelAnimationFrame(this.delayedFlush),this.delayedFlush=-1),this.flush()}pendingRecords(){for(let e of this.observer.takeRecords())this.queue.push(e);return this.queue}processRecords(){let e=this.pendingRecords();e.length&&(this.queue=[]);let t=-1,n=-1,r=!1;for(let i of e){let e=this.readMutation(i);e&&(e.typeOver&&(r=!0),-1==t?({from:t,to:n}=e):(t=Math.min(e.from,t),n=Math.max(e.to,n)))}return{from:t,to:n,typeOver:r}}readChange(){let{from:e,to:t,typeOver:n}=this.processRecords(),r=this.selectionChanged&&Am(this.dom,this.selectionRange);if(e<0&&!r)return null;e>-1&&(this.lastChange=Date.now()),this.view.inputState.lastFocusTime=0,this.selectionChanged=!1;let i=new Tb(this.view,e,t,n);return this.view.docView.domChanged={newSel:i.newSel?i.newSel.main:null},i}flush(e=!0){if(this.delayedFlush>=0||this.delayedAndroidKey)return!1;e&&this.readSelectionRange();let t=this.readChange();if(!t)return this.view.requestMeasure(),!1;let n=this.view.state,r=Ab(this.view,t);return this.view.state==n&&(t.domChanged||t.newSel&&!t.newSel.main.eq(this.view.state.selection.main))&&this.view.update([]),r}readMutation(e){let t=this.view.docView.nearest(e.target);if(!t||t.ignoreMutation(e))return null;if(t.markDirty("attributes"==e.type),"attributes"==e.type&&(t.flags|=4),"childList"==e.type){let n=ux(t,e.previousSibling||e.target.previousSibling,-1),r=ux(t,e.nextSibling||e.target.nextSibling,1);return{from:n?t.posAfter(n):t.posAtStart,to:r?t.posBefore(r):t.posAtEnd,typeOver:!1}}return"characterData"==e.type?{from:t.posAtStart,to:t.posAtEnd,typeOver:e.target.nodeValue==e.oldValue}:null}setWindow(e){e!=this.win&&(this.removeWindowListeners(this.win),this.win=e,this.addWindowListeners(this.win))}addWindowListeners(e){e.addEventListener("resize",this.onResize),this.printQuery?this.printQuery.addEventListener?this.printQuery.addEventListener("change",this.onPrint):this.printQuery.addListener(this.onPrint):e.addEventListener("beforeprint",this.onPrint),e.addEventListener("scroll",this.onScroll),e.document.addEventListener("selectionchange",this.onSelectionChange)}removeWindowListeners(e){e.removeEventListener("scroll",this.onScroll),e.removeEventListener("resize",this.onResize),this.printQuery?this.printQuery.removeEventListener?this.printQuery.removeEventListener("change",this.onPrint):this.printQuery.removeListener(this.onPrint):e.removeEventListener("beforeprint",this.onPrint),e.document.removeEventListener("selectionchange",this.onSelectionChange)}update(e){this.editContext&&(this.editContext.update(e),e.startState.facet(Ry)!=e.state.facet(Ry)&&(e.view.contentDOM.editContext=e.state.facet(Ry)?this.editContext.editContext:null))}destroy(){var e,t,n;this.stop(),null===(e=this.intersection)||void 0===e||e.disconnect(),null===(t=this.gapIntersection)||void 0===t||t.disconnect(),null===(n=this.resizeScroll)||void 0===n||n.disconnect();for(let r of this.scrollTargets)r.removeEventListener("scroll",this.onScroll);this.removeWindowListeners(this.win),clearTimeout(this.parentCheck),clearTimeout(this.resizeTimeout),this.win.cancelAnimationFrame(this.delayedFlush),this.win.cancelAnimationFrame(this.flushingAndroidKey),this.editContext&&(this.view.contentDOM.editContext=null,this.editContext.destroy())}}function ux(e,t,n){while(t){let r=tv.get(t);if(r&&r.parent==e)return r;let i=t.parentNode;t=i!=e.dom?i:n>0?t.nextSibling:t.previousSibling}return null}function hx(e,t){let n=t.startContainer,r=t.startOffset,i=t.endContainer,o=t.endOffset,s=e.docView.domAtPos(e.state.selection.main.anchor);return Mm(s.node,s.offset,i,o)&&([n,r,i,o]=[i,o,n,r]),{anchorNode:n,anchorOffset:r,focusNode:i,focusOffset:o}}function dx(e,t){if(t.getComposedRanges){let n=t.getComposedRanges(e.root)[0];if(n)return hx(e,n)}let n=null;function r(e){e.preventDefault(),e.stopImmediatePropagation(),n=e.getTargetRanges()[0]}return e.contentDOM.addEventListener("beforeinput",r,!0),e.dom.ownerDocument.execCommand("indent"),e.contentDOM.removeEventListener("beforeinput",r,!0),n?hx(e,n):null}class fx{constructor(e){this.from=0,this.to=0,this.pendingContextChange=null,this.handlers=Object.create(null),this.composing=null,this.resetRange(e.state);let t=this.editContext=new window.EditContext({text:e.state.doc.sliceString(this.from,this.to),selectionStart:this.toContextPos(Math.max(this.from,Math.min(this.to,e.state.selection.main.anchor))),selectionEnd:this.toContextPos(e.state.selection.main.head)});this.handlers.textupdate=t=>{let{anchor:n}=e.state.selection.main,r=this.toEditorPos(t.updateRangeStart),i=this.toEditorPos(t.updateRangeEnd);e.inputState.composing>=0&&!this.composing&&(this.composing={contextBase:t.updateRangeStart,editorBase:r,drifted:!1});let o={from:r,to:i,insert:wp.of(t.text.split("\n"))};o.from==this.from&&n<this.from?o.from=n:o.to==this.to&&n>this.to&&(o.to=n),(o.from!=o.to||o.insert.length)&&(this.pendingContextChange=o,e.state.readOnly||Db(e,o,eg.single(this.toEditorPos(t.selectionStart),this.toEditorPos(t.selectionEnd))),this.pendingContextChange&&(this.revertPending(e.state),this.setSelection(e.state)))},this.handlers.characterboundsupdate=n=>{let r=[],i=null;for(let t=this.toEditorPos(n.rangeStart),o=this.toEditorPos(n.rangeEnd);t<o;t++){let n=e.coordsForChar(t);i=n&&new DOMRect(n.left,n.top,n.right-n.left,n.bottom-n.top)||i||new DOMRect,r.push(i)}t.updateCharacterBounds(n.rangeStart,r)},this.handlers.textformatupdate=t=>{let n=[];for(let e of t.getTextFormats()){let t=e.underlineStyle,r=e.underlineThickness;if("None"!=t&&"None"!=r){let i=`text-decoration: underline ${"Dashed"==t?"dashed ":"Squiggle"==t?"wavy ":""}${"Thin"==r?1:2}px`;n.push(Iv.mark({attributes:{style:i}}).range(this.toEditorPos(e.rangeStart),this.toEditorPos(e.rangeEnd)))}}e.dispatch({effects:My.of(Iv.set(n))})},this.handlers.compositionstart=()=>{e.inputState.composing<0&&(e.inputState.composing=0,e.inputState.compositionFirstChange=!0)},this.handlers.compositionend=()=>{if(e.inputState.composing=-1,e.inputState.compositionFirstChange=null,this.composing){let{drifted:t}=this.composing;this.composing=null,t&&this.reset(e.state)}};for(let n in this.handlers)t.addEventListener(n,this.handlers[n]);this.measureReq={read:e=>{this.editContext.updateControlBounds(e.contentDOM.getBoundingClientRect());let t=Cm(e.root);t&&t.rangeCount&&this.editContext.updateSelectionBounds(t.getRangeAt(0).getBoundingClientRect())}}}applyEdits(e){let t=0,n=!1,r=this.pendingContextChange;return e.changes.iterChanges(((i,o,s,a,l)=>{if(n)return;let c=l.length-(o-i);if(r&&o>=r.to){if(r.from==i&&r.to==o&&r.insert.eq(l))return r=this.pendingContextChange=null,t+=c,void(this.to+=c);r=null,this.revertPending(e.state)}if(i+=t,o+=t,o<=this.from)this.from+=c,this.to+=c;else if(i<this.to){if(i<this.from||o>this.to||this.to-this.from+l.length>3e4)return void(n=!0);this.editContext.updateText(this.toContextPos(i),this.toContextPos(o),l.toString()),this.to+=c}t+=c})),r&&!n&&this.revertPending(e.state),!n}update(e){let t=this.pendingContextChange;this.composing&&(this.composing.drifted||e.transactions.some((e=>!e.isUserEvent("input.type")&&e.changes.touchesRange(this.from,this.to))))?(this.composing.drifted=!0,this.composing.editorBase=e.changes.mapPos(this.composing.editorBase)):this.applyEdits(e)&&this.rangeIsValid(e.state)?(e.docChanged||e.selectionSet||t)&&this.setSelection(e.state):(this.pendingContextChange=null,this.reset(e.state)),(e.geometryChanged||e.docChanged||e.selectionSet)&&e.view.requestMeasure(this.measureReq)}resetRange(e){let{head:t}=e.selection.main;this.from=Math.max(0,t-1e4),this.to=Math.min(e.doc.length,t+1e4)}reset(e){this.resetRange(e),this.editContext.updateText(0,this.editContext.text.length,e.doc.sliceString(this.from,this.to)),this.setSelection(e)}revertPending(e){let t=this.pendingContextChange;this.pendingContextChange=null,this.editContext.updateText(this.toContextPos(t.from),this.toContextPos(t.from+t.insert.length),e.doc.sliceString(t.from,t.to))}setSelection(e){let{main:t}=e.selection,n=this.toContextPos(Math.max(this.from,Math.min(this.to,t.anchor))),r=this.toContextPos(t.head);this.editContext.selectionStart==n&&this.editContext.selectionEnd==r||this.editContext.updateSelection(n,r)}rangeIsValid(e){let{head:t}=e.selection.main;return!(this.from>0&&t-this.from<500||this.to<e.doc.length&&this.to-t<500||this.to-this.from>3e4)}toEditorPos(e){let t=this.composing;return t&&t.drifted?t.editorBase+(e-t.contextBase):e+this.from}toContextPos(e){let t=this.composing;return t&&t.drifted?t.contextBase+(e-t.editorBase):e-this.from}destroy(){for(let e in this.handlers)this.editContext.removeEventListener(e,this.handlers[e])}}class px{get state(){return this.viewState.state}get viewport(){return this.viewState.viewport}get visibleRanges(){return this.viewState.visibleRanges}get inView(){return this.viewState.inView}get composing(){return this.inputState.composing>0}get compositionStarted(){return this.inputState.composing>=0}get root(){return this._root}get win(){return this.dom.ownerDocument.defaultView||window}constructor(e={}){var t;this.plugins=[],this.pluginMap=new Map,this.editorAttrs={},this.contentAttrs={},this.bidiCache=[],this.destroyed=!1,this.updateState=2,this.measureScheduled=-1,this.measureRequests=[],this.contentDOM=document.createElement("div"),this.scrollDOM=document.createElement("div"),this.scrollDOM.tabIndex=-1,this.scrollDOM.className="cm-scroller",this.scrollDOM.appendChild(this.contentDOM),this.announceDOM=document.createElement("div"),this.announceDOM.className="cm-announced",this.announceDOM.setAttribute("aria-live","polite"),this.dom=document.createElement("div"),this.dom.appendChild(this.announceDOM),this.dom.appendChild(this.scrollDOM),e.parent&&e.parent.appendChild(this.dom);let{dispatch:n}=e;this.dispatchTransactions=e.dispatchTransactions||n&&(e=>e.forEach((e=>n(e,this))))||(e=>this.update(e)),this.dispatch=this.dispatch.bind(this),this._root=e.root||Um(e.parent)||document,this.viewState=new Hw(e.state||Qg.create(e)),e.scrollTo&&e.scrollTo.is(Dy)&&(this.viewState.scrollTarget=e.scrollTo.value.clip(this.viewState.state)),this.plugins=this.state.facet(Iy).map((e=>new $y(e)));for(let r of this.plugins)r.update(this);this.observer=new cx(this),this.inputState=new Ib(this),this.inputState.ensureHandlers(this.plugins),this.docView=new Zy(this),this.mountStyles(),this.updateAttrs(),this.updateState=0,this.requestMeasure(),(null===(t=document.fonts)||void 0===t?void 0:t.ready)&&document.fonts.ready.then((()=>this.requestMeasure()))}dispatch(...e){let t=1==e.length&&e[0]instanceof Fg?e:1==e.length&&Array.isArray(e[0])?e[0]:[this.state.update(...e)];this.dispatchTransactions(t,this)}update(e){if(0!=this.updateState)throw new Error("Calls to EditorView.update are not allowed while an update is in progress");let t,n=!1,r=!1,i=this.state;for(let d of e){if(d.startState!=i)throw new RangeError("Trying to update state with a transaction that doesn't start from the previous state.");i=d.state}if(this.destroyed)return void(this.viewState.state=i);let o=this.hasFocus,s=0,a=null;e.some((e=>e.annotation(mw)))?(this.inputState.notifiedFocused=o,s=1):o!=this.inputState.notifiedFocused&&(this.inputState.notifiedFocused=o,a=vw(i,o),a||(s=1));let l=this.observer.delayedAndroidKey,c=null;if(l?(this.observer.clearDelayedAndroidKey(),c=this.observer.readChange(),(c&&!this.state.doc.eq(i.doc)||!this.state.selection.eq(i.selection))&&(c=null)):this.observer.clear(),i.facet(Qg.phrases)!=this.state.facet(Qg.phrases))return this.setState(i);t=Xy.create(this,i,e),t.flags|=s;let u=this.viewState.scrollTarget;try{this.updateState=2;for(let t of e){if(u&&(u=u.map(t.changes)),t.scrollIntoView){let{main:e}=t.state.selection;u=new Ay(e.empty?e:eg.cursor(e.head,e.head>e.anchor?-1:1))}for(let e of t.effects)e.is(Dy)&&(u=e.value.clip(this.state))}this.viewState.update(t,u),this.bidiCache=vx.update(this.bidiCache,t.changes),t.empty||(this.updatePlugins(t),this.inputState.update(t)),n=this.docView.update(t),this.state.facet(Uy)!=this.styleModules&&this.mountStyles(),r=this.updateAttrs(),this.showAnnouncements(e),this.docView.updateSelection(n,e.some((e=>e.isUserEvent("select.pointer"))))}finally{this.updateState=0}if(t.startState.facet(Jw)!=t.state.facet(Jw)&&(this.viewState.mustMeasureContent=!0),(n||r||u||this.viewState.mustEnforceCursorAssoc||this.viewState.mustMeasureContent)&&this.requestMeasure(),n&&this.docViewUpdate(),!t.empty)for(let d of this.state.facet(xy))try{d(t)}catch(h){Fy(this.state,h,"update listener")}(a||c)&&Promise.resolve().then((()=>{a&&this.state==a.startState&&this.dispatch(a),c&&!Ab(this,c)&&l.force&&Qm(this.contentDOM,l.key,l.keyCode)}))}setState(e){if(0!=this.updateState)throw new Error("Calls to EditorView.setState are not allowed while an update is in progress");if(this.destroyed)return void(this.viewState.state=e);this.updateState=2;let t=this.hasFocus;try{for(let e of this.plugins)e.destroy(this);this.viewState=new Hw(e),this.plugins=e.facet(Iy).map((e=>new $y(e))),this.pluginMap.clear();for(let e of this.plugins)e.update(this);this.docView.destroy(),this.docView=new Zy(this),this.inputState.ensureHandlers(this.plugins),this.mountStyles(),this.updateAttrs(),this.bidiCache=[]}finally{this.updateState=0}t&&this.focus(),this.requestMeasure()}updatePlugins(e){let t=e.startState.facet(Iy),n=e.state.facet(Iy);if(t!=n){let r=[];for(let i of n){let n=t.indexOf(i);if(n<0)r.push(new $y(i));else{let t=this.plugins[n];t.mustUpdate=e,r.push(t)}}for(let t of this.plugins)t.mustUpdate!=e&&t.destroy(this);this.plugins=r,this.pluginMap.clear()}else for(let r of this.plugins)r.mustUpdate=e;for(let r=0;r<this.plugins.length;r++)this.plugins[r].update(this);t!=n&&this.inputState.ensureHandlers(this.plugins)}docViewUpdate(){for(let t of this.plugins){let n=t.value;if(n&&n.docViewUpdate)try{n.docViewUpdate(this)}catch(e){Fy(this.state,e,"doc view update listener")}}}measure(e=!0){if(this.destroyed)return;if(this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.observer.delayedAndroidKey)return this.measureScheduled=-1,void this.requestMeasure();this.measureScheduled=0,e&&this.observer.forceFlush();let t=null,n=this.scrollDOM,r=n.scrollTop*this.scaleY,{scrollAnchorPos:i,scrollAnchorHeight:o}=this.viewState;Math.abs(r-this.viewState.scrollTop)>1&&(o=-1),this.viewState.scrollAnchorHeight=-1;try{for(let e=0;;e++){if(o<0)if(Zm(n))i=-1,o=this.viewState.heightMap.height;else{let e=this.viewState.scrollAnchorAt(r);i=e.from,o=e.top}this.updateState=1;let a=this.viewState.measure(this);if(!a&&!this.measureRequests.length&&null==this.viewState.scrollTarget)break;if(e>5){console.warn(this.measureRequests.length?"Measure loop restarted more than 5 times":"Viewport failed to stabilize");break}let l=[];4&a||([this.measureRequests,l]=[l,this.measureRequests]);let c=l.map((e=>{try{return e.read(this)}catch(t){return Fy(this.state,t),mx}})),u=Xy.create(this,this.state,[]),h=!1;u.flags|=a,t?t.flags|=a:t=u,this.updateState=2,u.empty||(this.updatePlugins(u),this.inputState.update(u),this.updateAttrs(),h=this.docView.update(u),h&&this.docViewUpdate());for(let e=0;e<l.length;e++)if(c[e]!=mx)try{let t=l[e];t.write&&t.write(c[e],this)}catch(s){Fy(this.state,s)}if(h&&this.docView.updateSelection(!0),!u.viewportChanged&&0==this.measureRequests.length){if(this.viewState.editorHeight){if(this.viewState.scrollTarget){this.docView.scrollIntoView(this.viewState.scrollTarget),this.viewState.scrollTarget=null,o=-1;continue}{let e=i<0?this.viewState.heightMap.height:this.viewState.lineBlockAt(i).top,t=e-o;if(t>1||t<-1){r+=t,n.scrollTop=r/this.scaleY,o=-1;continue}}}break}}}finally{this.updateState=0,this.measureScheduled=-1}if(t&&!t.empty)for(let a of this.state.facet(xy))a(t)}get themeClasses(){return tx+" "+(this.state.facet(ex)?rx:nx)+" "+this.state.facet(Jw)}updateAttrs(){let e=yx(this,Ny,{class:"cm-editor"+(this.hasFocus?" cm-focused ":" ")+this.themeClasses}),t={spellcheck:"false",autocorrect:"off",autocapitalize:"off",translate:"no",contenteditable:this.state.facet(Ry)?"true":"false",class:"cm-content",style:`${vv.tabSize}: ${this.state.tabSize}`,role:"textbox","aria-multiline":"true"};this.state.readOnly&&(t["aria-readonly"]="true"),yx(this,jy,t);let n=this.observer.ignore((()=>{let n=Mv(this.contentDOM,this.contentAttrs,t),r=Mv(this.dom,this.editorAttrs,e);return n||r}));return this.editorAttrs=e,this.contentAttrs=t,n}showAnnouncements(e){let t=!0;for(let n of e)for(let e of n.effects)if(e.is(px.announce)){t&&(this.announceDOM.textContent=""),t=!1;let n=this.announceDOM.appendChild(document.createElement("div"));n.textContent=e.value}}mountStyles(){this.styleModules=this.state.facet(Uy);let e=this.state.facet(px.cspNonce);vm.mount(this.root,this.styleModules.concat(sx).reverse(),e?{nonce:e}:void 0)}readMeasured(){if(2==this.updateState)throw new Error("Reading the editor layout isn't allowed during an update");0==this.updateState&&this.measureScheduled>-1&&this.measure(!1)}requestMeasure(e){if(this.measureScheduled<0&&(this.measureScheduled=this.win.requestAnimationFrame((()=>this.measure()))),e){if(this.measureRequests.indexOf(e)>-1)return;if(null!=e.key)for(let t=0;t<this.measureRequests.length;t++)if(this.measureRequests[t].key===e.key)return void(this.measureRequests[t]=e);this.measureRequests.push(e)}}plugin(e){let t=this.pluginMap.get(e);return(void 0===t||t&&t.spec!=e)&&this.pluginMap.set(e,t=this.plugins.find((t=>t.spec==e))||null),t&&t.update(this).value}get documentTop(){return this.contentDOM.getBoundingClientRect().top+this.viewState.paddingTop}get documentPadding(){return{top:this.viewState.paddingTop,bottom:this.viewState.paddingBottom}}get scaleX(){return this.viewState.scaleX}get scaleY(){return this.viewState.scaleY}elementAtHeight(e){return this.readMeasured(),this.viewState.elementAtHeight(e)}lineBlockAtHeight(e){return this.readMeasured(),this.viewState.lineBlockAtHeight(e)}get viewportLineBlocks(){return this.viewState.viewportLines}lineBlockAt(e){return this.viewState.lineBlockAt(e)}get contentHeight(){return this.viewState.contentHeight}moveByChar(e,t,n){return _b(this,e,bb(this,e,t,n))}moveByGroup(e,t){return _b(this,e,bb(this,e,t,(t=>wb(this,e.head,t))))}visualLineSide(e,t){let n=this.bidiSpans(e),r=this.textDirectionAt(e.from),i=n[t?n.length-1:0];return eg.cursor(i.side(t,r)+e.from,i.forward(!t,r)?1:-1)}moveToLineBoundary(e,t,n=!0){return yb(this,e,t,n)}moveVertically(e,t,n){return _b(this,e,xb(this,e,t,n))}domAtPos(e){return this.docView.domAtPos(e)}posAtDOM(e,t=0){return this.docView.posFromDOM(e,t)}posAtCoords(e,t=!0){return this.readMeasured(),fb(this,e,t)}coordsAtPos(e,t=1){this.readMeasured();let n=this.docView.coordsAt(e,t);if(!n||n.left==n.right)return n;let r=this.state.doc.lineAt(e),i=this.bidiSpans(r),o=i[iy.find(i,e-r.from,-1,t)];return Lm(n,o.dir==Yv.LTR==t>0)}coordsForChar(e){return this.readMeasured(),this.docView.coordsForChar(e)}get defaultCharacterWidth(){return this.viewState.heightOracle.charWidth}get defaultLineHeight(){return this.viewState.heightOracle.lineHeight}get textDirection(){return this.viewState.defaultTextDirection}textDirectionAt(e){let t=this.state.facet(Ey);return!t||e<this.viewport.from||e>this.viewport.to?this.textDirection:(this.readMeasured(),this.docView.textDirectionAt(e))}get lineWrapping(){return this.viewState.heightOracle.lineWrapping}bidiSpans(e){if(e.length>gx)return fy(e.length);let t,n=this.textDirectionAt(e.from);for(let i of this.bidiCache)if(i.from==e.from&&i.dir==n&&(i.fresh||oy(i.isolates,t=Hy(this,e))))return i.order;t||(t=Hy(this,e));let r=dy(e.text,n,t);return this.bidiCache.push(new vx(e.from,e.to,n,t,!0,r)),r}get hasFocus(){var e;return(this.dom.ownerDocument.hasFocus()||vv.safari&&(null===(e=this.inputState)||void 0===e?void 0:e.lastContextMenu)>Date.now()-3e4)&&this.root.activeElement==this.contentDOM}focus(){this.observer.ignore((()=>{Hm(this.contentDOM),this.docView.updateSelection()}))}setRoot(e){this._root!=e&&(this._root=e,this.observer.setWindow((9==e.nodeType?e:e.ownerDocument).defaultView||window),this.mountStyles())}destroy(){this.root.activeElement==this.contentDOM&&this.contentDOM.blur();for(let e of this.plugins)e.destroy(this);this.plugins=[],this.inputState.destroy(),this.docView.destroy(),this.dom.remove(),this.observer.destroy(),this.measureScheduled>-1&&this.win.cancelAnimationFrame(this.measureScheduled),this.destroyed=!0}static scrollIntoView(e,t={}){return Dy.of(new Ay("number"==typeof e?eg.cursor(e):e,t.y,t.x,t.yMargin,t.xMargin))}scrollSnapshot(){let{scrollTop:e,scrollLeft:t}=this.scrollDOM,n=this.viewState.scrollAnchorAt(e);return Dy.of(new Ay(eg.cursor(n.from),"start","start",n.top-e,t,!0))}setTabFocusMode(e){null==e?this.inputState.tabFocusMode=this.inputState.tabFocusMode<0?0:-1:"boolean"==typeof e?this.inputState.tabFocusMode=e?0:-1:0!=this.inputState.tabFocusMode&&(this.inputState.tabFocusMode=Date.now()+e)}static domEventHandlers(e){return Ly.define((()=>({})),{eventHandlers:e})}static domEventObservers(e){return Ly.define((()=>({})),{eventObservers:e})}static theme(e,t){let n=vm.newName(),r=[Jw.of(n),Uy.of(ox(`.${n}`,e))];return t&&t.dark&&r.push(ex.of(!0)),r}static baseTheme(e){return fg.lowest(Uy.of(ox("."+tx,e,ix)))}static findFromDOM(e){var t;let n=e.querySelector(".cm-content"),r=n&&tv.get(n)||tv.get(e);return(null===(t=null===r||void 0===r?void 0:r.rootView)||void 0===t?void 0:t.view)||null}}px.styleModule=Uy,px.inputHandler=ky,px.clipboardInputFilter=Oy,px.clipboardOutputFilter=Sy,px.scrollHandler=Ty,px.focusChangeEffect=_y,px.perLineTextDirection=Ey,px.exceptionSink=wy,px.updateListener=xy,px.editable=Ry,px.mouseSelectionStyle=by,px.dragMovesSelection=yy,px.clickAddsSelectionRange=vy,px.decorations=By,px.outerDecorations=Vy,px.atomicRanges=qy,px.bidiIsolatedRanges=zy,px.scrollMargins=Wy,px.darkTheme=ex,px.cspNonce=rg.define({combine:e=>e.length?e[0]:""}),px.contentAttributes=jy,px.editorAttributes=Ny,px.lineWrapping=px.contentAttributes.of({class:"cm-lineWrapping"}),px.announce=Mg.define();const gx=4096,mx={};class vx{constructor(e,t,n,r,i,o){this.from=e,this.to=t,this.dir=n,this.isolates=r,this.fresh=i,this.order=o}static update(e,t){if(t.empty&&!e.some((e=>e.fresh)))return e;let n=[],r=e.length?e[e.length-1].dir:Yv.LTR;for(let i=Math.max(0,e.length-10);i<e.length;i++){let o=e[i];o.dir!=r||t.touchesRange(o.from,o.to)||n.push(new vx(t.mapPos(o.from,1),t.mapPos(o.to,-1),o.dir,o.isolates,!1,o.order))}return n}}function yx(e,t,n){for(let r=e.state.facet(t),i=r.length-1;i>=0;i--){let t=r[i],o="function"==typeof t?t(e):t;o&&Tv(o,n)}return n}const bx=vv.mac?"mac":vv.windows?"win":vv.linux?"linux":"key";function wx(e,t){const n=e.split(/-(?!$)/);let r,i,o,s,a=n[n.length-1];"Space"==a&&(a=" ");for(let l=0;l<n.length-1;++l){const e=n[l];if(/^(cmd|meta|m)$/i.test(e))s=!0;else if(/^a(lt)?$/i.test(e))r=!0;else if(/^(c|ctrl|control)$/i.test(e))i=!0;else if(/^s(hift)?$/i.test(e))o=!0;else{if(!/^mod$/i.test(e))throw new Error("Unrecognized modifier name: "+e);"mac"==t?s=!0:i=!0}}return r&&(a="Alt-"+a),i&&(a="Ctrl-"+a),s&&(a="Meta-"+a),o&&(a="Shift-"+a),a}function xx(e,t,n){return t.altKey&&(e="Alt-"+e),t.ctrlKey&&(e="Ctrl-"+e),t.metaKey&&(e="Meta-"+e),!1!==n&&t.shiftKey&&(e="Shift-"+e),e}const kx=fg.default(px.domEventHandlers({keydown(e,t){return Dx(Sx(t.state),e,t,"editor")}})),_x=rg.define({enables:kx}),Ox=new WeakMap;function Sx(e){let t=e.facet(_x),n=Ox.get(t);return n||Ox.set(t,n=Tx(t.reduce(((e,t)=>e.concat(t)),[]))),n}let Ex=null;const Cx=4e3;function Tx(e,t=bx){let n=Object.create(null),r=Object.create(null),i=(e,t)=>{let n=r[e];if(null==n)r[e]=t;else if(n!=t)throw new Error("Key binding "+e+" is used both as a regular binding and as a multi-stroke prefix")},o=(e,r,o,s,a)=>{var l,c;let u=n[e]||(n[e]=Object.create(null)),h=r.split(/ (?!$)/).map((e=>wx(e,t)));for(let t=1;t<h.length;t++){let n=h.slice(0,t).join(" ");i(n,!0),u[n]||(u[n]={preventDefault:!0,stopPropagation:!1,run:[t=>{let r=Ex={view:t,prefix:n,scope:e};return setTimeout((()=>{Ex==r&&(Ex=null)}),Cx),!0}]})}let d=h.join(" ");i(d,!1);let f=u[d]||(u[d]={preventDefault:!1,stopPropagation:!1,run:(null===(c=null===(l=u._any)||void 0===l?void 0:l.run)||void 0===c?void 0:c.slice())||[]});o&&f.run.push(o),s&&(f.preventDefault=!0),a&&(f.stopPropagation=!0)};for(let s of e){let e=s.scope?s.scope.split(" "):["editor"];if(s.any)for(let t of e){let e=n[t]||(n[t]=Object.create(null));e._any||(e._any={preventDefault:!1,stopPropagation:!1,run:[]});let{any:r}=s;for(let t in e)e[t].run.push((e=>r(e,Ax)))}let r=s[t]||s.key;if(r)for(let t of e)o(t,r,s.run,s.preventDefault,s.stopPropagation),s.shift&&o(t,"Shift-"+r,s.shift,s.preventDefault,s.stopPropagation)}return n}let Ax=null;function Dx(e,t,n,r){Ax=t;let i=Em(t),o=Bp(i,0),s=qp(o)==i.length&&" "!=i,a="",l=!1,c=!1,u=!1;Ex&&Ex.view==n&&Ex.scope==r&&(a=Ex.prefix+" ",Bb.indexOf(t.keyCode)<0&&(c=!0,Ex=null));let h,d,f=new Set,p=e=>{if(e){for(let t of e.run)if(!f.has(t)&&(f.add(t),t(n)))return e.stopPropagation&&(u=!0),!0;e.preventDefault&&(e.stopPropagation&&(u=!0),c=!0)}return!1},g=e[r];return g&&(p(g[a+xx(i,t,!s)])?l=!0:s&&(t.altKey||t.metaKey||t.ctrlKey)&&!(vv.windows&&t.ctrlKey&&t.altKey)&&(h=wm[t.keyCode])&&h!=i?(p(g[a+xx(h,t,!0)])||t.shiftKey&&(d=xm[t.keyCode])!=i&&d!=h&&p(g[a+xx(d,t,!1)]))&&(l=!0):s&&t.shiftKey&&p(g[a+xx(i,t,!0)])&&(l=!0),!l&&p(g._any)&&(l=!0)),c&&(l=!0),l&&u&&t.stopPropagation(),Ax=null,l}const Mx=!vv.ios;const Fx={".cm-line":{"& ::selection, &::selection":{backgroundColor:"transparent !important"}},".cm-content":{"& :focus":{caretColor:"initial !important","&::selection, & ::selection":{backgroundColor:"Highlight !important"}}}};Mx&&(Fx[".cm-line"].caretColor=Fx[".cm-content"].caretColor="transparent !important");class Rx extends Rv{constructor(e){super(),this.content=e}toDOM(e){let t=document.createElement("span");return t.className="cm-placeholder",t.style.pointerEvents="none",t.appendChild("string"==typeof this.content?document.createTextNode(this.content):"function"==typeof this.content?this.content(e):this.content.cloneNode(!0)),"string"==typeof this.content?t.setAttribute("aria-label","placeholder "+this.content):t.setAttribute("aria-hidden","true"),t}coordsAt(e){let t=e.firstChild?Dm(e.firstChild):[];if(!t.length)return null;let n=window.getComputedStyle(e.parentNode),r=Lm(t[0],"rtl"!=n.direction),i=parseInt(n.lineHeight);return r.bottom-r.top>1.5*i?{left:r.left,right:r.right,top:r.top,bottom:r.top+i}:r}ignoreEvent(){return!1}}function Px(e){return Ly.fromClass(class{constructor(t){this.view=t,this.placeholder=e?Iv.set([Iv.widget({widget:new Rx(e),side:1}).range(0)]):Iv.none}get decorations(){return this.view.state.doc.length?Iv.none:this.placeholder}},{decorations:e=>e.decorations})}const Ix="-10000px";class Lx{constructor(e,t,n,r){this.facet=t,this.createTooltipView=n,this.removeTooltipView=r,this.input=e.state.facet(t),this.tooltips=this.input.filter((e=>e));let i=null;this.tooltipViews=this.tooltips.map((e=>i=n(e,i)))}update(e,t){var n;let r=e.state.facet(this.facet),i=r.filter((e=>e));if(r===this.input){for(let t of this.tooltipViews)t.update&&t.update(e);return!1}let o=[],s=t?[]:null;for(let a=0;a<i.length;a++){let n=i[a],r=-1;if(n){for(let e=0;e<this.tooltips.length;e++){let t=this.tooltips[e];t&&t.create==n.create&&(r=e)}if(r<0)o[a]=this.createTooltipView(n,a?o[a-1]:null),s&&(s[a]=!!n.above);else{let n=o[a]=this.tooltipViews[r];s&&(s[a]=t[r]),n.update&&n.update(e)}}}for(let a of this.tooltipViews)o.indexOf(a)<0&&(this.removeTooltipView(a),null===(n=a.destroy)||void 0===n||n.call(a));return t&&(s.forEach(((e,n)=>t[n]=e)),t.length=s.length),this.input=r,this.tooltips=i,this.tooltipViews=o,!0}}function $x(e={}){return jx.of(e)}function Nx(e){let{win:t}=e;return{top:0,left:0,bottom:t.innerHeight,right:t.innerWidth}}const jx=rg.define({combine:e=>{var t,n,r;return{position:vv.ios?"absolute":(null===(t=e.find((e=>e.position)))||void 0===t?void 0:t.position)||"fixed",parent:(null===(n=e.find((e=>e.parent)))||void 0===n?void 0:n.parent)||null,tooltipSpace:(null===(r=e.find((e=>e.tooltipSpace)))||void 0===r?void 0:r.tooltipSpace)||Nx}}}),Bx=new WeakMap,Vx=Ly.fromClass(class{constructor(e){this.view=e,this.above=[],this.inView=!0,this.madeAbsolute=!1,this.lastTransaction=0,this.measureTimeout=-1;let t=e.state.facet(jx);this.position=t.position,this.parent=t.parent,this.classes=e.themeClasses,this.createContainer(),this.measureReq={read:this.readMeasure.bind(this),write:this.writeMeasure.bind(this),key:this},this.resizeObserver="function"==typeof ResizeObserver?new ResizeObserver((()=>this.measureSoon())):null,this.manager=new Lx(e,Hx,((e,t)=>this.createTooltip(e,t)),(e=>{this.resizeObserver&&this.resizeObserver.unobserve(e.dom),e.dom.remove()})),this.above=this.manager.tooltips.map((e=>!!e.above)),this.intersectionObserver="function"==typeof IntersectionObserver?new IntersectionObserver((e=>{Date.now()>this.lastTransaction-50&&e.length>0&&e[e.length-1].intersectionRatio<1&&this.measureSoon()}),{threshold:[1]}):null,this.observeIntersection(),e.win.addEventListener("resize",this.measureSoon=this.measureSoon.bind(this)),this.maybeMeasure()}createContainer(){this.parent?(this.container=document.createElement("div"),this.container.style.position="relative",this.container.className=this.view.themeClasses,this.parent.appendChild(this.container)):this.container=this.view.dom}observeIntersection(){if(this.intersectionObserver){this.intersectionObserver.disconnect();for(let e of this.manager.tooltipViews)this.intersectionObserver.observe(e.dom)}}measureSoon(){this.measureTimeout<0&&(this.measureTimeout=setTimeout((()=>{this.measureTimeout=-1,this.maybeMeasure()}),50))}update(e){e.transactions.length&&(this.lastTransaction=Date.now());let t=this.manager.update(e,this.above);t&&this.observeIntersection();let n=t||e.geometryChanged,r=e.state.facet(jx);if(r.position!=this.position&&!this.madeAbsolute){this.position=r.position;for(let e of this.manager.tooltipViews)e.dom.style.position=this.position;n=!0}if(r.parent!=this.parent){this.parent&&this.container.remove(),this.parent=r.parent,this.createContainer();for(let e of this.manager.tooltipViews)this.container.appendChild(e.dom);n=!0}else this.parent&&this.view.themeClasses!=this.classes&&(this.classes=this.container.className=this.view.themeClasses);n&&this.maybeMeasure()}createTooltip(e,t){let n=e.create(this.view),r=t?t.dom:null;if(n.dom.classList.add("cm-tooltip"),e.arrow&&!n.dom.querySelector(".cm-tooltip > .cm-tooltip-arrow")){let e=document.createElement("div");e.className="cm-tooltip-arrow",n.dom.appendChild(e)}return n.dom.style.position=this.position,n.dom.style.top=Ix,n.dom.style.left="0px",this.container.insertBefore(n.dom,r),n.mount&&n.mount(this.view),this.resizeObserver&&this.resizeObserver.observe(n.dom),n}destroy(){var e,t,n;this.view.win.removeEventListener("resize",this.measureSoon);for(let r of this.manager.tooltipViews)r.dom.remove(),null===(e=r.destroy)||void 0===e||e.call(r);this.parent&&this.container.remove(),null===(t=this.resizeObserver)||void 0===t||t.disconnect(),null===(n=this.intersectionObserver)||void 0===n||n.disconnect(),clearTimeout(this.measureTimeout)}readMeasure(){let e=1,t=1,n=!1;if("fixed"==this.position&&this.manager.tooltipViews.length){let{dom:e}=this.manager.tooltipViews[0];if(vv.gecko)n=e.offsetParent!=this.container.ownerDocument.body;else if(e.style.top==Ix&&"0px"==e.style.left){let t=e.getBoundingClientRect();n=Math.abs(t.top+1e4)>1||Math.abs(t.left)>1}}if(n||"absolute"==this.position)if(this.parent){let n=this.parent.getBoundingClientRect();n.width&&n.height&&(e=n.width/this.parent.offsetWidth,t=n.height/this.parent.offsetHeight)}else({scaleX:e,scaleY:t}=this.view.viewState);let r=this.view.scrollDOM.getBoundingClientRect(),i=Qy(this.view);return{visible:{left:r.left+i.left,top:r.top+i.top,right:r.right-i.right,bottom:r.bottom-i.bottom},parent:this.parent?this.container.getBoundingClientRect():this.view.dom.getBoundingClientRect(),pos:this.manager.tooltips.map(((e,t)=>{let n=this.manager.tooltipViews[t];return n.getCoords?n.getCoords(e.pos):this.view.coordsAtPos(e.pos)})),size:this.manager.tooltipViews.map((({dom:e})=>e.getBoundingClientRect())),space:this.view.state.facet(jx).tooltipSpace(this.view),scaleX:e,scaleY:t,makeAbsolute:n}}writeMeasure(e){var t;if(e.makeAbsolute){this.madeAbsolute=!0,this.position="absolute";for(let e of this.manager.tooltipViews)e.dom.style.position="absolute"}let{visible:n,space:r,scaleX:i,scaleY:o}=e,s=[];for(let a=0;a<this.manager.tooltips.length;a++){let l=this.manager.tooltips[a],c=this.manager.tooltipViews[a],{dom:u}=c,h=e.pos[a],d=e.size[a];if(!h||h.bottom<=Math.max(n.top,r.top)||h.top>=Math.min(n.bottom,r.bottom)||h.right<Math.max(n.left,r.left)-.1||h.left>Math.min(n.right,r.right)+.1){u.style.top=Ix;continue}let f=l.arrow?c.dom.querySelector(".cm-tooltip-arrow"):null,p=f?7:0,g=d.right-d.left,m=null!==(t=Bx.get(c))&&void 0!==t?t:d.bottom-d.top,v=c.offset||zx,y=this.view.textDirection==Yv.LTR,b=d.width>r.right-r.left?y?r.left:r.right-d.width:y?Math.max(r.left,Math.min(h.left-(f?14:0)+v.x,r.right-g)):Math.min(Math.max(r.left,h.left-g+(f?14:0)-v.x),r.right-g),w=this.above[a];!l.strictSide&&(w?h.top-m-p-v.y<r.top:h.bottom+m+p+v.y>r.bottom)&&w==r.bottom-h.bottom>h.top-r.top&&(w=this.above[a]=!w);let x=(w?h.top-r.top:r.bottom-h.bottom)-p;if(x<m&&!1!==c.resize){if(x<this.view.defaultLineHeight){u.style.top=Ix;continue}Bx.set(c,m),u.style.height=(m=x)/o+"px"}else u.style.height&&(u.style.height="");let k=w?h.top-m-p-v.y:h.bottom+p+v.y,_=b+g;if(!0!==c.overlap)for(let e of s)e.left<_&&e.right>b&&e.top<k+m&&e.bottom>k&&(k=w?e.top-m-2-p:e.bottom+p+2);if("absolute"==this.position?(u.style.top=(k-e.parent.top)/o+"px",u.style.left=(b-e.parent.left)/i+"px"):(u.style.top=k/o+"px",u.style.left=b/i+"px"),f){let e=h.left+(y?v.x:-v.x)-(b+14-7);f.style.left=e/i+"px"}!0!==c.overlap&&s.push({left:b,top:k,right:_,bottom:k+m}),u.classList.toggle("cm-tooltip-above",w),u.classList.toggle("cm-tooltip-below",!w),c.positioned&&c.positioned(e.space)}}maybeMeasure(){if(this.manager.tooltips.length&&(this.view.inView&&this.view.requestMeasure(this.measureReq),this.inView!=this.view.inView&&(this.inView=this.view.inView,!this.inView)))for(let e of this.manager.tooltipViews)e.dom.style.top=Ix}},{eventObservers:{scroll(){this.maybeMeasure()}}}),qx=px.baseTheme({".cm-tooltip":{zIndex:500,boxSizing:"border-box"},"&light .cm-tooltip":{border:"1px solid #bbb",backgroundColor:"#f5f5f5"},"&light .cm-tooltip-section:not(:first-child)":{borderTop:"1px solid #bbb"},"&dark .cm-tooltip":{backgroundColor:"#333338",color:"white"},".cm-tooltip-arrow":{height:"7px",width:"14px",position:"absolute",zIndex:-1,overflow:"hidden","&:before, &:after":{content:"''",position:"absolute",width:0,height:0,borderLeft:"7px solid transparent",borderRight:"7px solid transparent"},".cm-tooltip-above &":{bottom:"-7px","&:before":{borderTop:"7px solid #bbb"},"&:after":{borderTop:"7px solid #f5f5f5",bottom:"1px"}},".cm-tooltip-below &":{top:"-7px","&:before":{borderBottom:"7px solid #bbb"},"&:after":{borderBottom:"7px solid #f5f5f5",top:"1px"}}},"&dark .cm-tooltip .cm-tooltip-arrow":{"&:before":{borderTopColor:"#333338",borderBottomColor:"#333338"},"&:after":{borderTopColor:"transparent",borderBottomColor:"transparent"}}}),zx={x:0,y:0},Hx=rg.define({enables:[Vx,qx]}),Wx=rg.define({combine:e=>e.reduce(((e,t)=>e.concat(t)),[])});class Qx{static create(e){return new Qx(e)}constructor(e){this.view=e,this.mounted=!1,this.dom=document.createElement("div"),this.dom.classList.add("cm-tooltip-hover"),this.manager=new Lx(e,Wx,((e,t)=>this.createHostedView(e,t)),(e=>e.dom.remove()))}createHostedView(e,t){let n=e.create(this.view);return n.dom.classList.add("cm-tooltip-section"),this.dom.insertBefore(n.dom,t?t.dom.nextSibling:this.dom.firstChild),this.mounted&&n.mount&&n.mount(this.view),n}mount(e){for(let t of this.manager.tooltipViews)t.mount&&t.mount(e);this.mounted=!0}positioned(e){for(let t of this.manager.tooltipViews)t.positioned&&t.positioned(e)}update(e){this.manager.update(e)}destroy(){var e;for(let t of this.manager.tooltipViews)null===(e=t.destroy)||void 0===e||e.call(t)}passProp(e){let t;for(let n of this.manager.tooltipViews){let r=n[e];if(void 0!==r)if(void 0===t)t=r;else if(t!==r)return}return t}get offset(){return this.passProp("offset")}get getCoords(){return this.passProp("getCoords")}get overlap(){return this.passProp("overlap")}get resize(){return this.passProp("resize")}}const Ux=Hx.compute([Wx],(e=>{let t=e.facet(Wx);return 0===t.length?null:{pos:Math.min(...t.map((e=>e.pos))),end:Math.max(...t.map((e=>{var t;return null!==(t=e.end)&&void 0!==t?t:e.pos}))),create:Qx.create,above:t[0].above,arrow:t.some((e=>e.arrow))}}));class Yx{constructor(e,t,n,r,i){this.view=e,this.source=t,this.field=n,this.setHover=r,this.hoverTime=i,this.hoverTimeout=-1,this.restartTimeout=-1,this.pending=null,this.lastMove={x:0,y:0,target:e.dom,time:0},this.checkHover=this.checkHover.bind(this),e.dom.addEventListener("mouseleave",this.mouseleave=this.mouseleave.bind(this)),e.dom.addEventListener("mousemove",this.mousemove=this.mousemove.bind(this))}update(){this.pending&&(this.pending=null,clearTimeout(this.restartTimeout),this.restartTimeout=setTimeout((()=>this.startHover()),20))}get active(){return this.view.state.field(this.field)}checkHover(){if(this.hoverTimeout=-1,this.active.length)return;let e=Date.now()-this.lastMove.time;e<this.hoverTime?this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime-e):this.startHover()}startHover(){clearTimeout(this.restartTimeout);let{view:e,lastMove:t}=this,n=e.docView.nearest(t.target);if(!n)return;let r,i=1;if(n instanceof kv)r=n.posAtStart;else{if(r=e.posAtCoords(t),null==r)return;let n=e.coordsAtPos(r);if(!n||t.y<n.top||t.y>n.bottom||t.x<n.left-e.defaultCharacterWidth||t.x>n.right+e.defaultCharacterWidth)return;let o=e.bidiSpans(e.state.doc.lineAt(r)).find((e=>e.from<=r&&e.to>=r)),s=o&&o.dir==Yv.RTL?-1:1;i=t.x<n.left?-s:s}let o=this.source(e,r,i);if(null===o||void 0===o?void 0:o.then){let t=this.pending={pos:r};o.then((n=>{this.pending==t&&(this.pending=null,!n||Array.isArray(n)&&!n.length||e.dispatch({effects:this.setHover.of(Array.isArray(n)?n:[n])}))}),(t=>Fy(e.state,t,"hover tooltip")))}else!o||Array.isArray(o)&&!o.length||e.dispatch({effects:this.setHover.of(Array.isArray(o)?o:[o])})}get tooltip(){let e=this.view.plugin(Vx),t=e?e.manager.tooltips.findIndex((e=>e.create==Qx.create)):-1;return t>-1?e.manager.tooltipViews[t]:null}mousemove(e){var t,n;this.lastMove={x:e.clientX,y:e.clientY,target:e.target,time:Date.now()},this.hoverTimeout<0&&(this.hoverTimeout=setTimeout(this.checkHover,this.hoverTime));let{active:r,tooltip:i}=this;if(r.length&&i&&!Zx(i.dom,e)||this.pending){let{pos:i}=r[0]||this.pending,o=null!==(n=null===(t=r[0])||void 0===t?void 0:t.end)&&void 0!==n?n:i;(i==o?this.view.posAtCoords(this.lastMove)==i:Gx(this.view,i,o,e.clientX,e.clientY))||(this.view.dispatch({effects:this.setHover.of([])}),this.pending=null)}}mouseleave(e){clearTimeout(this.hoverTimeout),this.hoverTimeout=-1;let{active:t}=this;if(t.length){let{tooltip:t}=this,n=t&&t.dom.contains(e.relatedTarget);n?this.watchTooltipLeave(t.dom):this.view.dispatch({effects:this.setHover.of([])})}}watchTooltipLeave(e){let t=n=>{e.removeEventListener("mouseleave",t),this.active.length&&!this.view.dom.contains(n.relatedTarget)&&this.view.dispatch({effects:this.setHover.of([])})};e.addEventListener("mouseleave",t)}destroy(){clearTimeout(this.hoverTimeout),this.view.dom.removeEventListener("mouseleave",this.mouseleave),this.view.dom.removeEventListener("mousemove",this.mousemove)}}const Xx=4;function Zx(e,t){let n,{left:r,right:i,top:o,bottom:s}=e.getBoundingClientRect();if(n=e.querySelector(".cm-tooltip-arrow")){let e=n.getBoundingClientRect();o=Math.min(e.top,o),s=Math.max(e.bottom,s)}return t.clientX>=r-Xx&&t.clientX<=i+Xx&&t.clientY>=o-Xx&&t.clientY<=s+Xx}function Gx(e,t,n,r,i,o){let s=e.scrollDOM.getBoundingClientRect(),a=e.documentTop+e.documentPadding.top+e.contentHeight;if(s.left>r||s.right<r||s.top>i||Math.min(s.bottom,a)<i)return!1;let l=e.posAtCoords({x:r,y:i},!1);return l>=t&&l<=n}function Kx(e,t={}){let n=Mg.define(),r=ug.define({create(){return[]},update(e,r){if(e.length&&(t.hideOnChange&&(r.docChanged||r.selection)?e=[]:t.hideOn&&(e=e.filter((e=>!t.hideOn(r,e)))),r.docChanged)){let t=[];for(let n of e){let e=r.changes.mapPos(n.pos,-1,Hp.TrackDel);if(null!=e){let i=Object.assign(Object.create(null),n);i.pos=e,null!=i.end&&(i.end=r.changes.mapPos(i.end)),t.push(i)}}e=t}for(let t of r.effects)t.is(n)&&(e=t.value),t.is(ek)&&(e=[]);return e},provide:e=>Wx.from(e)});return{active:r,extension:[r,Ly.define((i=>new Yx(i,e,r,n,t.hoverTime||300))),Ux]}}function Jx(e,t){let n=e.plugin(Vx);if(!n)return null;let r=n.manager.tooltips.indexOf(t);return r<0?null:n.manager.tooltipViews[r]}const ek=Mg.define();const tk=rg.define({combine(e){let t,n;for(let r of e)t=t||r.topContainer,n=n||r.bottomContainer;return{topContainer:t,bottomContainer:n}}});const nk=Ly.fromClass(class{constructor(e){this.input=e.state.facet(ok),this.specs=this.input.filter((e=>e)),this.panels=this.specs.map((t=>t(e)));let t=e.state.facet(tk);this.top=new rk(e,!0,t.topContainer),this.bottom=new rk(e,!1,t.bottomContainer),this.top.sync(this.panels.filter((e=>e.top))),this.bottom.sync(this.panels.filter((e=>!e.top)));for(let n of this.panels)n.dom.classList.add("cm-panel"),n.mount&&n.mount()}update(e){let t=e.state.facet(tk);this.top.container!=t.topContainer&&(this.top.sync([]),this.top=new rk(e.view,!0,t.topContainer)),this.bottom.container!=t.bottomContainer&&(this.bottom.sync([]),this.bottom=new rk(e.view,!1,t.bottomContainer)),this.top.syncClasses(),this.bottom.syncClasses();let n=e.state.facet(ok);if(n!=this.input){let t=n.filter((e=>e)),r=[],i=[],o=[],s=[];for(let n of t){let t,a=this.specs.indexOf(n);a<0?(t=n(e.view),s.push(t)):(t=this.panels[a],t.update&&t.update(e)),r.push(t),(t.top?i:o).push(t)}this.specs=t,this.panels=r,this.top.sync(i),this.bottom.sync(o);for(let e of s)e.dom.classList.add("cm-panel"),e.mount&&e.mount()}else for(let r of this.panels)r.update&&r.update(e)}destroy(){this.top.sync([]),this.bottom.sync([])}},{provide:e=>px.scrollMargins.of((t=>{let n=t.plugin(e);return n&&{top:n.top.scrollMargin(),bottom:n.bottom.scrollMargin()}}))});class rk{constructor(e,t,n){this.view=e,this.top=t,this.container=n,this.dom=void 0,this.classes="",this.panels=[],this.syncClasses()}sync(e){for(let t of this.panels)t.destroy&&e.indexOf(t)<0&&t.destroy();this.panels=e,this.syncDOM()}syncDOM(){if(0==this.panels.length)return void(this.dom&&(this.dom.remove(),this.dom=void 0));if(!this.dom){this.dom=document.createElement("div"),this.dom.className=this.top?"cm-panels cm-panels-top":"cm-panels cm-panels-bottom",this.dom.style[this.top?"top":"bottom"]="0";let e=this.container||this.view.dom;e.insertBefore(this.dom,this.top?e.firstChild:null)}let e=this.dom.firstChild;for(let t of this.panels)if(t.dom.parentNode==this.dom){while(e!=t.dom)e=ik(e);e=e.nextSibling}else this.dom.insertBefore(t.dom,e);while(e)e=ik(e)}scrollMargin(){return!this.dom||this.container?0:Math.max(0,this.top?this.dom.getBoundingClientRect().bottom-Math.max(0,this.view.scrollDOM.getBoundingClientRect().top):Math.min(innerHeight,this.view.scrollDOM.getBoundingClientRect().bottom)-this.dom.getBoundingClientRect().top)}syncClasses(){if(this.container&&this.classes!=this.view.themeClasses){for(let e of this.classes.split(" "))e&&this.container.classList.remove(e);for(let e of(this.classes=this.view.themeClasses).split(" "))e&&this.container.classList.add(e)}}}function ik(e){let t=e.nextSibling;return e.remove(),t}const ok=rg.define({enables:nk});class sk extends Yg{compare(e){return this==e||this.constructor==e.constructor&&this.eq(e)}eq(e){return!1}destroy(e){}}sk.prototype.elementClass="",sk.prototype.toDOM=void 0,sk.prototype.mapMode=Hp.TrackBefore,sk.prototype.startSide=sk.prototype.endSide=-1,sk.prototype.point=!0;const ak=rg.define(),lk=rg.define(),ck=rg.define();const uk=rg.define({combine:e=>e.some((e=>e))});function hk(e){let t=[dk];return e&&!1===e.fixed&&t.push(uk.of(!0)),t}const dk=Ly.fromClass(class{constructor(e){this.view=e,this.prevViewport=e.viewport,this.dom=document.createElement("div"),this.dom.className="cm-gutters",this.dom.setAttribute("aria-hidden","true"),this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px",this.gutters=e.state.facet(ck).map((t=>new mk(e,t)));for(let t of this.gutters)this.dom.appendChild(t.dom);this.fixed=!e.state.facet(uk),this.fixed&&(this.dom.style.position="sticky"),this.syncGutters(!1),e.scrollDOM.insertBefore(this.dom,e.contentDOM)}update(e){if(this.updateGutters(e)){let t=this.prevViewport,n=e.view.viewport,r=Math.min(t.to,n.to)-Math.max(t.from,n.from);this.syncGutters(r<.8*(n.to-n.from))}e.geometryChanged&&(this.dom.style.minHeight=this.view.contentHeight/this.view.scaleY+"px"),this.view.state.facet(uk)!=!this.fixed&&(this.fixed=!this.fixed,this.dom.style.position=this.fixed?"sticky":""),this.prevViewport=e.view.viewport}syncGutters(e){let t=this.dom.nextSibling;e&&this.dom.remove();let n=Kg.iter(this.view.state.facet(ak),this.view.viewport.from),r=[],i=this.gutters.map((e=>new gk(e,this.view.viewport,-this.view.documentPadding.top)));for(let o of this.view.viewportLineBlocks)if(r.length&&(r=[]),Array.isArray(o.type)){let e=!0;for(let t of o.type)if(t.type==Pv.Text&&e){pk(n,r,t.from);for(let e of i)e.line(this.view,t,r);e=!1}else if(t.widget)for(let e of i)e.widget(this.view,t)}else if(o.type==Pv.Text){pk(n,r,o.from);for(let e of i)e.line(this.view,o,r)}else if(o.widget)for(let e of i)e.widget(this.view,o);for(let o of i)o.finish();e&&this.view.scrollDOM.insertBefore(this.dom,t)}updateGutters(e){let t=e.startState.facet(ck),n=e.state.facet(ck),r=e.docChanged||e.heightChanged||e.viewportChanged||!Kg.eq(e.startState.facet(ak),e.state.facet(ak),e.view.viewport.from,e.view.viewport.to);if(t==n)for(let i of this.gutters)i.update(e)&&(r=!0);else{r=!0;let i=[];for(let r of n){let n=t.indexOf(r);n<0?i.push(new mk(this.view,r)):(this.gutters[n].update(e),i.push(this.gutters[n]))}for(let e of this.gutters)e.dom.remove(),i.indexOf(e)<0&&e.destroy();for(let e of i)this.dom.appendChild(e.dom);this.gutters=i}return r}destroy(){for(let e of this.gutters)e.destroy();this.dom.remove()}},{provide:e=>px.scrollMargins.of((t=>{let n=t.plugin(e);return n&&0!=n.gutters.length&&n.fixed?t.textDirection==Yv.LTR?{left:n.dom.offsetWidth*t.scaleX}:{right:n.dom.offsetWidth*t.scaleX}:null}))});function fk(e){return Array.isArray(e)?e:[e]}function pk(e,t,n){while(e.value&&e.from<=n)e.from==n&&t.push(e.value),e.next()}class gk{constructor(e,t,n){this.gutter=e,this.height=n,this.i=0,this.cursor=Kg.iter(e.markers,t.from)}addElement(e,t,n){let{gutter:r}=this,i=(t.top-this.height)/e.scaleY,o=t.height/e.scaleY;if(this.i==r.elements.length){let t=new vk(e,o,i,n);r.elements.push(t),r.dom.appendChild(t.dom)}else r.elements[this.i].update(e,o,i,n);this.height=t.bottom,this.i++}line(e,t,n){let r=[];pk(this.cursor,r,t.from),n.length&&(r=r.concat(n));let i=this.gutter.config.lineMarker(e,t,r);i&&r.unshift(i);let o=this.gutter;(0!=r.length||o.config.renderEmptyElements)&&this.addElement(e,t,r)}widget(e,t){let n=this.gutter.config.widgetMarker(e,t.widget,t),r=n?[n]:null;for(let i of e.state.facet(lk)){let n=i(e,t.widget,t);n&&(r||(r=[])).push(n)}r&&this.addElement(e,t,r)}finish(){let e=this.gutter;while(e.elements.length>this.i){let t=e.elements.pop();e.dom.removeChild(t.dom),t.destroy()}}}class mk{constructor(e,t){this.view=e,this.config=t,this.elements=[],this.spacer=null,this.dom=document.createElement("div"),this.dom.className="cm-gutter"+(this.config.class?" "+this.config.class:"");for(let n in t.domEventHandlers)this.dom.addEventListener(n,(r=>{let i,o=r.target;if(o!=this.dom&&this.dom.contains(o)){while(o.parentNode!=this.dom)o=o.parentNode;let e=o.getBoundingClientRect();i=(e.top+e.bottom)/2}else i=r.clientY;let s=e.lineBlockAtHeight(i-e.documentTop);t.domEventHandlers[n](e,s,r)&&r.preventDefault()}));this.markers=fk(t.markers(e)),t.initialSpacer&&(this.spacer=new vk(e,0,0,[t.initialSpacer(e)]),this.dom.appendChild(this.spacer.dom),this.spacer.dom.style.cssText+="visibility: hidden; pointer-events: none")}update(e){let t=this.markers;if(this.markers=fk(this.config.markers(e.view)),this.spacer&&this.config.updateSpacer){let t=this.config.updateSpacer(this.spacer.markers[0],e);t!=this.spacer.markers[0]&&this.spacer.update(e.view,0,0,[t])}let n=e.view.viewport;return!Kg.eq(this.markers,t,n.from,n.to)||!!this.config.lineMarkerChange&&this.config.lineMarkerChange(e)}destroy(){for(let e of this.elements)e.destroy()}}class vk{constructor(e,t,n,r){this.height=-1,this.above=0,this.markers=[],this.dom=document.createElement("div"),this.dom.className="cm-gutterElement",this.update(e,t,n,r)}update(e,t,n,r){this.height!=t&&(this.height=t,this.dom.style.height=t+"px"),this.above!=n&&(this.dom.style.marginTop=(this.above=n)?n+"px":""),yk(this.markers,r)||this.setMarkers(e,r)}setMarkers(e,t){let n="cm-gutterElement",r=this.dom.firstChild;for(let i=0,o=0;;){let s=o,a=i<t.length?t[i++]:null,l=!1;if(a){let e=a.elementClass;e&&(n+=" "+e);for(let t=o;t<this.markers.length;t++)if(this.markers[t].compare(a)){s=t,l=!0;break}}else s=this.markers.length;while(o<s){let e=this.markers[o++];if(e.toDOM){e.destroy(r);let t=r.nextSibling;r.remove(),r=t}}if(!a)break;a.toDOM&&(l?r=r.nextSibling:this.dom.insertBefore(a.toDOM(e),r)),l&&o++}this.dom.className=n,this.markers=t}destroy(){this.setMarkers(null,[])}}function yk(e,t){if(e.length!=t.length)return!1;for(let n=0;n<e.length;n++)if(!e[n].compare(t[n]))return!1;return!0}const bk=rg.define(),wk=rg.define(),xk=rg.define({combine(e){return Ug(e,{formatNumber:String,domEventHandlers:{}},{domEventHandlers(e,t){let n=Object.assign({},e);for(let r in t){let e=n[r],i=t[r];n[r]=e?(t,n,r)=>e(t,n,r)||i(t,n,r):i}return n}})}});class kk extends sk{constructor(e){super(),this.number=e}eq(e){return this.number==e.number}toDOM(){return document.createTextNode(this.number)}}function _k(e,t){return e.state.facet(xk).formatNumber(t,e.state)}const Ok=ck.compute([xk],(e=>({class:"cm-lineNumbers",renderEmptyElements:!1,markers(e){return e.state.facet(bk)},lineMarker(e,t,n){return n.some((e=>e.toDOM))?null:new kk(_k(e,e.state.doc.lineAt(t.from).number))},widgetMarker:(e,t,n)=>{for(let r of e.state.facet(wk)){let i=r(e,t,n);if(i)return i}return null},lineMarkerChange:e=>e.startState.facet(xk)!=e.state.facet(xk),initialSpacer(e){return new kk(_k(e,Ek(e.state.doc.lines)))},updateSpacer(e,t){let n=_k(t.view,Ek(t.view.state.doc.lines));return n==e.number?e:new kk(n)},domEventHandlers:e.facet(xk).domEventHandlers})));function Sk(e={}){return[xk.of(e),hk(),Ok]}function Ek(e){let t=9;while(t<e)t=10*t+9;return t}var Ck;const Tk=new Sc;function Ak(e){return rg.define({combine:e?t=>t.concat(e):void 0})}const Dk=new Sc;class Mk{constructor(e,t,n=[],r=""){this.data=e,this.name=r,Qg.prototype.hasOwnProperty("tree")||Object.defineProperty(Qg.prototype,"tree",{get(){return Pk(this)}}),this.parser=t,this.extension=[zk.of(this),Qg.languageData.of(((e,t,n)=>{let r=Fk(e,t,n),i=r.type.prop(Tk);if(!i)return[];let o=e.facet(i),s=r.type.prop(Dk);if(s){let i=r.resolve(t-r.from,n);for(let t of s)if(t.test(i,e)){let n=e.facet(t.facet);return"replace"==t.type?n:n.concat(o)}}return o}))].concat(n)}isActiveAt(e,t,n=-1){return Fk(e,t,n).type.prop(Tk)==this.data}findRegions(e){let t=e.facet(zk);if((null===t||void 0===t?void 0:t.data)==this.data)return[{from:0,to:e.doc.length}];if(!t||!t.allowsNesting)return[];let n=[],r=(e,t)=>{if(e.prop(Tk)==this.data)return void n.push({from:t,to:t+e.length});let i=e.prop(Sc.mounted);if(i){if(i.tree.prop(Tk)==this.data){if(i.overlay)for(let e of i.overlay)n.push({from:e.from+t,to:e.to+t});else n.push({from:t,to:t+e.length});return}if(i.overlay){let e=n.length;if(r(i.tree,i.overlay[0].from+t),n.length>e)return}}for(let n=0;n<e.children.length;n++){let i=e.children[n];i instanceof Rc&&r(i,e.positions[n]+t)}};return r(Pk(e),0),n}get allowsNesting(){return!0}}function Fk(e,t,n){let r=e.facet(zk),i=Pk(e).topNode;if(!r||r.allowsNesting)for(let o=i;o;o=o.enter(t,n,Fc.ExcludeBuffers))o.type.isTop&&(i=o);return i}Mk.setState=Mg.define();class Rk extends Mk{constructor(e,t,n){super(e,t,[],n),this.parser=t}static define(e){let t=Ak(e.languageData);return new Rk(t,e.parser.configure({props:[Tk.add((e=>e.isTop?t:void 0))]}),e.name)}configure(e,t){return new Rk(this.data,this.parser.configure(e),t||this.name)}get allowsNesting(){return this.parser.hasWrappers()}}function Pk(e){let t=e.field(Mk.state,!1);return t?t.tree:Rc.empty}class Ik{constructor(e){this.doc=e,this.cursorPos=0,this.string="",this.cursor=e.iter()}get length(){return this.doc.length}syncTo(e){return this.string=this.cursor.next(e-this.cursorPos).value,this.cursorPos=e+this.string.length,this.cursorPos-this.string.length}chunk(e){return this.syncTo(e),this.string}get lineChunks(){return!0}read(e,t){let n=this.cursorPos-this.string.length;return e<n||t>=this.cursorPos?this.doc.sliceString(e,t):this.string.slice(e-n,t-n)}}let Lk=null;class $k{constructor(e,t,n=[],r,i,o,s,a){this.parser=e,this.state=t,this.fragments=n,this.tree=r,this.treeLen=i,this.viewport=o,this.skipped=s,this.scheduleOn=a,this.parse=null,this.tempSkipped=[]}static create(e,t,n){return new $k(e,t,[],Rc.empty,0,n,[],null)}startParse(){return this.parser.startParse(new Ik(this.state.doc),this.fragments)}work(e,t){return null!=t&&t>=this.state.doc.length&&(t=void 0),this.tree!=Rc.empty&&this.isDone(null!==t&&void 0!==t?t:this.state.doc.length)?(this.takeTree(),!0):this.withContext((()=>{var n;if("number"==typeof e){let t=Date.now()+e;e=()=>Date.now()>t}for(this.parse||(this.parse=this.startParse()),null!=t&&(null==this.parse.stoppedAt||this.parse.stoppedAt>t)&&t<this.state.doc.length&&this.parse.stopAt(t);;){let r=this.parse.advance();if(r){if(this.fragments=this.withoutTempSkipped(Jc.addTree(r,this.fragments,null!=this.parse.stoppedAt)),this.treeLen=null!==(n=this.parse.stoppedAt)&&void 0!==n?n:this.state.doc.length,this.tree=r,this.parse=null,!(this.treeLen<(null!==t&&void 0!==t?t:this.state.doc.length)))return!0;this.parse=this.startParse()}if(e())return!1}}))}takeTree(){let e,t;this.parse&&(e=this.parse.parsedPos)>=this.treeLen&&((null==this.parse.stoppedAt||this.parse.stoppedAt>e)&&this.parse.stopAt(e),this.withContext((()=>{while(!(t=this.parse.advance()));})),this.treeLen=e,this.tree=t,this.fragments=this.withoutTempSkipped(Jc.addTree(this.tree,this.fragments,!0)),this.parse=null)}withContext(e){let t=Lk;Lk=this;try{return e()}finally{Lk=t}}withoutTempSkipped(e){for(let t;t=this.tempSkipped.pop();)e=Nk(e,t.from,t.to);return e}changes(e,t){let{fragments:n,tree:r,treeLen:i,viewport:o,skipped:s}=this;if(this.takeTree(),!e.empty){let t=[];if(e.iterChangedRanges(((e,n,r,i)=>t.push({fromA:e,toA:n,fromB:r,toB:i}))),n=Jc.applyChanges(n,t),r=Rc.empty,i=0,o={from:e.mapPos(o.from,-1),to:e.mapPos(o.to,1)},this.skipped.length){s=[];for(let t of this.skipped){let n=e.mapPos(t.from,1),r=e.mapPos(t.to,-1);n<r&&s.push({from:n,to:r})}}}return new $k(this.parser,t,n,r,i,o,s,this.scheduleOn)}updateViewport(e){if(this.viewport.from==e.from&&this.viewport.to==e.to)return!1;this.viewport=e;let t=this.skipped.length;for(let n=0;n<this.skipped.length;n++){let{from:t,to:r}=this.skipped[n];t<e.to&&r>e.from&&(this.fragments=Nk(this.fragments,t,r),this.skipped.splice(n--,1))}return!(this.skipped.length>=t)&&(this.reset(),!0)}reset(){this.parse&&(this.takeTree(),this.parse=null)}skipUntilInView(e,t){this.skipped.push({from:e,to:t})}static getSkippingParser(e){return new class extends eu{createParse(t,n,r){let i=r[0].from,o=r[r.length-1].to,s={parsedPos:i,advance(){let t=Lk;if(t){for(let e of r)t.tempSkipped.push(e);e&&(t.scheduleOn=t.scheduleOn?Promise.all([t.scheduleOn,e]):e)}return this.parsedPos=o,new Rc(Tc.none,[],[],o-i)},stoppedAt:null,stopAt(){}};return s}}}isDone(e){e=Math.min(e,this.state.doc.length);let t=this.fragments;return this.treeLen>=e&&t.length&&0==t[0].from&&t[0].to>=e}static get(){return Lk}}function Nk(e,t,n){return Jc.applyChanges(e,[{fromA:t,toA:n,fromB:t,toB:n}])}class jk{constructor(e){this.context=e,this.tree=e.tree}apply(e){if(!e.docChanged&&this.tree==this.context.tree)return this;let t=this.context.changes(e.changes,e.state),n=this.context.treeLen==e.startState.doc.length?void 0:Math.max(e.changes.mapPos(this.context.treeLen),t.viewport.to);return t.work(20,n)||t.takeTree(),new jk(t)}static init(e){let t=Math.min(3e3,e.doc.length),n=$k.create(e.facet(zk).parser,e,{from:0,to:t});return n.work(20,t)||n.takeTree(),new jk(n)}}Mk.state=ug.define({create:jk.init,update(e,t){for(let n of t.effects)if(n.is(Mk.setState))return n.value;return t.startState.facet(zk)!=t.state.facet(zk)?jk.init(t.state):e.apply(t)}});let Bk=e=>{let t=setTimeout((()=>e()),500);return()=>clearTimeout(t)};"undefined"!=typeof requestIdleCallback&&(Bk=e=>{let t=-1,n=setTimeout((()=>{t=requestIdleCallback(e,{timeout:400})}),100);return()=>t<0?clearTimeout(n):cancelIdleCallback(t)});const Vk="undefined"!=typeof navigator&&(null===(Ck=navigator.scheduling)||void 0===Ck?void 0:Ck.isInputPending)?()=>navigator.scheduling.isInputPending():null,qk=Ly.fromClass(class{constructor(e){this.view=e,this.working=null,this.workScheduled=0,this.chunkEnd=-1,this.chunkBudget=-1,this.work=this.work.bind(this),this.scheduleWork()}update(e){let t=this.view.state.field(Mk.state).context;(t.updateViewport(e.view.viewport)||this.view.viewport.to>t.treeLen)&&this.scheduleWork(),(e.docChanged||e.selectionSet)&&(this.view.hasFocus&&(this.chunkBudget+=50),this.scheduleWork()),this.checkAsyncSchedule(t)}scheduleWork(){if(this.working)return;let{state:e}=this.view,t=e.field(Mk.state);t.tree==t.context.tree&&t.context.isDone(e.doc.length)||(this.working=Bk(this.work))}work(e){this.working=null;let t=Date.now();if(this.chunkEnd<t&&(this.chunkEnd<0||this.view.hasFocus)&&(this.chunkEnd=t+3e4,this.chunkBudget=3e3),this.chunkBudget<=0)return;let{state:n,viewport:{to:r}}=this.view,i=n.field(Mk.state);if(i.tree==i.context.tree&&i.context.isDone(r+1e5))return;let o=Date.now()+Math.min(this.chunkBudget,100,e&&!Vk?Math.max(25,e.timeRemaining()-5):1e9),s=i.context.treeLen<r&&n.doc.length>r+1e3,a=i.context.work((()=>Vk&&Vk()||Date.now()>o),r+(s?0:1e5));this.chunkBudget-=Date.now()-t,(a||this.chunkBudget<=0)&&(i.context.takeTree(),this.view.dispatch({effects:Mk.setState.of(new jk(i.context))})),this.chunkBudget>0&&(!a||s)&&this.scheduleWork(),this.checkAsyncSchedule(i.context)}checkAsyncSchedule(e){e.scheduleOn&&(this.workScheduled++,e.scheduleOn.then((()=>this.scheduleWork())).catch((e=>Fy(this.view.state,e))).then((()=>this.workScheduled--)),e.scheduleOn=null)}destroy(){this.working&&this.working()}isWorking(){return!!(this.working||this.workScheduled>0)}},{eventHandlers:{focus(){this.scheduleWork()}}}),zk=rg.define({combine(e){return e.length?e[0]:null},enables:e=>[Mk.state,qk,px.contentAttributes.compute([e],(t=>{let n=t.facet(e);return n&&n.name?{"data-language":n.name}:{}}))]});class Hk{constructor(e,t=[]){this.language=e,this.support=t,this.extension=[e,t]}}const Wk=rg.define(),Qk=rg.define({combine:e=>{if(!e.length)return"  ";let t=e[0];if(!t||/\S/.test(t)||Array.from(t).some((e=>e!=t[0])))throw new Error("Invalid indent unit: "+JSON.stringify(e[0]));return t}});function Uk(e){let t=e.facet(Qk);return 9==t.charCodeAt(0)?e.tabSize*t.length:t.length}function Yk(e,t){let n="",r=e.tabSize,i=e.facet(Qk)[0];if("\t"==i){while(t>=r)n+="\t",t-=r;i=" "}for(let o=0;o<t;o++)n+=i;return n}function Xk(e,t){e instanceof Qg&&(e=new Zk(e));for(let r of e.state.facet(Wk)){let n=r(e,t);if(void 0!==n)return n}let n=Pk(e.state);return n.length>=t?Kk(e,n,t):null}class Zk{constructor(e,t={}){this.state=e,this.options=t,this.unit=Uk(e)}lineAt(e,t=1){let n=this.state.doc.lineAt(e),{simulateBreak:r,simulateDoubleBreak:i}=this.options;return null!=r&&r>=n.from&&r<=n.to?i&&r==e?{text:"",from:e}:(t<0?r<e:r<=e)?{text:n.text.slice(r-n.from),from:r}:{text:n.text.slice(0,r-n.from),from:n.from}:n}textAfterPos(e,t=1){if(this.options.simulateDoubleBreak&&e==this.options.simulateBreak)return"";let{text:n,from:r}=this.lineAt(e,t);return n.slice(e-r,Math.min(n.length,e+100-r))}column(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.countColumn(n,e-r),o=this.options.overrideIndentation?this.options.overrideIndentation(r):-1;return o>-1&&(i+=o-this.countColumn(n,n.search(/\S|$/))),i}countColumn(e,t=e.length){return hm(e,this.state.tabSize,t)}lineIndent(e,t=1){let{text:n,from:r}=this.lineAt(e,t),i=this.options.overrideIndentation;if(i){let e=i(r);if(e>-1)return e}return this.countColumn(n,n.search(/\S|$/))}get simulatedBreak(){return this.options.simulateBreak||null}}const Gk=new Sc;function Kk(e,t,n){let r=t.resolveStack(n),i=r.node.enterUnfinishedNodesBefore(n);if(i!=r.node){let e=[];for(let t=i;t!=r.node;t=t.parent)e.push(t);for(let t=e.length-1;t>=0;t--)r={node:e[t],next:r}}return Jk(r,e,n)}function Jk(e,t,n){for(let r=e;r;r=r.next){let e=t_(r.node);if(e)return e(r_.create(t,n,r))}return 0}function e_(e){return e.pos==e.options.simulateBreak&&e.options.simulateDoubleBreak}function t_(e){let t=e.type.prop(Gk);if(t)return t;let n,r=e.firstChild;if(r&&(n=r.type.prop(Sc.closedBy))){let t=e.lastChild,r=t&&n.indexOf(t.name)>-1;return e=>a_(e,!0,1,void 0,r&&!e_(e)?t.from:void 0)}return null==e.parent?n_:null}function n_(){return 0}class r_ extends Zk{constructor(e,t,n){super(e.state,e.options),this.base=e,this.pos=t,this.context=n}get node(){return this.context.node}static create(e,t,n){return new r_(e,t,n)}get textAfter(){return this.textAfterPos(this.pos)}get baseIndent(){return this.baseIndentFor(this.node)}baseIndentFor(e){let t=this.state.doc.lineAt(e.from);for(;;){let n=e.resolve(t.from);while(n.parent&&n.parent.from==n.from)n=n.parent;if(i_(n,e))break;t=this.state.doc.lineAt(n.from)}return this.lineIndent(t.from)}continue(){return Jk(this.context.next,this.base,this.pos)}}function i_(e,t){for(let n=t;n;n=n.parent)if(e==n)return!0;return!1}function o_(e){let t=e.node,n=t.childAfter(t.from),r=t.lastChild;if(!n)return null;let i=e.options.simulateBreak,o=e.state.doc.lineAt(n.from),s=null==i||i<=o.from?o.to:Math.min(o.to,i);for(let a=n.to;;){let e=t.childAfter(a);if(!e||e==r)return null;if(!e.type.isSkipped){if(e.from>=s)return null;let t=/^ */.exec(o.text.slice(n.to-o.from))[0].length;return{from:n.from,to:n.to+t}}a=e.to}}function s_({closing:e,align:t=!0,units:n=1}){return r=>a_(r,t,n,e)}function a_(e,t,n,r,i){let o=e.textAfter,s=o.match(/^\s*/)[0].length,a=r&&o.slice(s,s+r.length)==r||i==e.pos+s,l=t?o_(e):null;return l?a?e.column(l.from):e.column(l.to):e.baseIndent+(a?0:e.unit*n)}function l_({except:e,units:t=1}={}){return n=>{let r=e&&e.test(n.textAfter);return n.baseIndent+(r?0:t*n.unit)}}const c_=200;function u_(){return Qg.transactionFilter.of((e=>{if(!e.docChanged||!e.isUserEvent("input.type")&&!e.isUserEvent("input.complete"))return e;let t=e.startState.languageDataAt("indentOnInput",e.startState.selection.main.head);if(!t.length)return e;let n=e.newDoc,{head:r}=e.newSelection.main,i=n.lineAt(r);if(r>i.from+c_)return e;let o=n.sliceString(i.from,r);if(!t.some((e=>e.test(o))))return e;let{state:s}=e,a=-1,l=[];for(let{head:c}of s.selection.ranges){let e=s.doc.lineAt(c);if(e.from==a)continue;a=e.from;let t=Xk(s,e.from);if(null==t)continue;let n=/^\s*/.exec(e.text)[0],r=Yk(s,t);n!=r&&l.push({from:e.from,to:e.from+n.length,insert:r})}return l.length?[e,{changes:l,sequential:!0}]:e}))}const h_=new Sc;function d_(e){let t=e.firstChild,n=e.lastChild;return t&&t.to<n.from?{from:t.to,to:n.type.isError?e.to:n.from}:null}class f_{constructor(e,t){let n;function r(e){let t=vm.newName();return(n||(n=Object.create(null)))["."+t]=e,t}this.specs=e;const i="string"==typeof t.all?t.all:t.all?r(t.all):void 0,o=t.scope;this.scope=o instanceof Mk?e=>e.prop(Tk)==o.data:o?e=>e==o:void 0,this.style=Ju(e.map((e=>({tag:e.tag,class:e.class||r(Object.assign({},e,{tag:null}))}))),{all:i}).style,this.module=n?new vm(n):null,this.themeType=t.themeType}static define(e,t){return new f_(e,t||{})}}const p_=rg.define(),g_=rg.define({combine(e){return e.length?[e[0]]:null}});function m_(e){let t=e.facet(p_);return t.length?t:e.facet(g_)}function v_(e,t){let n,r=[b_];return e instanceof f_&&(e.module&&r.push(px.styleModule.of(e.module)),n=e.themeType),(null===t||void 0===t?void 0:t.fallback)?r.push(g_.of(e)):n?r.push(p_.computeN([px.darkTheme],(t=>t.facet(px.darkTheme)==("dark"==n)?[e]:[]))):r.push(p_.of(e)),r}class y_{constructor(e){this.markCache=Object.create(null),this.tree=Pk(e.state),this.decorations=this.buildDeco(e,m_(e.state)),this.decoratedTo=e.viewport.to}update(e){let t=Pk(e.state),n=m_(e.state),r=n!=m_(e.startState),{viewport:i}=e.view,o=e.changes.mapPos(this.decoratedTo,1);t.length<i.to&&!r&&t.type==this.tree.type&&o>=i.to?(this.decorations=this.decorations.map(e.changes),this.decoratedTo=o):(t!=this.tree||e.viewportChanged||r)&&(this.tree=t,this.decorations=this.buildDeco(e.view,n),this.decoratedTo=i.to)}buildDeco(e,t){if(!t||!this.tree.length)return Iv.none;let n=new em;for(let{from:r,to:i}of e.visibleRanges)th(this.tree,t,((e,t,r)=>{n.add(e,t,this.markCache[r]||(this.markCache[r]=Iv.mark({class:r})))}),r,i);return n.finish()}}const b_=fg.high(Ly.fromClass(y_,{decorations:e=>e.decorations})),w_=(bh.meta,bh.link,bh.heading,bh.emphasis,bh.strong,bh.strikethrough,bh.keyword,bh.atom,bh.bool,bh.url,bh.contentSeparator,bh.labelName,bh.literal,bh.inserted,bh.string,bh.deleted,bh.regexp,bh.escape,bh.string,bh.variableName,bh.variableName,bh.typeName,bh.namespace,bh.className,bh.variableName,bh.macroName,bh.propertyName,bh.comment,bh.invalid,px.baseTheme({"&.cm-focused .cm-matchingBracket":{backgroundColor:"#328c8252"},"&.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bb555544"}})),x_=1e4,k_="()[]{}",__=rg.define({combine(e){return Ug(e,{afterCursor:!0,brackets:k_,maxScanDistance:x_,renderMatch:E_})}}),O_=Iv.mark({class:"cm-matchingBracket"}),S_=Iv.mark({class:"cm-nonmatchingBracket"});function E_(e){let t=[],n=e.matched?O_:S_;return t.push(n.range(e.start.from,e.start.to)),e.end&&t.push(n.range(e.end.from,e.end.to)),t}const C_=ug.define({create(){return Iv.none},update(e,t){if(!t.docChanged&&!t.selection)return e;let n=[],r=t.state.facet(__);for(let i of t.state.selection.ranges){if(!i.empty)continue;let e=R_(t.state,i.head,-1,r)||i.head>0&&R_(t.state,i.head-1,1,r)||r.afterCursor&&(R_(t.state,i.head,1,r)||i.head<t.state.doc.length&&R_(t.state,i.head+1,-1,r));e&&(n=n.concat(r.renderMatch(e,t.state)))}return Iv.set(n,!0)},provide:e=>px.decorations.from(e)}),T_=[C_,w_];function A_(e={}){return[__.of(e),T_]}const D_=new Sc;function M_(e,t,n){let r=e.prop(t<0?Sc.openedBy:Sc.closedBy);if(r)return r;if(1==e.name.length){let r=n.indexOf(e.name);if(r>-1&&r%2==(t<0?1:0))return[n[r+t]]}return null}function F_(e){let t=e.type.prop(D_);return t?t(e.node):e}function R_(e,t,n,r={}){let i=r.maxScanDistance||x_,o=r.brackets||k_,s=Pk(e),a=s.resolveInner(t,n);for(let l=a;l;l=l.parent){let r=M_(l.type,n,o);if(r&&l.from<l.to){let i=F_(l);if(i&&(n>0?t>=i.from&&t<i.to:t>i.from&&t<=i.to))return P_(e,t,n,l,i,r,o)}}return I_(e,t,n,s,a.type,i,o)}function P_(e,t,n,r,i,o,s){let a=r.parent,l={from:i.from,to:i.to},c=0,u=null===a||void 0===a?void 0:a.cursor();if(u&&(n<0?u.childBefore(r.from):u.childAfter(r.to)))do{if(n<0?u.to<=r.from:u.from>=r.to){if(0==c&&o.indexOf(u.type.name)>-1&&u.from<u.to){let e=F_(u);return{start:l,end:e?{from:e.from,to:e.to}:void 0,matched:!0}}if(M_(u.type,n,s))c++;else if(M_(u.type,-n,s)){if(0==c){let e=F_(u);return{start:l,end:e&&e.from<e.to?{from:e.from,to:e.to}:void 0,matched:!1}}c--}}}while(n<0?u.prevSibling():u.nextSibling());return{start:l,matched:!1}}function I_(e,t,n,r,i,o,s){let a=n<0?e.sliceDoc(t-1,t):e.sliceDoc(t,t+1),l=s.indexOf(a);if(l<0||l%2==0!=n>0)return null;let c={from:n<0?t-1:t,to:n>0?t+1:t},u=e.doc.iterRange(t,n>0?e.doc.length:0),h=0;for(let d=0;!u.next().done&&d<=o;){let e=u.value;n<0&&(d+=e.length);let o=t+d*n;for(let t=n>0?0:e.length-1,a=n>0?e.length:-1;t!=a;t+=n){let a=s.indexOf(e[t]);if(!(a<0||r.resolveInner(o+t,1).type!=i))if(a%2==0==n>0)h++;else{if(1==h)return{start:c,end:{from:o+t,to:o+t+1},matched:a>>1==l>>1};h--}}n>0&&(d+=e.length)}return u.done?{start:c,matched:!1}:null}const L_=Object.create(null),$_=[Tc.none],N_=[],j_=Object.create(null),B_=Object.create(null);for(let[iK,oK]of[["variable","variableName"],["variable-2","variableName.special"],["string-2","string.special"],["def","variableName.definition"],["tag","tagName"],["attribute","attributeName"],["type","typeName"],["builtin","variableName.standard"],["qualifier","modifier"],["error","invalid"],["header","heading"],["property","propertyName"]])B_[iK]=q_(L_,oK);function V_(e,t){N_.indexOf(e)>-1||(N_.push(e),console.warn(t))}function q_(e,t){let n=[];for(let a of t.split(" ")){let t=[];for(let n of a.split(".")){let r=e[n]||bh[n];r?"function"==typeof r?t.length?t=t.map(r):V_(n,`Modifier ${n} used at start of tag`):t.length?V_(n,`Tag ${n} used as modifier`):t=Array.isArray(r)?r:[r]:V_(n,`Unknown highlighting tag ${n}`)}for(let e of t)n.push(e)}if(!n.length)return 0;let r=t.replace(/ /g,"_"),i=r+" "+n.map((e=>e.id)),o=j_[i];if(o)return o.id;let s=j_[i]=Tc.define({id:$_.length,name:r,props:[Zu({[r]:n})]});return $_.push(s),s.id}Yv.RTL,Yv.LTR;class z_{constructor(e,t,n,r){this.state=e,this.pos=t,this.explicit=n,this.view=r,this.abortListeners=[],this.abortOnDocChange=!1}tokenBefore(e){let t=Pk(this.state).resolveInner(this.pos,-1);while(t&&e.indexOf(t.name)<0)t=t.parent;return t?{from:t.from,to:this.pos,text:this.state.sliceDoc(t.from,this.pos),type:t.type}:null}matchBefore(e){let t=this.state.doc.lineAt(this.pos),n=Math.max(t.from,this.pos-250),r=t.text.slice(n-t.from,this.pos-t.from),i=r.search(Z_(e,!1));return i<0?null:{from:n+i,to:this.pos,text:r.slice(i)}}get aborted(){return null==this.abortListeners}addEventListener(e,t,n){"abort"==e&&this.abortListeners&&(this.abortListeners.push(t),n&&n.onDocChange&&(this.abortOnDocChange=!0))}}function H_(e){let t=Object.keys(e).join(""),n=/\w/.test(t);return n&&(t=t.replace(/\w/g,"")),`[${n?"\\w":""}${t.replace(/[^\w\s]/g,"\\$&")}]`}function W_(e){let t=Object.create(null),n=Object.create(null);for(let{label:i}of e){t[i[0]]=!0;for(let e=1;e<i.length;e++)n[i[e]]=!0}let r=H_(t)+H_(n)+"*$";return[new RegExp("^"+r),new RegExp(r)]}function Q_(e){let t=e.map((e=>"string"==typeof e?{label:e}:e)),[n,r]=t.every((e=>/^\w+$/.test(e.label)))?[/\w*$/,/\w+$/]:W_(t);return e=>{let i=e.matchBefore(r);return i||e.explicit?{from:i?i.from:e.pos,options:t,validFor:n}:null}}function U_(e,t){return n=>{for(let t=Pk(n.state).resolveInner(n.pos,-1);t;t=t.parent){if(e.indexOf(t.name)>-1)return null;if(t.type.isTop)break}return t(n)}}class Y_{constructor(e,t,n,r){this.completion=e,this.source=t,this.match=n,this.score=r}}function X_(e){return e.selection.main.from}function Z_(e,t){var n;let{source:r}=e,i=t&&"^"!=r[0],o="$"!=r[r.length-1];return i||o?new RegExp(`${i?"^":""}(?:${r})${o?"$":""}`,null!==(n=e.flags)&&void 0!==n?n:e.ignoreCase?"i":""):e}const G_=Tg.define();function K_(e,t,n,r){let{main:i}=e.selection,o=n-i.from,s=r-i.from;return Object.assign(Object.assign({},e.changeByRange((a=>{if(a!=i&&n!=r&&e.sliceDoc(a.from+o,a.from+s)!=e.sliceDoc(n,r))return{range:a};let l=e.toText(t);return{changes:{from:a.from+o,to:r==i.from?a.to:a.from+s,insert:l},range:eg.cursor(a.from+o+l.length)}}))),{scrollIntoView:!0,userEvent:"input.complete"})}const J_=new WeakMap;function eO(e){if(!Array.isArray(e))return e;let t=J_.get(e);return t||J_.set(e,t=Q_(e)),t}const tO=Mg.define(),nO=Mg.define();class rO{constructor(e){this.pattern=e,this.chars=[],this.folded=[],this.any=[],this.precise=[],this.byWord=[],this.score=0,this.matched=[];for(let t=0;t<e.length;){let n=Bp(e,t),r=qp(n);this.chars.push(n);let i=e.slice(t,t+r),o=i.toUpperCase();this.folded.push(Bp(o==i?i.toLowerCase():o,0)),t+=r}this.astral=e.length!=this.chars.length}ret(e,t){return this.score=e,this.matched=t,this}match(e){if(0==this.pattern.length)return this.ret(-100,[]);if(e.length<this.pattern.length)return null;let{chars:t,folded:n,any:r,precise:i,byWord:o}=this;if(1==t.length){let r=Bp(e,0),i=qp(r),o=i==e.length?0:-100;if(r==t[0]);else{if(r!=n[0])return null;o+=-200}return this.ret(o,[0,i])}let s=e.indexOf(this.pattern);if(0==s)return this.ret(e.length==this.pattern.length?0:-100,[0,this.pattern.length]);let a=t.length,l=0;if(s<0){for(let i=0,o=Math.min(e.length,200);i<o&&l<a;){let o=Bp(e,i);o!=t[l]&&o!=n[l]||(r[l++]=i),i+=qp(o)}if(l<a)return null}let c=0,u=0,h=!1,d=0,f=-1,p=-1,g=/[a-z]/.test(e),m=!0;for(let v=0,y=Math.min(e.length,200),b=0;v<y&&u<a;){let r=Bp(e,v);s<0&&(c<a&&r==t[c]&&(i[c++]=v),d<a&&(r==t[d]||r==n[d]?(0==d&&(f=v),p=v+1,d++):d=0));let l,y=r<255?r>=48&&r<=57||r>=97&&r<=122?2:r>=65&&r<=90?1:0:(l=Vp(r))!=l.toLowerCase()?1:l!=l.toUpperCase()?2:0;(!v||1==y&&g||0==b&&0!=y)&&(t[u]==r||n[u]==r&&(h=!0)?o[u++]=v:o.length&&(m=!1)),b=y,v+=qp(r)}return u==a&&0==o[0]&&m?this.result((h?-200:0)-100,o,e):d==a&&0==f?this.ret(-200-e.length+(p==e.length?0:-100),[0,p]):s>-1?this.ret(-700-e.length,[s,s+this.pattern.length]):d==a?this.ret(-900-e.length,[f,p]):u==a?this.result((h?-200:0)-100-700+(m?0:-1100),o,e):2==t.length?null:this.result((r[0]?-700:0)-200-1100,r,e)}result(e,t,n){let r=[],i=0;for(let o of t){let e=o+(this.astral?qp(Bp(n,o)):1);i&&r[i-1]==o?r[i-1]=e:(r[i++]=o,r[i++]=e)}return this.ret(e-n.length,r)}}class iO{constructor(e){this.pattern=e,this.matched=[],this.score=0,this.folded=e.toLowerCase()}match(e){if(e.length<this.pattern.length)return null;let t=e.slice(0,this.pattern.length),n=t==this.pattern?0:t.toLowerCase()==this.folded?-200:null;return null==n?null:(this.matched=[0,t.length],this.score=n+(e.length==this.pattern.length?0:-100),this)}}const oO=rg.define({combine(e){return Ug(e,{activateOnTyping:!0,activateOnCompletion:()=>!1,activateOnTypingDelay:100,selectOnOpen:!0,override:null,closeOnBlur:!0,maxRenderedOptions:100,defaultKeymap:!0,tooltipClass:()=>"",optionClass:()=>"",aboveCursor:!1,icons:!0,addToOptions:[],positionInfo:aO,filterStrict:!1,compareCompletions:(e,t)=>e.label.localeCompare(t.label),interactionDelay:75,updateSyncTime:100},{defaultKeymap:(e,t)=>e&&t,closeOnBlur:(e,t)=>e&&t,icons:(e,t)=>e&&t,tooltipClass:(e,t)=>n=>sO(e(n),t(n)),optionClass:(e,t)=>n=>sO(e(n),t(n)),addToOptions:(e,t)=>e.concat(t),filterStrict:(e,t)=>e||t})}});function sO(e,t){return e?t?e+" "+t:e:t}function aO(e,t,n,r,i,o){let s,a,l=e.textDirection==Yv.RTL,c=l,u=!1,h="top",d=t.left-i.left,f=i.right-t.right,p=r.right-r.left,g=r.bottom-r.top;if(c&&d<Math.min(p,f)?c=!1:!c&&f<Math.min(p,d)&&(c=!0),p<=(c?d:f))s=Math.max(i.top,Math.min(n.top,i.bottom-g))-t.top,a=Math.min(400,c?d:f);else{u=!0,a=Math.min(400,(l?t.right:i.right-t.left)-30);let e=i.bottom-t.bottom;e>=g||e>t.top?s=n.bottom-t.top:(h="bottom",s=t.bottom-n.top)}let m=(t.bottom-t.top)/o.offsetHeight,v=(t.right-t.left)/o.offsetWidth;return{style:`${h}: ${s/m}px; max-width: ${a/v}px`,class:"cm-completionInfo-"+(u?l?"left-narrow":"right-narrow":c?"left":"right")}}function lO(e){let t=e.addToOptions.slice();return e.icons&&t.push({render(e){let t=document.createElement("div");return t.classList.add("cm-completionIcon"),e.type&&t.classList.add(...e.type.split(/\s+/g).map((e=>"cm-completionIcon-"+e))),t.setAttribute("aria-hidden","true"),t},position:20}),t.push({render(e,t,n,r){let i=document.createElement("span");i.className="cm-completionLabel";let o=e.displayLabel||e.label,s=0;for(let a=0;a<r.length;){let e=r[a++],t=r[a++];e>s&&i.appendChild(document.createTextNode(o.slice(s,e)));let n=i.appendChild(document.createElement("span"));n.appendChild(document.createTextNode(o.slice(e,t))),n.className="cm-completionMatchedText",s=t}return s<o.length&&i.appendChild(document.createTextNode(o.slice(s))),i},position:50},{render(e){if(!e.detail)return null;let t=document.createElement("span");return t.className="cm-completionDetail",t.textContent=e.detail,t},position:80}),t.sort(((e,t)=>e.position-t.position)).map((e=>e.render))}function cO(e,t,n){if(e<=n)return{from:0,to:e};if(t<0&&(t=0),t<=e>>1){let e=Math.floor(t/n);return{from:e*n,to:(e+1)*n}}let r=Math.floor((e-t)/n);return{from:e-(r+1)*n,to:e-r*n}}class uO{constructor(e,t,n){this.view=e,this.stateField=t,this.applyCompletion=n,this.info=null,this.infoDestroy=null,this.placeInfoReq={read:()=>this.measureInfo(),write:e=>this.placeInfo(e),key:this},this.space=null,this.currentClass="";let r=e.state.field(t),{options:i,selected:o}=r.open,s=e.state.facet(oO);this.optionContent=lO(s),this.optionClass=s.optionClass,this.tooltipClass=s.tooltipClass,this.range=cO(i.length,o,s.maxRenderedOptions),this.dom=document.createElement("div"),this.dom.className="cm-tooltip-autocomplete",this.updateTooltipClass(e.state),this.dom.addEventListener("mousedown",(n=>{let{options:r}=e.state.field(t).open;for(let t,i=n.target;i&&i!=this.dom;i=i.parentNode)if("LI"==i.nodeName&&(t=/-(\d+)$/.exec(i.id))&&+t[1]<r.length)return this.applyCompletion(e,r[+t[1]]),void n.preventDefault()})),this.dom.addEventListener("focusout",(t=>{let n=e.state.field(this.stateField,!1);n&&n.tooltip&&e.state.facet(oO).closeOnBlur&&t.relatedTarget!=e.contentDOM&&e.dispatch({effects:nO.of(null)})})),this.showOptions(i,r.id)}mount(){this.updateSel()}showOptions(e,t){this.list&&this.list.remove(),this.list=this.dom.appendChild(this.createListBox(e,t,this.range)),this.list.addEventListener("scroll",(()=>{this.info&&this.view.requestMeasure(this.placeInfoReq)}))}update(e){var t;let n=e.state.field(this.stateField),r=e.startState.field(this.stateField);if(this.updateTooltipClass(e.state),n!=r){let{options:i,selected:o,disabled:s}=n.open;r.open&&r.open.options==i||(this.range=cO(i.length,o,e.state.facet(oO).maxRenderedOptions),this.showOptions(i,n.id)),this.updateSel(),s!=(null===(t=r.open)||void 0===t?void 0:t.disabled)&&this.dom.classList.toggle("cm-tooltip-autocomplete-disabled",!!s)}}updateTooltipClass(e){let t=this.tooltipClass(e);if(t!=this.currentClass){for(let e of this.currentClass.split(" "))e&&this.dom.classList.remove(e);for(let e of t.split(" "))e&&this.dom.classList.add(e);this.currentClass=t}}positioned(e){this.space=e,this.info&&this.view.requestMeasure(this.placeInfoReq)}updateSel(){let e=this.view.state.field(this.stateField),t=e.open;if((t.selected>-1&&t.selected<this.range.from||t.selected>=this.range.to)&&(this.range=cO(t.options.length,t.selected,this.view.state.facet(oO).maxRenderedOptions),this.showOptions(t.options,e.id)),this.updateSelectedOption(t.selected)){this.destroyInfo();let{completion:n}=t.options[t.selected],{info:r}=n;if(!r)return;let i="string"===typeof r?document.createTextNode(r):r(n);if(!i)return;"then"in i?i.then((t=>{t&&this.view.state.field(this.stateField,!1)==e&&this.addInfoPane(t,n)})).catch((e=>Fy(this.view.state,e,"completion info"))):this.addInfoPane(i,n)}}addInfoPane(e,t){this.destroyInfo();let n=this.info=document.createElement("div");if(n.className="cm-tooltip cm-completionInfo",null!=e.nodeType)n.appendChild(e),this.infoDestroy=null;else{let{dom:t,destroy:r}=e;n.appendChild(t),this.infoDestroy=r||null}this.dom.appendChild(n),this.view.requestMeasure(this.placeInfoReq)}updateSelectedOption(e){let t=null;for(let n=this.list.firstChild,r=this.range.from;n;n=n.nextSibling,r++)"LI"==n.nodeName&&n.id?r==e?n.hasAttribute("aria-selected")||(n.setAttribute("aria-selected","true"),t=n):n.hasAttribute("aria-selected")&&n.removeAttribute("aria-selected"):r--;return t&&dO(this.list,t),t}measureInfo(){let e=this.dom.querySelector("[aria-selected]");if(!e||!this.info)return null;let t=this.dom.getBoundingClientRect(),n=this.info.getBoundingClientRect(),r=e.getBoundingClientRect(),i=this.space;if(!i){let e=this.dom.ownerDocument.defaultView||window;i={left:0,top:0,right:e.innerWidth,bottom:e.innerHeight}}return r.top>Math.min(i.bottom,t.bottom)-10||r.bottom<Math.max(i.top,t.top)+10?null:this.view.state.facet(oO).positionInfo(this.view,t,r,n,i,this.dom)}placeInfo(e){this.info&&(e?(e.style&&(this.info.style.cssText=e.style),this.info.className="cm-tooltip cm-completionInfo "+(e.class||"")):this.info.style.cssText="top: -1e6px")}createListBox(e,t,n){const r=document.createElement("ul");r.id=t,r.setAttribute("role","listbox"),r.setAttribute("aria-expanded","true"),r.setAttribute("aria-label",this.view.state.phrase("Completions"));let i=null;for(let o=n.from;o<n.to;o++){let{completion:s,match:a}=e[o],{section:l}=s;if(l){let e="string"==typeof l?l:l.name;if(e!=i&&(o>n.from||0==n.from))if(i=e,"string"!=typeof l&&l.header)r.appendChild(l.header(l));else{let t=r.appendChild(document.createElement("completion-section"));t.textContent=e}}const c=r.appendChild(document.createElement("li"));c.id=t+"-"+o,c.setAttribute("role","option");let u=this.optionClass(s);u&&(c.className=u);for(let e of this.optionContent){let t=e(s,this.view.state,this.view,a);t&&c.appendChild(t)}}return n.from&&r.classList.add("cm-completionListIncompleteTop"),n.to<e.length&&r.classList.add("cm-completionListIncompleteBottom"),r}destroyInfo(){this.info&&(this.infoDestroy&&this.infoDestroy(),this.info.remove(),this.info=null)}destroy(){this.destroyInfo()}}function hO(e,t){return n=>new uO(n,e,t)}function dO(e,t){let n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.height/e.offsetHeight;r.top<n.top?e.scrollTop-=(n.top-r.top)/i:r.bottom>n.bottom&&(e.scrollTop+=(r.bottom-n.bottom)/i)}function fO(e){return 100*(e.boost||0)+(e.apply?10:0)+(e.info?5:0)+(e.type?1:0)}function pO(e,t){let n=[],r=null,i=e=>{n.push(e);let{section:t}=e.completion;if(t){r||(r=[]);let e="string"==typeof t?t:t.name;r.some((t=>t.name==e))||r.push("string"==typeof t?{name:e}:t)}},o=t.facet(oO);for(let c of e)if(c.hasResult()){let e=c.result.getMatch;if(!1===c.result.filter)for(let t of c.result.options)i(new Y_(t,c.source,e?e(t):[],1e9-n.length));else{let n,r=t.sliceDoc(c.from,c.to),s=o.filterStrict?new iO(r):new rO(r);for(let t of c.result.options)if(n=s.match(t.label)){let r=t.displayLabel?e?e(t,n.matched):[]:n.matched;i(new Y_(t,c.source,r,n.score+(t.boost||0)))}}}if(r){let e=Object.create(null),t=0,i=(e,t)=>{var n,r;return(null!==(n=e.rank)&&void 0!==n?n:1e9)-(null!==(r=t.rank)&&void 0!==r?r:1e9)||(e.name<t.name?-1:1)};for(let n of r.sort(i))t-=1e5,e[n.name]=t;for(let r of n){let{section:t}=r.completion;t&&(r.score+=e["string"==typeof t?t:t.name])}}let s=[],a=null,l=o.compareCompletions;for(let c of n.sort(((e,t)=>t.score-e.score||l(e.completion,t.completion)))){let e=c.completion;!a||a.label!=e.label||a.detail!=e.detail||null!=a.type&&null!=e.type&&a.type!=e.type||a.apply!=e.apply||a.boost!=e.boost?s.push(c):fO(c.completion)>fO(a)&&(s[s.length-1]=c),a=c.completion}return s}class gO{constructor(e,t,n,r,i,o){this.options=e,this.attrs=t,this.tooltip=n,this.timestamp=r,this.selected=i,this.disabled=o}setSelected(e,t){return e==this.selected||e>=this.options.length?this:new gO(this.options,wO(t,e),this.tooltip,this.timestamp,e,this.disabled)}static build(e,t,n,r,i,o){if(r&&!o&&e.some((e=>e.isPending)))return r.setDisabled();let s=pO(e,t);if(!s.length)return r&&e.some((e=>e.isPending))?r.setDisabled():null;let a=t.facet(oO).selectOnOpen?0:-1;if(r&&r.selected!=a&&-1!=r.selected){let e=r.options[r.selected].completion;for(let t=0;t<s.length;t++)if(s[t].completion==e){a=t;break}}return new gO(s,wO(n,a),{pos:e.reduce(((e,t)=>t.hasResult()?Math.min(e,t.from):e),1e8),create:DO,above:i.aboveCursor},r?r.timestamp:Date.now(),a,!1)}map(e){return new gO(this.options,this.attrs,Object.assign(Object.assign({},this.tooltip),{pos:e.mapPos(this.tooltip.pos)}),this.timestamp,this.selected,this.disabled)}setDisabled(){return new gO(this.options,this.attrs,this.tooltip,this.timestamp,this.selected,!0)}}class mO{constructor(e,t,n){this.active=e,this.id=t,this.open=n}static start(){return new mO(xO,"cm-ac-"+Math.floor(2e6*Math.random()).toString(36),null)}update(e){let{state:t}=e,n=t.facet(oO),r=n.override||t.languageDataAt("autocomplete",X_(t)).map(eO),i=r.map((t=>{let r=this.active.find((e=>e.source==t))||new _O(t,this.active.some((e=>0!=e.state))?1:0);return r.update(e,n)}));i.length==this.active.length&&i.every(((e,t)=>e==this.active[t]))&&(i=this.active);let o=this.open,s=e.effects.some((e=>e.is(EO)));o&&e.docChanged&&(o=o.map(e.changes)),e.selection||i.some((t=>t.hasResult()&&e.changes.touchesRange(t.from,t.to)))||!vO(i,this.active)||s?o=gO.build(i,t,this.id,o,n,s):o&&o.disabled&&!i.some((e=>e.isPending))&&(o=null),!o&&i.every((e=>!e.isPending))&&i.some((e=>e.hasResult()))&&(i=i.map((e=>e.hasResult()?new _O(e.source,0):e)));for(let a of e.effects)a.is(CO)&&(o=o&&o.setSelected(a.value,this.id));return i==this.active&&o==this.open?this:new mO(i,this.id,o)}get tooltip(){return this.open?this.open.tooltip:null}get attrs(){return this.open?this.open.attrs:this.active.length?yO:bO}}function vO(e,t){if(e==t)return!0;for(let n=0,r=0;;){while(n<e.length&&!e[n].hasResult())n++;while(r<t.length&&!t[r].hasResult())r++;let i=n==e.length,o=r==t.length;if(i||o)return i==o;if(e[n++].result!=t[r++].result)return!1}}const yO={"aria-autocomplete":"list"},bO={};function wO(e,t){let n={"aria-autocomplete":"list","aria-haspopup":"listbox","aria-controls":e};return t>-1&&(n["aria-activedescendant"]=e+"-"+t),n}const xO=[];function kO(e,t){if(e.isUserEvent("input.complete")){let n=e.annotation(G_);if(n&&t.activateOnCompletion(n))return 12}let n=e.isUserEvent("input.type");return n&&t.activateOnTyping?5:n?1:e.isUserEvent("delete.backward")?2:e.selection?8:e.docChanged?16:0}class _O{constructor(e,t,n=!1){this.source=e,this.state=t,this.explicit=n}hasResult(){return!1}get isPending(){return 1==this.state}update(e,t){let n=kO(e,t),r=this;(8&n||16&n&&this.touches(e))&&(r=new _O(r.source,0)),4&n&&0==r.state&&(r=new _O(this.source,1)),r=r.updateFor(e,n);for(let i of e.effects)if(i.is(tO))r=new _O(r.source,1,i.value);else if(i.is(nO))r=new _O(r.source,0);else if(i.is(EO))for(let e of i.value)e.source==r.source&&(r=e);return r}updateFor(e,t){return this.map(e.changes)}map(e){return this}touches(e){return e.changes.touchesRange(X_(e.state))}}class OO extends _O{constructor(e,t,n,r,i,o){super(e,3,t),this.limit=n,this.result=r,this.from=i,this.to=o}hasResult(){return!0}updateFor(e,t){var n;if(!(3&t))return this.map(e.changes);let r=this.result;r.map&&!e.changes.empty&&(r=r.map(r,e.changes));let i=e.changes.mapPos(this.from),o=e.changes.mapPos(this.to,1),s=X_(e.state);if(s>o||!r||2&t&&(X_(e.startState)==this.from||s<this.limit))return new _O(this.source,4&t?1:0);let a=e.changes.mapPos(this.limit);return SO(r.validFor,e.state,i,o)?new OO(this.source,this.explicit,a,r,i,o):r.update&&(r=r.update(r,i,o,new z_(e.state,s,!1)))?new OO(this.source,this.explicit,a,r,r.from,null!==(n=r.to)&&void 0!==n?n:X_(e.state)):new _O(this.source,1,this.explicit)}map(e){if(e.empty)return this;let t=this.result.map?this.result.map(this.result,e):this.result;return t?new OO(this.source,this.explicit,e.mapPos(this.limit),this.result,e.mapPos(this.from),e.mapPos(this.to,1)):new _O(this.source,0)}touches(e){return e.changes.touchesRange(this.from,this.to)}}function SO(e,t,n,r){if(!e)return!1;let i=t.sliceDoc(n,r);return"function"==typeof e?e(i,n,r,t):Z_(e,!0).test(i)}const EO=Mg.define({map(e,t){return e.map((e=>e.map(t)))}}),CO=Mg.define(),TO=ug.define({create(){return mO.start()},update(e,t){return e.update(t)},provide:e=>[Hx.from(e,(e=>e.tooltip)),px.contentAttributes.from(e,(e=>e.attrs))]});function AO(e,t){const n=t.completion.apply||t.completion.label;let r=e.state.field(TO).active.find((e=>e.source==t.source));return r instanceof OO&&("string"==typeof n?e.dispatch(Object.assign(Object.assign({},K_(e.state,n,r.from,r.to)),{annotations:G_.of(t.completion)})):n(e,t.completion,r.from,r.to),!0)}const DO=hO(TO,AO);function MO(e,t="option"){return n=>{let r=n.state.field(TO,!1);if(!r||!r.open||r.open.disabled||Date.now()-r.open.timestamp<n.state.facet(oO).interactionDelay)return!1;let i,o=1;"page"==t&&(i=Jx(n,r.open.tooltip))&&(o=Math.max(2,Math.floor(i.dom.offsetHeight/i.dom.querySelector("li").offsetHeight)-1));let{length:s}=r.open.options,a=r.open.selected>-1?r.open.selected+o*(e?1:-1):e?0:s-1;return a<0?a="page"==t?0:s-1:a>=s&&(a="page"==t?s-1:0),n.dispatch({effects:CO.of(a)}),!0}}const FO=e=>{let t=e.state.field(TO,!1);return!(e.state.readOnly||!t||!t.open||t.open.selected<0||t.open.disabled||Date.now()-t.open.timestamp<e.state.facet(oO).interactionDelay)&&AO(e,t.open.options[t.open.selected])},RO=e=>{let t=e.state.field(TO,!1);return!!t&&(e.dispatch({effects:tO.of(!0)}),!0)},PO=e=>{let t=e.state.field(TO,!1);return!(!t||!t.active.some((e=>0!=e.state)))&&(e.dispatch({effects:nO.of(null)}),!0)};class IO{constructor(e,t){this.active=e,this.context=t,this.time=Date.now(),this.updates=[],this.done=void 0}}const LO=50,$O=1e3,NO=Ly.fromClass(class{constructor(e){this.view=e,this.debounceUpdate=-1,this.running=[],this.debounceAccept=-1,this.pendingStart=!1,this.composing=0;for(let t of e.state.field(TO).active)t.isPending&&this.startQuery(t)}update(e){let t=e.state.field(TO),n=e.state.facet(oO);if(!e.selectionSet&&!e.docChanged&&e.startState.field(TO)==t)return;let r=e.transactions.some((e=>{let t=kO(e,n);return 8&t||(e.selection||e.docChanged)&&!(3&t)}));for(let s=0;s<this.running.length;s++){let t=this.running[s];if(r||t.context.abortOnDocChange&&e.docChanged||t.updates.length+e.transactions.length>LO&&Date.now()-t.time>$O){for(let e of t.context.abortListeners)try{e()}catch(o){Fy(this.view.state,o)}t.context.abortListeners=null,this.running.splice(s--,1)}else t.updates.push(...e.transactions)}this.debounceUpdate>-1&&clearTimeout(this.debounceUpdate),e.transactions.some((e=>e.effects.some((e=>e.is(tO)))))&&(this.pendingStart=!0);let i=this.pendingStart?50:n.activateOnTypingDelay;if(this.debounceUpdate=t.active.some((e=>e.isPending&&!this.running.some((t=>t.active.source==e.source))))?setTimeout((()=>this.startUpdate()),i):-1,0!=this.composing)for(let s of e.transactions)s.isUserEvent("input.type")?this.composing=2:2==this.composing&&s.selection&&(this.composing=3)}startUpdate(){this.debounceUpdate=-1,this.pendingStart=!1;let{state:e}=this.view,t=e.field(TO);for(let n of t.active)n.isPending&&!this.running.some((e=>e.active.source==n.source))&&this.startQuery(n);this.running.length&&t.open&&t.open.disabled&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(oO).updateSyncTime))}startQuery(e){let{state:t}=this.view,n=X_(t),r=new z_(t,n,e.explicit,this.view),i=new IO(e,r);this.running.push(i),Promise.resolve(e.source(r)).then((e=>{i.context.aborted||(i.done=e||null,this.scheduleAccept())}),(e=>{this.view.dispatch({effects:nO.of(null)}),Fy(this.view.state,e)}))}scheduleAccept(){this.running.every((e=>void 0!==e.done))?this.accept():this.debounceAccept<0&&(this.debounceAccept=setTimeout((()=>this.accept()),this.view.state.facet(oO).updateSyncTime))}accept(){var e;this.debounceAccept>-1&&clearTimeout(this.debounceAccept),this.debounceAccept=-1;let t=[],n=this.view.state.facet(oO),r=this.view.state.field(TO);for(let i=0;i<this.running.length;i++){let o=this.running[i];if(void 0===o.done)continue;if(this.running.splice(i--,1),o.done){let r=X_(o.updates.length?o.updates[0].startState:this.view.state),i=Math.min(r,o.done.from+(o.active.explicit?0:1)),s=new OO(o.active.source,o.active.explicit,i,o.done,o.done.from,null!==(e=o.done.to)&&void 0!==e?e:r);for(let e of o.updates)s=s.update(e,n);if(s.hasResult()){t.push(s);continue}}let s=r.active.find((e=>e.source==o.active.source));if(s&&s.isPending)if(null==o.done){let e=new _O(o.active.source,0);for(let t of o.updates)e=e.update(t,n);e.isPending||t.push(e)}else this.startQuery(s)}(t.length||r.open&&r.open.disabled)&&this.view.dispatch({effects:EO.of(t)})}},{eventHandlers:{blur(e){let t=this.view.state.field(TO,!1);if(t&&t.tooltip&&this.view.state.facet(oO).closeOnBlur){let n=t.open&&Jx(this.view,t.open.tooltip);n&&n.dom.contains(e.relatedTarget)||setTimeout((()=>this.view.dispatch({effects:nO.of(null)})),10)}},compositionstart(){this.composing=1},compositionend(){3==this.composing&&setTimeout((()=>this.view.dispatch({effects:tO.of(!1)})),20),this.composing=0}}}),jO="object"==typeof navigator&&/Win/.test(navigator.platform),BO=fg.highest(px.domEventHandlers({keydown(e,t){let n=t.state.field(TO,!1);if(!n||!n.open||n.open.disabled||n.open.selected<0||e.key.length>1||e.ctrlKey&&(!jO||!e.altKey)||e.metaKey)return!1;let r=n.open.options[n.open.selected],i=n.active.find((e=>e.source==r.source)),o=r.completion.commitCharacters||i.result.commitCharacters;return o&&o.indexOf(e.key)>-1&&AO(t,r),!1}})),VO=px.baseTheme({".cm-tooltip.cm-tooltip-autocomplete":{"& > ul":{fontFamily:"monospace",whiteSpace:"nowrap",overflow:"hidden auto",maxWidth_fallback:"700px",maxWidth:"min(700px, 95vw)",minWidth:"250px",maxHeight:"10em",height:"100%",listStyle:"none",margin:0,padding:0,"& > li, & > completion-section":{padding:"1px 3px",lineHeight:1.2},"& > li":{overflowX:"hidden",textOverflow:"ellipsis",cursor:"pointer"},"& > completion-section":{display:"list-item",borderBottom:"1px solid silver",paddingLeft:"0.5em",opacity:.7}}},"&light .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#17c",color:"white"},"&light .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#777"},"&dark .cm-tooltip-autocomplete ul li[aria-selected]":{background:"#347",color:"white"},"&dark .cm-tooltip-autocomplete-disabled ul li[aria-selected]":{background:"#444"},".cm-completionListIncompleteTop:before, .cm-completionListIncompleteBottom:after":{content:'"···"',opacity:.5,display:"block",textAlign:"center"},".cm-tooltip.cm-completionInfo":{position:"absolute",padding:"3px 9px",width:"max-content",maxWidth:"400px",boxSizing:"border-box",whiteSpace:"pre-line"},".cm-completionInfo.cm-completionInfo-left":{right:"100%"},".cm-completionInfo.cm-completionInfo-right":{left:"100%"},".cm-completionInfo.cm-completionInfo-left-narrow":{right:"30px"},".cm-completionInfo.cm-completionInfo-right-narrow":{left:"30px"},"&light .cm-snippetField":{backgroundColor:"#00000022"},"&dark .cm-snippetField":{backgroundColor:"#ffffff22"},".cm-snippetFieldPosition":{verticalAlign:"text-top",width:0,height:"1.15em",display:"inline-block",margin:"0 -0.7px -.7em",borderLeft:"1.4px dotted #888"},".cm-completionMatchedText":{textDecoration:"underline"},".cm-completionDetail":{marginLeft:"0.5em",fontStyle:"italic"},".cm-completionIcon":{fontSize:"90%",width:".8em",display:"inline-block",textAlign:"center",paddingRight:".6em",opacity:"0.6",boxSizing:"content-box"},".cm-completionIcon-function, .cm-completionIcon-method":{"&:after":{content:"'ƒ'"}},".cm-completionIcon-class":{"&:after":{content:"'○'"}},".cm-completionIcon-interface":{"&:after":{content:"'◌'"}},".cm-completionIcon-variable":{"&:after":{content:"'𝑥'"}},".cm-completionIcon-constant":{"&:after":{content:"'𝐶'"}},".cm-completionIcon-type":{"&:after":{content:"'𝑡'"}},".cm-completionIcon-enum":{"&:after":{content:"'∪'"}},".cm-completionIcon-property":{"&:after":{content:"'□'"}},".cm-completionIcon-keyword":{"&:after":{content:"'🔑︎'"}},".cm-completionIcon-namespace":{"&:after":{content:"'▢'"}},".cm-completionIcon-text":{"&:after":{content:"'abc'",fontSize:"50%",verticalAlign:"middle"}}});class qO{constructor(e,t,n,r){this.field=e,this.line=t,this.from=n,this.to=r}}class zO{constructor(e,t,n){this.field=e,this.from=t,this.to=n}map(e){let t=e.mapPos(this.from,-1,Hp.TrackDel),n=e.mapPos(this.to,1,Hp.TrackDel);return null==t||null==n?null:new zO(this.field,t,n)}}class HO{constructor(e,t){this.lines=e,this.fieldPositions=t}instantiate(e,t){let n=[],r=[t],i=e.doc.lineAt(t),o=/^\s*/.exec(i.text)[0];for(let a of this.lines){if(n.length){let n=o,i=/^\t*/.exec(a)[0].length;for(let t=0;t<i;t++)n+=e.facet(Qk);r.push(t+n.length-i),a=n+a.slice(i)}n.push(a),t+=a.length+1}let s=this.fieldPositions.map((e=>new zO(e.field,r[e.line]+e.from,r[e.line]+e.to)));return{text:n,ranges:s}}static parse(e){let t,n=[],r=[],i=[];for(let o of e.split(/\r\n?|\n/)){while(t=/[#$]\{(?:(\d+)(?::([^}]*))?|((?:\\[{}]|[^}])*))\}/.exec(o)){let e=t[1]?+t[1]:null,s=t[2]||t[3]||"",a=-1,l=s.replace(/\\[{}]/g,(e=>e[1]));for(let t=0;t<n.length;t++)(null!=e?n[t].seq==e:l&&n[t].name==l)&&(a=t);if(a<0){let t=0;while(t<n.length&&(null==e||null!=n[t].seq&&n[t].seq<e))t++;n.splice(t,0,{seq:e,name:l}),a=t;for(let e of i)e.field>=a&&e.field++}i.push(new qO(a,r.length,t.index,t.index+l.length)),o=o.slice(0,t.index)+s+o.slice(t.index+t[0].length)}o=o.replace(/\\([{}])/g,((e,t,n)=>{for(let o of i)o.line==r.length&&o.from>n&&(o.from--,o.to--);return t})),r.push(o)}return new HO(r,i)}}let WO=Iv.widget({widget:new class extends Rv{toDOM(){let e=document.createElement("span");return e.className="cm-snippetFieldPosition",e}ignoreEvent(){return!1}}}),QO=Iv.mark({class:"cm-snippetField"});class UO{constructor(e,t){this.ranges=e,this.active=t,this.deco=Iv.set(e.map((e=>(e.from==e.to?WO:QO).range(e.from,e.to))))}map(e){let t=[];for(let n of this.ranges){let r=n.map(e);if(!r)return null;t.push(r)}return new UO(t,this.active)}selectionInsideField(e){return e.ranges.every((e=>this.ranges.some((t=>t.field==this.active&&t.from<=e.from&&t.to>=e.to))))}}const YO=Mg.define({map(e,t){return e&&e.map(t)}}),XO=Mg.define(),ZO=ug.define({create(){return null},update(e,t){for(let n of t.effects){if(n.is(YO))return n.value;if(n.is(XO)&&e)return new UO(e.ranges,n.value)}return e&&t.docChanged&&(e=e.map(t.changes)),e&&t.selection&&!e.selectionInsideField(t.selection)&&(e=null),e},provide:e=>px.decorations.from(e,(e=>e?e.deco:Iv.none))});function GO(e,t){return eg.create(e.filter((e=>e.field==t)).map((e=>eg.range(e.from,e.to))))}function KO(e){let t=HO.parse(e);return(e,n,r,i)=>{let{text:o,ranges:s}=t.instantiate(e.state,r),a={changes:{from:r,to:i,insert:wp.of(o)},scrollIntoView:!0,annotations:n?[G_.of(n),Fg.userEvent.of("input.complete")]:void 0};if(s.length&&(a.selection=GO(s,0)),s.some((e=>e.field>0))){let t=new UO(s,0),n=a.effects=[YO.of(t)];void 0===e.state.field(ZO,!1)&&n.push(Mg.appendConfig.of([ZO,oS,aS,VO]))}e.dispatch(e.state.update(a))}}function JO(e){return({state:t,dispatch:n})=>{let r=t.field(ZO,!1);if(!r||e<0&&0==r.active)return!1;let i=r.active+e,o=e>0&&!r.ranges.some((t=>t.field==i+e));return n(t.update({selection:GO(r.ranges,i),effects:YO.of(o?null:new UO(r.ranges,i)),scrollIntoView:!0})),!0}}const eS=({state:e,dispatch:t})=>{let n=e.field(ZO,!1);return!!n&&(t(e.update({effects:YO.of(null)})),!0)},tS=JO(1),nS=JO(-1);const rS=[{key:"Tab",run:tS,shift:nS},{key:"Escape",run:eS}],iS=rg.define({combine(e){return e.length?e[0]:rS}}),oS=fg.highest(_x.compute([iS],(e=>e.facet(iS))));function sS(e,t){return Object.assign(Object.assign({},t),{apply:KO(e)})}const aS=px.domEventHandlers({mousedown(e,t){let n,r=t.state.field(ZO,!1);if(!r||null==(n=t.posAtCoords({x:e.clientX,y:e.clientY})))return!1;let i=r.ranges.find((e=>e.from<=n&&e.to>=n));return!(!i||i.field==r.active)&&(t.dispatch({selection:GO(r.ranges,i.field),effects:YO.of(r.ranges.some((e=>e.field>i.field))?new UO(r.ranges,i.field):null),scrollIntoView:!0}),!0)}});const lS={brackets:["(","[","{","'",'"'],before:")]}:;>",stringPrefixes:[]},cS=Mg.define({map(e,t){let n=t.mapPos(e,-1,Hp.TrackAfter);return null==n?void 0:n}}),uS=new class extends Yg{};uS.startSide=1,uS.endSide=-1;const hS=ug.define({create(){return Kg.empty},update(e,t){if(e=e.map(t.changes),t.selection){let n=t.state.doc.lineAt(t.selection.main.head);e=e.update({filter:e=>e>=n.from&&e<=n.to})}for(let n of t.effects)n.is(cS)&&(e=e.update({add:[uS.range(n.value,n.value+1)]}));return e}});function dS(){return[vS,hS]}const fS="()[]{}<>";function pS(e){for(let t=0;t<fS.length;t+=2)if(fS.charCodeAt(t)==e)return fS.charAt(t+1);return Vp(e<128?e:e+1)}function gS(e,t){return e.languageDataAt("closeBrackets",t)[0]||lS}const mS="object"==typeof navigator&&/Android\b/.test(navigator.userAgent),vS=px.inputHandler.of(((e,t,n,r)=>{if((mS?e.composing:e.compositionStarted)||e.state.readOnly)return!1;let i=e.state.selection.main;if(r.length>2||2==r.length&&1==qp(Bp(r,0))||t!=i.from||n!=i.to)return!1;let o=yS(e.state,r);return!!o&&(e.dispatch(o),!0)}));function yS(e,t){let n=gS(e,e.selection.main.head),r=n.brackets||lS.brackets;for(let i of r){let o=pS(Bp(i,0));if(t==i)return o==i?_S(e,i,r.indexOf(i+i+i)>-1,n):xS(e,i,o,n.before||lS.before);if(t==o&&bS(e,e.selection.main.from))return kS(e,i,o)}return null}function bS(e,t){let n=!1;return e.field(hS).between(0,e.doc.length,(e=>{e==t&&(n=!0)})),n}function wS(e,t){let n=e.sliceString(t,t+2);return n.slice(0,qp(Bp(n,0)))}function xS(e,t,n,r){let i=null,o=e.changeByRange((o=>{if(!o.empty)return{changes:[{insert:t,from:o.from},{insert:n,from:o.to}],effects:cS.of(o.to+t.length),range:eg.range(o.anchor+t.length,o.head+t.length)};let s=wS(e.doc,o.head);return!s||/\s/.test(s)||r.indexOf(s)>-1?{changes:{insert:t+n,from:o.head},effects:cS.of(o.head+t.length),range:eg.cursor(o.head+t.length)}:{range:i=o}}));return i?null:e.update(o,{scrollIntoView:!0,userEvent:"input.type"})}function kS(e,t,n){let r=null,i=e.changeByRange((t=>t.empty&&wS(e.doc,t.head)==n?{changes:{from:t.head,to:t.head+n.length,insert:n},range:eg.cursor(t.head+n.length)}:r={range:t}));return r?null:e.update(i,{scrollIntoView:!0,userEvent:"input.type"})}function _S(e,t,n,r){let i=r.stringPrefixes||lS.stringPrefixes,o=null,s=e.changeByRange((r=>{if(!r.empty)return{changes:[{insert:t,from:r.from},{insert:t,from:r.to}],effects:cS.of(r.to+t.length),range:eg.range(r.anchor+t.length,r.head+t.length)};let s,a=r.head,l=wS(e.doc,a);if(l==t){if(OS(e,a))return{changes:{insert:t+t,from:a},effects:cS.of(a+t.length),range:eg.cursor(a+t.length)};if(bS(e,a)){let r=n&&e.sliceDoc(a,a+3*t.length)==t+t+t,i=r?t+t+t:t;return{changes:{from:a,to:a+i.length,insert:i},range:eg.cursor(a+i.length)}}}else{if(n&&e.sliceDoc(a-2*t.length,a)==t+t&&(s=ES(e,a-2*t.length,i))>-1&&OS(e,s))return{changes:{insert:t+t+t+t,from:a},effects:cS.of(a+t.length),range:eg.cursor(a+t.length)};if(e.charCategorizer(a)(l)!=Vg.Word&&ES(e,a,i)>-1&&!SS(e,a,t,i))return{changes:{insert:t+t,from:a},effects:cS.of(a+t.length),range:eg.cursor(a+t.length)}}return{range:o=r}}));return o?null:e.update(s,{scrollIntoView:!0,userEvent:"input.type"})}function OS(e,t){let n=Pk(e).resolveInner(t+1);return n.parent&&n.from==t}function SS(e,t,n,r){let i=Pk(e).resolveInner(t,-1),o=r.reduce(((e,t)=>Math.max(e,t.length)),0);for(let s=0;s<5;s++){let s=e.sliceDoc(i.from,Math.min(i.to,i.from+n.length+o)),a=s.indexOf(n);if(!a||a>-1&&r.indexOf(s.slice(0,a))>-1){let t=i.firstChild;while(t&&t.from==i.from&&t.to-t.from>n.length+a){if(e.sliceDoc(t.to-n.length,t.to)==n)return!1;t=t.firstChild}return!0}let l=i.to==t&&i.parent;if(!l)break;i=l}return!1}function ES(e,t,n){let r=e.charCategorizer(t);if(r(e.sliceDoc(t-1,t))!=Vg.Word)return t;for(let i of n){let n=t-i.length;if(e.sliceDoc(n,t)==i&&r(e.sliceDoc(n-1,n))!=Vg.Word)return n}return-1}function CS(e={}){return[BO,TO,oO.of(e),NO,AS,VO]}const TS=[{key:"Ctrl-Space",run:RO},{mac:"Alt-`",run:RO},{key:"Escape",run:PO},{key:"ArrowDown",run:MO(!0)},{key:"ArrowUp",run:MO(!1)},{key:"PageDown",run:MO(!0,"page")},{key:"PageUp",run:MO(!1,"page")},{key:"Enter",run:FO}],AS=fg.highest(_x.computeN([oO],(e=>e.facet(oO).defaultKeymap?[TS]:[])));const DS=e=>{let{state:t}=e,n=t.doc.lineAt(t.selection.main.from),r=IS(e.state,n.from);return r.line?FS(e):!!r.block&&PS(e)};function MS(e,t){return({state:n,dispatch:r})=>{if(n.readOnly)return!1;let i=e(t,n);return!!i&&(r(n.update(i)),!0)}}const FS=MS(BS,0),RS=MS(jS,0),PS=MS(((e,t)=>jS(e,t,NS(t))),0);function IS(e,t){let n=e.languageDataAt("commentTokens",t);return n.length?n[0]:{}}const LS=50;function $S(e,{open:t,close:n},r,i){let o,s,a=e.sliceDoc(r-LS,r),l=e.sliceDoc(i,i+LS),c=/\s*$/.exec(a)[0].length,u=/^\s*/.exec(l)[0].length,h=a.length-c;if(a.slice(h-t.length,h)==t&&l.slice(u,u+n.length)==n)return{open:{pos:r-c,margin:c&&1},close:{pos:i+u,margin:u&&1}};i-r<=2*LS?o=s=e.sliceDoc(r,i):(o=e.sliceDoc(r,r+LS),s=e.sliceDoc(i-LS,i));let d=/^\s*/.exec(o)[0].length,f=/\s*$/.exec(s)[0].length,p=s.length-f-n.length;return o.slice(d,d+t.length)==t&&s.slice(p,p+n.length)==n?{open:{pos:r+d+t.length,margin:/\s/.test(o.charAt(d+t.length))?1:0},close:{pos:i-f-n.length,margin:/\s/.test(s.charAt(p-1))?1:0}}:null}function NS(e){let t=[];for(let n of e.selection.ranges){let r=e.doc.lineAt(n.from),i=n.to<=r.to?r:e.doc.lineAt(n.to);i.from>r.from&&i.from==n.to&&(i=n.to==r.to+1?r:e.doc.lineAt(n.to-1));let o=t.length-1;o>=0&&t[o].to>r.from?t[o].to=i.to:t.push({from:r.from+/^\s*/.exec(r.text)[0].length,to:i.to})}return t}function jS(e,t,n=t.selection.ranges){let r=n.map((e=>IS(t,e.from).block));if(!r.every((e=>e)))return null;let i=n.map(((e,n)=>$S(t,r[n],e.from,e.to)));if(2!=e&&!i.every((e=>e)))return{changes:t.changes(n.map(((e,t)=>i[t]?[]:[{from:e.from,insert:r[t].open+" "},{from:e.to,insert:" "+r[t].close}])))};if(1!=e&&i.some((e=>e))){let e=[];for(let t,n=0;n<i.length;n++)if(t=i[n]){let i=r[n],{open:o,close:s}=t;e.push({from:o.pos-i.open.length,to:o.pos+o.margin},{from:s.pos-s.margin,to:s.pos+i.close.length})}return{changes:e}}return null}function BS(e,t,n=t.selection.ranges){let r=[],i=-1;for(let{from:o,to:s}of n){let e=r.length,n=1e9,a=IS(t,o).line;if(a){for(let e=o;e<=s;){let l=t.doc.lineAt(e);if(l.from>i&&(o==s||s>l.from)){i=l.from;let e=/^\s*/.exec(l.text)[0].length,t=e==l.length,o=l.text.slice(e,e+a.length)==a?e:-1;e<l.text.length&&e<n&&(n=e),r.push({line:l,comment:o,token:a,indent:e,empty:t,single:!1})}e=l.to+1}if(n<1e9)for(let t=e;t<r.length;t++)r[t].indent<r[t].line.text.length&&(r[t].indent=n);r.length==e+1&&(r[e].single=!0)}}if(2!=e&&r.some((e=>e.comment<0&&(!e.empty||e.single)))){let e=[];for(let{line:t,token:i,indent:o,empty:s,single:a}of r)!a&&s||e.push({from:t.from+o,insert:i+" "});let n=t.changes(e);return{changes:n,selection:t.selection.map(n,1)}}if(1!=e&&r.some((e=>e.comment>=0))){let e=[];for(let{line:t,comment:n,token:i}of r)if(n>=0){let r=t.from+n,o=r+i.length;" "==t.text[o-t.from]&&o++,e.push({from:r,to:o})}return{changes:e}}return null}const VS=Tg.define(),qS=rg.define();class zS{constructor(e,t,n,r,i){this.changes=e,this.effects=t,this.mapped=n,this.startSelection=r,this.selectionsAfter=i}setSelAfter(e){return new zS(this.changes,this.effects,this.mapped,this.startSelection,e)}toJSON(){var e,t,n;return{changes:null===(e=this.changes)||void 0===e?void 0:e.toJSON(),mapped:null===(t=this.mapped)||void 0===t?void 0:t.toJSON(),startSelection:null===(n=this.startSelection)||void 0===n?void 0:n.toJSON(),selectionsAfter:this.selectionsAfter.map((e=>e.toJSON()))}}static fromJSON(e){return new zS(e.changes&&Qp.fromJSON(e.changes),[],e.mapped&&Wp.fromJSON(e.mapped),e.startSelection&&eg.fromJSON(e.startSelection),e.selectionsAfter.map(eg.fromJSON))}static fromTransaction(e,t){let n=YS;for(let r of e.startState.facet(qS)){let t=r(e);t.length&&(n=n.concat(t))}return!n.length&&e.changes.empty?null:new zS(e.changes.invert(e.startState.doc),n,void 0,t||e.startState.selection,YS)}static selection(e){return new zS(void 0,YS,void 0,void 0,e)}}function HS(e,t,n,r){let i=t+1>n+20?t-n-1:0,o=e.slice(i,t);return o.push(r),o}function WS(e,t){let n=[],r=!1;return e.iterChangedRanges(((e,t)=>n.push(e,t))),t.iterChangedRanges(((e,t,i,o)=>{for(let s=0;s<n.length;){let e=n[s++],t=n[s++];o>=e&&i<=t&&(r=!0)}})),r}function QS(e,t){return e.ranges.length==t.ranges.length&&0===e.ranges.filter(((e,n)=>e.empty!=t.ranges[n].empty)).length}function US(e,t){return e.length?t.length?e.concat(t):e:t}const YS=[],XS=200;function ZS(e,t){if(e.length){let n=e[e.length-1],r=n.selectionsAfter.slice(Math.max(0,n.selectionsAfter.length-XS));return r.length&&r[r.length-1].eq(t)?e:(r.push(t),HS(e,e.length-1,1e9,n.setSelAfter(r)))}return[zS.selection([t])]}function GS(e){let t=e[e.length-1],n=e.slice();return n[e.length-1]=t.setSelAfter(t.selectionsAfter.slice(0,t.selectionsAfter.length-1)),n}function KS(e,t){if(!e.length)return e;let n=e.length,r=YS;while(n){let i=JS(e[n-1],t,r);if(i.changes&&!i.changes.empty||i.effects.length){let t=e.slice(0,n);return t[n-1]=i,t}t=i.mapped,n--,r=i.selectionsAfter}return r.length?[zS.selection(r)]:YS}function JS(e,t,n){let r=US(e.selectionsAfter.length?e.selectionsAfter.map((e=>e.map(t))):YS,n);if(!e.changes)return zS.selection(r);let i=e.changes.map(t),o=t.mapDesc(e.changes,!0),s=e.mapped?e.mapped.composeDesc(o):o;return new zS(i,Mg.mapEffects(e.effects,t),s,e.startSelection.map(o),r)}const eE=/^(input\.type|delete)($|\.)/;class tE{constructor(e,t,n=0,r=void 0){this.done=e,this.undone=t,this.prevTime=n,this.prevUserEvent=r}isolate(){return this.prevTime?new tE(this.done,this.undone):this}addChanges(e,t,n,r,i){let o=this.done,s=o[o.length-1];return o=s&&s.changes&&!s.changes.empty&&e.changes&&(!n||eE.test(n))&&(!s.selectionsAfter.length&&t-this.prevTime<r.newGroupDelay&&r.joinToEvent(i,WS(s.changes,e.changes))||"input.type.compose"==n)?HS(o,o.length-1,r.minDepth,new zS(e.changes.compose(s.changes),US(Mg.mapEffects(e.effects,s.changes),s.effects),s.mapped,s.startSelection,YS)):HS(o,o.length,r.minDepth,e),new tE(o,YS,t,n)}addSelection(e,t,n,r){let i=this.done.length?this.done[this.done.length-1].selectionsAfter:YS;return i.length>0&&t-this.prevTime<r&&n==this.prevUserEvent&&n&&/^select($|\.)/.test(n)&&QS(i[i.length-1],e)?this:new tE(ZS(this.done,e),this.undone,t,n)}addMapping(e){return new tE(KS(this.done,e),KS(this.undone,e),this.prevTime,this.prevUserEvent)}pop(e,t,n){let r=0==e?this.done:this.undone;if(0==r.length)return null;let i=r[r.length-1],o=i.selectionsAfter[0]||t.selection;if(n&&i.selectionsAfter.length)return t.update({selection:i.selectionsAfter[i.selectionsAfter.length-1],annotations:VS.of({side:e,rest:GS(r),selection:o}),userEvent:0==e?"select.undo":"select.redo",scrollIntoView:!0});if(i.changes){let n=1==r.length?YS:r.slice(0,r.length-1);return i.mapped&&(n=KS(n,i.mapped)),t.update({changes:i.changes,selection:i.startSelection,effects:i.effects,annotations:VS.of({side:e,rest:n,selection:o}),filter:!1,userEvent:0==e?"undo":"redo",scrollIntoView:!0})}return null}}tE.empty=new tE(YS,YS);function nE(e,t){return eg.create(e.ranges.map(t),e.mainIndex)}function rE(e,t){return e.update({selection:t,scrollIntoView:!0,userEvent:"select"})}function iE({state:e,dispatch:t},n){let r=nE(e.selection,n);return!r.eq(e.selection,!0)&&(t(rE(e,r)),!0)}function oE(e,t){return eg.cursor(t?e.to:e.from)}function sE(e,t){return iE(e,(n=>n.empty?e.moveByChar(n,t):oE(n,t)))}function aE(e){return e.textDirectionAt(e.state.selection.main.head)==Yv.LTR}const lE=e=>sE(e,!aE(e)),cE=e=>sE(e,aE(e));function uE(e,t){return iE(e,(n=>n.empty?e.moveByGroup(n,t):oE(n,t)))}const hE=e=>uE(e,!aE(e)),dE=e=>uE(e,aE(e));"undefined"!=typeof Intl&&Intl.Segmenter;function fE(e,t,n){if(t.type.prop(n))return!0;let r=t.to-t.from;return r&&(r>2||/[^\s,.;:]/.test(e.sliceDoc(t.from,t.to)))||t.firstChild}function pE(e,t,n){let r=Pk(e).resolveInner(t.head),i=n?Sc.closedBy:Sc.openedBy;for(let l=t.head;;){let t=n?r.childAfter(l):r.childBefore(l);if(!t)break;fE(e,t,i)?r=t:l=n?t.to:t.from}let o,s,a=r.type.prop(i);return s=a&&(o=n?R_(e,r.from,1):R_(e,r.to,-1))&&o.matched?n?o.end.to:o.end.from:n?r.to:r.from,eg.cursor(s,n?-1:1)}const gE=e=>iE(e,(t=>pE(e.state,t,!aE(e)))),mE=e=>iE(e,(t=>pE(e.state,t,aE(e))));function vE(e,t){return iE(e,(n=>{if(!n.empty)return oE(n,t);let r=e.moveVertically(n,t);return r.head!=n.head?r:e.moveToLineBoundary(n,t)}))}const yE=e=>vE(e,!1),bE=e=>vE(e,!0);function wE(e){let t,n=e.scrollDOM.clientHeight<e.scrollDOM.scrollHeight-2,r=0,i=0;if(n){for(let t of e.state.facet(px.scrollMargins)){let n=t(e);(null===n||void 0===n?void 0:n.top)&&(r=Math.max(null===n||void 0===n?void 0:n.top,r)),(null===n||void 0===n?void 0:n.bottom)&&(i=Math.max(null===n||void 0===n?void 0:n.bottom,i))}t=e.scrollDOM.clientHeight-r-i}else t=(e.dom.ownerDocument.defaultView||window).innerHeight;return{marginTop:r,marginBottom:i,selfScroll:n,height:Math.max(e.defaultLineHeight,t-5)}}function xE(e,t){let n,r=wE(e),{state:i}=e,o=nE(i.selection,(n=>n.empty?e.moveVertically(n,t,r.height):oE(n,t)));if(o.eq(i.selection))return!1;if(r.selfScroll){let t=e.coordsAtPos(i.selection.main.head),s=e.scrollDOM.getBoundingClientRect(),a=s.top+r.marginTop,l=s.bottom-r.marginBottom;t&&t.top>a&&t.bottom<l&&(n=px.scrollIntoView(o.main.head,{y:"start",yMargin:t.top-a}))}return e.dispatch(rE(i,o),{effects:n}),!0}const kE=e=>xE(e,!1),_E=e=>xE(e,!0);function OE(e,t,n){let r=e.lineBlockAt(t.head),i=e.moveToLineBoundary(t,n);if(i.head==t.head&&i.head!=(n?r.to:r.from)&&(i=e.moveToLineBoundary(t,n,!1)),!n&&i.head==r.from&&r.length){let n=/^\s*/.exec(e.state.sliceDoc(r.from,Math.min(r.from+100,r.to)))[0].length;n&&t.head!=r.from+n&&(i=eg.cursor(r.from+n))}return i}const SE=e=>iE(e,(t=>OE(e,t,!0))),EE=e=>iE(e,(t=>OE(e,t,!1))),CE=e=>iE(e,(t=>OE(e,t,!aE(e)))),TE=e=>iE(e,(t=>OE(e,t,aE(e)))),AE=e=>iE(e,(t=>eg.cursor(e.lineBlockAt(t.head).from,1))),DE=e=>iE(e,(t=>eg.cursor(e.lineBlockAt(t.head).to,-1)));function ME(e,t,n){let r=!1,i=nE(e.selection,(t=>{let i=R_(e,t.head,-1)||R_(e,t.head,1)||t.head>0&&R_(e,t.head-1,1)||t.head<e.doc.length&&R_(e,t.head+1,-1);if(!i||!i.end)return t;r=!0;let o=i.start.from==t.head?i.end.to:i.end.from;return n?eg.range(t.anchor,o):eg.cursor(o)}));return!!r&&(t(rE(e,i)),!0)}const FE=({state:e,dispatch:t})=>ME(e,t,!1);function RE(e,t){let n=nE(e.state.selection,(e=>{let n=t(e);return eg.range(e.anchor,n.head,n.goalColumn,n.bidiLevel||void 0)}));return!n.eq(e.state.selection)&&(e.dispatch(rE(e.state,n)),!0)}function PE(e,t){return RE(e,(n=>e.moveByChar(n,t)))}const IE=e=>PE(e,!aE(e)),LE=e=>PE(e,aE(e));function $E(e,t){return RE(e,(n=>e.moveByGroup(n,t)))}const NE=e=>$E(e,!aE(e)),jE=e=>$E(e,aE(e));const BE=e=>RE(e,(t=>pE(e.state,t,!aE(e)))),VE=e=>RE(e,(t=>pE(e.state,t,aE(e))));function qE(e,t){return RE(e,(n=>e.moveVertically(n,t)))}const zE=e=>qE(e,!1),HE=e=>qE(e,!0);function WE(e,t){return RE(e,(n=>e.moveVertically(n,t,wE(e).height)))}const QE=e=>WE(e,!1),UE=e=>WE(e,!0),YE=e=>RE(e,(t=>OE(e,t,!0))),XE=e=>RE(e,(t=>OE(e,t,!1))),ZE=e=>RE(e,(t=>OE(e,t,!aE(e)))),GE=e=>RE(e,(t=>OE(e,t,aE(e)))),KE=e=>RE(e,(t=>eg.cursor(e.lineBlockAt(t.head).from))),JE=e=>RE(e,(t=>eg.cursor(e.lineBlockAt(t.head).to))),eC=({state:e,dispatch:t})=>(t(rE(e,{anchor:0})),!0),tC=({state:e,dispatch:t})=>(t(rE(e,{anchor:e.doc.length})),!0),nC=({state:e,dispatch:t})=>(t(rE(e,{anchor:e.selection.main.anchor,head:0})),!0),rC=({state:e,dispatch:t})=>(t(rE(e,{anchor:e.selection.main.anchor,head:e.doc.length})),!0),iC=({state:e,dispatch:t})=>(t(e.update({selection:{anchor:0,head:e.doc.length},userEvent:"select"})),!0),oC=({state:e,dispatch:t})=>{let n=xC(e).map((({from:t,to:n})=>eg.range(t,Math.min(n+1,e.doc.length))));return t(e.update({selection:eg.create(n),userEvent:"select"})),!0},sC=({state:e,dispatch:t})=>{let n=nE(e.selection,(t=>{let n=Pk(e),r=n.resolveStack(t.from,1);if(t.empty){let e=n.resolveStack(t.from,-1);e.node.from>=r.node.from&&e.node.to<=r.node.to&&(r=e)}for(let e=r;e;e=e.next){let{node:n}=e;if((n.from<t.from&&n.to>=t.to||n.to>t.to&&n.from<=t.from)&&e.next)return eg.range(n.to,n.from)}return t}));return!n.eq(e.selection)&&(t(rE(e,n)),!0)},aC=({state:e,dispatch:t})=>{let n=e.selection,r=null;return n.ranges.length>1?r=eg.create([n.main]):n.main.empty||(r=eg.create([eg.cursor(n.main.head)])),!!r&&(t(rE(e,r)),!0)};function lC(e,t){if(e.state.readOnly)return!1;let n="delete.selection",{state:r}=e,i=r.changeByRange((r=>{let{from:i,to:o}=r;if(i==o){let s=t(r);s<i?(n="delete.backward",s=cC(e,s,!1)):s>i&&(n="delete.forward",s=cC(e,s,!0)),i=Math.min(i,s),o=Math.max(o,s)}else i=cC(e,i,!1),o=cC(e,o,!0);return i==o?{range:r}:{changes:{from:i,to:o},range:eg.cursor(i,i<r.head?-1:1)}}));return!i.changes.empty&&(e.dispatch(r.update(i,{scrollIntoView:!0,userEvent:n,effects:"delete.selection"==n?px.announce.of(r.phrase("Selection deleted")):void 0})),!0)}function cC(e,t,n){if(e instanceof px)for(let r of e.state.facet(px.atomicRanges).map((t=>t(e))))r.between(t,t,((e,r)=>{e<t&&r>t&&(t=n?r:e)}));return t}const uC=(e,t,n)=>lC(e,(r=>{let i,o,s=r.from,{state:a}=e,l=a.doc.lineAt(s);if(n&&!t&&s>l.from&&s<l.from+200&&!/[^ \t]/.test(i=l.text.slice(0,s-l.from))){if("\t"==i[i.length-1])return s-1;let e=hm(i,a.tabSize),t=e%Uk(a)||Uk(a);for(let n=0;n<t&&" "==i[i.length-1-n];n++)s--;o=s}else o=Ip(l.text,s-l.from,t,t)+l.from,o==s&&l.number!=(t?a.doc.lines:1)?o+=t?1:-1:!t&&/[\ufe00-\ufe0f]/.test(l.text.slice(o-l.from,s-l.from))&&(o=Ip(l.text,o-l.from,!1,!1)+l.from);return o})),hC=e=>uC(e,!1,!0),dC=e=>uC(e,!0,!1),fC=(e,t)=>lC(e,(n=>{let r=n.head,{state:i}=e,o=i.doc.lineAt(r),s=i.charCategorizer(r);for(let e=null;;){if(r==(t?o.to:o.from)){r==n.head&&o.number!=(t?i.doc.lines:1)&&(r+=t?1:-1);break}let a=Ip(o.text,r-o.from,t)+o.from,l=o.text.slice(Math.min(r,a)-o.from,Math.max(r,a)-o.from),c=s(l);if(null!=e&&c!=e)break;" "==l&&r==n.head||(e=c),r=a}return r})),pC=e=>fC(e,!1),gC=e=>fC(e,!0),mC=e=>lC(e,(t=>{let n=e.lineBlockAt(t.head).to;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})),vC=e=>lC(e,(t=>{let n=e.moveToLineBoundary(t,!1).head;return t.head>n?n:Math.max(0,t.head-1)})),yC=e=>lC(e,(t=>{let n=e.moveToLineBoundary(t,!0).head;return t.head<n?n:Math.min(e.state.doc.length,t.head+1)})),bC=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((e=>({changes:{from:e.from,to:e.to,insert:wp.of(["",""])},range:eg.cursor(e.from)})));return t(e.update(n,{scrollIntoView:!0,userEvent:"input"})),!0},wC=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=e.changeByRange((t=>{if(!t.empty||0==t.from||t.from==e.doc.length)return{range:t};let n=t.from,r=e.doc.lineAt(n),i=n==r.from?n-1:Ip(r.text,n-r.from,!1)+r.from,o=n==r.to?n+1:Ip(r.text,n-r.from,!0)+r.from;return{changes:{from:i,to:o,insert:e.doc.slice(n,o).append(e.doc.slice(i,n))},range:eg.cursor(o)}}));return!n.changes.empty&&(t(e.update(n,{scrollIntoView:!0,userEvent:"move.character"})),!0)};function xC(e){let t=[],n=-1;for(let r of e.selection.ranges){let i=e.doc.lineAt(r.from),o=e.doc.lineAt(r.to);if(r.empty||r.to!=o.from||(o=e.doc.lineAt(r.to-1)),n>=i.number){let e=t[t.length-1];e.to=o.to,e.ranges.push(r)}else t.push({from:i.from,to:o.to,ranges:[r]});n=o.number+1}return t}function kC(e,t,n){if(e.readOnly)return!1;let r=[],i=[];for(let o of xC(e)){if(n?o.to==e.doc.length:0==o.from)continue;let t=e.doc.lineAt(n?o.to+1:o.from-1),s=t.length+1;if(n){r.push({from:o.to,to:t.to},{from:o.from,insert:t.text+e.lineBreak});for(let t of o.ranges)i.push(eg.range(Math.min(e.doc.length,t.anchor+s),Math.min(e.doc.length,t.head+s)))}else{r.push({from:t.from,to:o.from},{from:o.to,insert:e.lineBreak+t.text});for(let e of o.ranges)i.push(eg.range(e.anchor-s,e.head-s))}}return!!r.length&&(t(e.update({changes:r,scrollIntoView:!0,selection:eg.create(i,e.selection.mainIndex),userEvent:"move.line"})),!0)}const _C=({state:e,dispatch:t})=>kC(e,t,!1),OC=({state:e,dispatch:t})=>kC(e,t,!0);function SC(e,t,n){if(e.readOnly)return!1;let r=[];for(let i of xC(e))n?r.push({from:i.from,insert:e.doc.slice(i.from,i.to)+e.lineBreak}):r.push({from:i.to,insert:e.lineBreak+e.doc.slice(i.from,i.to)});return t(e.update({changes:r,scrollIntoView:!0,userEvent:"input.copyline"})),!0}const EC=({state:e,dispatch:t})=>SC(e,t,!1),CC=({state:e,dispatch:t})=>SC(e,t,!0),TC=e=>{if(e.state.readOnly)return!1;let{state:t}=e,n=t.changes(xC(t).map((({from:e,to:n})=>(e>0?e--:n<t.doc.length&&n++,{from:e,to:n})))),r=nE(t.selection,(t=>{let n;if(e.lineWrapping){let r=e.lineBlockAt(t.head),i=e.coordsAtPos(t.head,t.assoc||1);i&&(n=r.bottom+e.documentTop-i.bottom+e.defaultLineHeight/2)}return e.moveVertically(t,!0,n)})).map(n);return e.dispatch({changes:n,selection:r,scrollIntoView:!0,userEvent:"delete.line"}),!0};function AC(e,t){if(/\(\)|\[\]|\{\}/.test(e.sliceDoc(t-1,t+1)))return{from:t,to:t};let n,r=Pk(e).resolveInner(t),i=r.childBefore(t),o=r.childAfter(t);return i&&o&&i.to<=t&&o.from>=t&&(n=i.type.prop(Sc.closedBy))&&n.indexOf(o.name)>-1&&e.doc.lineAt(i.to).from==e.doc.lineAt(o.from).from&&!/\S/.test(e.sliceDoc(i.to,o.from))?{from:i.to,to:o.from}:null}const DC=FC(!1),MC=FC(!0);function FC(e){return({state:t,dispatch:n})=>{if(t.readOnly)return!1;let r=t.changeByRange((n=>{let{from:r,to:i}=n,o=t.doc.lineAt(r),s=!e&&r==i&&AC(t,r);e&&(r=i=(i<=o.to?o:t.doc.lineAt(i)).to);let a=new Zk(t,{simulateBreak:r,simulateDoubleBreak:!!s}),l=Xk(a,r);null==l&&(l=hm(/^\s*/.exec(t.doc.lineAt(r).text)[0],t.tabSize));while(i<o.to&&/\s/.test(o.text[i-o.from]))i++;s?({from:r,to:i}=s):r>o.from&&r<o.from+100&&!/\S/.test(o.text.slice(0,r))&&(r=o.from);let c=["",Yk(t,l)];return s&&c.push(Yk(t,a.lineIndent(o.from,-1))),{changes:{from:r,to:i,insert:wp.of(c)},range:eg.cursor(r+1+c[1].length)}}));return n(t.update(r,{scrollIntoView:!0,userEvent:"input"})),!0}}function RC(e,t){let n=-1;return e.changeByRange((r=>{let i=[];for(let s=r.from;s<=r.to;){let o=e.doc.lineAt(s);o.number>n&&(r.empty||r.to>o.from)&&(t(o,i,r),n=o.number),s=o.to+1}let o=e.changes(i);return{changes:i,range:eg.range(o.mapPos(r.anchor,1),o.mapPos(r.head,1))}}))}const PC=({state:e,dispatch:t})=>{if(e.readOnly)return!1;let n=Object.create(null),r=new Zk(e,{overrideIndentation:e=>{let t=n[e];return null==t?-1:t}}),i=RC(e,((t,i,o)=>{let s=Xk(r,t.from);if(null==s)return;/\S/.test(t.text)||(s=0);let a=/^\s*/.exec(t.text)[0],l=Yk(e,s);(a!=l||o.from<t.from+a.length)&&(n[t.from]=s,i.push({from:t.from,to:t.from+a.length,insert:l}))}));return i.changes.empty||t(e.update(i,{userEvent:"indent"})),!0},IC=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(RC(e,((t,n)=>{n.push({from:t.from,insert:e.facet(Qk)})})),{userEvent:"input.indent"})),!0),LC=({state:e,dispatch:t})=>!e.readOnly&&(t(e.update(RC(e,((t,n)=>{let r=/^\s*/.exec(t.text)[0];if(!r)return;let i=hm(r,e.tabSize),o=0,s=Yk(e,Math.max(0,i-Uk(e)));while(o<r.length&&o<s.length&&r.charCodeAt(o)==s.charCodeAt(o))o++;n.push({from:t.from+o,to:t.from+r.length,insert:s.slice(o)})})),{userEvent:"delete.dedent"})),!0),$C=e=>(e.setTabFocusMode(),!0),NC=[{key:"Ctrl-b",run:lE,shift:IE,preventDefault:!0},{key:"Ctrl-f",run:cE,shift:LE},{key:"Ctrl-p",run:yE,shift:zE},{key:"Ctrl-n",run:bE,shift:HE},{key:"Ctrl-a",run:AE,shift:KE},{key:"Ctrl-e",run:DE,shift:JE},{key:"Ctrl-d",run:dC},{key:"Ctrl-h",run:hC},{key:"Ctrl-k",run:mC},{key:"Ctrl-Alt-h",run:pC},{key:"Ctrl-o",run:bC},{key:"Ctrl-t",run:wC},{key:"Ctrl-v",run:_E}],jC=[{key:"ArrowLeft",run:lE,shift:IE,preventDefault:!0},{key:"Mod-ArrowLeft",mac:"Alt-ArrowLeft",run:hE,shift:NE,preventDefault:!0},{mac:"Cmd-ArrowLeft",run:CE,shift:ZE,preventDefault:!0},{key:"ArrowRight",run:cE,shift:LE,preventDefault:!0},{key:"Mod-ArrowRight",mac:"Alt-ArrowRight",run:dE,shift:jE,preventDefault:!0},{mac:"Cmd-ArrowRight",run:TE,shift:GE,preventDefault:!0},{key:"ArrowUp",run:yE,shift:zE,preventDefault:!0},{mac:"Cmd-ArrowUp",run:eC,shift:nC},{mac:"Ctrl-ArrowUp",run:kE,shift:QE},{key:"ArrowDown",run:bE,shift:HE,preventDefault:!0},{mac:"Cmd-ArrowDown",run:tC,shift:rC},{mac:"Ctrl-ArrowDown",run:_E,shift:UE},{key:"PageUp",run:kE,shift:QE},{key:"PageDown",run:_E,shift:UE},{key:"Home",run:EE,shift:XE,preventDefault:!0},{key:"Mod-Home",run:eC,shift:nC},{key:"End",run:SE,shift:YE,preventDefault:!0},{key:"Mod-End",run:tC,shift:rC},{key:"Enter",run:DC,shift:DC},{key:"Mod-a",run:iC},{key:"Backspace",run:hC,shift:hC},{key:"Delete",run:dC},{key:"Mod-Backspace",mac:"Alt-Backspace",run:pC},{key:"Mod-Delete",mac:"Alt-Delete",run:gC},{mac:"Mod-Backspace",run:vC},{mac:"Mod-Delete",run:yC}].concat(NC.map((e=>({mac:e.key,run:e.run,shift:e.shift})))),BC=[{key:"Alt-ArrowLeft",mac:"Ctrl-ArrowLeft",run:gE,shift:BE},{key:"Alt-ArrowRight",mac:"Ctrl-ArrowRight",run:mE,shift:VE},{key:"Alt-ArrowUp",run:_C},{key:"Shift-Alt-ArrowUp",run:EC},{key:"Alt-ArrowDown",run:OC},{key:"Shift-Alt-ArrowDown",run:CC},{key:"Escape",run:aC},{key:"Mod-Enter",run:MC},{key:"Alt-l",mac:"Ctrl-l",run:oC},{key:"Mod-i",run:sC,preventDefault:!0},{key:"Mod-[",run:LC},{key:"Mod-]",run:IC},{key:"Mod-Alt-\\",run:PC},{key:"Shift-Mod-k",run:TC},{key:"Shift-Mod-\\",run:FE},{key:"Mod-/",run:DS},{key:"Alt-A",run:RS},{key:"Ctrl-m",mac:"Shift-Alt-m",run:$C}].concat(jC);function VC(){var e=arguments[0];"string"==typeof e&&(e=document.createElement(e));var t=1,n=arguments[1];if(n&&"object"==typeof n&&null==n.nodeType&&!Array.isArray(n)){for(var r in n)if(Object.prototype.hasOwnProperty.call(n,r)){var i=n[r];"string"==typeof i?e.setAttribute(r,i):null!=i&&(e[r]=i)}t++}for(;t<arguments.length;t++)qC(e,arguments[t]);return e}function qC(e,t){if("string"==typeof t)e.appendChild(document.createTextNode(t));else if(null==t);else if(null!=t.nodeType)e.appendChild(t);else{if(!Array.isArray(t))throw new RangeError("Unsupported child node: "+t);for(var n=0;n<t.length;n++)qC(e,t[n])}}class zC{constructor(e,t,n){this.from=e,this.to=t,this.diagnostic=n}}class HC{constructor(e,t,n){this.diagnostics=e,this.panel=t,this.selected=n}static init(e,t,n){let r=e,i=n.facet(oT).markerFilter;i&&(r=i(r,n));let o=Iv.set(r.map((e=>e.from==e.to||e.from==e.to-1&&n.doc.lineAt(e.from).to==e.from?Iv.widget({widget:new cT(e),diagnostic:e}).range(e.from):Iv.mark({attributes:{class:"cm-lintRange cm-lintRange-"+e.severity+(e.markClass?" "+e.markClass:"")},diagnostic:e}).range(e.from,e.to))),!0);return new HC(o,t,WC(o))}}function WC(e,t=null,n=0){let r=null;return e.between(n,1e9,((e,n,{spec:i})=>{if(!t||i.diagnostic==t)return r=new zC(e,n,i.diagnostic),!1})),r}function QC(e,t){let n=t.pos,r=t.end||n,i=e.state.facet(oT).hideOn(e,n,r);if(null!=i)return i;let o=e.startState.doc.lineAt(t.pos);return!(!e.effects.some((e=>e.is(XC)))&&!e.changes.touchesRange(o.from,Math.max(o.to,r)))}function UC(e,t){return e.field(KC,!1)?t:t.concat(Mg.appendConfig.of(gT))}function YC(e,t){return{effects:UC(e,[XC.of(t)])}}const XC=Mg.define(),ZC=Mg.define(),GC=Mg.define(),KC=ug.define({create(){return new HC(Iv.none,null,null)},update(e,t){if(t.docChanged&&e.diagnostics.size){let n=e.diagnostics.map(t.changes),r=null,i=e.panel;if(e.selected){let i=t.changes.mapPos(e.selected.from,1);r=WC(n,e.selected.diagnostic,i)||WC(n,null,i)}!n.size&&i&&t.state.facet(oT).autoPanel&&(i=null),e=new HC(n,i,r)}for(let n of t.effects)if(n.is(XC)){let r=t.state.facet(oT).autoPanel?n.value.length?hT.open:null:e.panel;e=HC.init(n.value,r,t.state)}else n.is(ZC)?e=new HC(e.diagnostics,n.value?hT.open:null,e.selected):n.is(GC)&&(e=new HC(e.diagnostics,e.panel,n.value));return e},provide:e=>[ok.from(e,(e=>e.panel)),px.decorations.from(e,(e=>e.diagnostics))]});const JC=Iv.mark({class:"cm-lintRange cm-lintRange-active"});function eT(e,t,n){let{diagnostics:r}=e.state.field(KC),i=[],o=2e8,s=0;r.between(t-(n<0?1:0),t+(n>0?1:0),((e,r,{spec:a})=>{t>=e&&t<=r&&(e==r||(t>e||n>0)&&(t<r||n<0))&&(i.push(a.diagnostic),o=Math.min(e,o),s=Math.max(r,s))}));let a=e.state.facet(oT).tooltipFilter;return a&&(i=a(i,e.state)),i.length?{pos:o,end:s,above:e.state.doc.lineAt(o).to<s,create(){return{dom:tT(e,i)}}}:null}function tT(e,t){return VC("ul",{class:"cm-tooltip-lint"},t.map((t=>lT(e,t,!1))))}const nT=e=>{let t=e.state.field(KC,!1);return!(!t||!t.panel)&&(e.dispatch({effects:ZC.of(!1)}),!0)},rT=Ly.fromClass(class{constructor(e){this.view=e,this.timeout=-1,this.set=!0;let{delay:t}=e.state.facet(oT);this.lintTime=Date.now()+t,this.run=this.run.bind(this),this.timeout=setTimeout(this.run,t)}run(){clearTimeout(this.timeout);let e=Date.now();if(e<this.lintTime-10)this.timeout=setTimeout(this.run,this.lintTime-e);else{this.set=!1;let{state:e}=this.view,{sources:t}=e.facet(oT);t.length&&iT(t.map((e=>Promise.resolve(e(this.view)))),(t=>{this.view.state.doc==e.doc&&this.view.dispatch(YC(this.view.state,t.reduce(((e,t)=>e.concat(t)))))}),(e=>{Fy(this.view.state,e)}))}}update(e){let t=e.state.facet(oT);(e.docChanged||t!=e.startState.facet(oT)||t.needsRefresh&&t.needsRefresh(e))&&(this.lintTime=Date.now()+t.delay,this.set||(this.set=!0,this.timeout=setTimeout(this.run,t.delay)))}force(){this.set&&(this.lintTime=Date.now(),this.run())}destroy(){clearTimeout(this.timeout)}});function iT(e,t,n){let r=[],i=-1;for(let o of e)o.then((n=>{r.push(n),clearTimeout(i),r.length==e.length?t(r):setTimeout((()=>t(r)),200)}),n)}const oT=rg.define({combine(e){return Object.assign({sources:e.map((e=>e.source)).filter((e=>null!=e))},Ug(e.map((e=>e.config)),{delay:750,markerFilter:null,tooltipFilter:null,needsRefresh:null,hideOn:()=>null},{needsRefresh:(e,t)=>e?t?n=>e(n)||t(n):e:t}))}});function sT(e,t={}){return[oT.of({source:e,config:t}),rT,gT]}function aT(e){let t=[];if(e)e:for(let{name:n}of e){for(let e=0;e<n.length;e++){let r=n[e];if(/[a-zA-Z]/.test(r)&&!t.some((e=>e.toLowerCase()==r.toLowerCase()))){t.push(r);continue e}}t.push("")}return t}function lT(e,t,n){var r;let i=n?aT(t.actions):[];return VC("li",{class:"cm-diagnostic cm-diagnostic-"+t.severity},VC("span",{class:"cm-diagnosticText"},t.renderMessage?t.renderMessage(e):t.message),null===(r=t.actions)||void 0===r?void 0:r.map(((n,r)=>{let o=!1,s=r=>{if(r.preventDefault(),o)return;o=!0;let i=WC(e.state.field(KC).diagnostics,t);i&&n.apply(e,i.from,i.to)},{name:a}=n,l=i[r]?a.indexOf(i[r]):-1,c=l<0?a:[a.slice(0,l),VC("u",a.slice(l,l+1)),a.slice(l+1)];return VC("button",{type:"button",class:"cm-diagnosticAction",onclick:s,onmousedown:s,"aria-label":` Action: ${a}${l<0?"":` (access key "${i[r]})"`}.`},c)})),t.source&&VC("div",{class:"cm-diagnosticSource"},t.source))}class cT extends Rv{constructor(e){super(),this.diagnostic=e}eq(e){return e.diagnostic==this.diagnostic}toDOM(){return VC("span",{class:"cm-lintPoint cm-lintPoint-"+this.diagnostic.severity})}}class uT{constructor(e,t){this.diagnostic=t,this.id="item_"+Math.floor(4294967295*Math.random()).toString(16),this.dom=lT(e,t,!0),this.dom.id=this.id,this.dom.setAttribute("role","option")}}class hT{constructor(e){this.view=e,this.items=[];let t=t=>{if(27==t.keyCode)nT(this.view),this.view.focus();else if(38==t.keyCode||33==t.keyCode)this.moveSelection((this.selectedIndex-1+this.items.length)%this.items.length);else if(40==t.keyCode||34==t.keyCode)this.moveSelection((this.selectedIndex+1)%this.items.length);else if(36==t.keyCode)this.moveSelection(0);else if(35==t.keyCode)this.moveSelection(this.items.length-1);else if(13==t.keyCode)this.view.focus();else{if(!(t.keyCode>=65&&t.keyCode<=90&&this.selectedIndex>=0))return;{let{diagnostic:n}=this.items[this.selectedIndex],r=aT(n.actions);for(let i=0;i<r.length;i++)if(r[i].toUpperCase().charCodeAt(0)==t.keyCode){let t=WC(this.view.state.field(KC).diagnostics,n);t&&n.actions[i].apply(e,t.from,t.to)}}}t.preventDefault()},n=e=>{for(let t=0;t<this.items.length;t++)this.items[t].dom.contains(e.target)&&this.moveSelection(t)};this.list=VC("ul",{tabIndex:0,role:"listbox","aria-label":this.view.state.phrase("Diagnostics"),onkeydown:t,onclick:n}),this.dom=VC("div",{class:"cm-panel-lint"},this.list,VC("button",{type:"button",name:"close","aria-label":this.view.state.phrase("close"),onclick:()=>nT(this.view)},"×")),this.update()}get selectedIndex(){let e=this.view.state.field(KC).selected;if(!e)return-1;for(let t=0;t<this.items.length;t++)if(this.items[t].diagnostic==e.diagnostic)return t;return-1}update(){let{diagnostics:e,selected:t}=this.view.state.field(KC),n=0,r=!1,i=null;e.between(0,this.view.state.doc.length,((e,o,{spec:s})=>{let a,l=-1;for(let t=n;t<this.items.length;t++)if(this.items[t].diagnostic==s.diagnostic){l=t;break}l<0?(a=new uT(this.view,s.diagnostic),this.items.splice(n,0,a),r=!0):(a=this.items[l],l>n&&(this.items.splice(n,l-n),r=!0)),t&&a.diagnostic==t.diagnostic?a.dom.hasAttribute("aria-selected")||(a.dom.setAttribute("aria-selected","true"),i=a):a.dom.hasAttribute("aria-selected")&&a.dom.removeAttribute("aria-selected"),n++}));while(n<this.items.length&&!(1==this.items.length&&this.items[0].diagnostic.from<0))r=!0,this.items.pop();0==this.items.length&&(this.items.push(new uT(this.view,{from:-1,to:-1,severity:"info",message:this.view.state.phrase("No diagnostics")})),r=!0),i?(this.list.setAttribute("aria-activedescendant",i.id),this.view.requestMeasure({key:this,read:()=>({sel:i.dom.getBoundingClientRect(),panel:this.list.getBoundingClientRect()}),write:({sel:e,panel:t})=>{let n=t.height/this.list.offsetHeight;e.top<t.top?this.list.scrollTop-=(t.top-e.top)/n:e.bottom>t.bottom&&(this.list.scrollTop+=(e.bottom-t.bottom)/n)}})):this.selectedIndex<0&&this.list.removeAttribute("aria-activedescendant"),r&&this.sync()}sync(){let e=this.list.firstChild;function t(){let t=e;e=t.nextSibling,t.remove()}for(let n of this.items)if(n.dom.parentNode==this.list){while(e!=n.dom)t();e=n.dom.nextSibling}else this.list.insertBefore(n.dom,e);while(e)t()}moveSelection(e){if(this.selectedIndex<0)return;let t=this.view.state.field(KC),n=WC(t.diagnostics,this.items[e].diagnostic);n&&this.view.dispatch({selection:{anchor:n.from,head:n.to},scrollIntoView:!0,effects:GC.of(n)})}static open(e){return new hT(e)}}function dT(e,t='viewBox="0 0 40 40"'){return`url('data:image/svg+xml,<svg xmlns="http://www.w3.org/2000/svg" ${t}>${encodeURIComponent(e)}</svg>')`}function fT(e){return dT(`<path d="m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0" stroke="${e}" fill="none" stroke-width=".7"/>`,'width="6" height="3"')}const pT=px.baseTheme({".cm-diagnostic":{padding:"3px 6px 3px 8px",marginLeft:"-1px",display:"block",whiteSpace:"pre-wrap"},".cm-diagnostic-error":{borderLeft:"5px solid #d11"},".cm-diagnostic-warning":{borderLeft:"5px solid orange"},".cm-diagnostic-info":{borderLeft:"5px solid #999"},".cm-diagnostic-hint":{borderLeft:"5px solid #66d"},".cm-diagnosticAction":{font:"inherit",border:"none",padding:"2px 4px",backgroundColor:"#444",color:"white",borderRadius:"3px",marginLeft:"8px",cursor:"pointer"},".cm-diagnosticSource":{fontSize:"70%",opacity:.7},".cm-lintRange":{backgroundPosition:"left bottom",backgroundRepeat:"repeat-x",paddingBottom:"0.7px"},".cm-lintRange-error":{backgroundImage:fT("#d11")},".cm-lintRange-warning":{backgroundImage:fT("orange")},".cm-lintRange-info":{backgroundImage:fT("#999")},".cm-lintRange-hint":{backgroundImage:fT("#66d")},".cm-lintRange-active":{backgroundColor:"#ffdd9980"},".cm-tooltip-lint":{padding:0,margin:0},".cm-lintPoint":{position:"relative","&:after":{content:'""',position:"absolute",bottom:0,left:"-2px",borderLeft:"3px solid transparent",borderRight:"3px solid transparent",borderBottom:"4px solid #d11"}},".cm-lintPoint-warning":{"&:after":{borderBottomColor:"orange"}},".cm-lintPoint-info":{"&:after":{borderBottomColor:"#999"}},".cm-lintPoint-hint":{"&:after":{borderBottomColor:"#66d"}},".cm-panel.cm-panel-lint":{position:"relative","& ul":{maxHeight:"100px",overflowY:"auto","& [aria-selected]":{backgroundColor:"#ddd","& u":{textDecoration:"underline"}},"&:focus [aria-selected]":{background_fallback:"#bdf",backgroundColor:"Highlight",color_fallback:"white",color:"HighlightText"},"& u":{textDecoration:"none"},padding:0,margin:0},"& [name=close]":{position:"absolute",top:"0",right:"2px",background:"inherit",border:"none",font:"inherit",padding:0,margin:0}}});const gT=[KC,px.decorations.compute([KC],(e=>{let{selected:t,panel:n}=e.field(KC);return t&&n&&t.from!=t.to?Iv.set([JC.range(t.from,t.to)]):Iv.none})),Kx(eT,{hideOn:QC}),pT];class mT{static create(e,t,n,r,i){let o=r+(r<<8)+e+(t<<4)|0;return new mT(e,t,n,o,i,[],[])}constructor(e,t,n,r,i,o,s){this.type=e,this.value=t,this.from=n,this.hash=r,this.end=i,this.children=o,this.positions=s,this.hashProp=[[Sc.contextHash,r]]}addChild(e,t){e.prop(Sc.contextHash)!=this.hash&&(e=new Rc(e.type,e.children,e.positions,e.length,this.hashProp)),this.children.push(e),this.positions.push(t)}toTree(e,t=this.end){let n=this.children.length-1;return n>=0&&(t=Math.max(t,this.positions[n]+this.children[n].length+this.from)),new Rc(e.types[this.type],this.children,this.positions,t-this.from).balance({makeTree:(e,t,n)=>new Rc(Tc.none,e,t,n,this.hashProp)})}}var vT;(function(e){e[e["Document"]=1]="Document",e[e["CodeBlock"]=2]="CodeBlock",e[e["FencedCode"]=3]="FencedCode",e[e["Blockquote"]=4]="Blockquote",e[e["HorizontalRule"]=5]="HorizontalRule",e[e["BulletList"]=6]="BulletList",e[e["OrderedList"]=7]="OrderedList",e[e["ListItem"]=8]="ListItem",e[e["ATXHeading1"]=9]="ATXHeading1",e[e["ATXHeading2"]=10]="ATXHeading2",e[e["ATXHeading3"]=11]="ATXHeading3",e[e["ATXHeading4"]=12]="ATXHeading4",e[e["ATXHeading5"]=13]="ATXHeading5",e[e["ATXHeading6"]=14]="ATXHeading6",e[e["SetextHeading1"]=15]="SetextHeading1",e[e["SetextHeading2"]=16]="SetextHeading2",e[e["HTMLBlock"]=17]="HTMLBlock",e[e["LinkReference"]=18]="LinkReference",e[e["Paragraph"]=19]="Paragraph",e[e["CommentBlock"]=20]="CommentBlock",e[e["ProcessingInstructionBlock"]=21]="ProcessingInstructionBlock",e[e["Escape"]=22]="Escape",e[e["Entity"]=23]="Entity",e[e["HardBreak"]=24]="HardBreak",e[e["Emphasis"]=25]="Emphasis",e[e["StrongEmphasis"]=26]="StrongEmphasis",e[e["Link"]=27]="Link",e[e["Image"]=28]="Image",e[e["InlineCode"]=29]="InlineCode",e[e["HTMLTag"]=30]="HTMLTag",e[e["Comment"]=31]="Comment",e[e["ProcessingInstruction"]=32]="ProcessingInstruction",e[e["Autolink"]=33]="Autolink",e[e["HeaderMark"]=34]="HeaderMark",e[e["QuoteMark"]=35]="QuoteMark",e[e["ListMark"]=36]="ListMark",e[e["LinkMark"]=37]="LinkMark",e[e["EmphasisMark"]=38]="EmphasisMark",e[e["CodeMark"]=39]="CodeMark",e[e["CodeText"]=40]="CodeText",e[e["CodeInfo"]=41]="CodeInfo",e[e["LinkTitle"]=42]="LinkTitle",e[e["LinkLabel"]=43]="LinkLabel",e[e["URL"]=44]="URL"})(vT||(vT={}));class yT{constructor(e,t){this.start=e,this.content=t,this.marks=[],this.parsers=[]}}class bT{constructor(){this.text="",this.baseIndent=0,this.basePos=0,this.depth=0,this.markers=[],this.pos=0,this.indent=0,this.next=-1}forward(){this.basePos>this.pos&&this.forwardInner()}forwardInner(){let e=this.skipSpace(this.basePos);this.indent=this.countIndent(e,this.pos,this.indent),this.pos=e,this.next=e==this.text.length?-1:this.text.charCodeAt(e)}skipSpace(e){return _T(this.text,e)}reset(e){this.text=e,this.baseIndent=this.basePos=this.pos=this.indent=0,this.forwardInner(),this.depth=1;while(this.markers.length)this.markers.pop()}moveBase(e){this.basePos=e,this.baseIndent=this.countIndent(e,this.pos,this.indent)}moveBaseColumn(e){this.baseIndent=e,this.basePos=this.findColumn(e)}addMarker(e){this.markers.push(e)}countIndent(e,t=0,n=0){for(let r=t;r<e;r++)n+=9==this.text.charCodeAt(r)?4-n%4:1;return n}findColumn(e){let t=0;for(let n=0;t<this.text.length&&n<e;t++)n+=9==this.text.charCodeAt(t)?4-n%4:1;return t}scrub(){if(!this.baseIndent)return this.text;let e="";for(let t=0;t<this.basePos;t++)e+=" ";return e+this.text.slice(this.basePos)}}function wT(e,t,n){if(n.pos==n.text.length||e!=t.block&&n.indent>=t.stack[n.depth+1].value+n.baseIndent)return!0;if(n.indent>=n.baseIndent+4)return!1;let r=(e.type==vT.OrderedList?DT:AT)(n,t,!1);return r>0&&(e.type!=vT.BulletList||CT(n,t,!1)<0)&&n.text.charCodeAt(n.pos+r-1)==e.value}const xT={[vT.Blockquote](e,t,n){return 62==n.next&&(n.markers.push(iA(vT.QuoteMark,t.lineStart+n.pos,t.lineStart+n.pos+1)),n.moveBase(n.pos+(kT(n.text.charCodeAt(n.pos+1))?2:1)),e.end=t.lineStart+n.text.length,!0)},[vT.ListItem](e,t,n){return!(n.indent<n.baseIndent+e.value&&n.next>-1)&&(n.moveBaseColumn(n.baseIndent+e.value),!0)},[vT.OrderedList]:wT,[vT.BulletList]:wT,[vT.Document](){return!0}};function kT(e){return 32==e||9==e||10==e||13==e}function _T(e,t=0){while(t<e.length&&kT(e.charCodeAt(t)))t++;return t}function OT(e,t,n){while(t>n&&kT(e.charCodeAt(t-1)))t--;return t}function ST(e){if(96!=e.next&&126!=e.next)return-1;let t=e.pos+1;while(t<e.text.length&&e.text.charCodeAt(t)==e.next)t++;if(t<e.pos+3)return-1;if(96==e.next)for(let n=t;n<e.text.length;n++)if(96==e.text.charCodeAt(n))return-1;return t}function ET(e){return 62!=e.next?-1:32==e.text.charCodeAt(e.pos+1)?2:1}function CT(e,t,n){if(42!=e.next&&45!=e.next&&95!=e.next)return-1;let r=1;for(let i=e.pos+1;i<e.text.length;i++){let t=e.text.charCodeAt(i);if(t==e.next)r++;else if(!kT(t))return-1}return n&&45==e.next&&FT(e)>-1&&e.depth==t.stack.length&&t.parser.leafBlockParsers.indexOf(HT.SetextHeading)>-1||r<3?-1:1}function TT(e,t){for(let n=e.stack.length-1;n>=0;n--)if(e.stack[n].type==t)return!0;return!1}function AT(e,t,n){return 45!=e.next&&43!=e.next&&42!=e.next||e.pos!=e.text.length-1&&!kT(e.text.charCodeAt(e.pos+1))||!(!n||TT(t,vT.BulletList)||e.skipSpace(e.pos+2)<e.text.length)?-1:1}function DT(e,t,n){let r=e.pos,i=e.next;for(;;){if(!(i>=48&&i<=57))break;if(r++,r==e.text.length)return-1;i=e.text.charCodeAt(r)}return r==e.pos||r>e.pos+9||46!=i&&41!=i||r<e.text.length-1&&!kT(e.text.charCodeAt(r+1))||n&&!TT(t,vT.OrderedList)&&(e.skipSpace(r+1)==e.text.length||r>e.pos+1||49!=e.next)?-1:r+1-e.pos}function MT(e){if(35!=e.next)return-1;let t=e.pos+1;while(t<e.text.length&&35==e.text.charCodeAt(t))t++;if(t<e.text.length&&32!=e.text.charCodeAt(t))return-1;let n=t-e.pos;return n>6?-1:n}function FT(e){if(45!=e.next&&61!=e.next||e.indent>=e.baseIndent+4)return-1;let t=e.pos+1;while(t<e.text.length&&e.text.charCodeAt(t)==e.next)t++;let n=t;while(t<e.text.length&&kT(e.text.charCodeAt(t)))t++;return t==e.text.length?n:-1}const RT=/^[ \t]*$/,PT=/-->/,IT=/\?>/,LT=[[/^<(?:script|pre|style)(?:\s|>|$)/i,/<\/(?:script|pre|style)>/i],[/^\s*<!--/,PT],[/^\s*<\?/,IT],[/^\s*<![A-Z]/,/>/],[/^\s*<!\[CDATA\[/,/\]\]>/],[/^\s*<\/?(?:address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h1|h2|h3|h4|h5|h6|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|nav|noframes|ol|optgroup|option|p|param|section|source|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul)(?:\s|\/?>|$)/i,RT],[/^\s*(?:<\/[a-z][\w-]*\s*>|<[a-z][\w-]*(\s+[a-z:_][\w-.]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*>)\s*$/i,RT]];function $T(e,t,n){if(60!=e.next)return-1;let r=e.text.slice(e.pos);for(let i=0,o=LT.length-(n?1:0);i<o;i++)if(LT[i][0].test(r))return i;return-1}function NT(e,t){let n=e.countIndent(t,e.pos,e.indent),r=e.countIndent(e.skipSpace(t),t,n);return r>=n+5?n+1:r}function jT(e,t,n){let r=e.length-1;r>=0&&e[r].to==t&&e[r].type==vT.CodeText?e[r].to=n:e.push(iA(vT.CodeText,t,n))}const BT={LinkReference:void 0,IndentedCode(e,t){let n=t.baseIndent+4;if(t.indent<n)return!1;let r=t.findColumn(n),i=e.lineStart+r,o=e.lineStart+t.text.length,s=[],a=[];jT(s,i,o);while(e.nextLine()&&t.depth>=e.stack.length)if(t.pos==t.text.length){jT(a,e.lineStart-1,e.lineStart);for(let e of t.markers)a.push(e)}else{if(t.indent<n)break;{if(a.length){for(let e of a)e.type==vT.CodeText?jT(s,e.from,e.to):s.push(e);a=[]}jT(s,e.lineStart-1,e.lineStart);for(let e of t.markers)s.push(e);o=e.lineStart+t.text.length;let n=e.lineStart+t.findColumn(t.baseIndent+4);n<o&&jT(s,n,o)}}return a.length&&(a=a.filter((e=>e.type!=vT.CodeText)),a.length&&(t.markers=a.concat(t.markers))),e.addNode(e.buffer.writeElements(s,-i).finish(vT.CodeBlock,o-i),i),!0},FencedCode(e,t){let n=ST(t);if(n<0)return!1;let r=e.lineStart+t.pos,i=t.next,o=n-t.pos,s=t.skipSpace(n),a=OT(t.text,t.text.length,s),l=[iA(vT.CodeMark,r,r+o)];s<a&&l.push(iA(vT.CodeInfo,e.lineStart+s,e.lineStart+a));for(let c=!0;e.nextLine()&&t.depth>=e.stack.length;c=!1){let n=t.pos;if(t.indent-t.baseIndent<4)while(n<t.text.length&&t.text.charCodeAt(n)==i)n++;if(n-t.pos>=o&&t.skipSpace(n)==t.text.length){for(let e of t.markers)l.push(e);l.push(iA(vT.CodeMark,e.lineStart+t.pos,e.lineStart+n)),e.nextLine();break}{c||jT(l,e.lineStart-1,e.lineStart);for(let e of t.markers)l.push(e);let n=e.lineStart+t.basePos,r=e.lineStart+t.text.length;n<r&&jT(l,n,r)}}return e.addNode(e.buffer.writeElements(l,-r).finish(vT.FencedCode,e.prevLineEnd()-r),r),!0},Blockquote(e,t){let n=ET(t);return!(n<0)&&(e.startContext(vT.Blockquote,t.pos),e.addNode(vT.QuoteMark,e.lineStart+t.pos,e.lineStart+t.pos+1),t.moveBase(t.pos+n),null)},HorizontalRule(e,t){if(CT(t,e,!1)<0)return!1;let n=e.lineStart+t.pos;return e.nextLine(),e.addNode(vT.HorizontalRule,n),!0},BulletList(e,t){let n=AT(t,e,!1);if(n<0)return!1;e.block.type!=vT.BulletList&&e.startContext(vT.BulletList,t.basePos,t.next);let r=NT(t,t.pos+1);return e.startContext(vT.ListItem,t.basePos,r-t.baseIndent),e.addNode(vT.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(r),null},OrderedList(e,t){let n=DT(t,e,!1);if(n<0)return!1;e.block.type!=vT.OrderedList&&e.startContext(vT.OrderedList,t.basePos,t.text.charCodeAt(t.pos+n-1));let r=NT(t,t.pos+n);return e.startContext(vT.ListItem,t.basePos,r-t.baseIndent),e.addNode(vT.ListMark,e.lineStart+t.pos,e.lineStart+t.pos+n),t.moveBaseColumn(r),null},ATXHeading(e,t){let n=MT(t);if(n<0)return!1;let r=t.pos,i=e.lineStart+r,o=OT(t.text,t.text.length,r),s=o;while(s>r&&t.text.charCodeAt(s-1)==t.next)s--;s!=o&&s!=r&&kT(t.text.charCodeAt(s-1))||(s=t.text.length);let a=e.buffer.write(vT.HeaderMark,0,n).writeElements(e.parser.parseInline(t.text.slice(r+n+1,s),i+n+1),-i);s<t.text.length&&a.write(vT.HeaderMark,s-r,o-r);let l=a.finish(vT.ATXHeading1-1+n,t.text.length-r);return e.nextLine(),e.addNode(l,i),!0},HTMLBlock(e,t){let n=$T(t,e,!1);if(n<0)return!1;let r=e.lineStart+t.pos,i=LT[n][1],o=[],s=i!=RT;while(!i.test(t.text)&&e.nextLine()){if(t.depth<e.stack.length){s=!1;break}for(let e of t.markers)o.push(e)}s&&e.nextLine();let a=i==PT?vT.CommentBlock:i==IT?vT.ProcessingInstructionBlock:vT.HTMLBlock,l=e.prevLineEnd();return e.addNode(e.buffer.writeElements(o,-r).finish(a,l-r),r),!0},SetextHeading:void 0};class VT{constructor(e){this.stage=0,this.elts=[],this.pos=0,this.start=e.start,this.advance(e.content)}nextLine(e,t,n){if(-1==this.stage)return!1;let r=n.content+"\n"+t.scrub(),i=this.advance(r);return i>-1&&i<r.length&&this.complete(e,n,i)}finish(e,t){return(2==this.stage||3==this.stage)&&_T(t.content,this.pos)==t.content.length&&this.complete(e,t,t.content.length)}complete(e,t,n){return e.addLeafElement(t,iA(vT.LinkReference,this.start,this.start+n,this.elts)),!0}nextStage(e){return e?(this.pos=e.to-this.start,this.elts.push(e),this.stage++,!0):(!1===e&&(this.stage=-1),!1)}advance(e){for(;;){if(-1==this.stage)return-1;if(0==this.stage){if(!this.nextStage(mA(e,this.pos,this.start,!0)))return-1;if(58!=e.charCodeAt(this.pos))return this.stage=-1;this.elts.push(iA(vT.LinkMark,this.pos+this.start,this.pos+this.start+1)),this.pos++}else{if(1!=this.stage){if(2==this.stage){let t=_T(e,this.pos),n=0;if(t>this.pos){let r=gA(e,t,this.start);if(r){let t=qT(e,r.to-this.start);t>0&&(this.nextStage(r),n=t)}}return n||(n=qT(e,this.pos)),n>0&&n<e.length?n:-1}return qT(e,this.pos)}if(!this.nextStage(pA(e,_T(e,this.pos),this.start)))return-1}}}}function qT(e,t){for(;t<e.length;t++){let n=e.charCodeAt(t);if(10==n)break;if(!kT(n))return-1}return t}class zT{nextLine(e,t,n){let r=t.depth<e.stack.length?-1:FT(t),i=t.next;if(r<0)return!1;let o=iA(vT.HeaderMark,e.lineStart+t.pos,e.lineStart+r);return e.nextLine(),e.addLeafElement(n,iA(61==i?vT.SetextHeading1:vT.SetextHeading2,n.start,e.prevLineEnd(),[...e.parser.parseInline(n.content,n.start),o])),!0}finish(){return!1}}const HT={LinkReference(e,t){return 91==t.content.charCodeAt(0)?new VT(t):null},SetextHeading(){return new zT}},WT=[(e,t)=>MT(t)>=0,(e,t)=>ST(t)>=0,(e,t)=>ET(t)>=0,(e,t)=>AT(t,e,!0)>=0,(e,t)=>DT(t,e,!0)>=0,(e,t)=>CT(t,e,!0)>=0,(e,t)=>$T(t,e,!0)>=0],QT={text:"",end:0};class UT{constructor(e,t,n,r){this.parser=e,this.input=t,this.ranges=r,this.line=new bT,this.atEnd=!1,this.reusePlaceholders=new Map,this.stoppedAt=null,this.rangeI=0,this.to=r[r.length-1].to,this.lineStart=this.absoluteLineStart=this.absoluteLineEnd=r[0].from,this.block=mT.create(vT.Document,0,this.lineStart,0,0),this.stack=[this.block],this.fragments=n.length?new wA(n,t):null,this.readLine()}get parsedPos(){return this.absoluteLineStart}advance(){if(null!=this.stoppedAt&&this.absoluteLineStart>this.stoppedAt)return this.finish();let{line:e}=this;for(;;){for(let t=0;;){let n=e.depth<this.stack.length?this.stack[this.stack.length-1]:null;while(t<e.markers.length&&(!n||e.markers[t].from<n.end)){let n=e.markers[t++];this.addNode(n.type,n.from,n.to)}if(!n)break;this.finishContext()}if(e.pos<e.text.length)break;if(!this.nextLine())return this.finish()}if(this.fragments&&this.reuseFragment(e.basePos))return null;e:for(;;){for(let t of this.parser.blockParsers)if(t){let n=t(this,e);if(0!=n){if(1==n)return null;e.forward();continue e}}break}let t=new yT(this.lineStart+e.pos,e.text.slice(e.pos));for(let n of this.parser.leafBlockParsers)if(n){let e=n(this,t);e&&t.parsers.push(e)}e:while(this.nextLine()){if(e.pos==e.text.length)break;if(e.indent<e.baseIndent+4)for(let n of this.parser.endLeafBlock)if(n(this,e,t))break e;for(let n of t.parsers)if(n.nextLine(this,e,t))return null;t.content+="\n"+e.scrub();for(let n of e.markers)t.marks.push(n)}return this.finishLeaf(t),null}stopAt(e){if(null!=this.stoppedAt&&this.stoppedAt<e)throw new RangeError("Can't move stoppedAt forward");this.stoppedAt=e}reuseFragment(e){if(!this.fragments.moveTo(this.absoluteLineStart+e,this.absoluteLineStart)||!this.fragments.matches(this.block.hash))return!1;let t=this.fragments.takeNodes(this);return!!t&&(this.absoluteLineStart+=t,this.lineStart=xA(this.absoluteLineStart,this.ranges),this.moveRangeI(),this.absoluteLineStart<this.to?(this.lineStart++,this.absoluteLineStart++,this.readLine()):(this.atEnd=!0,this.readLine()),!0)}get depth(){return this.stack.length}parentType(e=this.depth-1){return this.parser.nodeSet.types[this.stack[e].type]}nextLine(){return this.lineStart+=this.line.text.length,this.absoluteLineEnd>=this.to?(this.absoluteLineStart=this.absoluteLineEnd,this.atEnd=!0,this.readLine(),!1):(this.lineStart++,this.absoluteLineStart=this.absoluteLineEnd+1,this.moveRangeI(),this.readLine(),!0)}moveRangeI(){while(this.rangeI<this.ranges.length-1&&this.absoluteLineStart>=this.ranges[this.rangeI].to)this.rangeI++,this.absoluteLineStart=Math.max(this.absoluteLineStart,this.ranges[this.rangeI].from)}scanLine(e){let t=QT;if(t.end=e,e>=this.to)t.text="";else if(t.text=this.lineChunkAt(e),t.end+=t.text.length,this.ranges.length>1){let e=this.absoluteLineStart,n=this.rangeI;while(this.ranges[n].to<t.end){n++;let r=this.ranges[n].from,i=this.lineChunkAt(r);t.end=r+i.length,t.text=t.text.slice(0,this.ranges[n-1].to-e)+i,e=t.end-t.text.length}}return t}readLine(){let{line:e}=this,{text:t,end:n}=this.scanLine(this.absoluteLineStart);for(this.absoluteLineEnd=n,e.reset(t);e.depth<this.stack.length;e.depth++){let t=this.stack[e.depth],n=this.parser.skipContextMarkup[t.type];if(!n)throw new Error("Unhandled block context "+vT[t.type]);if(!n(t,this,e))break;e.forward()}}lineChunkAt(e){let t,n=this.input.chunk(e);if(this.input.lineChunks)t="\n"==n?"":n;else{let e=n.indexOf("\n");t=e<0?n:n.slice(0,e)}return e+t.length>this.to?t.slice(0,this.to-e):t}prevLineEnd(){return this.atEnd?this.lineStart:this.lineStart-1}startContext(e,t,n=0){this.block=mT.create(e,n,this.lineStart+t,this.block.hash,this.lineStart+this.line.text.length),this.stack.push(this.block)}startComposite(e,t,n=0){this.startContext(this.parser.getNodeType(e),t,n)}addNode(e,t,n){"number"==typeof e&&(e=new Rc(this.parser.nodeSet.types[e],eA,eA,(null!==n&&void 0!==n?n:this.prevLineEnd())-t)),this.block.addChild(e,t-this.block.from)}addElement(e){this.block.addChild(e.toTree(this.parser.nodeSet),e.from-this.block.from)}addLeafElement(e,t){this.addNode(this.buffer.writeElements(yA(t.children,e.marks),-t.from).finish(t.type,t.to-t.from),t.from)}finishContext(){let e=this.stack.pop(),t=this.stack[this.stack.length-1];t.addChild(e.toTree(this.parser.nodeSet),e.from-t.from),this.block=t}finish(){while(this.stack.length>1)this.finishContext();return this.addGaps(this.block.toTree(this.parser.nodeSet,this.lineStart))}addGaps(e){return this.ranges.length>1?YT(this.ranges,0,e.topNode,this.ranges[0].from,this.reusePlaceholders):e}finishLeaf(e){for(let n of e.parsers)if(n.finish(this,e))return;let t=yA(this.parser.parseInline(e.content,e.start),e.marks);this.addNode(this.buffer.writeElements(t,-e.start).finish(vT.Paragraph,e.content.length),e.start)}elt(e,t,n,r){return"string"==typeof e?iA(this.parser.getNodeType(e),t,n,r):new rA(e,t)}get buffer(){return new tA(this.parser.nodeSet)}}function YT(e,t,n,r,i){let o=e[t].to,s=[],a=[],l=n.from+r;function c(n,i){while(i?n>=o:n>o){let i=e[t+1].from-o;r+=i,n+=i,t++,o=e[t].to}}for(let u=n.firstChild;u;u=u.nextSibling){c(u.from+r,!0);let n,h=u.from+r,d=i.get(u.tree);d?n=d:u.to+r>o?(n=YT(e,t,u,r,i),c(u.to+r,!1)):n=u.toTree(),s.push(n),a.push(h-l)}return c(n.to+r,!1),new Rc(n.type,s,a,n.to+r-l,n.tree?n.tree.propValues:void 0)}class XT extends eu{constructor(e,t,n,r,i,o,s,a,l){super(),this.nodeSet=e,this.blockParsers=t,this.leafBlockParsers=n,this.blockNames=r,this.endLeafBlock=i,this.skipContextMarkup=o,this.inlineParsers=s,this.inlineNames=a,this.wrappers=l,this.nodeTypes=Object.create(null);for(let c of e.types)this.nodeTypes[c.name]=c.id}createParse(e,t,n){let r=new UT(this,e,t,n);for(let i of this.wrappers)r=i(r,e,t,n);return r}configure(e){let t=GT(e);if(!t)return this;let{nodeSet:n,skipContextMarkup:r}=this,i=this.blockParsers.slice(),o=this.leafBlockParsers.slice(),s=this.blockNames.slice(),a=this.inlineParsers.slice(),l=this.inlineNames.slice(),c=this.endLeafBlock.slice(),u=this.wrappers;if(ZT(t.defineNodes)){r=Object.assign({},r);let e,i=n.types.slice();for(let n of t.defineNodes){let{name:t,block:o,composite:s,style:a}="string"==typeof n?{name:n}:n;if(i.some((e=>e.name==t)))continue;s&&(r[i.length]=(e,t,n)=>s(t,n,e.value));let l=i.length,c=s?["Block","BlockContext"]:o?l>=vT.ATXHeading1&&l<=vT.SetextHeading2?["Block","LeafBlock","Heading"]:["Block","LeafBlock"]:void 0;i.push(Tc.define({id:l,name:t,props:c&&[[Sc.group,c]]})),a&&(e||(e={}),Array.isArray(a)||a instanceof Wu?e[t]=a:Object.assign(e,a))}n=new Ac(i),e&&(n=n.extend(Zu(e)))}if(ZT(t.props)&&(n=n.extend(...t.props)),ZT(t.remove))for(let h of t.remove){let e=this.blockNames.indexOf(h),t=this.inlineNames.indexOf(h);e>-1&&(i[e]=o[e]=void 0),t>-1&&(a[t]=void 0)}if(ZT(t.parseBlock))for(let h of t.parseBlock){let e=s.indexOf(h.name);if(e>-1)i[e]=h.parse,o[e]=h.leaf;else{let e=h.before?KT(s,h.before):h.after?KT(s,h.after)+1:s.length-1;i.splice(e,0,h.parse),o.splice(e,0,h.leaf),s.splice(e,0,h.name)}h.endLeaf&&c.push(h.endLeaf)}if(ZT(t.parseInline))for(let h of t.parseInline){let e=l.indexOf(h.name);if(e>-1)a[e]=h.parse;else{let e=h.before?KT(l,h.before):h.after?KT(l,h.after)+1:l.length-1;a.splice(e,0,h.parse),l.splice(e,0,h.name)}}return t.wrap&&(u=u.concat(t.wrap)),new XT(n,i,o,s,c,r,a,l,u)}getNodeType(e){let t=this.nodeTypes[e];if(null==t)throw new RangeError(`Unknown node type '${e}'`);return t}parseInline(e,t){let n=new vA(this,e,t);e:for(let r=t;r<n.end;){let e=n.char(r);for(let t of this.inlineParsers)if(t){let i=t(n,e,r);if(i>=0){r=i;continue e}}r++}return n.resolveMarkers(0)}}function ZT(e){return null!=e&&e.length>0}function GT(e){if(!Array.isArray(e))return e;if(0==e.length)return null;let t=GT(e[0]);if(1==e.length)return t;let n=GT(e.slice(1));if(!n||!t)return t||n;let r=(e,t)=>(e||eA).concat(t||eA),i=t.wrap,o=n.wrap;return{props:r(t.props,n.props),defineNodes:r(t.defineNodes,n.defineNodes),parseBlock:r(t.parseBlock,n.parseBlock),parseInline:r(t.parseInline,n.parseInline),remove:r(t.remove,n.remove),wrap:i?o?(e,t,n,r)=>i(o(e,t,n,r),t,n,r):i:o}}function KT(e,t){let n=e.indexOf(t);if(n<0)throw new RangeError(`Position specified relative to unknown parser ${t}`);return n}let JT=[Tc.none];for(let iK,oK=1;iK=vT[oK];oK++)JT[oK]=Tc.define({id:oK,name:iK,props:oK>=vT.Escape?[]:[[Sc.group,oK in xT?["Block","BlockContext"]:["Block","LeafBlock"]]],top:"Document"==iK});const eA=[];class tA{constructor(e){this.nodeSet=e,this.content=[],this.nodes=[]}write(e,t,n,r=0){return this.content.push(e,t,n,4+4*r),this}writeElements(e,t=0){for(let n of e)n.writeTo(this,t);return this}finish(e,t){return Rc.build({buffer:this.content,nodeSet:this.nodeSet,reused:this.nodes,topID:e,length:t})}}class nA{constructor(e,t,n,r=eA){this.type=e,this.from=t,this.to=n,this.children=r}writeTo(e,t){let n=e.content.length;e.writeElements(this.children,t),e.content.push(this.type,this.from+t,this.to+t,e.content.length+4-n)}toTree(e){return new tA(e).writeElements(this.children,-this.from).finish(this.type,this.to-this.from)}}class rA{constructor(e,t){this.tree=e,this.from=t}get to(){return this.from+this.tree.length}get type(){return this.tree.type.id}get children(){return eA}writeTo(e,t){e.nodes.push(this.tree),e.content.push(e.nodes.length-1,this.from+t,this.to+t,-1)}toTree(){return this.tree}}function iA(e,t,n,r){return new nA(e,t,n,r)}const oA={resolve:"Emphasis",mark:"EmphasisMark"},sA={resolve:"Emphasis",mark:"EmphasisMark"},aA={},lA={};class cA{constructor(e,t,n,r){this.type=e,this.from=t,this.to=n,this.side=r}}const uA="!\"#$%&'()*+,-./:;<=>?@[\\]^_`{|}~";let hA=/[!"#$%&'()*+,\-.\/:;<=>?@\[\\\]^_`{|}~\xA1\u2010-\u2027]/;try{hA=new RegExp("[\\p{S}|\\p{P}]","u")}catch(Re){}const dA={Escape(e,t,n){if(92!=t||n==e.end-1)return-1;let r=e.char(n+1);for(let i=0;i<uA.length;i++)if(uA.charCodeAt(i)==r)return e.append(iA(vT.Escape,n,n+2));return-1},Entity(e,t,n){if(38!=t)return-1;let r=/^(?:#\d+|#x[a-f\d]+|\w+);/i.exec(e.slice(n+1,n+31));return r?e.append(iA(vT.Entity,n,n+1+r[0].length)):-1},InlineCode(e,t,n){if(96!=t||n&&96==e.char(n-1))return-1;let r=n+1;while(r<e.end&&96==e.char(r))r++;let i=r-n,o=0;for(;r<e.end;r++)if(96==e.char(r)){if(o++,o==i&&96!=e.char(r+1))return e.append(iA(vT.InlineCode,n,r+1,[iA(vT.CodeMark,n,n+i),iA(vT.CodeMark,r+1-i,r+1)]))}else o=0;return-1},HTMLTag(e,t,n){if(60!=t||n==e.end-1)return-1;let r=e.slice(n+1,e.end),i=/^(?:[a-z][-\w+.]+:[^\s>]+|[a-z\d.!#$%&'*+/=?^_`{|}~-]+@[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?(?:\.[a-z\d](?:[a-z\d-]{0,61}[a-z\d])?)*)>/i.exec(r);if(i)return e.append(iA(vT.Autolink,n,n+1+i[0].length,[iA(vT.LinkMark,n,n+1),iA(vT.URL,n+1,n+i[0].length),iA(vT.LinkMark,n+i[0].length,n+1+i[0].length)]));let o=/^!--[^>](?:-[^-]|[^-])*?-->/i.exec(r);if(o)return e.append(iA(vT.Comment,n,n+1+o[0].length));let s=/^\?[^]*?\?>/.exec(r);if(s)return e.append(iA(vT.ProcessingInstruction,n,n+1+s[0].length));let a=/^(?:![A-Z][^]*?>|!\[CDATA\[[^]*?\]\]>|\/\s*[a-zA-Z][\w-]*\s*>|\s*[a-zA-Z][\w-]*(\s+[a-zA-Z:_][\w-.:]*(?:\s*=\s*(?:[^\s"'=<>`]+|'[^']*'|"[^"]*"))?)*\s*(\/\s*)?>)/.exec(r);return a?e.append(iA(vT.HTMLTag,n,n+1+a[0].length)):-1},Emphasis(e,t,n){if(95!=t&&42!=t)return-1;let r=n+1;while(e.char(r)==t)r++;let i=e.slice(n-1,n),o=e.slice(r,r+1),s=hA.test(i),a=hA.test(o),l=/\s|^$/.test(i),c=/\s|^$/.test(o),u=!c&&(!a||l||s),h=!l&&(!s||c||a),d=u&&(42==t||!h||s),f=h&&(42==t||!u||a);return e.append(new cA(95==t?oA:sA,n,r,(d?1:0)|(f?2:0)))},HardBreak(e,t,n){if(92==t&&10==e.char(n+1))return e.append(iA(vT.HardBreak,n,n+2));if(32==t){let t=n+1;while(32==e.char(t))t++;if(10==e.char(t)&&t>=n+2)return e.append(iA(vT.HardBreak,n,t+1))}return-1},Link(e,t,n){return 91==t?e.append(new cA(aA,n,n+1,1)):-1},Image(e,t,n){return 33==t&&91==e.char(n+1)?e.append(new cA(lA,n,n+2,1)):-1},LinkEnd(e,t,n){if(93!=t)return-1;for(let r=e.parts.length-1;r>=0;r--){let t=e.parts[r];if(t instanceof cA&&(t.type==aA||t.type==lA)){if(!t.side||e.skipSpace(t.to)==n&&!/[(\[]/.test(e.slice(n+1,n+2)))return e.parts[r]=null,-1;let i=e.takeContent(r),o=e.parts[r]=fA(e,i,t.type==aA?vT.Link:vT.Image,t.from,n+1);if(t.type==aA)for(let t=0;t<r;t++){let n=e.parts[t];n instanceof cA&&n.type==aA&&(n.side=0)}return o.to}}return-1}};function fA(e,t,n,r,i){let{text:o}=e,s=e.char(i),a=i;if(t.unshift(iA(vT.LinkMark,r,r+(n==vT.Image?2:1))),t.push(iA(vT.LinkMark,i-1,i)),40==s){let n,r=e.skipSpace(i+1),s=pA(o,r-e.offset,e.offset);s&&(r=e.skipSpace(s.to),r!=s.to&&(n=gA(o,r-e.offset,e.offset),n&&(r=e.skipSpace(n.to)))),41==e.char(r)&&(t.push(iA(vT.LinkMark,i,i+1)),a=r+1,s&&t.push(s),n&&t.push(n),t.push(iA(vT.LinkMark,r,a)))}else if(91==s){let n=mA(o,i-e.offset,e.offset,!1);n&&(t.push(n),a=n.to)}return iA(n,r,a,t)}function pA(e,t,n){let r=e.charCodeAt(t);if(60==r){for(let r=t+1;r<e.length;r++){let i=e.charCodeAt(r);if(62==i)return iA(vT.URL,t+n,r+1+n);if(60==i||10==i)return!1}return null}{let r=0,i=t;for(let t=!1;i<e.length;i++){let n=e.charCodeAt(i);if(kT(n))break;if(t)t=!1;else if(40==n)r++;else if(41==n){if(!r)break;r--}else 92==n&&(t=!0)}return i>t?iA(vT.URL,t+n,i+n):i==e.length&&null}}function gA(e,t,n){let r=e.charCodeAt(t);if(39!=r&&34!=r&&40!=r)return!1;let i=40==r?41:r;for(let o=t+1,s=!1;o<e.length;o++){let r=e.charCodeAt(o);if(s)s=!1;else{if(r==i)return iA(vT.LinkTitle,t+n,o+1+n);92==r&&(s=!0)}}return null}function mA(e,t,n,r){for(let i=!1,o=t+1,s=Math.min(e.length,o+999);o<s;o++){let s=e.charCodeAt(o);if(i)i=!1;else{if(93==s)return!r&&iA(vT.LinkLabel,t+n,o+1+n);if(r&&!kT(s)&&(r=!1),91==s)return!1;92==s&&(i=!0)}}return null}class vA{constructor(e,t,n){this.parser=e,this.text=t,this.offset=n,this.parts=[]}char(e){return e>=this.end?-1:this.text.charCodeAt(e-this.offset)}get end(){return this.offset+this.text.length}slice(e,t){return this.text.slice(e-this.offset,t-this.offset)}append(e){return this.parts.push(e),e.to}addDelimiter(e,t,n,r,i){return this.append(new cA(e,t,n,(r?1:0)|(i?2:0)))}get hasOpenLink(){for(let e=this.parts.length-1;e>=0;e--){let t=this.parts[e];if(t instanceof cA&&(t.type==aA||t.type==lA))return!0}return!1}addElement(e){return this.append(e)}resolveMarkers(e){for(let n=e;n<this.parts.length;n++){let t=this.parts[n];if(!(t instanceof cA&&t.type.resolve&&2&t.side))continue;let r,i=t.type==oA||t.type==sA,o=t.to-t.from,s=n-1;for(;s>=e;s--){let e=this.parts[s];if(e instanceof cA&&1&e.side&&e.type==t.type&&!(i&&(1&t.side||2&e.side)&&(e.to-e.from+o)%3==0&&((e.to-e.from)%3||o%3))){r=e;break}}if(!r)continue;let a=t.type.resolve,l=[],c=r.from,u=t.to;if(i){let e=Math.min(2,r.to-r.from,o);c=r.to-e,u=t.from+e,a=1==e?"Emphasis":"StrongEmphasis"}r.type.mark&&l.push(this.elt(r.type.mark,c,r.to));for(let e=s+1;e<n;e++)this.parts[e]instanceof nA&&l.push(this.parts[e]),this.parts[e]=null;t.type.mark&&l.push(this.elt(t.type.mark,t.from,u));let h=this.elt(a,c,u,l);this.parts[s]=i&&r.from!=c?new cA(r.type,r.from,c,r.side):null;let d=this.parts[n]=i&&t.to!=u?new cA(t.type,u,t.to,t.side):null;d?this.parts.splice(n,0,h):this.parts[n]=h}let t=[];for(let n=e;n<this.parts.length;n++){let e=this.parts[n];e instanceof nA&&t.push(e)}return t}findOpeningDelimiter(e){for(let t=this.parts.length-1;t>=0;t--){let n=this.parts[t];if(n instanceof cA&&n.type==e)return t}return null}takeContent(e){let t=this.resolveMarkers(e);return this.parts.length=e,t}skipSpace(e){return _T(this.text,e-this.offset)+this.offset}elt(e,t,n,r){return"string"==typeof e?iA(this.parser.getNodeType(e),t,n,r):new rA(e,t)}}function yA(e,t){if(!t.length)return e;if(!e.length)return t;let n=e.slice(),r=0;for(let i of t){while(r<n.length&&n[r].to<i.to)r++;if(r<n.length&&n[r].from<i.from){let e=n[r];e instanceof nA&&(n[r]=new nA(e.type,e.from,e.to,yA(e.children,[i])))}else n.splice(r++,0,i)}return n}const bA=[vT.CodeBlock,vT.ListItem,vT.OrderedList,vT.BulletList];class wA{constructor(e,t){this.fragments=e,this.input=t,this.i=0,this.fragment=null,this.fragmentEnd=-1,this.cursor=null,e.length&&(this.fragment=e[this.i++])}nextFragment(){this.fragment=this.i<this.fragments.length?this.fragments[this.i++]:null,this.cursor=null,this.fragmentEnd=-1}moveTo(e,t){while(this.fragment&&this.fragment.to<=e)this.nextFragment();if(!this.fragment||this.fragment.from>(e?e-1:0))return!1;if(this.fragmentEnd<0){let e=this.fragment.to;while(e>0&&"\n"!=this.input.read(e-1,e))e--;this.fragmentEnd=e?e-1:0}let n=this.cursor;n||(n=this.cursor=this.fragment.tree.cursor(),n.firstChild());let r=e+this.fragment.offset;while(n.to<=r)if(!n.parent())return!1;for(;;){if(n.from>=r)return this.fragment.from<=t;if(!n.childAfter(r))return!1}}matches(e){let t=this.cursor.tree;return t&&t.prop(Sc.contextHash)==e}takeNodes(e){let t=this.cursor,n=this.fragment.offset,r=this.fragmentEnd-(this.fragment.openEnd?1:0),i=e.absoluteLineStart,o=i,s=e.block.children.length,a=o,l=s;for(;;){if(t.to-n>r){if(t.type.isAnonymous&&t.firstChild())continue;break}let i=xA(t.from-n,e.ranges);if(t.to-n<=e.ranges[e.rangeI].to)e.addNode(t.tree,i);else{let n=new Rc(e.parser.nodeSet.types[vT.Paragraph],[],[],0,e.block.hashProp);e.reusePlaceholders.set(n,t.tree),e.addNode(n,i)}if(t.type.is("Block")&&(bA.indexOf(t.type.id)<0?(o=t.to-n,s=e.block.children.length):(o=a,s=l,a=t.to-n,l=e.block.children.length)),!t.nextSibling())break}while(e.block.children.length>s)e.block.children.pop(),e.block.positions.pop();return o-i}}function xA(e,t){let n=e;for(let r=1;r<t.length;r++){let i=t[r-1].to,o=t[r].from;i<e&&(n-=o-i)}return n}const kA=Zu({"Blockquote/...":bh.quote,HorizontalRule:bh.contentSeparator,"ATXHeading1/... SetextHeading1/...":bh.heading1,"ATXHeading2/... SetextHeading2/...":bh.heading2,"ATXHeading3/...":bh.heading3,"ATXHeading4/...":bh.heading4,"ATXHeading5/...":bh.heading5,"ATXHeading6/...":bh.heading6,"Comment CommentBlock":bh.comment,Escape:bh.escape,Entity:bh.character,"Emphasis/...":bh.emphasis,"StrongEmphasis/...":bh.strong,"Link/... Image/...":bh.link,"OrderedList/... BulletList/...":bh.list,"BlockQuote/...":bh.quote,"InlineCode CodeText":bh.monospace,"URL Autolink":bh.url,"HeaderMark HardBreak QuoteMark ListMark LinkMark EmphasisMark CodeMark":bh.processingInstruction,"CodeInfo LinkLabel":bh.labelName,LinkTitle:bh.string,Paragraph:bh.content}),_A=new XT(new Ac(JT).extend(kA),Object.keys(BT).map((e=>BT[e])),Object.keys(BT).map((e=>HT[e])),Object.keys(BT),WT,xT,Object.keys(dA).map((e=>dA[e])),Object.keys(dA),[]);const OA={resolve:"Strikethrough",mark:"StrikethroughMark"};bh.strikethrough,bh.processingInstruction;function SA(e,t,n=0,r,i=0){let o=0,s=!0,a=-1,l=-1,c=!1,u=()=>{r.push(e.elt("TableCell",i+a,i+l,e.parser.parseInline(t.slice(a,l),i+a)))};for(let h=n;h<t.length;h++){let n=t.charCodeAt(h);124!=n||c?(c||32!=n&&9!=n)&&(a<0&&(a=h),l=h+1):((!s||a>-1)&&o++,s=!1,r&&(a>-1&&u(),r.push(e.elt("TableDelimiter",h+i,h+i+1))),a=l=-1),c=!c&&92==n}return a>-1&&(o++,r&&u()),o}function EA(e,t){for(let n=t;n<e.length;n++){let t=e.charCodeAt(n);if(124==t)return!0;92==t&&n++}return!1}const CA=/^\|?(\s*:?-+:?\s*\|)+(\s*:?-+:?\s*)?$/;class TA{constructor(){this.rows=null}nextLine(e,t,n){if(null==this.rows){let r;if(this.rows=!1,(45==t.next||58==t.next||124==t.next)&&CA.test(r=t.text.slice(t.pos))){let i=[],o=SA(e,n.content,0,i,n.start);o==SA(e,r,t.pos)&&(this.rows=[e.elt("TableHeader",n.start,n.start+n.content.length,i),e.elt("TableDelimiter",e.lineStart+t.pos,e.lineStart+t.text.length)])}}else if(this.rows){let n=[];SA(e,t.text,t.pos,n,e.lineStart),this.rows.push(e.elt("TableRow",e.lineStart+t.pos,e.lineStart+t.text.length,n))}return!1}finish(e,t){return!!this.rows&&(e.addLeafElement(t,e.elt("Table",t.start,t.start+t.content.length,this.rows)),!0)}}bh.heading,bh.content,bh.processingInstruction;class AA{nextLine(){return!1}finish(e,t){return e.addLeafElement(t,e.elt("Task",t.start,t.start+t.content.length,[e.elt("TaskMarker",t.start,t.start+3),...e.parser.parseInline(t.content.slice(3),t.start+3)])),!0}}bh.list,bh.atom;function DA(e,t,n){return(r,i,o)=>{if(i!=e||r.char(o+1)==e)return-1;let s=[r.elt(n,o,o+1)];for(let a=o+1;a<r.end;a++){let i=r.char(a);if(i==e)return r.addElement(r.elt(t,o,a+1,s.concat(r.elt(n,a,a+1))));if(92==i&&s.push(r.elt("Escape",a,2+a++)),kT(i))break}return-1}}bh.special(bh.content),bh.processingInstruction,DA(94,"Superscript","SuperscriptMark"),bh.special(bh.content),bh.processingInstruction,DA(126,"Subscript","SubscriptMark"),bh.character;function MA(e){const t=[];return e.iterate({enter:e=>{const n=e.node;if(!n.type.isError)return;const r=n.parent,i=FA(n),o={from:n.from,to:n.to,severity:"error",type:"Syntax Error"};if(n.from!==n.to)o.message=`Unrecognized token in <${r.name}>`;else if(i)o.message=`Unrecognized token <${i.name}> in <${r.name}>`,o.to=i.to;else{const e=r.enterUnfinishedNodesBefore(n.to);o.message=`Incomplete <${(e||r).name}>`}t.push(o)}}),t}function FA(e){return e?e.nextSibling||FA(e.parent):null}const RA="first-item";var PA={create(e){return{enter(t){if("FilterExpression"!==t.name)return;const n=e.readContent(t.from,t.to);if(IA().test(n)){const{from:r,to:i}=t;e.report({from:r,to:i,message:"First item is accessed via [1]",severity:"warning",type:RA,actions:[{name:"fix",apply(t,o=r,s=i){e.updateContent(o,s,n.replace(IA(),"[1]"))}}]})}}}}};function IA(){return/\[\s*0\s*\]$/}const LA=[PA];function $A(e){const{readContent:t,syntaxTree:n,updateContent:r}=e,i=[],o={readContent:t,report:e=>{i.push(e)},updateContent:r},s=LA.map((e=>e.create(o)));return n.iterate({enter:e=>{for(const t of s)t.enter&&t.enter(e)},leave:e=>{for(const t of s)t.leave&&t.leave(e)}}),i}function NA(e){const t=[...MA(e.syntaxTree),...$A(e)];return t}const jA=()=>e=>{if(0===e.state.doc.length)return[];const t=Pk(e.state),n=NA({syntaxTree:t,readContent:(t,n)=>e.state.sliceDoc(t,n),updateContent:(t,n,r)=>e.dispatch({changes:{from:t,to:n,insert:r}})});return n.map((e=>({...e,source:e.type})))},BA=v_(f_.define([{tag:bh.strong,fontWeight:"bold"},{tag:bh.emphasis,fontStyle:"italic"}])),VA=px.theme({"& .cm-lintRange":{position:"relative"},"& .cm-lintRange::after":{content:'""',width:"100%",position:"absolute",left:"0px",bottom:"-2px",height:"3px",backgroundRepeat:"repeat-x"},"& .cm-lintRange.cm-lintRange-warning, & .cm-lintRange.cm-lintRange-error":{backgroundImage:"none"},"& .cm-lintPoint::after":{bottom:"-2px"}});var qA=[VA,BA];const zA=e=>`%23${e.slice(1)}`,HA={black:"#1f2b36",darkGrey:"#2f3d58",grey:"#404a5c",midGrey:"#576071",lightGrey:"#c5d1e5",offWhite:"#d9e0f5",snowWhite:"#eaf1ff",white:"#ffffff",mossGreen:"#7ab6aa",iceBlue:"#6cbfd8",waterBlue:"#065aaa",brightBlue:"#0a56b9",deepBlue:"#355472",red:"#9f1c15",orangeBrown:"#b4502f",yellow:"#debd71",lila:"#9a4890",purple:"#5b2c83"},WA={lightBackground:HA.white,darkBackground:HA.snowWhite,selection:HA.snowWhite,tooltipBackground:HA.offWhite,error:HA.red,warning:HA.yellow,invalid:"#b40000"},QA=px.theme({"&":{color:HA.black,backgroundColor:WA.lightBackground},".cm-content":{caretColor:HA.darkGrey},".cm-cursor, .cm-dropCursor":{borderLeftColor:HA.darkGrey},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:WA.selection},".cm-panels":{backgroundColor:WA.darkBackground,color:HA.grey},".cm-panels.cm-panels-top":{borderBottom:`2px solid ${HA.black}`},".cm-panels.cm-panels-bottom":{borderTop:`2px solid ${HA.black}`},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:`1px solid ${HA.midGrey}`},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:HA.offWhite},".cm-activeLine":{backgroundColor:WA.selection},".cm-selectionMatch":{backgroundColor:HA.offWhite},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{outline:`1px solid ${HA.grey}`},"&.cm-focused .cm-matchingBracket":{backgroundColor:HA.snowWhite},".cm-gutters":{backgroundColor:"#f3f7fe",color:"#52668d",border:"none",padding:"0 5px"},".cm-activeLineGutter":{backgroundColor:WA.selection},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:WA.tooltipBackground},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:WA.tooltipBackground,borderBottomColor:WA.tooltipBackground},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:WA.darkBackground,color:HA.midGrey}},"& .cm-lintRange.cm-lintRange-warning::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${zA(WA.warning)}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-lintRange.cm-lintRange-error::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${zA(WA.error)}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-diagnostic-warning":{border:`1px solid ${WA.warning}`,borderLeft:`5px solid ${WA.warning}`,background:WA.lightBackground},"& .cm-diagnostic-error":{border:`1px solid ${WA.error}`,borderLeft:`5px solid ${WA.error}`,background:WA.lightBackground},"& .cm-diagnostic":{padding:"3px 8px"}},{dark:!1}),UA=v_(f_.define([{tag:[bh.macroName,bh.variableName],color:HA.waterBlue},{tag:[bh.special(bh.bracket)],color:HA.waterBlue,fontWeight:"bold"},{tag:[bh.color,bh.name,bh.definition(bh.name),bh.constant(bh.name),bh.standard(bh.name),bh.propertyName],color:HA.deepBlue},{tag:[bh.definition(bh.variableName),bh.function(bh.variableName),bh.function(bh.propertyName)],color:HA.brightBlue},{tag:[bh.labelName],color:HA.orangeBrown},{tag:[bh.annotation],color:WA.invalid},{tag:[bh.number,bh.changed,bh.annotation,bh.modifier,bh.self,bh.namespace,bh.atom,bh.bool,bh.special(bh.variableName)],color:HA.red},{tag:[bh.typeName,bh.className,bh.attributeName],color:HA.lila},{tag:[bh.operator,bh.operatorKeyword,bh.tagName,bh.keyword],color:HA.purple},{tag:[bh.angleBracket,bh.squareBracket,bh.brace,bh.separator,bh.punctuation],color:HA.midGrey},{tag:[bh.regexp],color:HA.deepBlue},{tag:[bh.quote],color:HA.darkGrey},{tag:[bh.string,bh.character,bh.deleted],color:HA.orangeBrown},{tag:bh.link,color:HA.mossGreen,textDecoration:"underline",textUnderlinePosition:"under"},{tag:[bh.url,bh.escape,bh.special(bh.string)],color:HA.red},{tag:[bh.meta],color:HA.iceBlue},{tag:[bh.comment],color:HA.midGrey,fontStyle:"italic"},{tag:bh.strong,fontWeight:"bold",color:HA.deepBlue},{tag:bh.emphasis,fontStyle:"italic",color:HA.deepBlue},{tag:bh.strikethrough,textDecoration:"line-through"},{tag:bh.heading,fontWeight:"bold",color:HA.midGray},{tag:bh.special(bh.heading1),fontWeight:"bold",color:HA.darkGrey},{tag:[bh.heading1,bh.heading2,bh.heading3,bh.heading4],fontWeight:"bold",color:HA.midGrey},{tag:[bh.heading5,bh.heading6,bh.processingInstruction,bh.inserted],color:HA.grey},{tag:[bh.contentSeparator],color:HA.yellow},{tag:bh.invalid,color:HA.midGrey,borderBottom:`1px dotted ${WA.invalid}`}]));var YA=[QA,UA];const XA="#abb2bf",ZA="#f07178",GA="#7d8799",KA="#ffffff",JA="#fffce1",eD="#ec9e6f",tD="#21252b",nD="rgba(0, 0, 0, 0.5)",rD="#292d3e",iD="#353a42",oD="rgba(128, 203, 196, 0.2)",sD="#ffcc00",aD="%23",lD="fff890",cD="red",uD="#281e16",hD="#281616",dD=px.theme({"&":{color:"#ffffff",backgroundColor:rD},".cm-content":{caretColor:sD},"&.cm-focused .cm-cursor":{borderLeftColor:sD},"&.cm-focused .cm-selectionBackground, .cm-selectionBackground, .cm-content ::selection":{backgroundColor:oD},".cm-panels":{backgroundColor:tD,color:"#ffffff"},".cm-panels.cm-panels-top":{borderBottom:"2px solid black"},".cm-panels.cm-panels-bottom":{borderTop:"2px solid black"},".cm-searchMatch":{backgroundColor:"#72a1ff59",outline:"1px solid #457dff"},".cm-searchMatch.cm-searchMatch-selected":{backgroundColor:"#6199ff2f"},".cm-activeLine":{backgroundColor:nD},".cm-selectionMatch":{backgroundColor:"#aafe661a"},"&.cm-focused .cm-matchingBracket, &.cm-focused .cm-nonmatchingBracket":{backgroundColor:"#bad0f847",outline:"1px solid #515a6b"},".cm-gutters":{background:"#292d3e",color:"#676e95",border:"none",padding:"0 5px"},".cm-activeLineGutter":{backgroundColor:nD},".cm-foldPlaceholder":{backgroundColor:"transparent",border:"none",color:"#ddd"},".cm-tooltip":{border:"none",backgroundColor:iD},".cm-tooltip .cm-tooltip-arrow:before":{borderTopColor:"transparent",borderBottomColor:"transparent"},".cm-tooltip .cm-tooltip-arrow:after":{borderTopColor:iD,borderBottomColor:iD},".cm-tooltip-autocomplete":{"& > ul > li[aria-selected]":{backgroundColor:nD,color:XA}},"& .cm-lintRange.cm-lintRange-warning::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${aD+lD}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-lintRange.cm-lintRange-error::after":{backgroundImage:`url("data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' width='6' height='3'><path d='m0 2.5 l2 -1.5 l1 0 l2 1.5 l1 0' stroke='${cD}' fill='none' stroke-width='1.2'/></svg>")`},"& .cm-diagnostic-warning":{borderLeft:`5px solid #${lD}`,background:uD},"& .cm-diagnostic-error":{borderLeft:`5px solid ${cD}`,background:hD},"& .cm-diagnostic":{borderRadius:"2px",padding:"3px 8px"}},{dark:!0}),fD=v_(f_.define([{tag:bh.heading1,color:JA},{tag:bh.heading2,color:JA},{tag:bh.heading3,color:JA},{tag:bh.heading4,color:JA},{tag:bh.heading5,color:JA},{tag:bh.heading6,color:JA},{tag:bh.special(bh.bracket),color:eD,fontWeight:"bold"},{tag:bh.keyword,color:"#c792ea"},{tag:bh.operator,color:"#89ddff"},{tag:bh.special(bh.variableName),color:"#eeffff"},{tag:bh.typeName,color:"#f07178"},{tag:bh.atom,color:"#f78c6c"},{tag:bh.number,color:"#ff5370"},{tag:bh.bool,color:"#ff5370"},{tag:bh.definition(bh.variableName),color:"#82aaff"},{tag:bh.string,color:"#c3e88d"},{tag:bh.comment,color:GA},{tag:bh.tagName,color:"#ff5370"},{tag:bh.bracket,color:"#a2a1a4"},{tag:bh.meta,color:"#ffcb6b"},{tag:bh.special(bh.string),color:ZA},{tag:bh.propertyName,color:eD},{tag:bh.variableName,color:eD},{tag:bh.attributeName,color:ZA},{tag:bh.className,color:ZA},{tag:bh.invalid,color:KA}]));var pD=[dD,fD];const gD=[...qA,...YA],mD=[...qA,...pD],vD=1,yD=2,bD=3,wD={"{":123,"}":125},xD=(e,t=0)=>{const n=e.peek(t)===wD["}"],r=e.peek(t+1)===wD["}"],i=n&&r;return i||-1===e.peek(t)},kD=new Eu(((e,t)=>{let n=0;while(!xD(e,n))n++;n>0&&(e.advance(n),e.acceptToken(yD))})),_D=(e,t=0)=>{const n=e.peek(t)===wD["{"],r=e.peek(t+1)===wD["{"],i=n&&r;return i||-1===e.peek(t)},OD=new Eu(((e,t)=>{let n=0;while(!_D(e,n))n++;n>0&&(e.advance(n),e.acceptToken(bD))})),SD=new Eu(((e,t)=>{let n=0;while(-1!==e.peek(n))n++;n>0&&(e.advance(n),e.acceptToken(vD))})),ED=Zu({ConditionalSpanner:bh.special(bh.bracket),ConditionalSpannerClose:bh.special(bh.bracket),ConditionalSpannerCloseNl:bh.special(bh.bracket),LoopSpanner:bh.special(bh.bracket),LoopSpannerClose:bh.special(bh.bracket),LoopSpannerCloseNl:bh.special(bh.bracket),EmptyInsert:bh.special(bh.bracket),Insert:bh.special(bh.bracket)}),CD=Bu.deserialize({version:14,states:"$bOQOaOOOfOXO'#CbOOO`'#Cm'#CmOqOWO'#CcOvOWO'#CfOOO`'#Cp'#CpOOO`'#Ci'#CiO{OaO'#ClO!jOSOOQOOOOOO!oOPO,58{O!tOXO,58|OOO`,58|,58|O!|OQO,58}O#ROQO,59QOOO`-E6g-E6gOOO`1G.g1G.gO#WOPO1G.gOOO`1G.h1G.hO#]OaO1G.iO#qOaO1G.lOOO`7+$R7+$RO$VOPO7+$TO$_OPO7+$WOOO`<<Go<<GoOOO`<<Gr<<Gr",stateData:"$g~ORUO_WObPOeROgSO^`P~OQYO_ZOc[O~OQ]O~OQ^O~ORUObPOeROgSO^`XW`XX`XZ`X[`X~OPXO~Oc`O~OQaOcbO~OfcO~OfdO~OceO~ORUObPOeROgSOW`PX`P~ORUObPOeROgSOZ`P[`P~OWhOXhO~OZiO[iO~O",goto:"!ZePPPPPfflPPlPPrPPz!TPP!TXQOVcdXTOVcdUVOcdR_VQXOQfcRgdXUOVcd",nodeNames:"⚠ Feel FeelBlock SimpleTextBlock Feelers Insert EmptyInsert ConditionalSpanner ConditionalSpannerClose ConditionalSpannerCloseNl LoopSpanner LoopSpannerClose LoopSpannerCloseNl",maxTerm:23,propSources:[ED],skippedNodes:[0],repeatNodeCount:1,tokenData:"%X~RR!_!`[#o#pa#q#r$r~aO_~~dP#o#pg~lQb~str!P!Q!{~uQ#]#^{#`#a!^~!OP#Y#Z!R~!UPpq!X~!^Oe~~!aP#c#d!d~!gP#c#d!j~!mP#d#e!p~!sPpq!v~!{Og~~#OQ#]#^#U#`#a#u~#XP#Y#Z#[~#_P#q#r#b~#eP#q#r#h~#mPW~YZ#p~#uOX~~#xP#c#d#{~$OP#c#d$R~$UP#d#e$X~$[P#q#r$_~$bP#q#r$e~$jPZ~YZ$m~$rO[~R$uP#q#r$xR%PPcPfQYZ%SQ%XOfQ",tokenizers:[0,1,SD,kD,OD],topRules:{Feelers:[0,4]},tokenPrec:0});function TD(e,t){const n=[{children:[]}],r=e=>["SimpleTextBlock","Feel","FeelBlock"].includes(e.type.name);return e.iterate({enter:(e,i,o)=>{const s={name:e.type.name,children:[]};r(e)&&(s.content=t.slice(e.from,e.to)),n.push(s)},leave:(e,t,r)=>{const i=n.pop(),o=n[n.length-1];i.parent=o,o.children.push(i)}}),n[0].children[0]}const AD=(e,t={},n={})=>{const{debug:r=!1,strict:i=!1,buildDebugString:o=e=>`{{ ${e.message.toLowerCase()} }}`,sanitizer:s}=n,a=CD.parse(e),l=TD(a,e),c=DD({debug:r,strict:i,buildDebugString:o,sanitizer:s});return c(l,MD(t,null))},DD=e=>{const{debug:t,strict:n,buildDebugString:r,sanitizer:i}=e,o=e=>{if(t)return r(e);throw e},s=(e,t={})=>{switch(e.name){case"SimpleTextBlock":return e.content;case"Insert":{const n=e.children[0].content;try{const e=zf(`string(${n})`,t);return i?i(e):e}catch{return o(new Error(`FEEL expression ${n} couldn't be evaluated`))}}case"EmptyInsert":return"";case"Feel":case"FeelBlock":{const n=e.content;try{const e=zf(`string(${n})`,t);return i?i(e):e}catch(r){return o(new Error(`FEEL expression ${n} couldn't be evaluated`))}}case"Feelers":return e.children.map((e=>a(e,t))).join("");case"ConditionalSpanner":{const r=e.children[0].content;let i;try{i=zf(r,t)}catch{return o(new Error(`FEEL expression ${r} couldn't be evaluated`))}if(n&&"boolean"!==typeof i)return o(new Error(`FEEL expression ${r} expected to evaluate to a boolean`));if(i){const n=e.children.slice(1,e.children.length-1),r=n.map((e=>a(e,t))).join(""),i=e.children[e.children.length-1],o=i.name.endsWith("Nl")&&!r.endsWith("\n");return r+(o?"\n":"")}return""}case"LoopSpanner":{const r=e.children[0].content;let i;try{i=zf(r,t)}catch{return o(new Error(`FEEL expression ${r} couldn't be evaluated`))}if(!Array.isArray(i)){if(n)return o(new Error(`FEEL expression ${r} expected to evaluate to an array`));i=void 0===i||null===i?[]:[i]}const s=e.children.slice(1,e.children.length-1),l=(e,t)=>{const n=MD(e,t);return s.map((e=>a(e,n))).join("")},c=i.map((e=>l(e,t))).join(""),u=e.children[e.children.length-1],h=u.name.endsWith("Nl")&&!c.endsWith("\n");return c+(h?"\n":"")}}},a=(e,t={})=>{try{return s(e,t)}catch(IH){return o(IH)}};return a},MD=(e,t)=>"object"===typeof e?{this:e,parent:t,...e,_this_:e,_parent_:t}:{this:e,parent:t,_this_:e,_parent_:t},FD={ConditionalSpanner:d_,LoopSpanner:d_};function RD(e=null){const t=CD.configure({wrap:nu((t=>"Feel"==t.name||"FeelBlock"==t.name?{parser:Yd}:e&&"SimpleTextBlock"==t.name?{parser:e}:null)),props:[h_.add(FD)]});return Rk.define({parser:t})}const PD=e=>new Hk(RD(e),[]);function ID(e){const t=[];return e.iterate({enter:e=>{"EmptyInsert"===e.type.name&&t.push({from:e.from,to:e.to,severity:"warning",message:"this insert is empty and will be ignored",type:"emptyInsert"})}}),t}function LD(e){const t=[...ID(e)];return t}function $D(){const e=jA();return t=>{const n=e(t);if(0===t.state.doc.length)return[];const r=Pk(t.state),i=LD(r);return[...n,...i.map((e=>({...e,source:"feelers linter"})))]}}var ND=sT($D());function jD({container:e,tooltipContainer:t,hostLanguage:n,hostLanguageParser:r,onChange:i=()=>{},onKeyDown:o=()=>{},onLint:s=()=>{},contentAttributes:a={},readOnly:l=!1,value:c="",enableGutters:u=!1,singleLine:h=!1,lineWrap:d=!1,darkMode:f=!1}){const p=px.updateListener.of((e=>{e.docChanged&&i(e.state.doc.toString())})),g=px.updateListener.of((e=>{const t=e.transactions.flatMap((e=>e.effects)).filter((e=>e.is(XC)));if(!t.length)return;const n=t.flatMap((e=>e.value));s(n)})),m=px.contentAttributes.of(a),v=px.domEventHandlers({keydown:o});"string"===typeof t&&(t=document.querySelector(t));const y=t?$x({tooltipSpace:function(){return t.getBoundingClientRect()}}):[],b=e=>{switch(e){case"markdown":return _A;default:return null}},w=PD(r||n&&b(n)),x=[A_(),p,m,dS(),u_(),v,_x.of([...BC]),w,ND,g,y,f?mD:gD,...u?[Sk()]:[],...h?[Qg.transactionFilter.of((e=>e.newDoc.lines>1?[]:e))]:[],...d?[px.lineWrapping]:[]];return l&&x.push(px.editable.of(!1)),h&&c&&(c=c.toString().split("\n")[0]),this._cmEditor=new px({state:Qg.create({doc:c,extensions:x}),parent:e}),this}jD.prototype.setValue=function(e){this._cmEditor.dispatch({changes:{from:0,to:this._cmEditor.state.doc.length,insert:e}})},jD.prototype.focus=function(e){const t=this._cmEditor;if(t.contentDOM.focus(),t.focus(),"number"===typeof e){const n=t.state.doc.length;t.dispatch({selection:{anchor:e<=n?e:n}})}},jD.prototype.getSelection=function(){return this._cmEditor.state.selection};var BD=n(1114);function VD(){return{async:!1,breaks:!1,extensions:null,gfm:!0,hooks:null,pedantic:!1,renderer:null,silent:!1,tokenizer:null,walkTokens:null}}let qD=VD();function zD(e){qD=e}const HD=/[&<>"']/,WD=new RegExp(HD.source,"g"),QD=/[<>"']|&(?!(#\d{1,7}|#[Xx][a-fA-F0-9]{1,6}|\w+);)/,UD=new RegExp(QD.source,"g"),YD={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},XD=e=>YD[e];function ZD(e,t){if(t){if(HD.test(e))return e.replace(WD,XD)}else if(QD.test(e))return e.replace(UD,XD);return e}const GD=/(^|[^\[])\^/g;function KD(e,t){let n="string"===typeof e?e:e.source;t=t||"";const r={replace:(e,t)=>{let i="string"===typeof t?t:t.source;return i=i.replace(GD,"$1"),n=n.replace(e,i),r},getRegex:()=>new RegExp(n,t)};return r}function JD(e){try{e=encodeURI(e).replace(/%25/g,"%")}catch{return null}return e}const eM={exec:()=>null};function tM(e,t){const n=e.replace(/\|/g,((e,t,n)=>{let r=!1,i=t;while(--i>=0&&"\\"===n[i])r=!r;return r?"|":" |"})),r=n.split(/ \|/);let i=0;if(r[0].trim()||r.shift(),r.length>0&&!r[r.length-1].trim()&&r.pop(),t)if(r.length>t)r.splice(t);else while(r.length<t)r.push("");for(;i<r.length;i++)r[i]=r[i].trim().replace(/\\\|/g,"|");return r}function nM(e,t,n){const r=e.length;if(0===r)return"";let i=0;while(i<r){const o=e.charAt(r-i-1);if(o!==t||n){if(o===t||!n)break;i++}else i++}return e.slice(0,r-i)}function rM(e,t){if(-1===e.indexOf(t[1]))return-1;let n=0;for(let r=0;r<e.length;r++)if("\\"===e[r])r++;else if(e[r]===t[0])n++;else if(e[r]===t[1]&&(n--,n<0))return r;return-1}function iM(e,t,n,r){const i=t.href,o=t.title?ZD(t.title):null,s=e[1].replace(/\\([\[\]])/g,"$1");if("!"!==e[0].charAt(0)){r.state.inLink=!0;const e={type:"link",raw:n,href:i,title:o,text:s,tokens:r.inlineTokens(s)};return r.state.inLink=!1,e}return{type:"image",raw:n,href:i,title:o,text:ZD(s)}}function oM(e,t){const n=e.match(/^(\s+)(?:```)/);if(null===n)return t;const r=n[1];return t.split("\n").map((e=>{const t=e.match(/^\s+/);if(null===t)return e;const[n]=t;return n.length>=r.length?e.slice(r.length):e})).join("\n")}class sM{constructor(e){(0,BD.A)(this,"options",void 0),(0,BD.A)(this,"rules",void 0),(0,BD.A)(this,"lexer",void 0),this.options=e||qD}space(e){const t=this.rules.block.newline.exec(e);if(t&&t[0].length>0)return{type:"space",raw:t[0]}}code(e){const t=this.rules.block.code.exec(e);if(t){const e=t[0].replace(/^(?: {1,4}| {0,3}\t)/gm,"");return{type:"code",raw:t[0],codeBlockStyle:"indented",text:this.options.pedantic?e:nM(e,"\n")}}}fences(e){const t=this.rules.block.fences.exec(e);if(t){const e=t[0],n=oM(e,t[3]||"");return{type:"code",raw:e,lang:t[2]?t[2].trim().replace(this.rules.inline.anyPunctuation,"$1"):t[2],text:n}}}heading(e){const t=this.rules.block.heading.exec(e);if(t){let e=t[2].trim();if(/#$/.test(e)){const t=nM(e,"#");this.options.pedantic?e=t.trim():t&&!/ $/.test(t)||(e=t.trim())}return{type:"heading",raw:t[0],depth:t[1].length,text:e,tokens:this.lexer.inline(e)}}}hr(e){const t=this.rules.block.hr.exec(e);if(t)return{type:"hr",raw:nM(t[0],"\n")}}blockquote(e){const t=this.rules.block.blockquote.exec(e);if(t){let e=nM(t[0],"\n").split("\n"),n="",r="";const i=[];while(e.length>0){let t=!1;const o=[];let s;for(s=0;s<e.length;s++)if(/^ {0,3}>/.test(e[s]))o.push(e[s]),t=!0;else{if(t)break;o.push(e[s])}e=e.slice(s);const a=o.join("\n"),l=a.replace(/\n {0,3}((?:=+|-+) *)(?=\n|$)/g,"\n    $1").replace(/^ {0,3}>[ \t]?/gm,"");n=n?`${n}\n${a}`:a,r=r?`${r}\n${l}`:l;const c=this.lexer.state.top;if(this.lexer.state.top=!0,this.lexer.blockTokens(l,i,!0),this.lexer.state.top=c,0===e.length)break;const u=i[i.length-1];if("code"===u?.type)break;if("blockquote"===u?.type){const t=u,o=t.raw+"\n"+e.join("\n"),s=this.blockquote(o);i[i.length-1]=s,n=n.substring(0,n.length-t.raw.length)+s.raw,r=r.substring(0,r.length-t.text.length)+s.text;break}if("list"!==u?.type);else{const t=u,o=t.raw+"\n"+e.join("\n"),s=this.list(o);i[i.length-1]=s,n=n.substring(0,n.length-u.raw.length)+s.raw,r=r.substring(0,r.length-t.raw.length)+s.raw,e=o.substring(i[i.length-1].raw.length).split("\n")}}return{type:"blockquote",raw:n,tokens:i,text:r}}}list(e){let t=this.rules.block.list.exec(e);if(t){let n=t[1].trim();const r=n.length>1,i={type:"list",raw:"",ordered:r,start:r?+n.slice(0,-1):"",loose:!1,items:[]};n=r?`\\d{1,9}\\${n.slice(-1)}`:`\\${n}`,this.options.pedantic&&(n=r?n:"[*+-]");const o=new RegExp(`^( {0,3}${n})((?:[\t ][^\\n]*)?(?:\\n|$))`);let s=!1;while(e){let n=!1,r="",a="";if(!(t=o.exec(e)))break;if(this.rules.block.hr.test(e))break;r=t[0],e=e.substring(r.length);let l=t[2].split("\n",1)[0].replace(/^\t+/,(e=>" ".repeat(3*e.length))),c=e.split("\n",1)[0],u=!l.trim(),h=0;if(this.options.pedantic?(h=2,a=l.trimStart()):u?h=t[1].length+1:(h=t[2].search(/[^ ]/),h=h>4?1:h,a=l.slice(h),h+=t[1].length),u&&/^[ \t]*$/.test(c)&&(r+=c+"\n",e=e.substring(c.length+1),n=!0),!n){const t=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:[*+-]|\\d{1,9}[.)])((?:[ \t][^\\n]*)?(?:\\n|$))`),n=new RegExp(`^ {0,${Math.min(3,h-1)}}((?:- *){3,}|(?:_ *){3,}|(?:\\* *){3,})(?:\\n+|$)`),i=new RegExp(`^ {0,${Math.min(3,h-1)}}(?:\`\`\`|~~~)`),o=new RegExp(`^ {0,${Math.min(3,h-1)}}#`),s=new RegExp(`^ {0,${Math.min(3,h-1)}}<(?:[a-z].*>|!--)`,"i");while(e){const d=e.split("\n",1)[0];let f;if(c=d,this.options.pedantic?(c=c.replace(/^ {1,4}(?=( {4})*[^ ])/g,"  "),f=c):f=c.replace(/\t/g,"    "),i.test(c))break;if(o.test(c))break;if(s.test(c))break;if(t.test(c))break;if(n.test(c))break;if(f.search(/[^ ]/)>=h||!c.trim())a+="\n"+f.slice(h);else{if(u)break;if(l.replace(/\t/g,"    ").search(/[^ ]/)>=4)break;if(i.test(l))break;if(o.test(l))break;if(n.test(l))break;a+="\n"+c}u||c.trim()||(u=!0),r+=d+"\n",e=e.substring(d.length+1),l=f.slice(h)}}i.loose||(s?i.loose=!0:/\n[ \t]*\n[ \t]*$/.test(r)&&(s=!0));let d,f=null;this.options.gfm&&(f=/^\[[ xX]\] /.exec(a),f&&(d="[ ] "!==f[0],a=a.replace(/^\[[ xX]\] +/,""))),i.items.push({type:"list_item",raw:r,task:!!f,checked:d,loose:!1,text:a,tokens:[]}),i.raw+=r}i.items[i.items.length-1].raw=i.items[i.items.length-1].raw.trimEnd(),i.items[i.items.length-1].text=i.items[i.items.length-1].text.trimEnd(),i.raw=i.raw.trimEnd();for(let e=0;e<i.items.length;e++)if(this.lexer.state.top=!1,i.items[e].tokens=this.lexer.blockTokens(i.items[e].text,[]),!i.loose){const t=i.items[e].tokens.filter((e=>"space"===e.type)),n=t.length>0&&t.some((e=>/\n.*\n/.test(e.raw)));i.loose=n}if(i.loose)for(let e=0;e<i.items.length;e++)i.items[e].loose=!0;return i}}html(e){const t=this.rules.block.html.exec(e);if(t){const e={type:"html",block:!0,raw:t[0],pre:"pre"===t[1]||"script"===t[1]||"style"===t[1],text:t[0]};return e}}def(e){const t=this.rules.block.def.exec(e);if(t){const e=t[1].toLowerCase().replace(/\s+/g," "),n=t[2]?t[2].replace(/^<(.*)>$/,"$1").replace(this.rules.inline.anyPunctuation,"$1"):"",r=t[3]?t[3].substring(1,t[3].length-1).replace(this.rules.inline.anyPunctuation,"$1"):t[3];return{type:"def",tag:e,raw:t[0],href:n,title:r}}}table(e){const t=this.rules.block.table.exec(e);if(!t)return;if(!/[:|]/.test(t[2]))return;const n=tM(t[1]),r=t[2].replace(/^\||\| *$/g,"").split("|"),i=t[3]&&t[3].trim()?t[3].replace(/\n[ \t]*$/,"").split("\n"):[],o={type:"table",raw:t[0],header:[],align:[],rows:[]};if(n.length===r.length){for(const e of r)/^ *-+: *$/.test(e)?o.align.push("right"):/^ *:-+: *$/.test(e)?o.align.push("center"):/^ *:-+ *$/.test(e)?o.align.push("left"):o.align.push(null);for(let e=0;e<n.length;e++)o.header.push({text:n[e],tokens:this.lexer.inline(n[e]),header:!0,align:o.align[e]});for(const e of i)o.rows.push(tM(e,o.header.length).map(((e,t)=>({text:e,tokens:this.lexer.inline(e),header:!1,align:o.align[t]}))));return o}}lheading(e){const t=this.rules.block.lheading.exec(e);if(t)return{type:"heading",raw:t[0],depth:"="===t[2].charAt(0)?1:2,text:t[1],tokens:this.lexer.inline(t[1])}}paragraph(e){const t=this.rules.block.paragraph.exec(e);if(t){const e="\n"===t[1].charAt(t[1].length-1)?t[1].slice(0,-1):t[1];return{type:"paragraph",raw:t[0],text:e,tokens:this.lexer.inline(e)}}}text(e){const t=this.rules.block.text.exec(e);if(t)return{type:"text",raw:t[0],text:t[0],tokens:this.lexer.inline(t[0])}}escape(e){const t=this.rules.inline.escape.exec(e);if(t)return{type:"escape",raw:t[0],text:ZD(t[1])}}tag(e){const t=this.rules.inline.tag.exec(e);if(t)return!this.lexer.state.inLink&&/^<a /i.test(t[0])?this.lexer.state.inLink=!0:this.lexer.state.inLink&&/^<\/a>/i.test(t[0])&&(this.lexer.state.inLink=!1),!this.lexer.state.inRawBlock&&/^<(pre|code|kbd|script)(\s|>)/i.test(t[0])?this.lexer.state.inRawBlock=!0:this.lexer.state.inRawBlock&&/^<\/(pre|code|kbd|script)(\s|>)/i.test(t[0])&&(this.lexer.state.inRawBlock=!1),{type:"html",raw:t[0],inLink:this.lexer.state.inLink,inRawBlock:this.lexer.state.inRawBlock,block:!1,text:t[0]}}link(e){const t=this.rules.inline.link.exec(e);if(t){const e=t[2].trim();if(!this.options.pedantic&&/^</.test(e)){if(!/>$/.test(e))return;const t=nM(e.slice(0,-1),"\\");if((e.length-t.length)%2===0)return}else{const e=rM(t[2],"()");if(e>-1){const n=0===t[0].indexOf("!")?5:4,r=n+t[1].length+e;t[2]=t[2].substring(0,e),t[0]=t[0].substring(0,r).trim(),t[3]=""}}let n=t[2],r="";if(this.options.pedantic){const e=/^([^'"]*[^\s])\s+(['"])(.*)\2/.exec(n);e&&(n=e[1],r=e[3])}else r=t[3]?t[3].slice(1,-1):"";return n=n.trim(),/^</.test(n)&&(n=this.options.pedantic&&!/>$/.test(e)?n.slice(1):n.slice(1,-1)),iM(t,{href:n?n.replace(this.rules.inline.anyPunctuation,"$1"):n,title:r?r.replace(this.rules.inline.anyPunctuation,"$1"):r},t[0],this.lexer)}}reflink(e,t){let n;if((n=this.rules.inline.reflink.exec(e))||(n=this.rules.inline.nolink.exec(e))){const e=(n[2]||n[1]).replace(/\s+/g," "),r=t[e.toLowerCase()];if(!r){const e=n[0].charAt(0);return{type:"text",raw:e,text:e}}return iM(n,r,n[0],this.lexer)}}emStrong(e,t,n=""){let r=this.rules.inline.emStrongLDelim.exec(e);if(!r)return;if(r[3]&&n.match(/[\p{L}\p{N}]/u))return;const i=r[1]||r[2]||"";if(!i||!n||this.rules.inline.punctuation.exec(n)){const n=[...r[0]].length-1;let i,o,s=n,a=0;const l="*"===r[0][0]?this.rules.inline.emStrongRDelimAst:this.rules.inline.emStrongRDelimUnd;l.lastIndex=0,t=t.slice(-1*e.length+n);while(null!=(r=l.exec(t))){if(i=r[1]||r[2]||r[3]||r[4]||r[5]||r[6],!i)continue;if(o=[...i].length,r[3]||r[4]){s+=o;continue}if((r[5]||r[6])&&n%3&&!((n+o)%3)){a+=o;continue}if(s-=o,s>0)continue;o=Math.min(o,o+s+a);const t=[...r[0]][0].length,l=e.slice(0,n+r.index+t+o);if(Math.min(n,o)%2){const e=l.slice(1,-1);return{type:"em",raw:l,text:e,tokens:this.lexer.inlineTokens(e)}}const c=l.slice(2,-2);return{type:"strong",raw:l,text:c,tokens:this.lexer.inlineTokens(c)}}}}codespan(e){const t=this.rules.inline.code.exec(e);if(t){let e=t[2].replace(/\n/g," ");const n=/[^ ]/.test(e),r=/^ /.test(e)&&/ $/.test(e);return n&&r&&(e=e.substring(1,e.length-1)),e=ZD(e,!0),{type:"codespan",raw:t[0],text:e}}}br(e){const t=this.rules.inline.br.exec(e);if(t)return{type:"br",raw:t[0]}}del(e){const t=this.rules.inline.del.exec(e);if(t)return{type:"del",raw:t[0],text:t[2],tokens:this.lexer.inlineTokens(t[2])}}autolink(e){const t=this.rules.inline.autolink.exec(e);if(t){let e,n;return"@"===t[2]?(e=ZD(t[1]),n="mailto:"+e):(e=ZD(t[1]),n=e),{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}url(e){let t;if(t=this.rules.inline.url.exec(e)){let e,n;if("@"===t[2])e=ZD(t[0]),n="mailto:"+e;else{let r;do{r=t[0],t[0]=this.rules.inline._backpedal.exec(t[0])?.[0]??""}while(r!==t[0]);e=ZD(t[0]),n="www."===t[1]?"http://"+t[0]:t[0]}return{type:"link",raw:t[0],text:e,href:n,tokens:[{type:"text",raw:e,text:e}]}}}inlineText(e){const t=this.rules.inline.text.exec(e);if(t){let e;return e=this.lexer.state.inRawBlock?t[0]:ZD(t[0]),{type:"text",raw:t[0],text:e}}}}const aM=/^(?:[ \t]*(?:\n|$))+/,lM=/^((?: {4}| {0,3}\t)[^\n]+(?:\n(?:[ \t]*(?:\n|$))*)?)+/,cM=/^ {0,3}(`{3,}(?=[^`\n]*(?:\n|$))|~{3,})([^\n]*)(?:\n|$)(?:|([\s\S]*?)(?:\n|$))(?: {0,3}\1[~`]* *(?=\n|$)|$)/,uM=/^ {0,3}((?:-[\t ]*){3,}|(?:_[ \t]*){3,}|(?:\*[ \t]*){3,})(?:\n+|$)/,hM=/^ {0,3}(#{1,6})(?=\s|$)(.*)(?:\n+|$)/,dM=/(?:[*+-]|\d{1,9}[.)])/,fM=KD(/^(?!bull |blockCode|fences|blockquote|heading|html)((?:.|\n(?!\s*?\n|bull |blockCode|fences|blockquote|heading|html))+?)\n {0,3}(=+|-+) *(?:\n+|$)/).replace(/bull/g,dM).replace(/blockCode/g,/(?: {4}| {0,3}\t)/).replace(/fences/g,/ {0,3}(?:`{3,}|~{3,})/).replace(/blockquote/g,/ {0,3}>/).replace(/heading/g,/ {0,3}#{1,6}/).replace(/html/g,/ {0,3}<[^\n>]+>\n/).getRegex(),pM=/^([^\n]+(?:\n(?!hr|heading|lheading|blockquote|fences|list|html|table| +\n)[^\n]+)*)/,gM=/^[^\n]+/,mM=/(?!\s*\])(?:\\.|[^\[\]\\])+/,vM=KD(/^ {0,3}\[(label)\]: *(?:\n[ \t]*)?([^<\s][^\s]*|<.*?>)(?:(?: +(?:\n[ \t]*)?| *\n[ \t]*)(title))? *(?:\n+|$)/).replace("label",mM).replace("title",/(?:"(?:\\"?|[^"\\])*"|'[^'\n]*(?:\n[^'\n]+)*\n?'|\([^()]*\))/).getRegex(),yM=KD(/^( {0,3}bull)([ \t][^\n]+?)?(?:\n|$)/).replace(/bull/g,dM).getRegex(),bM="address|article|aside|base|basefont|blockquote|body|caption|center|col|colgroup|dd|details|dialog|dir|div|dl|dt|fieldset|figcaption|figure|footer|form|frame|frameset|h[1-6]|head|header|hr|html|iframe|legend|li|link|main|menu|menuitem|meta|nav|noframes|ol|optgroup|option|p|param|search|section|summary|table|tbody|td|tfoot|th|thead|title|tr|track|ul",wM=/<!--(?:-?>|[\s\S]*?(?:-->|$))/,xM=KD("^ {0,3}(?:<(script|pre|style|textarea)[\\s>][\\s\\S]*?(?:</\\1>[^\\n]*\\n+|$)|comment[^\\n]*(\\n+|$)|<\\?[\\s\\S]*?(?:\\?>\\n*|$)|<![A-Z][\\s\\S]*?(?:>\\n*|$)|<!\\[CDATA\\[[\\s\\S]*?(?:\\]\\]>\\n*|$)|</?(tag)(?: +|\\n|/?>)[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|<(?!script|pre|style|textarea)([a-z][\\w-]*)(?:attribute)*? */?>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$)|</(?!script|pre|style|textarea)[a-z][\\w-]*\\s*>(?=[ \\t]*(?:\\n|$))[\\s\\S]*?(?:(?:\\n[ \t]*)+\\n|$))","i").replace("comment",wM).replace("tag",bM).replace("attribute",/ +[a-zA-Z:_][\w.:-]*(?: *= *"[^"\n]*"| *= *'[^'\n]*'| *= *[^\s"'=<>`]+)?/).getRegex(),kM=KD(pM).replace("hr",uM).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("|table","").replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bM).getRegex(),_M=KD(/^( {0,3}> ?(paragraph|[^\n]*)(?:\n|$))+/).replace("paragraph",kM).getRegex(),OM={blockquote:_M,code:lM,def:vM,fences:cM,heading:hM,hr:uM,html:xM,lheading:fM,list:yM,newline:aM,paragraph:kM,table:eM,text:gM},SM=KD("^ *([^\\n ].*)\\n {0,3}((?:\\| *)?:?-+:? *(?:\\| *:?-+:? *)*(?:\\| *)?)(?:\\n((?:(?! *\\n|hr|heading|blockquote|code|fences|list|html).*(?:\\n|$))*)\\n*|$)").replace("hr",uM).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("blockquote"," {0,3}>").replace("code","(?: {4}| {0,3}\t)[^\\n]").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bM).getRegex(),EM={...OM,table:SM,paragraph:KD(pM).replace("hr",uM).replace("heading"," {0,3}#{1,6}(?:\\s|$)").replace("|lheading","").replace("table",SM).replace("blockquote"," {0,3}>").replace("fences"," {0,3}(?:`{3,}(?=[^`\\n]*\\n)|~{3,})[^\\n]*\\n").replace("list"," {0,3}(?:[*+-]|1[.)]) ").replace("html","</?(?:tag)(?: +|\\n|/?>)|<(?:script|pre|style|textarea|!--)").replace("tag",bM).getRegex()},CM={...OM,html:KD("^ *(?:comment *(?:\\n|\\s*$)|<(tag)[\\s\\S]+?</\\1> *(?:\\n{2,}|\\s*$)|<tag(?:\"[^\"]*\"|'[^']*'|\\s[^'\"/>\\s]*)*?/?> *(?:\\n{2,}|\\s*$))").replace("comment",wM).replace(/tag/g,"(?!(?:a|em|strong|small|s|cite|q|dfn|abbr|data|time|code|var|samp|kbd|sub|sup|i|b|u|mark|ruby|rt|rp|bdi|bdo|span|br|wbr|ins|del|img)\\b)\\w+(?!:|[^\\w\\s@]*@)\\b").getRegex(),def:/^ *\[([^\]]+)\]: *<?([^\s>]+)>?(?: +(["(][^\n]+[")]))? *(?:\n+|$)/,heading:/^(#{1,6})(.*)(?:\n+|$)/,fences:eM,lheading:/^(.+?)\n {0,3}(=+|-+) *(?:\n+|$)/,paragraph:KD(pM).replace("hr",uM).replace("heading"," *#{1,6} *[^\n]").replace("lheading",fM).replace("|table","").replace("blockquote"," {0,3}>").replace("|fences","").replace("|list","").replace("|html","").replace("|tag","").getRegex()},TM=/^\\([!"#$%&'()*+,\-./:;<=>?@\[\]\\^_`{|}~])/,AM=/^(`+)([^`]|[^`][\s\S]*?[^`])\1(?!`)/,DM=/^( {2,}|\\)\n(?!\s*$)/,MM=/^(`+|[^`])(?:(?= {2,}\n)|[\s\S]*?(?:(?=[\\<!\[`*_]|\b_|$)|[^ ](?= {2,}\n)))/,FM="\\p{P}\\p{S}",RM=KD(/^((?![*_])[\spunctuation])/,"u").replace(/punctuation/g,FM).getRegex(),PM=/\[[^[\]]*?\]\((?:\\.|[^\\\(\)]|\((?:\\.|[^\\\(\)])*\))*\)|`[^`]*?`|<[^<>]*?>/g,IM=KD(/^(?:\*+(?:((?!\*)[punct])|[^\s*]))|^_+(?:((?!_)[punct])|([^\s_]))/,"u").replace(/punct/g,FM).getRegex(),LM=KD("^[^_*]*?__[^_*]*?\\*[^_*]*?(?=__)|[^*]+(?=[^*])|(?!\\*)[punct](\\*+)(?=[\\s]|$)|[^punct\\s](\\*+)(?!\\*)(?=[punct\\s]|$)|(?!\\*)[punct\\s](\\*+)(?=[^punct\\s])|[\\s](\\*+)(?!\\*)(?=[punct])|(?!\\*)[punct](\\*+)(?!\\*)(?=[punct])|[^punct\\s](\\*+)(?=[^punct\\s])","gu").replace(/punct/g,FM).getRegex(),$M=KD("^[^_*]*?\\*\\*[^_*]*?_[^_*]*?(?=\\*\\*)|[^_]+(?=[^_])|(?!_)[punct](_+)(?=[\\s]|$)|[^punct\\s](_+)(?!_)(?=[punct\\s]|$)|(?!_)[punct\\s](_+)(?=[^punct\\s])|[\\s](_+)(?!_)(?=[punct])|(?!_)[punct](_+)(?!_)(?=[punct])","gu").replace(/punct/g,FM).getRegex(),NM=KD(/\\([punct])/,"gu").replace(/punct/g,FM).getRegex(),jM=KD(/^<(scheme:[^\s\x00-\x1f<>]*|email)>/).replace("scheme",/[a-zA-Z][a-zA-Z0-9+.-]{1,31}/).replace("email",/[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+(@)[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)+(?![-_])/).getRegex(),BM=KD(wM).replace("(?:--\x3e|$)","--\x3e").getRegex(),VM=KD("^comment|^</[a-zA-Z][\\w:-]*\\s*>|^<[a-zA-Z][\\w-]*(?:attribute)*?\\s*/?>|^<\\?[\\s\\S]*?\\?>|^<![a-zA-Z]+\\s[\\s\\S]*?>|^<!\\[CDATA\\[[\\s\\S]*?\\]\\]>").replace("comment",BM).replace("attribute",/\s+[a-zA-Z:_][\w.:-]*(?:\s*=\s*"[^"]*"|\s*=\s*'[^']*'|\s*=\s*[^\s"'=<>`]+)?/).getRegex(),qM=/(?:\[(?:\\.|[^\[\]\\])*\]|\\.|`[^`]*`|[^\[\]\\`])*?/,zM=KD(/^!?\[(label)\]\(\s*(href)(?:\s+(title))?\s*\)/).replace("label",qM).replace("href",/<(?:\\.|[^\n<>\\])+>|[^\s\x00-\x1f]*/).replace("title",/"(?:\\"?|[^"\\])*"|'(?:\\'?|[^'\\])*'|\((?:\\\)?|[^)\\])*\)/).getRegex(),HM=KD(/^!?\[(label)\]\[(ref)\]/).replace("label",qM).replace("ref",mM).getRegex(),WM=KD(/^!?\[(ref)\](?:\[\])?/).replace("ref",mM).getRegex(),QM=KD("reflink|nolink(?!\\()","g").replace("reflink",HM).replace("nolink",WM).getRegex(),UM={_backpedal:eM,anyPunctuation:NM,autolink:jM,blockSkip:PM,br:DM,code:AM,del:eM,emStrongLDelim:IM,emStrongRDelimAst:LM,emStrongRDelimUnd:$M,escape:TM,link:zM,nolink:WM,punctuation:RM,reflink:HM,reflinkSearch:QM,tag:VM,text:MM,url:eM},YM={...UM,link:KD(/^!?\[(label)\]\((.*?)\)/).replace("label",qM).getRegex(),reflink:KD(/^!?\[(label)\]\s*\[([^\]]*)\]/).replace("label",qM).getRegex()},XM={...UM,escape:KD(TM).replace("])","~|])").getRegex(),url:KD(/^((?:ftp|https?):\/\/|www\.)(?:[a-zA-Z0-9\-]+\.?)+[^\s<]*|^email/,"i").replace("email",/[A-Za-z0-9._+-]+(@)[a-zA-Z0-9-_]+(?:\.[a-zA-Z0-9-_]*[a-zA-Z0-9])+(?![-_])/).getRegex(),_backpedal:/(?:[^?!.,:;*_'"~()&]+|\([^)]*\)|&(?![a-zA-Z0-9]+;$)|[?!.,:;*_'"~)]+(?!$))+/,del:/^(~~?)(?=[^\s~])((?:\\.|[^\\])*?(?:\\.|[^\s~\\]))\1(?=[^~]|$)/,text:/^([`~]+|[^`~])(?:(?= {2,}\n)|(?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)|[\s\S]*?(?:(?=[\\<!\[`*~_]|\b_|https?:\/\/|ftp:\/\/|www\.|$)|[^ ](?= {2,}\n)|[^a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-](?=[a-zA-Z0-9.!#$%&'*+\/=?_`{\|}~-]+@)))/},ZM={...XM,br:KD(DM).replace("{2,}","*").getRegex(),text:KD(XM.text).replace("\\b_","\\b_| {2,}\\n").replace(/\{2,\}/g,"*").getRegex()},GM={normal:OM,gfm:EM,pedantic:CM},KM={normal:UM,gfm:XM,breaks:ZM,pedantic:YM};class JM{constructor(e){(0,BD.A)(this,"tokens",void 0),(0,BD.A)(this,"options",void 0),(0,BD.A)(this,"state",void 0),(0,BD.A)(this,"tokenizer",void 0),(0,BD.A)(this,"inlineQueue",void 0),this.tokens=[],this.tokens.links=Object.create(null),this.options=e||qD,this.options.tokenizer=this.options.tokenizer||new sM,this.tokenizer=this.options.tokenizer,this.tokenizer.options=this.options,this.tokenizer.lexer=this,this.inlineQueue=[],this.state={inLink:!1,inRawBlock:!1,top:!0};const t={block:GM.normal,inline:KM.normal};this.options.pedantic?(t.block=GM.pedantic,t.inline=KM.pedantic):this.options.gfm&&(t.block=GM.gfm,this.options.breaks?t.inline=KM.breaks:t.inline=KM.gfm),this.tokenizer.rules=t}static get rules(){return{block:GM,inline:KM}}static lex(e,t){const n=new JM(t);return n.lex(e)}static lexInline(e,t){const n=new JM(t);return n.inlineTokens(e)}lex(e){e=e.replace(/\r\n|\r/g,"\n"),this.blockTokens(e,this.tokens);for(let t=0;t<this.inlineQueue.length;t++){const e=this.inlineQueue[t];this.inlineTokens(e.src,e.tokens)}return this.inlineQueue=[],this.tokens}blockTokens(e,t=[],n=!1){let r,i,o;this.options.pedantic&&(e=e.replace(/\t/g,"    ").replace(/^ +$/gm,""));while(e)if(!(this.options.extensions&&this.options.extensions.block&&this.options.extensions.block.some((n=>!!(r=n.call({lexer:this},e,t))&&(e=e.substring(r.raw.length),t.push(r),!0)))))if(r=this.tokenizer.space(e))e=e.substring(r.raw.length),1===r.raw.length&&t.length>0?t[t.length-1].raw+="\n":t.push(r);else if(r=this.tokenizer.code(e))e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?t.push(r):(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(r=this.tokenizer.fences(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.heading(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.hr(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.blockquote(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.list(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.html(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.def(e))e=e.substring(r.raw.length),i=t[t.length-1],!i||"paragraph"!==i.type&&"text"!==i.type?this.tokens.links[r.tag]||(this.tokens.links[r.tag]={href:r.href,title:r.title}):(i.raw+="\n"+r.raw,i.text+="\n"+r.raw,this.inlineQueue[this.inlineQueue.length-1].src=i.text);else if(r=this.tokenizer.table(e))e=e.substring(r.raw.length),t.push(r);else if(r=this.tokenizer.lheading(e))e=e.substring(r.raw.length),t.push(r);else{if(o=e,this.options.extensions&&this.options.extensions.startBlock){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startBlock.forEach((e=>{r=e.call({lexer:this},n),"number"===typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(o=e.substring(0,t+1))}if(this.state.top&&(r=this.tokenizer.paragraph(o)))i=t[t.length-1],n&&"paragraph"===i?.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r),n=o.length!==e.length,e=e.substring(r.raw.length);else if(r=this.tokenizer.text(e))e=e.substring(r.raw.length),i=t[t.length-1],i&&"text"===i.type?(i.raw+="\n"+r.raw,i.text+="\n"+r.text,this.inlineQueue.pop(),this.inlineQueue[this.inlineQueue.length-1].src=i.text):t.push(r);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}return this.state.top=!0,t}inline(e,t=[]){return this.inlineQueue.push({src:e,tokens:t}),t}inlineTokens(e,t=[]){let n,r,i,o,s,a,l=e;if(this.tokens.links){const e=Object.keys(this.tokens.links);if(e.length>0)while(null!=(o=this.tokenizer.rules.inline.reflinkSearch.exec(l)))e.includes(o[0].slice(o[0].lastIndexOf("[")+1,-1))&&(l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.reflinkSearch.lastIndex))}while(null!=(o=this.tokenizer.rules.inline.blockSkip.exec(l)))l=l.slice(0,o.index)+"["+"a".repeat(o[0].length-2)+"]"+l.slice(this.tokenizer.rules.inline.blockSkip.lastIndex);while(null!=(o=this.tokenizer.rules.inline.anyPunctuation.exec(l)))l=l.slice(0,o.index)+"++"+l.slice(this.tokenizer.rules.inline.anyPunctuation.lastIndex);while(e)if(s||(a=""),s=!1,!(this.options.extensions&&this.options.extensions.inline&&this.options.extensions.inline.some((r=>!!(n=r.call({lexer:this},e,t))&&(e=e.substring(n.raw.length),t.push(n),!0)))))if(n=this.tokenizer.escape(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.tag(e))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.link(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.reflink(e,this.tokens.links))e=e.substring(n.raw.length),r=t[t.length-1],r&&"text"===n.type&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(n=this.tokenizer.emStrong(e,l,a))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.codespan(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.br(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.del(e))e=e.substring(n.raw.length),t.push(n);else if(n=this.tokenizer.autolink(e))e=e.substring(n.raw.length),t.push(n);else if(this.state.inLink||!(n=this.tokenizer.url(e))){if(i=e,this.options.extensions&&this.options.extensions.startInline){let t=1/0;const n=e.slice(1);let r;this.options.extensions.startInline.forEach((e=>{r=e.call({lexer:this},n),"number"===typeof r&&r>=0&&(t=Math.min(t,r))})),t<1/0&&t>=0&&(i=e.substring(0,t+1))}if(n=this.tokenizer.inlineText(i))e=e.substring(n.raw.length),"_"!==n.raw.slice(-1)&&(a=n.raw.slice(-1)),s=!0,r=t[t.length-1],r&&"text"===r.type?(r.raw+=n.raw,r.text+=n.text):t.push(n);else if(e){const t="Infinite loop on byte: "+e.charCodeAt(0);if(this.options.silent){console.error(t);break}throw new Error(t)}}else e=e.substring(n.raw.length),t.push(n);return t}}class eF{constructor(e){(0,BD.A)(this,"options",void 0),(0,BD.A)(this,"parser",void 0),this.options=e||qD}space(e){return""}code({text:e,lang:t,escaped:n}){const r=(t||"").match(/^\S*/)?.[0],i=e.replace(/\n$/,"")+"\n";return r?'<pre><code class="language-'+ZD(r)+'">'+(n?i:ZD(i,!0))+"</code></pre>\n":"<pre><code>"+(n?i:ZD(i,!0))+"</code></pre>\n"}blockquote({tokens:e}){const t=this.parser.parse(e);return`<blockquote>\n${t}</blockquote>\n`}html({text:e}){return e}heading({tokens:e,depth:t}){return`<h${t}>${this.parser.parseInline(e)}</h${t}>\n`}hr(e){return"<hr>\n"}list(e){const t=e.ordered,n=e.start;let r="";for(let s=0;s<e.items.length;s++){const t=e.items[s];r+=this.listitem(t)}const i=t?"ol":"ul",o=t&&1!==n?' start="'+n+'"':"";return"<"+i+o+">\n"+r+"</"+i+">\n"}listitem(e){let t="";if(e.task){const n=this.checkbox({checked:!!e.checked});e.loose?e.tokens.length>0&&"paragraph"===e.tokens[0].type?(e.tokens[0].text=n+" "+e.tokens[0].text,e.tokens[0].tokens&&e.tokens[0].tokens.length>0&&"text"===e.tokens[0].tokens[0].type&&(e.tokens[0].tokens[0].text=n+" "+e.tokens[0].tokens[0].text)):e.tokens.unshift({type:"text",raw:n+" ",text:n+" "}):t+=n+" "}return t+=this.parser.parse(e.tokens,!!e.loose),`<li>${t}</li>\n`}checkbox({checked:e}){return"<input "+(e?'checked="" ':"")+'disabled="" type="checkbox">'}paragraph({tokens:e}){return`<p>${this.parser.parseInline(e)}</p>\n`}table(e){let t="",n="";for(let i=0;i<e.header.length;i++)n+=this.tablecell(e.header[i]);t+=this.tablerow({text:n});let r="";for(let i=0;i<e.rows.length;i++){const t=e.rows[i];n="";for(let e=0;e<t.length;e++)n+=this.tablecell(t[e]);r+=this.tablerow({text:n})}return r&&(r=`<tbody>${r}</tbody>`),"<table>\n<thead>\n"+t+"</thead>\n"+r+"</table>\n"}tablerow({text:e}){return`<tr>\n${e}</tr>\n`}tablecell(e){const t=this.parser.parseInline(e.tokens),n=e.header?"th":"td",r=e.align?`<${n} align="${e.align}">`:`<${n}>`;return r+t+`</${n}>\n`}strong({tokens:e}){return`<strong>${this.parser.parseInline(e)}</strong>`}em({tokens:e}){return`<em>${this.parser.parseInline(e)}</em>`}codespan({text:e}){return`<code>${e}</code>`}br(e){return"<br>"}del({tokens:e}){return`<del>${this.parser.parseInline(e)}</del>`}link({href:e,title:t,tokens:n}){const r=this.parser.parseInline(n),i=JD(e);if(null===i)return r;e=i;let o='<a href="'+e+'"';return t&&(o+=' title="'+t+'"'),o+=">"+r+"</a>",o}image({href:e,title:t,text:n}){const r=JD(e);if(null===r)return n;e=r;let i=`<img src="${e}" alt="${n}"`;return t&&(i+=` title="${t}"`),i+=">",i}text(e){return"tokens"in e&&e.tokens?this.parser.parseInline(e.tokens):e.text}}class tF{strong({text:e}){return e}em({text:e}){return e}codespan({text:e}){return e}del({text:e}){return e}html({text:e}){return e}text({text:e}){return e}link({text:e}){return""+e}image({text:e}){return""+e}br(){return""}}class nF{constructor(e){(0,BD.A)(this,"options",void 0),(0,BD.A)(this,"renderer",void 0),(0,BD.A)(this,"textRenderer",void 0),this.options=e||qD,this.options.renderer=this.options.renderer||new eF,this.renderer=this.options.renderer,this.renderer.options=this.options,this.renderer.parser=this,this.textRenderer=new tF}static parse(e,t){const n=new nF(t);return n.parse(e)}static parseInline(e,t){const n=new nF(t);return n.parseInline(e)}parse(e,t=!0){let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=i,t=this.options.extensions.renderers[e.type].call({parser:this},e);if(!1!==t||!["space","hr","heading","code","table","blockquote","list","html","paragraph","text"].includes(e.type)){n+=t||"";continue}}const o=i;switch(o.type){case"space":n+=this.renderer.space(o);continue;case"hr":n+=this.renderer.hr(o);continue;case"heading":n+=this.renderer.heading(o);continue;case"code":n+=this.renderer.code(o);continue;case"table":n+=this.renderer.table(o);continue;case"blockquote":n+=this.renderer.blockquote(o);continue;case"list":n+=this.renderer.list(o);continue;case"html":n+=this.renderer.html(o);continue;case"paragraph":n+=this.renderer.paragraph(o);continue;case"text":{let i=o,s=this.renderer.text(i);while(r+1<e.length&&"text"===e[r+1].type)i=e[++r],s+="\n"+this.renderer.text(i);n+=t?this.renderer.paragraph({type:"paragraph",raw:s,text:s,tokens:[{type:"text",raw:s,text:s}]}):s;continue}default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}parseInline(e,t){t=t||this.renderer;let n="";for(let r=0;r<e.length;r++){const i=e[r];if(this.options.extensions&&this.options.extensions.renderers&&this.options.extensions.renderers[i.type]){const e=this.options.extensions.renderers[i.type].call({parser:this},i);if(!1!==e||!["escape","html","link","image","strong","em","codespan","br","del","text"].includes(i.type)){n+=e||"";continue}}const o=i;switch(o.type){case"escape":n+=t.text(o);break;case"html":n+=t.html(o);break;case"link":n+=t.link(o);break;case"image":n+=t.image(o);break;case"strong":n+=t.strong(o);break;case"em":n+=t.em(o);break;case"codespan":n+=t.codespan(o);break;case"br":n+=t.br(o);break;case"del":n+=t.del(o);break;case"text":n+=t.text(o);break;default:{const e='Token with "'+o.type+'" type was not found.';if(this.options.silent)return console.error(e),"";throw new Error(e)}}}return n}}class rF{constructor(e){(0,BD.A)(this,"options",void 0),(0,BD.A)(this,"block",void 0),this.options=e||qD}preprocess(e){return e}postprocess(e){return e}processAllTokens(e){return e}provideLexer(){return this.block?JM.lex:JM.lexInline}provideParser(){return this.block?nF.parse:nF.parseInline}}(0,BD.A)(rF,"passThroughHooks",new Set(["preprocess","postprocess","processAllTokens"]));class iF{constructor(...e){(0,BD.A)(this,"defaults",VD()),(0,BD.A)(this,"options",this.setOptions),(0,BD.A)(this,"parse",this.parseMarkdown(!0)),(0,BD.A)(this,"parseInline",this.parseMarkdown(!1)),(0,BD.A)(this,"Parser",nF),(0,BD.A)(this,"Renderer",eF),(0,BD.A)(this,"TextRenderer",tF),(0,BD.A)(this,"Lexer",JM),(0,BD.A)(this,"Tokenizer",sM),(0,BD.A)(this,"Hooks",rF),this.use(...e)}walkTokens(e,t){let n=[];for(const r of e)switch(n=n.concat(t.call(this,r)),r.type){case"table":{const e=r;for(const r of e.header)n=n.concat(this.walkTokens(r.tokens,t));for(const r of e.rows)for(const e of r)n=n.concat(this.walkTokens(e.tokens,t));break}case"list":{const e=r;n=n.concat(this.walkTokens(e.items,t));break}default:{const e=r;this.defaults.extensions?.childTokens?.[e.type]?this.defaults.extensions.childTokens[e.type].forEach((r=>{const i=e[r].flat(1/0);n=n.concat(this.walkTokens(i,t))})):e.tokens&&(n=n.concat(this.walkTokens(e.tokens,t)))}}return n}use(...e){const t=this.defaults.extensions||{renderers:{},childTokens:{}};return e.forEach((e=>{const n={...e};if(n.async=this.defaults.async||n.async||!1,e.extensions&&(e.extensions.forEach((e=>{if(!e.name)throw new Error("extension name required");if("renderer"in e){const n=t.renderers[e.name];t.renderers[e.name]=n?function(...t){let r=e.renderer.apply(this,t);return!1===r&&(r=n.apply(this,t)),r}:e.renderer}if("tokenizer"in e){if(!e.level||"block"!==e.level&&"inline"!==e.level)throw new Error("extension level must be 'block' or 'inline'");const n=t[e.level];n?n.unshift(e.tokenizer):t[e.level]=[e.tokenizer],e.start&&("block"===e.level?t.startBlock?t.startBlock.push(e.start):t.startBlock=[e.start]:"inline"===e.level&&(t.startInline?t.startInline.push(e.start):t.startInline=[e.start]))}"childTokens"in e&&e.childTokens&&(t.childTokens[e.name]=e.childTokens)})),n.extensions=t),e.renderer){const t=this.defaults.renderer||new eF(this.defaults);for(const n in e.renderer){if(!(n in t))throw new Error(`renderer '${n}' does not exist`);if(["options","parser"].includes(n))continue;const r=n,i=e.renderer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n||""}}n.renderer=t}if(e.tokenizer){const t=this.defaults.tokenizer||new sM(this.defaults);for(const n in e.tokenizer){if(!(n in t))throw new Error(`tokenizer '${n}' does not exist`);if(["options","rules","lexer"].includes(n))continue;const r=n,i=e.tokenizer[r],o=t[r];t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.tokenizer=t}if(e.hooks){const t=this.defaults.hooks||new rF;for(const n in e.hooks){if(!(n in t))throw new Error(`hook '${n}' does not exist`);if(["options","block"].includes(n))continue;const r=n,i=e.hooks[r],o=t[r];rF.passThroughHooks.has(n)?t[r]=e=>{if(this.defaults.async)return Promise.resolve(i.call(t,e)).then((e=>o.call(t,e)));const n=i.call(t,e);return o.call(t,n)}:t[r]=(...e)=>{let n=i.apply(t,e);return!1===n&&(n=o.apply(t,e)),n}}n.hooks=t}if(e.walkTokens){const t=this.defaults.walkTokens,r=e.walkTokens;n.walkTokens=function(e){let n=[];return n.push(r.call(this,e)),t&&(n=n.concat(t.call(this,e))),n}}this.defaults={...this.defaults,...n}})),this}setOptions(e){return this.defaults={...this.defaults,...e},this}lexer(e,t){return JM.lex(e,t??this.defaults)}parser(e,t){return nF.parse(e,t??this.defaults)}parseMarkdown(e){const t=(t,n)=>{const r={...n},i={...this.defaults,...r},o=this.onError(!!i.silent,!!i.async);if(!0===this.defaults.async&&!1===r.async)return o(new Error("marked(): The async option was set to true by an extension. Remove async: false from the parse options object to return a Promise."));if("undefined"===typeof t||null===t)return o(new Error("marked(): input parameter is undefined or null"));if("string"!==typeof t)return o(new Error("marked(): input parameter is of type "+Object.prototype.toString.call(t)+", string expected"));i.hooks&&(i.hooks.options=i,i.hooks.block=e);const s=i.hooks?i.hooks.provideLexer():e?JM.lex:JM.lexInline,a=i.hooks?i.hooks.provideParser():e?nF.parse:nF.parseInline;if(i.async)return Promise.resolve(i.hooks?i.hooks.preprocess(t):t).then((e=>s(e,i))).then((e=>i.hooks?i.hooks.processAllTokens(e):e)).then((e=>i.walkTokens?Promise.all(this.walkTokens(e,i.walkTokens)).then((()=>e)):e)).then((e=>a(e,i))).then((e=>i.hooks?i.hooks.postprocess(e):e)).catch(o);try{i.hooks&&(t=i.hooks.preprocess(t));let e=s(t,i);i.hooks&&(e=i.hooks.processAllTokens(e)),i.walkTokens&&this.walkTokens(e,i.walkTokens);let n=a(e,i);return i.hooks&&(n=i.hooks.postprocess(n)),n}catch(l){return o(l)}};return t}onError(e,t){return n=>{if(n.message+="\nPlease report this to https://github.com/markedjs/marked.",e){const e="<p>An error occurred:</p><pre>"+ZD(n.message+"",!0)+"</pre>";return t?Promise.resolve(e):e}if(t)return Promise.reject(n);throw n}}}const oF=new iF;function sF(e,t){return oF.parse(e,t)}sF.options=sF.setOptions=function(e){return oF.setOptions(e),sF.defaults=oF.defaults,zD(sF.defaults),sF},sF.getDefaults=VD,sF.defaults=qD,sF.use=function(...e){return oF.use(...e),sF.defaults=oF.defaults,zD(sF.defaults),sF},sF.walkTokens=function(e,t){return oF.walkTokens(e,t)},sF.parseInline=oF.parseInline,sF.Parser=nF,sF.parser=nF.parse,sF.Renderer=eF,sF.TextRenderer=tF,sF.Lexer=JM,sF.lexer=JM.lex,sF.Tokenizer=sM,sF.Hooks=rF,sF.parse=sF;sF.options,sF.setOptions,sF.use,sF.walkTokens,sF.parseInline,nF.parse,JM.lex;const aF=(e,t="expression",n={})=>{const{depth:r=0,specialDepthAccessors:i={}}=n;if(!["expression","unaryTest"].includes(t))return[];const o="expression"===t?$f(e):Nf(e),s=hF(o,e),a=function e(t){if("PathExpression"===t.name){const n=uF(t)[0];return"Context"===n.name?e(n):0===Object.keys(i).length?0===r?[lF(t,0)]:[]:Array.from(cF(t,r,i))}if(0===r&&"VariableName"===t.name)return[t.variableName];if(t.children){const n=t.children.reduce(((t,n)=>t.concat(e(n))),[]);return"FilterContext"===t.name?n.filter((e=>"item"!==e)):n}return[]}(s);return[...new Set(a)]},lF=(e,t)=>{const n=uF(e);return n[t].variableName||null},cF=(e,t,n)=>{let r=[{previous:null,current:t-1}];const i=new Set,o=uF(e);for(let s=0;s<o.length;s++){const e=o[s].variableName;if(e in n){const t=n[e];r=t.reduce(((e,t)=>[...e,...r.map((e=>({previous:e.current,current:e.current+t})))]),[]).filter((e=>e.current>=-1))}else r=r.map((e=>({previous:e.current,current:e.current+1})));r.some((e=>-1===e.previous&&0===e.current))&&i.add(e)}return new Set(i)},uF=e=>{let t=e,n=[];while("PathExpression"===t.name)n.push(t.children[1]),t=t.children[0];return n.push(t),n.reverse()},hF=(e,t)=>{const n=[{children:[]}];return e.iterate({enter:e=>{const r={name:e.type.name,children:[]};"VariableName"===e.type.name&&(r.variableName=t.slice(e.from,e.to)),n.push(r)},leave:()=>{const e=n.pop(),t=n[n.length-1];t.children.push(e)}}),dF(n[0].children[0])},dF=e=>{const t={name:"Root",children:[e]},n=e=>{if(e.children)for(let r=0;r<e.children.length;r++)if("FilterExpression"===e.children[r].name){const i=e.children[r].children[0],o=e.children[r].children[2];e.children[r]=i;const s={name:"FilterContext",children:[o]};t.children.push(s),n(o)}else n(e.children[r])};return n(e),t};class fF{constructor(e){this._eventBus=e}isExpression(e){return S(e)&&e.startsWith("=")}getVariableNames(e,t={}){const{type:n="expression"}=t;if(!this.isExpression(e))return[];if(!["unaryTest","expression"].includes(n))throw new Error("Unknown expression type: "+n);return aF(e,n)}evaluate(e,t={}){if(!e)return null;if(!S(e)||!e.startsWith("="))return null;try{const n=zf(e.slice(1),t);return n}catch(IH){return this._eventBus.fire("error",{error:IH}),null}}}fF.$inject=["eventBus"];class pF{constructor(){}isTemplate(e){return S(e)&&(e.startsWith("=")||/{{.*?}}/.test(e))}getVariableNames(e){if(!this.isTemplate(e))return[];const t=this._extractExpressionsWithDepth(e),n={parent:[-1,1],_parent_:[-1],this:[0,1],_this_:[0]};return t.reduce(((e,{expression:t,depth:r})=>e.concat(aF(t,"expression",{depth:r,specialDepthAccessors:n}))),[])}evaluate(e,t={},n={}){const{debug:r=!1,strict:i=!1,buildDebugString:o=e=>" {{⚠}} ",sanitizer:s=e=>e}=n;return AD(e,t,{debug:r,strict:i,buildDebugString:o,sanitizer:s})}_extractExpressionsWithDepth(e){const t=CD.parse(e),n=TD(t,e);return function e(t,n=0){if(["Feel","FeelBlock"].includes(t.name))return[{depth:n,expression:t.content}];if("LoopSpanner"===t.name){const r=t.children[0].content,i=t.children.slice(1).reduce(((t,r)=>t.concat(e(r,n+1))),[]);return[{depth:n,expression:r},...i]}return t.children.reduce(((t,r)=>t.concat(e(r,n))),[])}(n)}}pF.$inject=[];const gF=1440,mF={DATE:"date",TIME:"time",DATETIME:"datetime"},vF={UTC_OFFSET:"utc_offset",UTC_NORMALIZED:"utc_normalized",NO_TIMEZONE:"no_timezone"},yF={[mF.DATE]:"Date",[mF.TIME]:"Time",[mF.DATETIME]:"Date & Time"},bF={[vF.UTC_OFFSET]:"UTC offset",[vF.UTC_NORMALIZED]:"UTC normalized",[vF.NO_TIMEZONE]:"No timezone"},wF=["subtype"],xF=["dateLabel"],kF=["disallowPassedDates"],_F=["timeLabel"],OF=["use24h"],SF=["timeInterval"],EF=["timeSerializingFormat"],CF={STATIC:"static",INPUT:"input",EXPRESSION:"expression"},TF=CF.STATIC,AF={[CF.STATIC]:"Static",[CF.INPUT]:"Input data",[CF.EXPRESSION]:"Expression"},DF={[CF.STATIC]:["values"],[CF.INPUT]:["valuesKey"],[CF.EXPRESSION]:["valuesExpression"]},MF={[CF.STATIC]:[{label:"Value",value:"value"}],[CF.INPUT]:"",[CF.EXPRESSION]:"="};function FF(e){for(const t of Object.values(CF))if(void 0!==Q(e,DF[t]))return t;return TF}const RF="sandbox",PF="allow",IF=[{attribute:RF,directive:"allow-scripts",property:"allowScripts",label:"Script execution"},{attribute:RF,directive:"allow-same-origin",property:"allowSameOrigin",label:"Allow same origin"},{attribute:PF,directive:"fullscreen",property:"fullscreen",label:"Open in fullscreen"},{attribute:PF,directive:"geolocation",property:"geolocation",label:"Geolocation"},{attribute:PF,directive:"camera",property:"camera",label:"Camera access"},{attribute:PF,directive:"microphone",property:"microphone",label:"Microphone access"},{attribute:RF,directive:"allow-forms",property:"allowForms",label:"Forms submission"},{attribute:RF,directive:"allow-modals",property:"allowModals",label:"Open modal windows"},{attribute:RF,directive:"allow-popups",property:"allowPopups",label:"Open popups"},{attribute:RF,directive:"allow-top-navigation",property:"allowTopNavigation",label:"Top level navigation"},{attribute:RF,directive:"allow-storage-access-by-user-activation",property:"allowStorageAccessByUserActivation",label:"Storage access by user"}];function LF(e){const t=new wc(e);return t.init(),t}function $F(e="fjs"){const t=document.createElement("div");return t.classList.add(`${e}-container`),t}function NF(e,{errors:t=[],disabled:n=!1,readonly:r=!1}={}){if(!e)throw new Error("type required");return Ee()("fjs-form-field",`fjs-form-field-${e}`,{"fjs-has-errors":t.length>0,"fjs-disabled":n,"fjs-readonly":r})}function jF(e){const{layout:t={}}=e,{columns:n}=t;return Ee()("fjs-layout-column","cds--col"+(n?"-lg-"+n:""),"cds--col-sm-16","cds--col-md-16")}function BF(e){if("string"!=typeof e)return null;for(const t of e.split("\n")){const e=t.trim();if(""!==e)return e}return null}function VF(e,t,n){let r="fjs-form";return t&&(r+=`-${t}`),r+=`-${e}`,Object.values(n||{}).forEach((e=>{r+=`_${e}`})),r}const qF=nt({Empty:e=>null,Hidden:e=>null,Children:e=>it("div",{class:e.class,style:e.style,children:e.children}),Element:e=>it("div",{class:e.class,style:e.style,children:e.children}),Row:e=>it("div",{class:e.class,style:e.style,children:e.children}),Column:e=>"default"===e.field.type?e.children:it("div",{class:e.class,style:e.style,children:e.children}),hoverInfo:{cleanup:()=>{}}}),zF=nt({data:null,this:null,parent:null,i:null});function HF(e,t){}const WF=nt({getService:HF,formId:null});function QF(e,t){const{getService:n}=Et(WF);return n(e,t)}function UF(e,t){return JSON.parse(JSON.stringify(e,t))}function YF(e,t){const n=e.components||[];n.forEach(((e,n)=>{YF(e,t)})),t(e)}function XF(e){const t={};for(const[n,r]of Object.entries(e))t[`_${n}_`]=r;return t}function ZF(e){const{data:t,...n}=e;return{...n,...t,...XF(n)}}function GF(e,t,n){return e&&e.isExpression(t)?e.evaluate(t,ZF(n)):t}function KF(e){const t=QF("conditionChecker",!1),n=Et(zF);return Ot((()=>t?t.check(e,ZF(n)):null),[t,e,n])}function JF(e,t){const{valuesExpression:n,valuesKey:r,values:i}=e;return n?null:r?Q(t,[r]):i}function eR(e){return e.filter(oR).map(nR).filter((e=>!w(e)))}function tR(e={}){const t={};return e.valuesKey||e.valuesExpression||(t.values=[{label:"Value",value:"value"}]),{...t,...e}}function nR(e){if(rR(e))return{value:e,label:`${e}`};if(k(e)){const t=iR(e.label);if(!t&&rR(e.value))return{value:e.value,label:`${e.value}`};if(t&&oR(e.value))return e}return null}function rR(e){const t=["number","string","boolean"].includes(typeof e),n=e||0===e||!1===e;return t&&n}function iR(e){return e&&S(e)}function oR(e){return k(e)?Object.keys(e).length>0:rR(e)}function sR(e){const t=QF("expressionLanguage"),n=Et(zF);return Ot((()=>GF(t,e,n)),[t,n,e])}function aR(e){const t=_t();return It()(e,t.current)||(t.current=e),t.current}const lR={LOADING:"loading",LOADED:"loaded",ERROR:"error"};function cR(e){const{valuesExpression:t,valuesKey:n,values:r}=e,i=QF("form")._getState().initialData,o=sR(t),s=aR(o||[]),a=Ot((()=>{let e=[];if(void 0!==n){const t=(i||{})[n];t&&Array.isArray(t)&&(e=t)}else if(void 0!==r)e=Array.isArray(r)?r:[];else{if(!(t&&s&&Array.isArray(s)))return uR("No options source defined in the form definition");e=s}return hR(eR(e))}),[n,r,i,t,s]);return a}const uR=e=>({options:[],error:e,loadState:lR.ERROR}),hR=e=>({options:e,error:void 0,loadState:lR.LOADED}),dR=e=>{const{html:t,transform:n=e=>e,sanitize:r=!0,sanitizeStyleTags:i=!0}=e,o=Ot((()=>r?cc.sanitize(t,fR(i)):t),[t,r,i]),s=Ot((()=>n(o)),[o,n]);return{__html:s}},fR=e=>({FORCE_BODY:!0,FORBID_TAGS:e?["style"]:[]});function pR(e){const t=aR(e),n=Ot((()=>IF.filter((({attribute:e})=>e===RF)).filter((({property:e})=>Q(t,[e],!1))).map((({directive:e})=>e)).join(" ")),[t]),r=Ot((()=>IF.filter((({attribute:e})=>e!==RF)).filter((({property:e})=>Q(t,[e],!1))).map((({directive:e})=>e)).join("; ")),[t]);return[n,r]}function gR(e){const t=Ot((()=>Object.assign({},...e.map((e=>({[mR(e.value)]:e.label}))))),[e]);return St((e=>t[mR(e)]),[t])}const mR=e=>k(e)?JSON.stringify(e):e;function vR(e,t){const n=e.querySelectorAll("style");return n.forEach((e=>{const n=yR(e.textContent),r=n.map((e=>{const{selector:n,styles:r}=bR(e),i=wR(n,t);return`${i} ${r}`})).join(" ");e.textContent=r})),e}function yR(e){let t=0,n=0,r=0;const i=[];while(t<e.length)"{"===e[t]&&r++,"}"===e[t]&&(r--,0===r&&(i.push(e.substring(n,t+1)),n=t+1)),t++;return i.map((e=>e.trim()))}function bR(e){const t=e.indexOf("{"),n=e.substring(0,t),r=e.substring(t);return{selector:n,styles:r}}function wR(e,t){return e.split(",").map((e=>`${t} ${e.trim()}`)).join(", ")}function xR(e){while(e&&e!==document.body&&e!==document.documentElement){if(kR(e))return e;e=e.parentElement}return kR(document.body)?document.body:kR(document.documentElement)?document.documentElement:null}function kR(e){const t=window.getComputedStyle(e),n=t.overflowY||t.overflow;return("auto"===n||"scroll"===n)&&e.scrollHeight>e.clientHeight}const _R={},OR=[];function SR(e,t,n,r){const i=n||_R,o=r||OR;xt((()=>{if(R(o,(e=>!e.current))||!e.current)return;for(let e=0;e<o.length;e++)o[e].current=!1;const t=e.current,n=xR(t);if(!n)return;const r=t.getBoundingClientRect(),s=n.getBoundingClientRect(),{align:a="center",offset:l=0,behavior:c="auto",scrollIfVisible:u=!1}=i,h=u||!(r.top>=s.top&&r.bottom<=s.bottom);if(!h)return;const d=ER(t,n,{align:a,offset:l});n.scroll({top:d,behavior:c})}),t)}function ER(e,t,n){const r=e.getBoundingClientRect(),i=t.getBoundingClientRect();return"top"===n.align?r.top-i.top+t.scrollTop-n.offset:"bottom"===n.align?r.bottom-i.top-t.clientHeight+t.scrollTop+n.offset:"center"===n.align?r.top-i.top-t.clientHeight/2+t.scrollTop+r.height/2+n.offset:0}function CR(e){const t=QF("expressionLanguage"),n=Et(zF);return Ot((()=>{const r=GF(t,e,n);return"boolean"===typeof r&&r}),[t,n,e])}function TR(){const{initialData:e,data:t}=QF("form")._getState(),n=QF("conditionChecker",!1);return Ot((()=>{const r=n?n.applyConditions(t,t):t;return{...e,...r}}),[n,t,e])}function AR(e,t,n=window){function r({key:n}){n===e&&t()}xt((()=>(n.addEventListener("keydown",r),()=>{n.removeEventListener("keydown",r)})))}function DR(e,t={}){const n=QF("expressionLanguage"),r=QF("conditionChecker",!1),i=Et(zF),{readonly:o}=e;return!!t.readOnly||(n&&n.isExpression(o)?!!r&&r.check(o,ZF(i)):o||!1)}function MR(e,t=null){const n=_t(t);return xt((()=>n.current=e),[e]),n.current}function FR(e){const t=_t(null),n=_t(null),r=QF("config",!1),i=r&&r.debounce,o=!1!==i&&0!==i,s="number"===typeof i?i:300,a=St(((...r)=>{o?(n.current=r,t.current&&clearTimeout(t.current),t.current=setTimeout((()=>{e(...n.current),n.current=null}),s)):e(...r)}),[e,s,o]),l=St((()=>{t.current&&(clearTimeout(t.current),null!==n.current&&(e(...n.current),n.current=null),t.current=null)}),[e]);return[a,l]}function RR(e,t={}){const n=QF("templating"),r=Et(zF);return Ot((()=>n&&n.isTemplate(e)?n.evaluate(e,ZF(r),t):e),[n,e,r,t])}function PR(e,t={}){const n=RR(e,t);return Ot((()=>n&&n.split("\n")[0]),[n])}const IR=new KeyboardEvent("keydown",{code:"Enter",key:"Enter",charCode:13,keyCode:13,bubbles:!0});function LR(e){if(!e)return;!e.isOpen&&e.open();const t=e.calendarContainer,n=t.querySelector(".flatpickr-day.selected")||t.querySelector(".flatpickr-day.today")||t.querySelector(".flatpickr-day");n&&n.focus()}function $R(e,t){if(null===t)return null;const n=t%1440,r=t%60;let i=Math.floor(n/60);if(e)return GR(i)+":"+GR(r);i=i%12||12;const o=n>=720;return GR(i)+":"+GR(r)+" "+(o?"PM":"AM")}function NR(e){let t=e.toLowerCase();const n=t.includes("am")||t.includes("pm");if(n){const e=t.includes("pm"),n=t.match(/\d+/g),r=parseInt(n&&n[0]),i=parseInt(n&&n[1])||0,o=_(r)&&r>=1&&r<=12,s=i>=0&&i<=59;if(!o||!s)return null;const a=r%12+(e?12:0);return 60*a+i}{const e=t.match(/\d+/g),n=parseInt(e&&e[0]),r=parseInt(e&&e[1]),i=_(n)&&n>=0&&n<=23,o=_(r)&&r>=0&&r<=59;return i&&o?60*n+r:null}}function jR(e,t,n){if(n===vF.UTC_NORMALIZED){const n=(e+t+gF)%gF;return GR(Math.floor(n/60))+":"+GR(n%60)+"Z"}const r=GR(Math.floor(e/60))+":"+GR(e%60),i=n===vF.UTC_OFFSET;return r+(i?WR(t):"")}function BR(e){if(!e)return null;const t=e=>{const t=e.split(":"),n=parseInt(t[0]),r=t.length>1?parseInt(t[1]):0;return isNaN(n)||n<0||n>24||isNaN(r)||r<0||r>60?null:60*n+r},n=(new Date).getTimezoneOffset();if(e.includes("Z")){e=e.replace("Z","");const r=t(e);return null===r?null:(r-n+gF)%gF}if(e.includes("+")){const[r,i]=e.split("+"),o=t(r);let s=t(i);return null===o||null===s?null:(s=-s,(o+s-n+gF)%gF)}if(e.includes("-")){const[r,i]=e.split("-"),o=t(r);let s=t(i);return null===o||null===s?null:(o+s-n+gF)%gF}return t(e)}function VR(e){return Gs.fromJSDate(e).toISODate()}function qR(e){if(!e||"string"!==typeof e)return!1;const t=e.split("T");if(2!=t.length)return!1;const n=t[0].split("-");return 3==n.length}function zR(e){if(!e||"string"!==typeof e)return!1;if(e.includes("T"))return!1;const t=e.split("-");return 3==t.length}function HR(e,t,n){const r=new Date;if(r.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),r.setHours(Math.floor(t/60),t%60,0,0),n===vF.UTC_NORMALIZED){const e=r.getTimezoneOffset(),n=t+e<0?-1:t+e>gF?1:0;r.setHours(r.getHours()+24*n)}return VR(r)+"T"+jR(t,r.getTimezoneOffset(),n)}function WR(e){return ZR(e)+":"+GR(Math.abs(e%60))}function QR(e){return isNaN(new Date(Date.parse(e)).getTime())}function UR(){return{date:new Date(Date.parse(null)),time:null}}function YR(e){return e&&!isNaN(e.getTime())}function XR(e){return!isNaN(parseInt(e))}function ZR(e){return e>0?"-"+GR(Math.floor(e/60)):"+"+GR(Math.floor((0-e)/60))}function GR(e){return e.toString().padStart(2,"0")}const KR=/^(https?|data):.*/i,JR=/^(https):\/\/*/i;function eP(e){const{formField:t,value:n}=e,{subtype:r}=t;return"string"!==typeof n?null:r!==mF.DATE||!QR(n)&&zR(n)?r===mF.TIME&&null===BR(n)?null:r!==mF.DATETIME||!QR(n)&&qR(n)?n:null:null}function tP(e,t){return!!Array.isArray(t)&&t.some((t=>It()(e,t)))}function nP(e){const{formField:t,data:n,value:r}=e,{valuesExpression:i}=t;try{if(i)return r;const e=eR(JF(t,n)).map((e=>e.value));return tP(r,e)?r:null}catch(IH){return null}}function rP(e){const{formField:t,data:n,value:r}=e,{valuesExpression:i}=t;try{if(i)return r;const e=eR(JF(t,n)).map((e=>e.value));return r.filter((t=>tP(t,e)))}catch(IH){return[]}}function iP(e){const t=KR.test(e);return t?e:""}function oP(e){const t=JR.test(e);return t?e:""}function sP(e){const t={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#039;","{":"&#123;","}":"&#125;",":":"&#58;",";":"&#59;"};return e.replace(/[&<>"'{};:]/g,(e=>t[e]))}function aP(e){const{field:t,options:n,loadState:r,onChange:i,value:o}=e;xt((()=>{if(r!==lR.LOADED)return;const e=n.map((e=>e.value)),s=o&&!tP(o,e);s&&i({field:t,value:null})}),[t,n,i,o,r])}function lP(e){const{field:t,options:n,loadState:r,onChange:i,values:o}=e,s=aR(o||[]);xt((()=>{if(r!==lR.LOADED)return;const e=n.map((e=>e.value)),o=s.some((t=>!tP(t,e)));o&&i({field:t,value:s.filter((t=>tP(t,e)))})}),[t,n,i,s,r])}const cP="button";function uP(e){const{disabled:t,onFocus:n,onBlur:r,field:i}=e,{action:o="submit"}=i,s=PR(i.label||"",{debug:!0});return it("div",{class:NF(cP),children:it("button",{class:"fjs-button",type:o,disabled:t,onFocus:()=>n&&n(),onBlur:()=>r&&r(),children:s})})}function hP(e){const{description:t,id:n}=e,r=PR(t||"",{debug:!0});return r?it("div",{id:n,class:"fjs-form-field-description",children:r}):null}function dP(e){const{errors:t,id:n}=e;return t.length?it("div",{class:"fjs-form-field-error","aria-live":"polite",id:n,children:it("ul",{children:t.map((e=>it("li",{children:e})))})}):null}function fP(e){const{id:t,htmlFor:n,label:r,collapseOnEmpty:i=!0,required:o=!1}=e,s=PR(r||"",{debug:!0});return it("label",{id:t,for:n,class:Ee()("fjs-form-field-label",{"fjs-incollapsible-label":!i},e["class"]),children:[e.children,s,o&&it("span",{class:"fjs-asterix","aria-hidden":!0,children:"*"})]})}uP.config={type:cP,keyed:!1,name:"Button",group:"action",create:(e={})=>({label:"Button",action:"submit",...e})};const pP="checkbox";function gP(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l=!1}=e,{description:c,label:u,validate:h={}}=s,{required:d}=h,f=({target:t})=>{e.onChange({value:t.checked})},p=`${r}-description`,g=`${r}-error-message`;return it("div",{class:Ee()(NF(pP,{errors:n,disabled:t,readonly:a}),{"fjs-checked":l}),children:[it("div",{class:"fjs-inline-label",children:[it("input",{checked:l,class:"fjs-input",disabled:t,readOnly:a,id:r,type:"checkbox",onChange:f,onBlur:()=>i&&i(),onFocus:()=>o&&o(),required:d,"aria-invalid":n.length>0,"aria-describedby":[p,g].join(" ")}),it(fP,{htmlFor:r,label:u,required:d})]}),it(hP,{id:p,description:c}),it(dP,{id:g,errors:n})]})}gP.config={type:pP,keyed:!0,name:"Checkbox",group:"selection",emptyValue:!1,sanitizeValue:({value:e})=>!0===e,create:(e={})=>({label:"Checkbox",...e})};const mP="checklist";function vP(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l=[]}=e,{description:c,label:u,validate:h={}}=s,d=_t(),{required:f}=h,p=t=>{const n=tP(t,l)?l.filter((e=>!It()(e,t))):[...l,t];e.onChange({value:n})},g=e=>{d.current.contains(e.relatedTarget)||i&&i()},m=e=>{d.current.contains(e.relatedTarget)||o&&o()},{loadState:v,options:y}=cR(s);lP({field:s,loadState:v,options:y,values:l,onChange:e.onChange});const b=`${r}-description`,w=`${r}-error-message`;return it("div",{class:Ee()(NF(mP,{errors:n,disabled:t,readonly:a})),ref:d,children:[it(fP,{label:u,required:f}),v==lR.LOADED&&y.map(((e,i)=>{const o=`${r}-${i}`,s=tP(e.value,l);return it("div",{className:Ee()("fjs-inline-label",{"fjs-checked":s}),children:[it("input",{checked:s,class:"fjs-input",disabled:t,readOnly:a,id:o,type:"checkbox",onClick:()=>p(e.value),onBlur:g,onFocus:m,required:f,"aria-invalid":n.length>0,"aria-describedby":[b,w].join(" ")}),it(fP,{htmlFor:o,label:e.label,required:!1})]},e.value)})),it(hP,{id:b,description:c}),it(dP,{id:w,errors:n})]})}vP.config={type:mP,keyed:!0,name:"Checkbox group",group:"selection",emptyValue:[],sanitizeValue:rP,create:(e={})=>({label:"Checkbox group",...tR(e)})};const yP=()=>!1,bP=new g([32,36,1]);function wP(e){const t=_t(bP.next()),{field:n,indexes:r,onChange:i}=e,o=QF("formFields"),s=QF("viewerCommands",!1),a=QF("formFieldInstanceRegistry",!1),l=QF("pathRegistry"),c=QF("eventBus"),u=QF("form"),{initialData:h,data:d,errors:f,properties:p}=u._getState(),{Element:g,Hidden:m,Column:v}=Et(qF),{formId:y}=Et(WF),[b,w]=bt(!!s),x=o.get(n.type);if(!x)throw new Error(`cannot render field <${n.type}>`);const k=x.config,_=Et(zF),O=Ot((()=>l.getValuePath(n,{indexes:r})),[n,r,l]),S=Ot((()=>Q(h,O)),[h,O]),E=DR(n,p),C=Q(d,O),T=!p.readOnly&&(p.disabled||n.disabled||!1),A=KF(n.conditional&&n.conditional.hide||null),D=Ot((()=>a?a.syncInstance(t.current,{id:n.id,expressionContextInfo:_,valuePath:O,value:C,indexes:r,hidden:A}):null),[a,n.id,_,O,C,r,A]),M=D?a.get(D):null;xt((()=>{const e=t.current;if(a)return()=>a.cleanupInstance(e)}),[a]),xt((()=>{if(!s)return;const e=()=>{w(!0)};return c.on("import.done",e),c.on("reset",e),()=>{c.off("import.done",e),c.off("reset",e)}}),[c,s]),xt((()=>{const e=S&&!It()(S,[]);b&&e&&M&&(w(!1),s.updateFieldInstanceValidation(M,S))}),[M,b,S,s]);const F=St((()=>{const e=Q(d,O);b&&(w(!1),s.updateFieldInstanceValidation(M,e)),c.fire("formField.blur",{formField:n})}),[d,c,n,M,b,O,s]),R=St((()=>{c.fire("formField.focus",{formField:n})}),[c,n]),P=St((e=>{w(!1),i({field:n,indexes:r,fieldInstance:M,...e})}),[i,n,M,r]);if(A)return it(m,{field:n});const I=`${VF(n.id,y,r)}`,L=Q(f,[n.id,...Object.values(r||{})])||[],$=it(x,{...e,disabled:T,errors:L,domId:I,onChange:T||E?yP:P,onBlur:T||E?yP:F,onFocus:T||E?yP:R,readonly:E,value:C,fieldInstance:M});return k.escapeGridRender?$:it(v,{field:n,class:jF(n),children:it(g,{class:"fjs-element",field:n,children:$})})}function xP(e){const{Children:t}=Et(qF),{field:n,Empty:r}=e,{id:i}=n,o=QF("repeatRenderManager",!1),s=o&&o.isFieldRepeating(i),a=o.Repeater,l=o.RepeatFooter;return s?it(_P,{...e,ChildrenRoot:t,Empty:r,Repeater:a,RepeatFooter:l,repeatRenderManager:o}):it(kP,{...e,ChildrenRoot:t,Empty:r})}function kP(e){const{ChildrenRoot:t,Empty:n,field:r}=e,{components:i=[]}=r,o=!i.length;return it(t,{class:"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed",field:r,children:[it(OP,{...e}),o?it(n,{field:r}):null]})}function _P(e){const{ChildrenRoot:t,repeatRenderManager:n,Empty:r,field:i,...o}=e,{components:s=[]}=i,a=bt({isCollapsed:!0}),l=n.Repeater,c=n.RepeatFooter;return it(Ie,{children:[it(t,{class:"fjs-vertical-layout fjs-children cds--grid cds--grid--condensed",field:i,children:[l?it(l,{...o,useSharedState:a,field:i,RowsRenderer:OP}):it(OP,{...o,field:i}),s.length?null:it(r,{field:i})]}),c?it(c,{...o,useSharedState:a,field:i}):null]})}function OP(e){const{field:t,indexes:n}=e,{id:r,verticalAlignment:i="start"}=t,o=QF("formLayouter"),s=QF("formFieldRegistry"),a=o.getRows(r),{Row:l}=Et(qF);return it(Ie,{children:[" ",a.map((t=>{const{components:r=[]}=t;return r.length?it(l,{row:t,class:"fjs-layout-row cds--row",style:{alignItems:i},children:r.map((t=>{const r=s.get(t);return r?Re(wP,{...e,key:t,field:r,indexes:n}):null}))}):null}))," "]})}function SP(e){const{Empty:t}=Et(qF),n={...e,Empty:t};return it(xP,{...n})}var EP;function CP(){return CP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},CP.apply(null,arguments)}SP.config={type:"default",keyed:!1,label:null,group:null,create:(e={})=>({components:[],...e}),getSubheading:e=>e.id};var TP,AP,DP=function(e){return Re("svg",CP({xmlns:"http://www.w3.org/2000/svg",width:14,height:15,fill:"none",viewBox:"0 0 28 30"},e),EP||(EP=Re("path",{fill:"currentColor",fillRule:"evenodd",d:"M19 2H9V0H7v2H2a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V4a2 2 0 0 0-2-2h-5V0h-2zM7 7V4H2v5h24V4h-5v3h-2V4H9v3zm-5 4v17h24V11z",clipRule:"evenodd"})))};function MP(e="default"){const t=new Intl.DateTimeFormat(e).formatToParts(new Date(Date.UTC(2020,5,5)));return t.map((e=>{const t=e.value.length;switch(e.type){case"day":return"d".repeat(t);case"month":return"M".repeat(t);case"year":return"y".repeat(t);default:return e.value}})).join("")}function FP(e){let t=MP(e).toLowerCase();return t.includes("mm")||(t=t.replace("m","mm")),t.includes("dd")||(t=t.replace("d","dd")),t}function RP(e){return PP(MP(e))}function PP(e){const t={day:e.includes("dd"),month:e.includes("MM"),year:e.includes("yyyy")};return e=t.day?e.replace("dd","d"):e.replace("d","j"),e=t.month?e.replace("MM","m"):e.replace("M","n"),e=t.year?e.replace("yyyy","Y"):e.replace("yy","y"),e}function IP(e){const{pre:t,post:n,rootRef:r,inputRef:i,children:o,disabled:s,readonly:a,hasErrors:l}=e,c=()=>i&&i.current&&i.current.focus();return it("div",{class:Ee()("fjs-input-group",{"fjs-disabled":s,"fjs-readonly":a},{hasErrors:l}),ref:r,children:[t&&it("span",{class:"fjs-input-adornment border-right border-radius-left",onClick:c,children:[" ",S(t)?it("span",{class:"fjs-input-adornment-text",children:t}):t," "]}),o,n&&it("span",{class:"fjs-input-adornment border-left border-radius-right",onClick:c,children:[" ",S(n)?it("span",{class:"fjs-input-adornment-text",children:n}):n," "]})]})}function LP(e){const{label:t,domId:n,collapseLabelOnEmpty:r,onDateTimeBlur:i,onDateTimeFocus:o,required:s,disabled:a,disallowPassedDates:l,date:c,readonly:u,setDate:h}=e,d=_t(),f=_t(),[p,g]=bt(null),[m,v]=bt(!1),[y,b]=bt(!1),w=aR(c);xt((()=>{p&&p.config&&(p.setDate(w,!0),v(!1))}),[p,w]),xt((()=>{y&&(LR(p),b(!1))}),[p,y]),xt((()=>{let e={allowInput:!0,dateFormat:RP(),static:!0,clickOpens:!1,minDate:l?"today":"01/01/1900",errorHandler:()=>{}};const t=Fa(d.current,e);g(t);const n=e=>{t.calendarContainer.contains(e.relatedTarget)||e.relatedTarget==d.current||t.close()},r=e=>{e.target.classList.contains("flatpickr-day")&&v(!1)};t.config.onOpen=[()=>t.calendarContainer.addEventListener("focusout",n),()=>t.calendarContainer.addEventListener("mousedown",r)],t.config.onClose=[()=>t.calendarContainer.removeEventListener("focusout",n),()=>t.calendarContainer.removeEventListener("mousedown",r)]}),[l]),xt((()=>{p&&p.config&&(p.config.onChange=[e=>h(new Date(e)),()=>v(!1)])}),[p,h]);const x=St((e=>{p&&("Escape"===e.code&&p.close(),"ArrowDown"===e.code&&(m?(d.current.dispatchEvent(IR),v(!1),b(!0)):LR(p),e.preventDefault()),"Enter"===e.code&&v(!1))}),[p,m]),k=St((e=>{!p||f.current.contains(e.relatedTarget)||u||(p.open(),o(e))}),[p,u,o]),_=St((e=>{const t=e.relatedTarget&&e.relatedTarget.classList.contains("flatpickr-day");t||(m&&(d.current.dispatchEvent(IR),v(!1)),i(e))}),[m,i]);return it("div",{class:"fjs-datetime-subsection",children:[it(fP,{htmlFor:n,label:t,collapseOnEmpty:r,required:s}),it(IP,{pre:it(DP,{}),disabled:a,readonly:u,rootRef:f,inputRef:d,children:it("div",{class:"fjs-datepicker",style:{width:"100%"},children:it("input",{ref:d,type:"text",id:n,class:"fjs-input",disabled:a,readOnly:u,placeholder:FP(),autoComplete:"off",onFocus:k,onBlur:_,onKeyDown:x,onMouseDown:()=>!p.isOpen&&!u&&p.open(),onInput:()=>v(!0),"data-input":!0,"aria-describedby":e["aria-describedby"]})})})]})}function $P(){return $P=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},$P.apply(null,arguments)}var NP=function(e){return Re("svg",$P({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none",viewBox:"0 0 28 29"},e),TP||(TP=Re("path",{fill:"currentColor",d:"M13 14.41 18.59 20 20 18.59l-5-5.01V5h-2z"})),AP||(AP=Re("path",{fill:"currentColor",fillRule:"evenodd",d:"M6.222 25.64A14 14 0 1 0 21.778 2.36 14 14 0 0 0 6.222 25.64M7.333 4.023a12 12 0 1 1 13.334 19.955A12 12 0 0 1 7.333 4.022Z",clipRule:"evenodd"})))};const jP=e=>e,BP=()=>{};function VP(e){const{listenerElement:t=window,values:n=[],getLabel:r=jP,onValueSelected:i=BP,height:o=235,emptyListMessage:s="No results",initialFocusIndex:a=0}=e,[l,c]=bt(!1),[u,h]=bt(a),[d,f]=bt(!1),p=_t(),g=_t(),m=Ot((()=>n.length?n[u]:null),[u,n]),v=St((e=>{h((t=>Math.min(Math.max(0,t+e),n.length-1)))}),[n.length]);xt((()=>{0!==u&&(u&&n.length?u>=n.length&&h(n.length-1):h(0))}),[u,n.length]),AR("ArrowUp",(()=>{n.length&&(v(-1),c(!1))}),t),AR("ArrowDown",(()=>{n.length&&(v(1),c(!1))}),t),AR("Enter",(()=>{m&&i(m)}),t),xt((()=>{const e=p.current.children;if(e.length&&!l){const t=e[u];t&&t.scrollIntoView({block:"nearest",inline:"nearest"})}}),[u,l]),xt((()=>{f(!0)}),[]);const y=(e,t)=>{const n=!g.current||g.current.x!==e.screenX&&g.current.y!==e.screenY;n&&(g.current={x:e.screenX,y:e.screenY},c(!0),h(t))};return it("div",{ref:p,tabIndex:-1,class:"fjs-dropdownlist",onMouseDown:e=>e.preventDefault(),style:{maxHeight:o,scrollBehavior:d?"smooth":"auto"},children:[n.length>0&&n.map(((e,t)=>it("div",{class:Ee()("fjs-dropdownlist-item",{focused:u===t}),onMouseMove:l?void 0:e=>y(e,t),onMouseEnter:l?()=>h(t):void 0,onMouseDown:t=>i(e),children:r(e)}))),!n.length&&it("div",{class:"fjs-dropdownlist-empty",children:s})]})}function qP(e){const{label:t,collapseLabelOnEmpty:n,onDateTimeBlur:r,onDateTimeFocus:i,domId:o,required:s,disabled:a,readonly:l,use24h:c=!1,timeInterval:u,time:h,setTime:d}=e,f=Ot((()=>{const e=[1,5,10,15,30,60];return e.includes(u)?u:15}),[u]),p=_t(),[g,m]=bt(!1),v=Ot((()=>1!==f),[f]),[y,b]=bt("");xt((()=>{if(null===h)return void b("");const e=h-h%f;b($R(c,e)),e!=h&&d(e)}),[h,d,c,f]);const w=St((e=>{const t=e||y;if(!t)return void d(null);const n=NR(t);if(!_(n))return b(""),void d(null);const r=n-n%f;b($R(c,r)),d(r)}),[y,f,c,d]),x=Ot((()=>{const e=1440,t=Math.floor(e/f);return[...Array(t).keys()].map((e=>$R(c,e*f)))}),[f,c]),k=Ot((()=>{if(!x||!f)return null;if(h)return h/f;const e=NR(y);if(e){const t=e-e%f;return t/f}return Math.floor(x.length/2)}),[y,h,f,x]),O=e=>{switch(e.key){case"ArrowUp":e.preventDefault();break;case"ArrowDown":v&&m(!0),e.preventDefault();break;case"Escape":v&&m(!1);break;case"Enter":!g&&w();break}},S=e=>{m(!1),w(),r(e)},E=e=>{i(e),!l&&v&&m(!0)},C=e=>{m(!1),w(e)};return it("div",{class:"fjs-datetime-subsection",children:[it(fP,{htmlFor:o,label:t,collapseOnEmpty:n,required:s}),it(IP,{pre:it(NP,{}),inputRef:p,disabled:a,readonly:l,children:it("div",{class:"fjs-timepicker fjs-timepicker-anchor",children:[it("input",{ref:p,type:"text",id:o,class:"fjs-input",value:y,disabled:a,readOnly:l,placeholder:c?"hh:mm":"hh:mm --",autoComplete:"off",onInput:e=>{b(e.target.value),v&&m(!1)},onBlur:S,onFocus:E,onClick:()=>!l&&v&&m(!0),onKeyDown:O,"data-input":!0,"aria-describedby":e["aria-describedby"]}),g&&it(VP,{values:x,height:150,onValueSelected:C,listenerElement:p.current,initialFocusIndex:k})]})})]})}const zP="datetime";function HP(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,onChange:a,readonly:l,value:c=""}=e,{description:u,id:h,dateLabel:d,timeLabel:f,validate:p={},subtype:g,use24h:m,disallowPassedDates:v,timeInterval:y,timeSerializingFormat:b}=s,{required:w}=p,{formId:x}=Et(WF),k=_t(),[_,O]=bt(UR()),[S,E]=bt(null),C=Ot((()=>g===mF.DATE||g===mF.DATETIME),[g]),T=Ot((()=>g===mF.TIME||g===mF.DATETIME),[g]),A=St((e=>{e.relatedTarget&&k.current.contains(e.relatedTarget)||i&&i()}),[i]),D=St((e=>{e.relatedTarget&&k.current.contains(e.relatedTarget)||o&&o()}),[o]);xt((()=>{let{date:e,time:t}=UR();switch(g){case mF.DATE:e="string"===typeof c?Gs.fromISO(c).toJSDate():new Date(NaN);break;case mF.TIME:t=BR(c);break;case mF.DATETIME:e=new Date(Date.parse(c)),t=YR(e)?60*e.getHours()+e.getMinutes():null;break}O({date:e,time:t})}),[g,c]);const M=St((({date:e,time:t})=>{let n=null;g===mF.DATE&&YR(e)?n=VR(e):g===mF.TIME&&XR(t)?n=jR(t,(new Date).getTimezoneOffset(),b):g===mF.DATETIME&&YR(e)&&XR(t)&&(n=HR(e,t,b)),c!==n&&a({value:n,field:s})}),[c,s,a,g,b]);xt((()=>{if(S){if(S.refreshOnly)M(_);else{const e={..._,...S};O(e),M(e)}E(null)}}),[M,_,S]),xt((()=>{E({refreshOnly:!0})}),[b]);const F=Ot((()=>{if(w||g!==mF.DATETIME)return n;const e=YR(_.date)&&!XR(_.time)||!YR(_.date)&&XR(_.time);return e?["Date and time must both be entered.",...n]:n}),[w,g,_,n]),R=St((e=>{E((t=>t?{...t,date:e}:{date:e}))}),[]),P=St((e=>{E((t=>t?{...t,time:e}:{time:e}))}),[]),I=0===F.length?void 0:`${VF(h,x)}-error-message`,L=`${VF(h,x)}-description`,$={label:d,collapseLabelOnEmpty:!f,onDateTimeBlur:A,onDateTimeFocus:D,domId:`${r}-date`,required:w,disabled:t,disallowPassedDates:v,date:_.date,readonly:l,setDate:R,"aria-describedby":[L,I].join(" ")},N={label:f,collapseLabelOnEmpty:!d,onDateTimeBlur:A,onDateTimeFocus:D,domId:`${r}-time`,required:w,disabled:t,readonly:l,use24h:m,timeInterval:y,time:_.time,setTime:P,"aria-describedby":[L,I].join(" ")};return it("div",{class:NF(zP,{errors:F,disabled:t,readonly:l}),children:[it("div",{class:Ee()("fjs-vertical-group"),ref:k,children:[C&&it(LP,{...$}),T&&C&&it("div",{class:"fjs-datetime-separator"}),T&&it(qP,{...N})]}),it(hP,{id:L,description:u}),it(dP,{errors:F,id:I})]})}function WP(e){const{field:t,domId:n}=e,{label:r,type:i,showOutline:o}=t,{Empty:s}=Et(qF),a={...e,Empty:s};return it("div",{className:Ee()(NF(i),"fjs-form-field-grouplike",{"fjs-outlined":o}),role:"group","aria-labelledby":n,children:[it(fP,{id:n,label:r}),it(xP,{...a})]})}HP.config={type:zP,keyed:!0,name:"Date time",group:"basic-input",emptyValue:null,sanitizeValue:eP,create:(e={},t)=>{const n={};return W(n,wF,mF.DATE),t&&W(n,xF,"Date"),{...n,...e}},getSubheading:e=>e.dateLabel||e.timeLabel},WP.config={type:"group",pathed:!0,name:"Group",group:"container",create:(e={})=>({label:"Group",components:[],showOutline:!0,...e})};const QP="iframe",UP=300;function YP(e){const{field:t,disabled:n,readonly:r,domId:i}=e,{height:o=UP,label:s,url:a,security:l={}}=t,c=PR(a,{debug:!0}),u=Ot((()=>oP(c)),[c]),h=PR(s,{debug:!0}),[d,f]=pR(l),[p,g]=bt(0);return xt((()=>{g((e=>e+1))}),[d,f]),it("div",{class:NF(QP,{disabled:n,readonly:r}),children:[it(fP,{htmlFor:i,label:h}),!c&&it(XP,{text:"No content to show."}),c&&u&&it("iframe",{src:u,title:h,height:o,class:"fjs-iframe",id:i,sandbox:d,allow:f},"iframe-"+p),c&&!u&&it(XP,{text:"External content couldn't be loaded."})]})}function XP(e){const{text:t="iFrame"}=e;return it("div",{class:"fjs-iframe-placeholder",children:it("p",{class:"fjs-iframe-placeholder-text",children:t})})}var ZP;function GP(){return GP=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GP.apply(null,arguments)}YP.config={type:QP,keyed:!1,name:"iFrame",group:"container",create:(e={})=>({label:"iFrame",security:{allowScripts:!0},...e})};var KP,JP=function(e){return Re("svg",GP({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),ZP||(ZP=Re("path",{fillRule:"evenodd",d:"M45 17a3 3 0 0 1 3 3v14a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V20a3 3 0 0 1 3-3zm-9 8.889H18v2.222h18z"})))};function eI(){return eI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},eI.apply(null,arguments)}var tI,nI=function(e){return Re("svg",eI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),KP||(KP=Re("path",{d:"M34 18H20a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V20a2 2 0 0 0-2-2m-9 14-5-5 1.41-1.41L25 29.17l7.59-7.59L34 23z"})))};function rI(){return rI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},rI.apply(null,arguments)}var iI,oI,sI,aI=function(e){return Re("svg",rI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),tI||(tI=Re("path",{fill:"currentColor",fillRule:"evenodd",d:"M14.35 24.75H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414M14.35 37.05H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414M14.35 12.45H19v4.65h-4.65zm-1.414-1.414a2 2 0 0 1 1.414-.586H19a2 2 0 0 1 2 2v4.65a2 2 0 0 1-2 2h-4.65a2 2 0 0 1-2-2v-4.65a2 2 0 0 1 .586-1.414m12.007 14.977a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293m0 12.3a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293m0-24.6a1 1 0 0 0-.293.707v.65a1 1 0 0 0 1 1h15a1 1 0 0 0 1-1v-.65a1 1 0 0 0-1-1h-15a1 1 0 0 0-.707.293",clipRule:"evenodd"})))};function lI(){return lI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},lI.apply(null,arguments)}var cI,uI,hI=function(e){return Re("svg",lI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),iI||(iI=Re("path",{fillRule:"evenodd",d:"M37.908 13.418h-5.004v-2.354h-1.766v2.354H21.13v-2.354h-1.766v2.354H14.36a2.07 2.07 0 0 0-2.06 2.06v23.549a2.07 2.07 0 0 0 2.06 2.06h6.77v-1.766h-6.358a.707.707 0 0 1-.706-.706V15.89c0-.39.316-.707.706-.707h4.592v2.355h1.766v-2.355h10.008v2.355h1.766v-2.355h4.592a.71.71 0 0 1 .707.707v6.358h1.765v-6.77c0-1.133-.927-2.06-2.06-2.06"})),oI||(oI=Re("path",{d:"m35.13 37.603 1.237-1.237-3.468-3.475v-5.926h-1.754v6.654l3.984 3.984Z"})),sI||(sI=Re("path",{fillRule:"evenodd",d:"M23.08 36.962a9.678 9.678 0 1 0 17.883-7.408 9.678 9.678 0 0 0-17.882 7.408Zm4.54-10.292a7.924 7.924 0 1 1 8.805 13.177A7.924 7.924 0 0 1 27.62 26.67"})))};function dI(){return dI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dI.apply(null,arguments)}var fI,pI,gI,mI=function(e){return Re("svg",dI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),cI||(cI=Re("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1"})),uI||(uI=Re("path",{d:"M11 22a1 1 0 0 1 1-1h19a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H12a1 1 0 0 1-1-1z"})))};function vI(){return vI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vI.apply(null,arguments)}var yI,bI=function(e){return Re("svg",vI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54},e),fI||(fI=Re("rect",{width:24,height:4,x:15,y:17,rx:1})),pI||(pI=Re("rect",{width:24,height:4,x:15,y:25,rx:1})),gI||(gI=Re("rect",{width:13,height:4,x:15,y:33,rx:1})))};function wI(){return wI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},wI.apply(null,arguments)}var xI,kI=function(e){return Re("svg",wI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),yI||(yI=Re("path",{fill:"#000",fillRule:"evenodd",d:"M4.05 42.132v1.164c0 .693.604 1.254 1.35 1.254h1.35v-2.507h-2.7v.09Zm0-2.328h2.7v-2.328h-2.7zm0-4.656h2.7V32.82h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656h2.7v-2.328h-2.7zm0-4.656v.09h2.7V9.45H5.4c-.746 0-1.35.561-1.35 1.254zm5.4-2.418v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7V9.45zm5.4 0v2.507h2.7v-1.253c0-.693-.604-1.254-1.35-1.254zm2.7 4.746h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656h-2.7v2.328h2.7zm0 4.656v-.09h-2.7v2.508h1.35c.746 0 1.35-.561 1.35-1.254zm-5.4 2.418v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507zm-5.4 0v-2.507h-2.7v2.507z",clipRule:"evenodd"})))};function _I(){return _I=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},_I.apply(null,arguments)}var OI,SI=function(e){return Re("svg",_I({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),xI||(xI=Re("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1M35 28.444h7l-3.5 4zM35 26h7l-3.5-4z"})))};function EI(){return EI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},EI.apply(null,arguments)}var CI,TI=function(e){return Re("svg",EI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),OI||(OI=Re("path",{d:"M27 22c-2.76 0-5 2.24-5 5s2.24 5 5 5 5-2.24 5-5-2.24-5-5-5m0-5c-5.52 0-10 4.48-10 10s4.48 10 10 10 10-4.48 10-10-4.48-10-10-10m0 18a8 8 0 1 1 0-16 8 8 0 1 1 0 16"})))};function AI(){return AI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AI.apply(null,arguments)}var DI,MI=function(e){return Re("svg",AI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),CI||(CI=Re("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1m-12 7h9l-4.5 6z"})))};function FI(){return FI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},FI.apply(null,arguments)}var RI,PI=function(e){return Re("svg",FI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),DI||(DI=Re("path",{fill:"currentColor",d:"M26.293 16.293a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 18.414l-3.293 3.293a1 1 0 0 1-1.414-1.414zM9 26h36v2H9zm13.293 7.707 4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 35.586l-3.293-3.293a1 1 0 0 0-1.414 1.414"})))};function II(){return II=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},II.apply(null,arguments)}var LI,$I=function(e){return Re("svg",II({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),RI||(RI=Re("path",{fill:"currentColor",d:"M9 15v2h36v-2zm0 22v2h36v-2zm17.293-17.707a1 1 0 0 1 1.414 0l4 4a1 1 0 0 1-1.414 1.414L27 21.414l-3.293 3.293a1 1 0 0 1-1.414-1.414zm-4 11.414 4 4a1 1 0 0 0 1.414 0l4-4a1 1 0 0 0-1.414-1.414L27 32.586l-3.293-3.293a1 1 0 0 0-1.414 1.414"})))};function NI(){return NI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},NI.apply(null,arguments)}var jI,BI=function(e){return Re("svg",NI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),LI||(LI=Re("path",{fill:"currentColor",fillRule:"evenodd",d:"M2.7 43.296v1.254c0 .746.604 1.35 1.35 1.35h1.275v-1.795q.074.211.075.445v-1.254h-.075V43.2H4.05c.177 0 .347.034.502.096zm2.7-2.507v-2.507H2.7v2.507zm0-5.014v-2.507H2.7v2.507zm0-5.014v-2.507H2.7v2.507zm0-5.015V23.24H2.7v2.507h2.7Zm0-5.014v-2.507H2.7v2.507zm0-5.014V13.21H2.7v2.507zm-2.7-5.014h1.852a1.4 1.4 0 0 1-.502.096h1.275v-.096H5.4V9.45q0 .235-.075.445V8.1H4.05A1.35 1.35 0 0 0 2.7 9.45zm5.175.096h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1 0h2.55V8.1h-2.55zm5.1-2.7v1.795a1.4 1.4 0 0 1-.075-.445v1.254h.075v.096h1.275a1.4 1.4 0 0 1-.502-.096H51.3V9.45a1.35 1.35 0 0 0-1.35-1.35zm-.075 5.11v2.508h2.7V13.21zm0 5.015v2.507h2.7v-2.507zm0 5.014v2.507h2.7V23.24zm0 5.015v2.507h2.7v-2.507zm0 5.014v2.507h2.7v-2.507zm0 5.014v2.507h2.7v-2.507zm2.7 5.014h-1.852a1.4 1.4 0 0 1 .502-.096h-1.275v.096H48.6v1.254q0-.235.075-.445V45.9h1.275a1.35 1.35 0 0 0 1.35-1.35zm-5.175-.096h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zm-5.1 0h-2.55v2.7h2.55zM16.2 17.55a4.05 4.05 0 0 1 4.05 4.05v1.35A4.05 4.05 0 0 1 16.2 27h-1.35a4.05 4.05 0 0 1-4.05-4.05V21.6a4.05 4.05 0 0 1 4.05-4.05zm0 2.7h-1.35a1.35 1.35 0 0 0-1.35 1.35v1.35c0 .746.604 1.35 1.35 1.35h1.35a1.35 1.35 0 0 0 1.35-1.35V21.6a1.35 1.35 0 0 0-1.35-1.35m27 1.35a4.05 4.05 0 0 0-4.05-4.05H29.7a4.05 4.05 0 0 0-4.05 4.05v1.35A4.05 4.05 0 0 0 29.7 27h9.45a4.05 4.05 0 0 0 4.05-4.05zm-13.5-1.35h9.45c.746 0 1.35.604 1.35 1.35v1.35a1.35 1.35 0 0 1-1.35 1.35H29.7a1.35 1.35 0 0 1-1.35-1.35V21.6c0-.746.604-1.35 1.35-1.35M43.2 37.8a4.05 4.05 0 0 0-4.05-4.05H29.7a4.05 4.05 0 0 0-4.05 4.05v1.35h2.7V37.8c0-.746.604-1.35 1.35-1.35h9.45c.746 0 1.35.604 1.35 1.35v1.35h2.7zm-27-4.05a4.05 4.05 0 0 1 4.05 4.05v1.35h-2.7V37.8a1.35 1.35 0 0 0-1.35-1.35h-1.35a1.35 1.35 0 0 0-1.35 1.35v1.35h-2.7V37.8a4.05 4.05 0 0 1 4.05-4.05z",clipRule:"evenodd"})))};function VI(){return VI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},VI.apply(null,arguments)}var qI,zI=function(e){return Re("svg",VI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),jI||(jI=Re("path",{d:"M20.58 33.77h-3l-1.18-3.08H11l-1.1 3.08H7l5.27-13.54h2.89zm-5-5.36-1.86-5-1.83 5zM22 20.23h5.41a15.5 15.5 0 0 1 2.4.14 3.4 3.4 0 0 1 1.41.55 3.5 3.5 0 0 1 1 1.14 3 3 0 0 1 .42 1.58 3.26 3.26 0 0 1-1.91 2.94 3.63 3.63 0 0 1 1.91 1.22 3.28 3.28 0 0 1 .66 2 4 4 0 0 1-.43 1.8 3.6 3.6 0 0 1-1.09 1.4 3.9 3.9 0 0 1-1.83.65q-.69.07-3.3.09H22zm2.73 2.25v3.13h3.8a1.8 1.8 0 0 0 1.1-.49 1.4 1.4 0 0 0 .41-1 1.5 1.5 0 0 0-.35-1 1.54 1.54 0 0 0-1-.48c-.27 0-1.05-.05-2.34-.05zm0 5.39v3.62h2.57a11.5 11.5 0 0 0 1.88-.09 1.65 1.65 0 0 0 1-.54 1.6 1.6 0 0 0 .38-1.14 1.75 1.75 0 0 0-.29-1 1.7 1.7 0 0 0-.86-.62 9.3 9.3 0 0 0-2.41-.23zm19.62.92 2.65.84a5.94 5.94 0 0 1-2 3.29A5.74 5.74 0 0 1 41.38 34a5.87 5.87 0 0 1-4.44-1.84 7.1 7.1 0 0 1-1.73-5A7.43 7.43 0 0 1 37 21.87 6 6 0 0 1 41.54 20a5.64 5.64 0 0 1 4 1.47A5.33 5.33 0 0 1 47 24l-2.7.65a2.8 2.8 0 0 0-2.86-2.27A3.09 3.09 0 0 0 39 23.42a5.3 5.3 0 0 0-.93 3.5 5.62 5.62 0 0 0 .93 3.65 3 3 0 0 0 2.4 1.09 2.72 2.72 0 0 0 1.82-.66 4 4 0 0 0 1.13-2.21"})))};function HI(){return HI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HI.apply(null,arguments)}var WI,QI=function(e){return Re("svg",HI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),qI||(qI=Re("path",{fill:"currentColor",fillRule:"evenodd",d:"M47.008 12.15c1.625 0 2.942 1.36 2.942 3.039v23.622c0 1.678-1.317 3.039-2.942 3.039H6.992c-1.625 0-2.942-1.36-2.942-3.039V15.189c0-1.678 1.317-3.039 2.942-3.039zm0 2.026H6.992c-.542 0-.98.454-.98 1.013V16.2h-.004v2.7h.003v19.911c0 .56.44 1.013.98 1.013h40.017c.542 0 .98-.453.98-1.013V18.9h.005v-2.7h-.004v-1.011c0-.56-.44-1.013-.98-1.013M14.934 26.055v-3.78h2.194v9.45h-2.194v-3.78h-3.29v3.78H9.45v-9.45h2.194v3.78zm4.388-1.89h2.194v7.56h2.193v-7.56h2.194v-1.89h-6.581zm14.26-1.89h2.193v9.45h-2.194V25.11l-1.645 3.78-1.645-3.78v6.615h-2.194v-9.45h2.194l1.645 3.78zm4.387 0h2.194v7.56h4.387v1.89h-6.581z",clipRule:"evenodd"})))};function UI(){return UI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UI.apply(null,arguments)}var YI,XI=function(e){return Re("svg",UI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),WI||(WI=Re("path",{fill:"currentcolor",fillRule:"evenodd",d:"M12.78 16.2v6.75c0 1.619-.635 3.059-1.618 4.05.983.991 1.618 2.431 1.618 4.05v6.75h3.51v2.7h-3.51c-1.289 0-2.34-1.213-2.34-2.7v-6.75c0-1.487-1.051-2.7-2.34-2.7v-2.7c1.289 0 2.34-1.213 2.34-2.7V16.2c0-1.487 1.051-2.7 2.34-2.7h3.51v2.7zm30.78 0v6.75c0 1.487 1.051 2.7 2.34 2.7v2.7c-1.289 0-2.34 1.213-2.34 2.7v6.75c0 1.487-1.051 2.7-2.34 2.7h-3.51v-2.7h3.51v-6.75c0-1.619.635-3.059 1.618-4.05-.983-.991-1.618-2.431-1.618-4.05V16.2h-3.51v-2.7h3.51c1.289 0 2.34 1.213 2.34 2.7M21.8 34.531q.7-.569.959-1.758l1.788-8.34h1.585l.387-1.828h-1.585l.405-1.878h1.585l.387-1.827H25.69q-1.271 0-1.972.569-.681.569-.94 1.758l-.294 1.378H21.34l-.387 1.827h1.142l-1.898 8.841h-1.585l-.387 1.827h1.622q1.272 0 1.953-.569m7.248-7.686-3.797 4.808h2.599l2.12-3.016h.22l.885 3.016h2.599l-1.677-4.36 3.778-4.688h-2.599l-2.12 2.947h-.22l-.885-2.947h-2.599z",clipRule:"evenodd"})))};function ZI(){return ZI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ZI.apply(null,arguments)}var GI,KI=function(e){return Re("svg",ZI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),YI||(YI=Re("path",{fillRule:"evenodd",d:"M45 16a3 3 0 0 1 3 3v16a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V19a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v16a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V19a1 1 0 0 0-1-1m-32 4v10h-2V22z"})))};function JI(){return JI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},JI.apply(null,arguments)}var eL,tL=function(e){return Re("svg",JI({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),GI||(GI=Re("path",{fillRule:"evenodd",d:"M45 13a3 3 0 0 1 3 3v22a3 3 0 0 1-3 3H9a3 3 0 0 1-3-3V16a3 3 0 0 1 3-3zm0 2H9a1 1 0 0 0-1 1v22a1 1 0 0 0 1 1h36a1 1 0 0 0 1-1V16a1 1 0 0 0-1-1m-1.136 15.5.849.849-6.364 6.364-.849-.849zm.264 3.5.849.849-2.828 2.828-.849-.849zM13 19v10h-2V19z"})))};function nL(){return nL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},nL.apply(null,arguments)}var rL,iL,oL=function(e){return Re("svg",nL({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),eL||(eL=Re("path",{fill:"currentColor",fillRule:"evenodd",d:"M45.658 9.45c1.625 0 2.942 1.36 2.942 3.039V22.95h-1.961v-4.383H7.36V41.51c0 .56.44 1.013.98 1.013H27v2.026H8.342c-1.625 0-2.942-1.36-2.942-3.039V12.489c0-1.678 1.317-3.039 2.942-3.039zm0 2.026H8.342c-.542 0-.98.454-.98 1.013v4.052h39.277v-4.052c0-.56-.44-1.013-.98-1.013ZM31.05 35.775A8.77 8.77 0 0 1 39.825 27a8.77 8.77 0 0 1 8.775 8.775 8.77 8.77 0 0 1-8.775 8.775 8.77 8.77 0 0 1-8.775-8.775m12.388-.516h3.097c-.206-2.581-1.858-4.646-4.026-5.678.62 1.548.93 3.613.93 5.678Zm-5.162 2.065c.207 3.303 1.136 4.955 1.549 5.161.413-.206 1.239-1.858 1.445-5.161zm1.446-8.26c-.31.207-1.342 2.272-1.446 6.195h2.994c-.103-3.923-1.135-5.988-1.548-6.194Zm-3.51 6.195c.103-2.065.31-4.13.929-5.678-2.168 1.032-3.82 3.097-4.026 5.678zm0 2.065h-2.89c.515 2.064 1.96 3.82 3.819 4.645-.516-1.342-.826-2.994-.93-4.645Zm7.226 0q-.155 2.632-.929 4.645c1.858-.826 3.304-2.58 3.923-4.645z",clipRule:"evenodd"})))};function sL(){return sL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sL.apply(null,arguments)}var aL,lL=function(e){return Re("svg",sL({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"currentcolor"},e),rL||(rL=Re("path",{fillRule:"evenodd",d:"M34.636 21.91A3.818 3.818 0 1 1 27 21.908a3.818 3.818 0 0 1 7.636 0Zm-2 0A1.818 1.818 0 1 1 29 21.908a1.818 1.818 0 0 1 3.636 0Z",clipRule:"evenodd"})),iL||(iL=Re("path",{fillRule:"evenodd",d:"M15 13a2 2 0 0 0-2 2v24a2 2 0 0 0 2 2h24a2 2 0 0 0 2-2V15a2 2 0 0 0-2-2zm24 2H15v12.45l4.71-4.709a1.91 1.91 0 0 1 2.702 0l6.695 6.695 2.656-1.77a1.91 1.91 0 0 1 2.411.239L39 32.73zM15 39v-8.754a1 1 0 0 0 .168-.135l5.893-5.893 6.684 6.685a1.91 1.91 0 0 0 2.41.238l2.657-1.77 6.02 6.02q.078.077.168.135V39z",clipRule:"evenodd"})))};function cL(){return cL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cL.apply(null,arguments)}var uL,hL=function(e){return Re("svg",cL({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 54 54"},e),aL||(aL=Re("path",{fill:"currentcolor",fillRule:"evenodd",d:"M42.545 12.273A2.455 2.455 0 0 1 45 14.727v24.546a2.455 2.455 0 0 1-2.455 2.454h-31.09A2.455 2.455 0 0 1 9 39.273V14.727a2.455 2.455 0 0 1 2.455-2.454zM27.818 40.09h14.727a.82.82 0 0 0 .819-.818v-4.91H27.818Zm-1.636-5.727v5.727H11.455a.82.82 0 0 1-.819-.818v-4.91zm1.636-1.637h15.546V27H27.818ZM26.182 27v5.727H10.636V27zm1.636-1.636h15.546v-5.728H27.818Zm-1.636-5.728v5.728H10.636v-5.728z",clipRule:"evenodd"})))};function dL(){return dL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},dL.apply(null,arguments)}var fL=function(e){return Re("svg",dL({xmlns:"http://www.w3.org/2000/svg",width:54,height:54,fill:"none"},e),uL||(uL=Re("path",{fill:"currentcolor",fillRule:"evenodd",d:"M17.55 41.175H27v2.362h-9.45a2.37 2.37 0 0 1-2.363-2.362v-28.35a2.37 2.37 0 0 1 2.363-2.363h11.813a1.07 1.07 0 0 1 .826.355l8.27 8.269a1.07 1.07 0 0 1 .353.826v5.907H36.45v-3.544h-7.088A2.37 2.37 0 0 1 27 19.912v-7.087h-9.45zm18.427-21.263-6.614-6.615v6.615zm4.253 18.664 3.308 3.308-1.654 1.653-3.308-3.307a6.35 6.35 0 0 1-3.307.945c-3.308 0-5.906-2.599-5.906-5.906 0-3.308 2.598-5.907 5.906-5.907s5.906 2.6 5.906 5.907a6.35 6.35 0 0 1-.945 3.307m-4.961-6.851c-2.008 0-3.544 1.536-3.544 3.544s1.536 3.543 3.544 3.543 3.544-1.535 3.544-3.543-1.536-3.544-3.544-3.544",clipRule:"evenodd"})))};const pL=e=>({button:JP,checkbox:nI,checklist:aI,columns:kI,datetime:hI,group:kI,iframe:oL,image:lL,number:SI,expression:XI,radio:TI,select:MI,separator:PI,spacer:$I,dynamiclist:BI,taglist:mI,text:zI,html:QI,textfield:KI,textarea:tL,table:hL,filepicker:fL,default:bI}[e]),gL="image";function mL(e){const{field:t}=e,{alt:n,id:r,source:i}=t,o=pL(t.type),s=PR(i,{debug:!0}),a=Ot((()=>iP(s)),[s]),l=PR(n,{debug:!0}),{formId:c}=Et(WF);return it("div",{class:NF(gL),children:[a&&it("div",{class:"fjs-image-container",children:it("img",{alt:l,src:a,class:"fjs-image",id:VF(r,c)})}),!a&&it("div",{class:"fjs-image-placeholder",children:it("span",{class:"fjs-image-placeholder-inner",children:it(o,{alt:"This is an image placeholder",width:"32",height:"32",viewBox:"0 0 56 56"})})})]})}function vL(e){const{pre:t,post:n}=e,r=PR(t,{debug:!0}),i=PR(n,{debug:!0});return it(IP,{...e,pre:r,post:i})}var yL;function bL(){return bL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},bL.apply(null,arguments)}mL.config={type:gL,keyed:!1,name:"Image view",group:"presentation",create:(e={})=>e,getSubheading:e=>e.alt};var wL,xL=function(e){return Re("svg",bL({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),yL||(yL=Re("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M7.75 1.336 4 6.125.258 1.335 0 1.54l4 5.125L8 1.54Zm0 0",clipRule:"evenodd"})))};function kL(){return kL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},kL.apply(null,arguments)}var _L=function(e){return Re("svg",kL({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),wL||(wL=Re("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M7.75 6.664 4 1.875.258 6.665 0 6.46l4-5.125L8 6.46Zm0 0",clipRule:"evenodd"})))};function OL(e){const t=Oe(e);return t.toString()===t.toFixed(0)?0:t.toFixed().split(".")[1].length||0}function SL(e){return("number"===typeof e||"string"===typeof e)&&""!==e&&!isNaN(Number(e))}function EL(e,t,n,r,i){if("NaN"===t)return!1;t=t.replace(",",".");const o=!t.includes(".")&&("."===e||","===e),s=!t.includes("-")&&"-"===e&&0===n,a=/^[0-9]$/i.test(e),l=void 0===t?-1:t.indexOf("."),c="number"===typeof i&&0===r&&-1!==l&&t.includes(".")&&t.split(".")[1].length>=i&&n>l,u=a||0!==i&&o||s;return u&&!c}function CL(e){return void 0===e||null===e||""===e}const TL="number";function AL(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,value:a,readonly:l}=e,{description:c,label:u,appearance:h={},validate:d={},decimalDigits:f,increment:p}=s,{prefixAdorner:g,suffixAdorner:m}=h,{required:v}=d,y=_t(),[b,w]=bt(a),[x,k]=bt(a),_=St((e=>AL.config.sanitizeValue({value:e,formField:s})),[s]),[O,S]=FR(e.onChange),E=MR(a);E!==b&&O({field:s,value:b});const C=()=>{S&&S(),i&&i()},T=()=>{o&&o()},A=St((e=>{if(CL(e))return k(""),void w(null);if(e=e.replaceAll(",","."),"-"!==e){if(isNaN(Number(e)))return k("NaN"),void w(null);k(e),w(_(e))}else k("-")}),[_]),D=MR(a),M=D!=a,F=_(a)===_(b);M&&!F&&A(a&&a.toString()||"");const R=Ot((()=>Oe(p||(f?`1e-${f}`:"1"))),[f,p]),P=()=>{if(l)return;const e=SL(b)?Oe(b):Oe(0),t=e.minus(e.mod(R));A(t.plus(R).toFixed())},I=()=>{if(l)return;const e=SL(b)?Oe(b):Oe(0),t=e.mod(R);if(0===t.cmp(0))A(e.minus(R).toFixed());else{const t=e.minus(e.mod(R));A(t.toFixed())}},L=e=>"NaN"!==x||"Backspace"!==e.code&&"Delete"!==e.code?"ArrowUp"===e.code?(P(),void e.preventDefault()):"ArrowDown"===e.code?(I(),void e.preventDefault()):void 0:(A(""),void e.preventDefault()),$=e=>{const t=y.current.selectionStart,n=y.current.selectionStart-y.current.selectionEnd,r=y.current.value;EL(e.key,r,t,n,f)||e.preventDefault()},N=`${r}-description`,j=`${r}-error-message`;return it("div",{class:NF(TL,{errors:n,disabled:t,readonly:l}),children:[it(fP,{htmlFor:r,label:u,required:v}),it(vL,{disabled:t,readonly:l,pre:g,post:m,children:it("div",{class:Ee()("fjs-vertical-group",{"fjs-disabled":t,"fjs-readonly":l},{hasErrors:n.length}),children:[it("input",{ref:y,class:"fjs-input",disabled:t,readOnly:l,id:r,onKeyDown:L,onKeyPress:$,onBlur:C,onFocus:T,onInput:e=>A(e.target.value,!0),onPaste:e=>"NaN"===x&&e.preventDefault(),type:"text",autoComplete:"off",step:R,value:x,"aria-describedby":[N,j].join(" "),required:v,"aria-invalid":n.length>0}),it("div",{class:Ee()("fjs-number-arrow-container",{"fjs-disabled":t,"fjs-readonly":l}),children:[it("button",{type:"button",class:"fjs-number-arrow-up","aria-label":"Increment",onClick:()=>P(),tabIndex:-1,children:it(_L,{})}),it("div",{class:"fjs-number-arrow-separator"}),it("button",{type:"button",class:"fjs-number-arrow-down","aria-label":"Decrement",onClick:()=>I(),tabIndex:-1,children:it(xL,{})})]})]})}),it(hP,{id:N,description:c}),it(dP,{id:j,errors:n})]})}AL.config={type:TL,keyed:!0,name:"Number",group:"basic-input",emptyValue:null,sanitizeValue:({value:e,formField:t})=>CL(e)||!SL(e)?null:t.serializeToString?e.toString():Number(e),create:(e={})=>({label:"Number",...e})};const DL="radio";function ML(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l}=e,{description:c,label:u,validate:h={}}=s,d=_t(),{required:f}=h,p=t=>{e.onChange({value:t})},g=e=>{d.current.contains(e.relatedTarget)||i&&i()},m=e=>{d.current.contains(e.relatedTarget)||o&&o()},{loadState:v,options:y}=cR(s);aP({field:s,loadState:v,options:y,value:l,onChange:e.onChange});const b=`${r}-description`,w=`${r}-error-message`;return it("div",{class:NF(DL,{errors:n,disabled:t,readonly:a}),ref:d,children:[it(fP,{label:u,required:f}),v==lR.LOADED&&y.map(((e,i)=>{const o=`${r}-${i}`,s=It()(e.value,l);return it("div",{className:Ee()("fjs-inline-label",{"fjs-checked":s}),children:[it("input",{checked:s,class:"fjs-input",disabled:t,readOnly:a,name:r,id:o,type:"radio",onClick:()=>p(e.value),onBlur:g,onFocus:m,"aria-describedby":[b,w].join(" "),required:f,"aria-invalid":n.length>0}),it(fP,{htmlFor:o,label:e.label,class:Ee()({"fjs-checked":s}),required:!1})]},e.value)})),it(hP,{id:b,description:c}),it(dP,{id:w,errors:n})]})}var FL;function RL(){return RL=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},RL.apply(null,arguments)}ML.config={type:DL,keyed:!0,name:"Radio group",group:"selection",emptyValue:null,sanitizeValue:nP,create:(e={})=>({label:"Radio group",...tR(e)})};var PL=function(e){return Re("svg",RL({xmlns:"http://www.w3.org/2000/svg",width:8,height:8},e),FL||(FL=Re("path",{fill:"currentColor",fillRule:"evenodd",stroke:"currentColor",strokeWidth:.5,d:"M4 3.766 7.43.336l.234.234L4.234 4l3.43 3.43-.234.234L4 4.234.57 7.664.336 7.43 3.766 4 .336.57.57.336Zm0 0",clipRule:"evenodd"})))};function IL(e){const{domId:t,disabled:n,errors:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l}=e,[c,u]=bt(""),[h,d]=bt(!1),[f,p]=bt(!0),[g,m]=bt(!1),v=_t(),y=QF("eventBus"),{loadState:b,options:w}=cR(s);aP({field:s,loadState:b,options:w,value:l,onChange:e.onChange});const x=gR(w),k=Ot((()=>l&&x(l)),[l,x]);xt((()=>{u(k||"")}),[k]);const _=Ot((()=>b!==lR.LOADED?[]:c&&f?w.filter((e=>e.label&&e.value&&e.label.toLowerCase().includes(c.toLowerCase()))):w),[c,b,w,f]),O=St((t=>{u(t&&t.label||""),e.onChange({value:t&&t.value||null})}),[e]),S=Ot((()=>{const e={};return e.componentReady=!n&&!a&&b===lR.LOADED,e.displayCross=e.componentReady&&null!==l&&void 0!==l,e.displayDropdown=!n&&!a&&h&&!g,e}),[n,h,g,b,a,l]),E=St((e=>{m(!1),d(!h);const t=v.current;h?t.blur():t.focus(),e.preventDefault()}),[h]),C=({target:e})=>{m(!1),d(!0),p(!0),u(e.value||""),y.fire("formField.search",{formField:s,value:e.value||""})},T=St((e=>{switch(e.key){case"ArrowUp":e.preventDefault();break;case"ArrowDown":h||(d(!0),p(!1)),e.preventDefault();break;case"Escape":m(!0);break;case"Enter":g&&m(!1);break}}),[h,g]),A=St((()=>{m(!1),d(!0),p(!1)}),[]),D=St((()=>{m(!1),d(!0),o&&o()}),[o]),M=St((()=>{d(!1),u(k||""),i&&i()}),[i,k]);return it(Ie,{children:[it("div",{class:Ee()("fjs-input-group",{disabled:n,readonly:a},{hasErrors:r.length}),children:[it("input",{disabled:n,readOnly:a,class:"fjs-input",ref:v,id:t,onChange:C,type:"text",value:c,placeholder:"Search",autoComplete:"off",onKeyDown:T,onMouseDown:A,onFocus:D,onBlur:M,"aria-describedby":e["aria-describedby"]}),S.displayCross&&it("span",{class:"fjs-select-cross",onMouseDown:e=>{O(null),e.preventDefault()},children:[it(PL,{})," "]}),it("span",{class:"fjs-select-arrow",onMouseDown:e=>E(e),children:S.displayDropdown?it(_L,{}):it(xL,{})})]}),it("div",{class:"fjs-select-anchor",children:S.displayDropdown&&it(VP,{values:_,getLabel:e=>e.label,onValueSelected:e=>{O(e),d(!1)},listenerElement:v.current})})]})}function LL(e){const{domId:t,disabled:n,errors:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l}=e,[c,u]=bt(!1),h=_t(),d=_t(),{loadState:f,options:p}=cR(s);aP({field:s,loadState:f,options:p,value:l,onChange:e.onChange});const g=gR(p),m=Ot((()=>l&&g(l)),[l,g]),v=St((t=>{e.onChange({value:t&&t.value||null})}),[e]),y=Ot((()=>{const e={};return e.componentReady=!n&&!a&&f===lR.LOADED,e.displayCross=e.componentReady&&null!==l&&void 0!==l,e.displayDropdown=!n&&!a&&c,e}),[n,c,f,a,l]),b=St((e=>{const t=d.current;!n&&t&&(u(!c),c?t.blur():t.focus(),e.preventDefault())}),[n,c]),w=Ot((()=>l&&A(p,(e=>e.value===l))||0),[p,l]),x=St((()=>{a||(u(!0),o&&o())}),[o,a]),k=St((()=>{a||(u(!1),i&&i())}),[i,a]);return it(Ie,{children:[it("div",{ref:h,class:Ee()("fjs-input-group",{disabled:n,readonly:a},{hasErrors:r.length}),onFocus:x,onBlur:k,onMouseDown:b,children:[it("div",{class:Ee()("fjs-select-display",{"fjs-select-placeholder":!l}),id:`${t}-display`,children:m||"Select"}),!n&&it("input",{ref:d,id:t,class:"fjs-select-hidden-input",value:m,onFocus:x,onBlur:k,"aria-describedby":e["aria-describedby"]}),y.displayCross&&it("span",{class:"fjs-select-cross",onMouseDown:e=>{v(null),e.stopPropagation()},children:it(PL,{})}),it("span",{class:"fjs-select-arrow",children:y.displayDropdown?it(_L,{}):it(xL,{})})]}),it("div",{class:"fjs-select-anchor",children:y.displayDropdown&&it(VP,{values:p,getLabel:e=>e.label,initialFocusIndex:w,onValueSelected:e=>{v(e),u(!1)},listenerElement:h.current})})]})}const $L="select";function NL(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,onChange:a,readonly:l,value:c}=e,{description:u,label:h,searchable:d=!1,validate:f={}}=s,{required:p}=f,g=`${r}-description`,m=`${r}-error-message`,v={domId:r,disabled:t,errors:n,onBlur:i,onFocus:o,field:s,value:c,onChange:a,readonly:l,required:p,"aria-invalid":n.length>0,"aria-describedby":[g,m].join(" ")};return it("div",{class:NF($L,{errors:n,disabled:t,readonly:l}),onKeyDown:e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation())},children:[it(fP,{htmlFor:r,label:h,required:p}),it(d?IL:LL,{...v}),it(hP,{id:g,description:u}),it(dP,{id:m,errors:n})]})}NL.config={type:$L,keyed:!0,name:"Select",group:"selection",emptyValue:null,sanitizeValue:nP,create:(e={})=>({label:"Select",...tR(e)})};const jL="separator";function BL(){return it("div",{class:NF(jL),children:it("hr",{})})}BL.config={type:jL,keyed:!1,name:"Separator",group:"presentation",create:(e={})=>({...e})};const VL="spacer";function qL(e){const{field:t}=e,{height:n=60}=t;return it("div",{class:NF(VL),style:{height:n}})}function zL(e){const{field:t,domId:n,readonly:r}=e,{label:i,type:o,showOutline:s}=t,{Empty:a}=Et(qF),l={...e,Empty:a};return it("div",{className:Ee()(NF(o,{readonly:r}),"fjs-form-field-grouplike",{"fjs-outlined":s}),role:"group","aria-labelledby":n,children:[it(fP,{id:n,label:i}),it(xP,{...l})]})}function HL(e){const{className:t,label:n,onSkip:r}=e,i=St((e=>{"Enter"===e.key&&(e.preventDefault(),e.stopPropagation(),r())}),[r]);return it("a",{href:"#",class:Ee()("fjs-skip-link",t),onKeyDown:i,children:n})}qL.config={type:VL,keyed:!1,name:"Spacer",group:"presentation",create:(e={})=>({height:60,...e})},zL.config={type:"dynamiclist",pathed:!0,repeatable:!0,name:"Dynamic list",group:"container",create:(e={})=>({label:"Dynamic list",components:[],showOutline:!0,isRepeating:!0,allowAddRemove:!0,defaultRepetitions:1,...e})};const WL="taglist";function QL(e){const{disabled:t,errors:n=[],onFocus:r,domId:i,onBlur:o,field:s,readonly:a,value:l}=e,{description:c,label:u,validate:h={}}=s,{required:d}=h,[f,p]=bt(""),[g,m]=bt(!1),[v,y]=bt(!1),b=_t(),w=_t(),x=QF("eventBus"),{loadState:k,options:_}=cR(s),O=aR(l||[]);lP({field:s,loadState:k,options:_,values:O,onChange:e.onChange});const S=gR(_),E=Ot((()=>_.length>O.length),[_.length,O.length]),C=Ot((()=>{if(k!==lR.LOADED)return[];const e=e=>{const t=e.label.toLowerCase().includes(f.toLowerCase());return t&&!tP(e.value,O)};return _.filter(e)}),[f,_,O,k]),T=t=>{p(""),O.at(-1)!==t&&e.onChange({value:[...O,t]})},A=t=>{const n=O.filter((e=>!It()(e,t)));e.onChange({value:n})},D=({target:e})=>{y(!1),p(e.value||""),x.fire("formField.search",{formField:s,value:e.value||""})},M=e=>{switch(e.key){case"ArrowUp":case"ArrowDown":e.preventDefault();break;case"Backspace":!f&&O.length&&A(O[O.length-1]);break;case"Escape":y(!0);break;case"Enter":v&&y(!1);break}},F=e=>{b.current.contains(e.relatedTarget)||o&&o()},R=e=>{b.current.contains(e.relatedTarget)||r&&r()},P=e=>{a||(m(!1),p("")),F(e)},I=e=>{a||m(!0),R(e)},L=(e,t)=>{const{target:n}=e;A(t);const r=n.closest(".fjs-taglist-tag").nextSibling;r||w.current.focus()},$=()=>{w.current.focus()},N=Ot((()=>!t&&k===lR.LOADED&&g&&!v),[t,g,v,k]),j=`${i}-description`,B=`${i}-error-message`;return it("div",{ref:b,class:NF(WL,{errors:n,disabled:t,readonly:a}),onKeyDown:e=>{"Enter"===e.key&&(e.stopPropagation(),e.preventDefault())},children:[it(fP,{label:u,required:d,htmlFor:i}),!t&&!a&&!!O.length&&it(HL,{className:"fjs-taglist-skip-link",label:"Skip to search",onSkip:$}),it("div",{class:Ee()("fjs-taglist",{"fjs-disabled":t,"fjs-readonly":a}),children:[k===lR.LOADED&&it("div",{class:"fjs-taglist-tags",children:O.map((e=>it("div",{class:Ee()("fjs-taglist-tag",{"fjs-disabled":t,"fjs-readonly":a}),onMouseDown:e=>e.preventDefault(),children:[it("span",{class:"fjs-taglist-tag-label",children:S(e)}),!t&&!a&&it("button",{type:"button",title:"Remove tag",class:"fjs-taglist-tag-remove",onFocus:R,onBlur:F,onClick:t=>L(t,e),children:it(PL,{})})]})))}),it("input",{disabled:t,readOnly:a,class:"fjs-taglist-input",ref:w,id:i,onChange:D,type:"text",value:f,placeholder:t||a?void 0:"Search",autoComplete:"off",onKeyDown:M,onMouseDown:()=>y(!1),onFocus:I,onBlur:P,"aria-describedby":[j,B].join(" "),required:d,"aria-invalid":n.length>0})]}),it("div",{class:"fjs-taglist-anchor",children:N&&it(VP,{values:C,getLabel:e=>e.label,onValueSelected:e=>T(e.value),emptyListMessage:E?"No results":"All values selected",listenerElement:w.current})}),it(hP,{id:j,description:c}),it(dP,{id:B,errors:n})]})}QL.config={type:WL,keyed:!0,name:"Tag list",group:"selection",emptyValue:[],sanitizeValue:rP,create:(e={})=>({label:"Tag list",...tR(e)})};const UL=3,YL=1,XL=["h1","h2","h3","h4","h5","h6","span","em","a","p","div","ul","ol","li","hr","blockquote","img","pre","code","br","strong","table","thead","tbody","tr","th","td"],ZL=["align","alt","class","href","id","name","rel","target","src"],GL=/^(?:(?:(?:f|ht)tps?|mailto|tel|callto|cid|xmpp):|[^a-z]|[a-z+.\-]+(?:[^a-z+.\-:]|$))/i,KL=/[\u0000-\u0020\u00A0\u1680\u180E\u2000-\u2029\u205F\u3000]/g,JL=document.createElement("form");function e$(e){const t=(new DOMParser).parseFromString(`<!DOCTYPE html>\n<html><body><div>${e}`,"text/html");t.normalize();const n=t.body.firstChild;return n?(t$(n),n.innerHTML):""}function t$(e){if(e.nodeType===UL)return;if(e.nodeType!==YL)return e.remove();const t=e.tagName.toLowerCase();if(!XL.includes(t))return e.remove();const n=e.attributes;for(let r=n.length;r--;){const i=n[r],o=i.name,s=o.toLowerCase(),a=i.value.trim();e.removeAttribute(o);const l=n$(t,s,a);l&&e.setAttribute(o,a)}"a"===t&&"_blank"===e.getAttribute("target")&&"noopener"!==e.getAttribute("rel")&&e.setAttribute("rel","noopener");for(let r=e.childNodes.length;r--;)t$(e.childNodes[r])}function n$(e,t,n){return!!ZL.includes(t)&&(("id"!==t&&"name"!==t||!(n in document)&&!(n in JL))&&(("target"!==t||"_blank"===n)&&!("href"===t&&!GL.test(n.replace(KL,"")))))}const r$="text";function i$(e){const t=QF("form"),{textLinkTarget:n}=t._getState().properties,{field:r,disableLinks:i}=e,{text:o="",strict:s=!1}=r,a=QF("markdownRenderer"),l=RR(o,{debug:!0,strict:s}),c=Ot((()=>a.render(l)),[a,l]),u=St((e=>{const t=e$(e),r=document.createElement("div");r.innerHTML=t;const o=r.querySelectorAll("a");return o.forEach((e=>{i&&(e.setAttribute("class","fjs-disabled-link"),e.setAttribute("tabIndex","-1")),n&&e.setAttribute("target",n)})),r.innerHTML}),[i,n]),h=dR({html:c,transform:u,sanitize:!1,sanitizeStyleTags:!1});return it("div",{class:NF(r$),dangerouslySetInnerHTML:h})}i$.config={type:r$,keyed:!1,name:"Text view",group:"presentation",create:(e={})=>({text:"# Text",...e}),getSubheading:e=>{BF(e.text)}};const o$="html";function s$(e){const t=QF("form"),{textLinkTarget:n}=t._getState().properties,{field:r,disableLinks:i,domId:o}=e,{content:s="",strict:a=!1}=r,l=`${o}-style-scope`,c=RR(s,{debug:!0,strict:a,sanitizer:sP}),u=St((e=>{const t=document.createElement("div");t.innerHTML=e;const r=t.querySelectorAll("a");return r.forEach((e=>{i&&(e.setAttribute("class","fjs-disabled-link"),e.setAttribute("tabIndex","-1")),n&&e.setAttribute("target",n)})),vR(t,`.${l}`),t.innerHTML}),[i,l,n]),h=dR({html:c,transform:u,sanitize:!0,sanitizeStyleTags:!1});return it("div",{class:Ee()(NF(o$),l),dangerouslySetInnerHTML:h})}s$.config={type:o$,keyed:!1,name:"HTML view",group:"presentation",create:(e={})=>({content:"",...e})};const a$="expression";function l$(e){const{field:t,onChange:n,value:r}=e,{computeOn:i,expression:o}=t,s=sR(o),a=aR(s),l=QF("eventBus"),c=QF("expressionLoopPreventer"),u=St((()=>{n&&n({field:t,value:a,shouldNotRecompute:!0})}),[t,a,n]);return xt((()=>{"change"===i&&!(0,uc.isEqual)(a,r)&&c.registerExpressionExecution(this)&&u()})),xt((()=>{if("presubmit"===i)return l.on("presubmit",u),()=>l.off("presubmit",u)}),[i,u,l]),null}l$.config={type:a$,name:"Expression",group:"basic-input",keyed:!0,emptyValue:null,escapeGridRender:!0,create:(e={})=>({computeOn:"change",...e})};const c$="textfield";function u$(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l=""}=e,{description:c,label:u,appearance:h={},validate:d={}}=s,{prefixAdorner:f,suffixAdorner:p}=h,{required:g}=d,[m,v]=FR((({target:t})=>{e.onChange({value:t.value})})),y=()=>{v&&v(),i&&i()},b=()=>{o&&o()},w=`${r}-description`,x=`${r}-error-message`;return it("div",{class:NF(c$,{errors:n,disabled:t,readonly:a}),children:[it(fP,{htmlFor:r,label:u,required:g}),it(vL,{disabled:t,readonly:a,pre:f,post:p,children:it("input",{class:"fjs-input",disabled:t,readOnly:a,id:r,onInput:m,onBlur:y,onFocus:b,type:"text",value:l,"aria-describedby":[w,x].join(" "),required:g,"aria-invalid":n.length>0})}),it(hP,{id:w,description:c}),it(dP,{id:x,errors:n})]})}u$.config={type:c$,keyed:!0,name:"Text field",group:"basic-input",emptyValue:"",sanitizeValue:({value:e})=>x(e)||k(e)||w(e)?"":"string"===typeof e?e.replace(/[\r\n\t]/g," "):String(e),create:(e={})=>({label:"Text field",...e})};const h$="textarea";function d$(e){const{disabled:t,errors:n=[],domId:r,onBlur:i,onFocus:o,field:s,readonly:a,value:l=""}=e,{description:c,label:u,validate:h={}}=s,{required:d}=h,f=_t(),[p,g]=FR((({target:t})=>{e.onChange({value:t.value})})),m=()=>{g&&g(),i&&i()},v=()=>{o&&o()},y=e=>{p({target:e.target}),f$(f.current)};kt((()=>{f$(f.current)}),[l]),xt((()=>{f$(f.current)}),[]);const b=`${r}-description`,w=`${r}-error-message`;return it("div",{class:NF(h$,{errors:n,disabled:t,readonly:a}),children:[it(fP,{htmlFor:r,label:u,required:d}),it("textarea",{class:"fjs-textarea",disabled:t,readonly:a,id:r,onInput:y,onBlur:m,onFocus:v,value:l,ref:f,"aria-describedby":[b,w].join(" "),required:d,"aria-invalid":n.length>0}),it(hP,{id:b,description:c}),it(dP,{id:w,errors:n})]})}d$.config={type:h$,keyed:!0,name:"Text area",group:"basic-input",emptyValue:"",sanitizeValue:({value:e})=>x(e)||k(e)||w(e)?"":String(e),create:(e={})=>({label:"Text area",...e})};const f$=e=>{e.style.height="0px";const t=window.getComputedStyle(e),n=()=>{const n=parseInt(t.getPropertyValue("line-height").replace("px",""))||0,r=e.value?e.value.toString().split("\n").length:0;return r*n},r=parseInt(t.getPropertyValue("border-top-width"))+parseInt(t.getPropertyValue("padding-top"))+(e.scrollHeight||n())+parseInt(t.getPropertyValue("padding-bottom"))+parseInt(t.getPropertyValue("border-bottom-width")),i=75,o=350,s=Math.max(Math.min(r||0,o),i);e.style.height=`${s}px`,e.style.overflow=r>o?"visible":"hidden"};var p$;function g$(){return g$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g$.apply(null,arguments)}var m$,v$=function(e){return Re("svg",g$({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),p$||(p$=Re("path",{fill:"currentcolor",d:"M24.59 16.59 17 24.17V4h-2v20.17l-7.59-7.58L6 18l10 10 10-10z"})))};function y$(){return y$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y$.apply(null,arguments)}var b$,w$=function(e){return Re("svg",y$({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"},e),m$||(m$=Re("path",{fill:"currentcolor",d:"M16 4 6 14l1.41 1.41L15 7.83V28h2V7.83l7.59 7.58L26 14z"})))};function x$(){return x$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},x$.apply(null,arguments)}var k$,_$=function(e){return Re("svg",x$({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 32 32"},e),b$||(b$=Re("path",{fill:"currentcolor",d:"m20 24-10-8 10-8z"})))};function O$(){return O$=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},O$.apply(null,arguments)}var S$=function(e){return Re("svg",O$({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",viewBox:"0 0 32 32"},e),k$||(k$=Re("path",{fill:"currentcolor",d:"m12 8 10 8-10 8z"})))};const E$="table";function C$(e){const{field:t}=e,{columns:n=[],columnsExpression:r,dataSource:i="",rowCount:o,id:s,label:a}=t,[l,c]=bt(null),u=T$(r||"",n),h=u.map((({key:e})=>e)),d=sR(i),f=Array.isArray(d)?d.filter((e=>void 0!==e)):[],p=null===l?f:M$(f,l.key,l.direction),g=_(o)?D$(p,o):[p],[m,v]=bt(0),y=g[m]||[];xt((()=>{v(0)}),[o,l]);const b=e=>null!==e&&"object"===typeof e?JSON.stringify(e):e;function w(e){c((t=>null===t||t.key!==e?{key:e,direction:"asc"}:"desc"===t.direction?null:{key:e,direction:"desc"}))}return it("div",{class:NF(E$),children:[it(fP,{htmlFor:VF(s),label:a}),it("div",{class:Ee()("fjs-table-middle-container",{"fjs-table-empty":0===u.length}),children:[0===u.length?"Nothing to show.":it("div",{class:"fjs-table-inner-container",children:it("table",{class:"fjs-table",id:VF(s),children:[it("thead",{class:"fjs-table-head",children:it("tr",{class:"fjs-table-tr",children:u.map((({key:e,label:t})=>{const n=t||e;return it("th",{tabIndex:0,class:"fjs-table-th",onClick:()=>{w(e)},onKeyDown:t=>{["Enter","Space"].includes(t.code)&&w(e)},"aria-label":F$(l,e,n),children:it("span",{class:"fjs-table-th-label",children:[n,null!==l&&l.key===e?it(Ie,{children:"asc"===l.direction?it(w$,{class:"fjs-table-sort-icon-asc"}):it(v$,{class:"fjs-table-sort-icon-desc"})}):null]})},e)}))})}),0===y.length?it("tbody",{class:"fjs-table-body",children:it("tr",{class:"fjs-table-tr",children:it("td",{class:"fjs-table-td",colSpan:u.length,children:"Nothing to show."})})}):it("tbody",{class:"fjs-table-body",children:y.map(((e,t)=>it("tr",{class:"fjs-table-tr",children:h.map((t=>it("td",{class:"fjs-table-td",children:b(e[t])},t)))},t)))})]})}),_(o)&&g.length>1&&u.length>0?it("nav",{class:"fjs-table-nav",children:[it("span",{class:"fjs-table-nav-label",children:[m+1," of ",g.length]}),it("button",{type:"button",class:"fjs-table-nav-button",onClick:()=>{v((e=>Math.max(e-1,0)))},disabled:0===m,"aria-label":"Previous page",children:it(_$,{})}),it("button",{type:"button",class:"fjs-table-nav-button",onClick:()=>{v((e=>Math.min(e+1,g.length-1)))},disabled:m>=g.length-1,"aria-label":"Next page",children:it(S$,{})})]}):null]})]})}function T$(e,t){const n=sR(e||"");return Array.isArray(n)&&n.every(A$)?n:t}function A$(e){return k(e)&&S(e["label"])&&S(e["key"])}function D$(e,t){return e.reduce(((e,n,r)=>(r%t===0?e.push([n]):e[e.length-1].push(n),e)),[])}function M$(e,t,n){return[...e].sort(((e,r)=>k(e)&&k(r)?"asc"===n?e[t]>r[t]?1:-1:e[t]<r[t]?1:-1:0))}function F$(e,t,n){return null===e||e.key!==t?`Click to sort by ${n} descending`:"asc"===e.direction?"Click to remove sorting":`Click to sort by ${n} ascending`}C$.config={type:E$,keyed:!1,name:"Table",group:"presentation",create:(e={})=>{const{id:t,columnsExpression:n,columns:r,rowCount:i,...o}=e;return b(t)&&_(i)&&(o["rowCount"]=i),S(n)?{...o,id:t,columnsExpression:n}:Array.isArray(r)&&r.every(A$)?{...o,id:t,columns:r}:{...o,label:"Table",rowCount:10,columns:[{label:"ID",key:"id"},{label:"Name",key:"name"},{label:"Date",key:"date"}]}},generateInitialDemoData:e=>{const t=[{id:1,name:"John Doe",date:"31.01.2023"},{id:2,name:"Erika Muller",date:"20.02.2023"},{id:3,name:"Dominic Leaf",date:"11.03.2023"}],n=Object.keys(t[0]),{columns:r,id:i,dataSource:o}=e;if(Array.isArray(r)&&0!==r.length&&o===`=${i}`&&r.map((({key:e})=>e)).every((e=>n.includes(e))))return t}};const R$="files::",P$="filepicker",I$=new g,L$=[];function $$(e){const t=_t(null),n=QF("fileRegistry",!1),{field:r,onChange:i,domId:o,errors:s=[],disabled:a,readonly:l,required:c,value:u=""}=e,{label:h,multiple:d=!1,accept:f=""}=r,p=PR(f,{debug:!0}),g=CR(d),m=`${o}-error-message`,v=null===n?L$:n.getFiles(u);xt((()=>{u&&null!==n&&!n.hasKey(u)&&i({value:null})}),[n,u,i,v.length]),xt((()=>{const e=new DataTransfer;v.forEach((t=>e.items.add(t))),t.current.files=e.files}),[v]);const y=e=>{const t=e.target;if((null===t.files||0===t.files.length)&&""!==u)return n.deleteFiles(u),void i({value:null});const r=Array.from(t.files),o=u||I$.nextPrefixed(R$);n.setFiles(o,r),i({value:o})},b=a||l||null===n;return it("div",{className:NF(P$,{errors:s,disabled:a,readonly:l}),children:[it(fP,{htmlFor:o,label:h,required:c}),it("input",{type:"file",className:"fjs-hidden",ref:t,id:o,name:o,disabled:b,multiple:g||void 0,accept:p||void 0,onChange:y}),it("div",{className:"fjs-filepicker-container",children:[it("button",{type:"button",disabled:b,readonly:l,className:"fjs-button fjs-filepicker-button",onClick:()=>{t.current.click()},children:"Browse"}),it("span",{className:"fjs-form-field-label",children:N$(v)})]}),it(dP,{id:m,errors:s})]})}function N$(e){return 0===e.length?"No files selected":1===e.length?e[0].name:`${e.length} files selected`}function j$(){return it("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 14.02 5.57",width:"53",height:"21",style:"vertical-align:middle",children:[it("path",{fill:"currentColor",d:"M1.88.92v.14c0 .41-.13.68-.4.8.33.14.46.44.46.86v.33c0 .61-.33.95-.95.95H0V0h.95c.65 0 .93.3.93.92zM.63.57v1.06h.24c.24 0 .38-.1.38-.43V.98c0-.28-.1-.4-.32-.4zm0 1.63v1.22h.36c.2 0 .32-.1.32-.39v-.35c0-.37-.12-.48-.4-.48H.63zM4.18.99v.52c0 .64-.31.98-.94.98h-.3V4h-.62V0h.92c.63 0 .94.35.94.99zM2.94.57v1.35h.3c.2 0 .3-.09.3-.37v-.6c0-.29-.1-.38-.3-.38h-.3zm2.89 2.27L6.25 0h.88v4h-.6V1.12L6.1 3.99h-.6l-.46-2.82v2.82h-.55V0h.87zM8.14 1.1V4h-.56V0h.79L9 2.4V0h.56v4h-.64zm2.49 2.29v.6h-.6v-.6zM12.12 1c0-.63.33-1 .95-1 .61 0 .95.37.95 1v2.04c0 .64-.34 1-.95 1-.62 0-.95-.37-.95-1zm.62 2.08c0 .28.13.39.33.39s.32-.1.32-.4V.98c0-.29-.12-.4-.32-.4s-.33.11-.33.4z"}),it("path",{fill:"currentColor",d:"M0 4.53h14.02v1.04H0zM11.08 0h.63v.62h-.63zm.63 4V1h-.63v2.98z"})]})}function B$(e){const{open:t}=e;return t?it("div",{class:"fjs-powered-by-lightbox",style:"z-index: 100; position: fixed; top: 0; left: 0;right: 0; bottom: 0",children:[it("div",{class:"backdrop",style:"width: 100%; height: 100%; background: rgba(40 40 40 / 20%)",onClick:e.onBackdropClick}),it("div",{class:"notice",style:"position: absolute; left: 50%; top: 40%; transform: translate(-50%); width: 260px; padding: 10px; background: white; box-shadow: 0  1px 4px rgba(0 0 0 / 30%); font-family: Helvetica, Arial, sans-serif; font-size: 14px; display: flex; line-height: 1.3",children:[it("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener",style:"margin: 15px 20px 15px 10px; align-self: center; color: var(--cds-icon-primary, #404040)",children:it(j$,{})}),it("span",{children:["Web-based tooling for BPMN, DMN, and forms powered by"," ",it("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener",children:"bpmn.io"}),"."]})]})]}):null}function V$(e){return it("div",{class:"fjs-powered-by fjs-form-field",style:"text-align: right",children:it("a",{href:"https://bpmn.io",target:"_blank",rel:"noopener",class:"fjs-powered-by-link",title:"Powered by bpmn.io",style:"color: var(--cds-text-primary, #404040)",onClick:e.onClick,children:it(j$,{})})})}function q$(e){const[t,n]=bt(!1);function r(e){return t=>{t.preventDefault(),n(e)}}return it(Ie,{children:[Ya(it(B$,{open:t,onBackdropClick:r(!1)}),document.body),it(V$,{onClick:r(!0)})]})}$$.config={type:"filepicker",keyed:!0,label:"File picker",group:"basic-input",emptyValue:null,create:(e={})=>({...e})};const z$=()=>{};function H$(e){const t=QF("form"),{schema:n,properties:r}=t._getState(),{ariaLabel:i}=r,{onSubmit:o=z$,onReset:s=z$,onChange:a=z$}=e,l=e=>{e.preventDefault(),o()},c=e=>{e.preventDefault(),s()},u=TR(),h=Ot((()=>({data:u,parent:null,this:u,i:[]})),[u]);return it("form",{class:"fjs-form",onSubmit:l,onReset:c,"aria-label":i,noValidate:!0,children:[it(zF.Provider,{value:h,children:it(wP,{field:n,onChange:a})}),it(q$,{})]})}const W$=[u$,d$,AL,HP,l$,$$,gP,vP,ML,NL,QL,i$,mL,C$,s$,qL,BL,WP,zL,YP,uP,SP];class Q${constructor(){this._formFields={},W$.forEach((e=>{this.register(e.config.type,e)}))}register(e,t){this._formFields[e]=t}get(e){return this._formFields[e]}}const U$=["alt","appearance.prefixAdorner","appearance.suffixAdorner","conditional.hide","description","label","source","readonly","text","validate.min","validate.max","validate.minLength","validate.maxLength","valuesExpression","url","dataSource","columnsExpression","expression","multiple","accept"],Y$=["alt","appearance.prefixAdorner","appearance.suffixAdorner","description","label","source","text","content","url"];function X$(e,t={}){const{formFields:n=new Q$,expressionLanguage:r=new fF(null),templating:i=new pF,inputs:o=!0,outputs:s=!0}=t;if(!e.components)return[];const a=e=>{const t=[];return e.components&&e.components.forEach((e=>{t.push(e),t.push(...a(e))})),t},l=a(e).reduce(((e,t)=>{const{valuesKey:n}=t;return o&&(n&&(e=[...e,n]),U$.forEach((n=>{const i=Q(t,n.split("."));if(i&&r.isExpression(i)){const t=r.getVariableNames(i,{type:"expression"});e=[...e,...t]}})),Y$.forEach((n=>{const o=Q(t,n.split("."));if(o&&!r.isExpression(o)&&i.isTemplate(o)){const t=i.getVariableNames(o);e=[...e,...t]}}))),e.filter((e=>"string"===typeof e))}),[]),c=e=>{const t=[],r=n.get(e.type);return r&&r.config.keyed&&e.key?[e.key.split(".")[0]]:r&&r.config.pathed&&e.path?[e.path.split(".")[0]]:(e.components&&e.components.forEach((e=>{t.push(...c(e))})),t)};return(o||s)&&l.push(...c(e)),Array.from(new Set(l))}const Z$=(e,t)=>{const n=[];let r=t.get(e);while(r)n.push(r.id),r=t.get(r._parent);return n};class G${constructor(e,t,n){this._formFieldRegistry=e,this._pathRegistry=t,this._eventBus=n}applyConditions(e,t={},n={}){const r=UF(e),{getFilterPath:i=(e,t)=>this._pathRegistry.getValuePath(e,{indexes:t})}=n,o=(e,n,s=!1)=>{const{indexes:a={},expressionIndexes:l=[],scopeData:c=t,parentScopeData:u=null}=n;this._pathRegistry.executeRecursivelyOnFields(e,(({field:e,isClosed:n,isRepeatable:h,context:d})=>{const{conditional:f,components:p,id:g}=e,m=ZF({this:c,data:t,i:l,parent:u});if(d.isHidden=s||d.isHidden||f&&this._checkHideCondition(f,m),h&&!d.isHidden){d.preventRecursion=!0;const n=this._pathRegistry.getValuePath(e,{indexes:a}),r=Q(t,n);if(!Array.isArray(r)||!r.length||!Array.isArray(p)||!p.length)return;for(let e=0;e<r.length;e++){const t={indexes:{...a,[g]:e},expressionIndexes:[...l,e+1],scopeData:r[e],parentScopeData:c};p.forEach((e=>{o(e,t,d.isHidden)}))}}d.isHidden&&h&&(d.preventRecursion=!0,this._eventBus.fire("conditionChecker.remove",{item:{[e.key]:Q(r,i(e,a))}}),this._cleanlyClearDataAtPath(i(e,a),r)),d.isHidden&&n&&(this._eventBus.fire("conditionChecker.remove",{item:{[e.key]:Q(r,i(e,a))}}),this._cleanlyClearDataAtPath(i(e,a),r))}))},s=this._formFieldRegistry.getForm();if(!s)throw new Error("form field registry has no form");return o(s,{scopeData:t}),r}check(e,t={}){if(!e)return null;if(!S(e)||!e.startsWith("="))return null;try{const n=qf(e.slice(1),t);return n}catch(IH){return this._eventBus.fire("error",{error:IH}),null}}_checkHideCondition(e,t){if(!e.hide)return!1;const n=this.check(e.hide,t);return!0===n}_cleanlyClearDataAtPath(e,t){const n=[...e];let r=!1;do{W(t,n,void 0),n.pop();const e=Q(t,n);r=!!n.length&&(this._isEmptyObject(e)||this._isEmptyArray(e))}while(r)}_isEmptyObject(e){return k(e)&&!I(e).length}_isEmptyArray(e){return Array.isArray(e)&&(!e.length||e.every((e=>void 0===e)))}}G$.$inject=["formFieldRegistry","pathRegistry","eventBus"];class K${constructor(e){this._computedExpressions=[],e.on("field.updated",(({shouldNotRecompute:e})=>{e||this.reset()})),e.on("import.done",this.reset.bind(this)),e.on("reset",this.reset.bind(this))}registerExpressionExecution(e){return!this._computedExpressions.includes(e)&&(this._computedExpressions.push(e),!0)}reset(){this._computedExpressions=[]}}K$.$inject=["eventBus"];class J${render(e){return sF.parse(e,{gfm:!0,breaks:!0})}}J$.$inject=[];const eN={__init__:["markdownRenderer"],markdownRenderer:["type",J$]};function tN(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}tN.$inject=["eventBus","injector"],tN.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},tN.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(void 0===i){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i},tN.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},tN.prototype.undo=function(){let e,t=this._getUndoAction();if(t){this._currentExecution.trigger="undo",this._pushAction(t);while(t){if(this._internalUndo(t),e=this._getUndoAction(),!e||e.id!==t.id)break;t=e}this._popAction()}},tN.prototype.redo=function(){let e,t=this._getRedoAction();if(t){this._currentExecution.trigger="redo",this._pushAction(t);while(t){if(this._internalExecute(t,!0),e=this._getRedoAction(),!e||e.id!==t.id)break;t=e}this._popAction()}},tN.prototype.register=function(e,t){this._setHandler(e,t)},tN.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},tN.prototype.canUndo=function(){return!!this._getUndoAction()},tN.prototype.canRedo=function(){return!!this._getRedoAction()},tN.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},tN.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},tN.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo((()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)}))},tN.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const o of r)if(i=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return i},tN.prototype._createId=function(){return this._uid++},tN.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},tN.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo((()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)})),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()},tN.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)},tN.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:$("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},tN.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=x(e)?e:[e],t.dirty=t.dirty.concat(e))},tN.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},tN.prototype._revertedAction=function(e){this._stackIdx--},tN.prototype._getHandler=function(e){return this._handlerMap[e]},tN.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};class nN{constructor(e,t){this._form=e,this._validator=t}execute(e){const{field:t,value:n,indexes:r}=e,{errors:i}=this._form._getState();e.oldErrors=UF(i);const o=this._validator.validateField(t,n),s=W(i,[t.id,...Object.values(r||{})],o.length?o:void 0);this._form._setState({errors:s})}revert(e){this._form._setState({errors:e.oldErrors})}}nN.$inject=["form","validator"];class rN{constructor(e,t){this._form=e,this._validator=t}execute(e){const{fieldInstance:t,value:n}=e,{id:r,indexes:i}=t,{errors:o}=this._form._getState();e.oldErrors=UF(o);const s=this._validator.validateFieldInstance(t,n),a=W(o,[r,...Object.values(i||{})],s.length?s:void 0);this._form._setState({errors:a})}revert(e){this._form._setState({errors:e.oldErrors})}}rN.$inject=["form","validator"];class iN{constructor(e,t){this._commandStack=e,t.on("form.init",(()=>{this.registerHandlers()}))}registerHandlers(){Object.entries(this.getHandlers()).forEach((([e,t])=>{this._commandStack.registerHandler(e,t)}))}getHandlers(){return{"formField.validation.update":nN,"formFieldInstance.validation.update":rN}}updateFieldValidation(e,t,n){const r={field:e,value:t,indexes:n};this._commandStack.execute("formField.validation.update",r)}updateFieldInstanceValidation(e,t){const n={fieldInstance:e,value:t};this._commandStack.execute("formFieldInstance.validation.update",n)}}iN.$inject=["commandStack","eventBus"];var oN;function sN(){return sN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sN.apply(null,arguments)}var aN,lN=function(e){return Re("svg",sN({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),oN||(oN=Re("path",{fill:"currentColor",d:"M2 9h5.5v3.086l-1.293-1.293-.707.707L8 14l2.5-2.5-.707-.707L8.5 12.086V9H14V8H2zm11-7H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1V3a1 1 0 0 0-1-1m0 3H3V3h10z"})))};function cN(){return cN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},cN.apply(null,arguments)}var uN,hN,dN=function(e){return Re("svg",cN({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),aN||(aN=Re("path",{fill:"currentColor",d:"M13 10H3a1 1 0 0 0-1 1v2a1 1 0 0 0 1 1h10a1 1 0 0 0 1-1v-2a1 1 0 0 0-1-1m0 3H3v-2h10zM8.5 3.914l1.293 1.293.707-.707L8 2 5.5 4.5l.707.707L7.5 3.914V7H2v1h12V7H8.5z"})))};function fN(){return fN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fN.apply(null,arguments)}var pN,gN=function(e){return Re("svg",fN({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),uN||(uN=Re("path",{fill:"currentColor",d:"M8 2c3.3 0 6 2.7 6 6s-2.7 6-6 6-6-2.7-6-6 2.7-6 6-6m0-1C4.15 1 1 4.15 1 8s3.15 7 7 7 7-3.15 7-7-3.15-7-7-7"})),hN||(hN=Re("path",{fill:"currentColor",d:"M12 7.5H8.5V4h-1v3.5H4v1h3.5V12h1V8.5H12z"})))};function mN(){return mN=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},mN.apply(null,arguments)}var vN=function(e){return Re("svg",mN({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),pN||(pN=Re("path",{fill:"currentColor",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z"})))};class yN{constructor(e,t,n,r,i){this._form=e,this._formFields=t,this._formFieldRegistry=n,this._pathRegistry=r,this._eventBus=i,this.Repeater=this.Repeater.bind(this),this.RepeatFooter=this.RepeatFooter.bind(this)}isFieldRepeating(e){if(!e)return!1;const t=this._formFieldRegistry.get(e),n=this._formFields.get(t.type);return n.config.repeatable&&t.isRepeating}Repeater(e){const{RowsRenderer:t,indexes:n,useSharedState:r,...i}=e,[o]=r,{data:s}=this._form._getState(),a=e.field,l=this._pathRegistry.getValuePath(a,{indexes:n}),c=Q(s,l)||[],u=this._getNonCollapsedItems(a),h=!a.disableCollapse&&c.length>u,d=h&&o.isCollapsed,f=a.components&&a.components.length>0,p=a.allowAddRemove&&f,g=t=>{const r=c.slice(),i=r.splice(t,1)[0];this._eventBus.fire("repeatRenderManager.remove",{dataPath:l,index:t,item:i}),e.onChange({field:a,value:r,indexes:n})},m=Et(zF);return it(Ie,{children:c.map(((e,r)=>it("div",{class:Ee()({"fjs-repeat-row-collapsed":!!d&&r>=u}),children:it(bN,{itemIndex:r,itemValue:e,parentExpressionContextInfo:m,repeaterField:a,RowsRenderer:t,indexes:n,onDeleteItem:g,showRemove:p,...i})})))})}RepeatFooter(e){const t=_t(null),{useSharedState:n,indexes:r,field:i,readonly:o,disabled:s}=e,[a,l]=n,{data:c}=this._form._getState(),u=this._pathRegistry.getValuePath(i,{indexes:r}),h=Q(c,u)||[],d=this._getNonCollapsedItems(i),f=!i.disableCollapse&&h.length>d,p=f&&a.isCollapsed,g=i.components&&i.components.length>0,m=i.allowAddRemove&&g,v=()=>{l((e=>({...e,isCollapsed:!p})))},y=_t(!1),b=()=>{const t=h.slice(),n=this._form._getInitializedFieldData(this._form._getState().data,{container:i,indexes:{...r,[i.id]:t.length}});t.push(n),y.current=!0,this._eventBus.fire("repeatRenderManager.add",{dataPath:u,index:t.length-1,item:n}),e.onChange({value:t}),l((e=>({...e,isCollapsed:!1})))};return SR(t,[h.length],{align:"bottom",behavior:"auto",offset:20},[y]),it("div",{className:Ee()("fjs-repeat-render-footer",{"fjs-remove-allowed":i.allowAddRemove}),children:[m?it("button",{type:"button",readOnly:o,disabled:s||o,class:"fjs-repeat-render-add",ref:t,onClick:b,children:it(Ie,{children:[it(gN,{})," ","Add new"]})}):null,f?it("button",{type:"button",class:"fjs-repeat-render-collapse",onClick:v,children:it(Ie,p?{children:[it(lN,{})," ",`Expand all (${h.length-1})`]}:{children:[it(dN,{})," ","Collapse"]})}):null]})}_getNonCollapsedItems(e){const t=5,{nonCollapsedItems:n}=e;return n||t}}const bN=e=>{const{itemIndex:t,itemValue:n,parentExpressionContextInfo:r,repeaterField:i,RowsRenderer:o,indexes:s,onDeleteItem:a,showRemove:l,...c}=e,u=Ot((()=>({...c,indexes:{...s||{},[i.id]:t}})),[t,s,i.id,c]),h=Ot((()=>({data:r.data,this:n,parent:ZF({...r,data:r.this}),i:[...r.i,t+1]})),[t,r,n]);return l?it("div",{class:"fjs-repeat-row-container",children:[it("div",{class:"fjs-repeat-row-rows",children:it(zF.Provider,{value:h,children:it(o,{...u})})}),it("button",{type:"button",class:"fjs-repeat-row-remove","aria-label":`Remove list item ${t+1}`,onClick:()=>a(t),children:it("div",{class:"fjs-repeat-row-remove-icon-container",children:it(vN,{})})})]}):it(zF.Provider,{value:h,children:it(o,{...u})})};yN.$inject=["form","formFields","formFieldRegistry","pathRegistry","eventBus"];var wN="__fn",xN=1e3,kN=Array.prototype.slice;function _N(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function ON(){}function SN(e,t){return e.apply(null,t)}_N.prototype.on=function(e,t,n,r){if(e=x(e)?e:[e],O(t)&&(r=n,n=t,t=xN),!_(t))throw new Error("priority must be a number");var i=n;r&&(i=z(n,r),i[wN]=n[wN]||n);var o=this;e.forEach((function(e){o._addListener(e,{priority:t,callback:i,next:null})}))},_N.prototype.once=function(e,t,n,r){var i=this;if(O(t)&&(r=n,n=t,t=xN),!_(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var t=n.apply(r,arguments);return i.off(e,o),t}o[wN]=n,this.on(e,t,o)},_N.prototype.off=function(e,t){e=x(e)?e:[e];var n=this;e.forEach((function(e){n._removeListener(e,t)}))},_N.prototype.createEvent=function(e){var t=new ON;return t.init(e),t},_N.prototype.fire=function(e,t){var n,r,i,o;if(o=kN.call(arguments),"object"===typeof e&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],r){n=t instanceof ON?t:this.createEvent(t),o[0]=n;var s=n.type;e!==s&&(n.type=e);try{i=this._invokeListeners(n,o,r)}finally{e!==s&&(n.type=s)}return void 0===i&&n.defaultPrevented&&(i=!1),i}},_N.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},_N.prototype._destroy=function(){this._listeners={}},_N.prototype._invokeListeners=function(e,t,n){var r;while(n){if(e.cancelBubble)break;r=this._invokeListener(e,t,n),n=n.next}return r},_N.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=SN(n.callback,t),void 0!==r&&(e.returnValue=r,e.stopPropagation()),!1===r&&e.preventDefault()}catch(IH){if(!this.handleError(IH))throw console.error("unhandled error in event listener",IH),IH}return r},_N.prototype._addListener=function(e,t){var n,r=this._getListeners(e);if(r){while(r){if(r.priority<t.priority)return t.next=r,void(n?n.next=t:this._setListeners(e,t));n=r,r=r.next}n.next=t}else this._setListeners(e,t)},_N.prototype._getListeners=function(e){return this._listeners[e]},_N.prototype._setListeners=function(e,t){this._listeners[e]=t},_N.prototype._removeListener=function(e,t){var n,r,i,o=this._getListeners(e);if(t)while(o)n=o.next,i=o.callback,i!==t&&i[wN]!==t||(r?r.next=n:this._setListeners(e,n)),r=o,o=n;else this._setListeners(e,null)},ON.prototype.stopPropagation=function(){this.cancelBubble=!0},ON.prototype.preventDefault=function(){this.defaultPrevented=!0},ON.prototype.init=function(e){H(this,e||{})};const EN=/^[a-zA-Z0-9.!#$%&'*+/=?^_`{|}~-]+@[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?(?:\.[a-zA-Z0-9](?:[a-zA-Z0-9-]{0,61}[a-zA-Z0-9])?)*$/,CN=/(\+|00)(297|93|244|1264|358|355|376|971|54|374|1684|1268|61|43|994|257|32|229|226|880|359|973|1242|387|590|375|501|1441|591|55|1246|673|975|267|236|1|61|41|56|86|225|237|243|242|682|57|269|238|506|53|5999|61|1345|357|420|49|253|1767|45|1809|1829|1849|213|593|20|291|212|34|372|251|358|679|500|33|298|691|241|44|995|44|233|350|224|590|220|245|240|30|1473|299|502|594|1671|592|852|504|385|509|36|62|44|91|246|353|98|964|354|972|39|1876|44|962|81|76|77|254|996|855|686|1869|82|383|965|856|961|231|218|1758|423|94|266|370|352|371|853|590|212|377|373|261|960|52|692|389|223|356|95|382|976|1670|258|222|1664|596|230|265|60|262|264|687|227|672|234|505|683|31|47|977|674|64|968|92|507|64|51|63|680|675|48|1787|1939|850|351|595|970|689|974|262|40|7|250|966|249|221|65|500|4779|677|232|503|378|252|508|381|211|239|597|421|386|46|268|1721|248|963|1649|235|228|66|992|690|993|670|676|1868|216|90|688|886|255|256|380|598|1|998|3906698|379|1784|58|1284|1340|84|678|681|685|967|27|260|263)(9[976]\d|8[987530]\d|6[987]\d|5[90]\d|42\d|3[875]\d|2[98654321]\d|9[8543210]|8[6421]|6[6543210]|5[87654321]|4[987654310]|3[9643210]|2[70]|7|1)\d{4,20}$/,TN=["min","max","minLength","maxLength"];class AN{constructor(e,t,n,r){this._expressionLanguage=e,this._conditionChecker=t,this._form=n,this._formFieldRegistry=r}validateField(e,t){const{type:n,validate:r}=e;let i=[];if("number"===n&&(i=[...i,...DN(e,t)]),!r)return i;const o=RN(r,this._expressionLanguage,this._conditionChecker,this._form);return i=[...i,...MN(e,o,t)],i}validateFieldInstance(e,t){const{id:n,expressionContextInfo:r}=e,i=this._formFieldRegistry.get(n);if(!i)return[];const{type:o,validate:s}=i;let a=[];if("number"===o&&(a=[...a,...DN(i,t)]),!s)return a;const l=FN(s,this._expressionLanguage,r);return a=[...a,...MN(i,l,t)],a}}function DN(e,t){const{decimalDigits:n,increment:r}=e,i=[];if("NaN"===t)i.push("Value is not a number.");else if(t&&(n>=0&&OL(t)>n&&i.push("Value is expected to "+(0===n?"be an integer":`have at most ${n} decimal digit${n>1?"s":""}`)+"."),r)){const e=Oe(t),n=Oe(r),o=e.mod(n);if(0!==o.cmp(0)){const t=e.minus(o),r=t.plus(n);i.push(`Please select a valid value, the two nearest valid values are ${t} and ${r}.`)}}return i}function MN(e,t,n){const r=[];if(t.pattern&&n&&!new RegExp(t.pattern).test(n)&&r.push(`Field must match pattern ${t.pattern}.`),t.required){const t="checkbox"===e.type&&!1===n,i=w(n)||""===n,o=Array.isArray(n)&&0===n.length;(t||i||o)&&r.push("Field is required.")}return"min"in t&&(n||0===n)&&n<t.min&&r.push(`Field must have minimum value of ${t.min}.`),"max"in t&&(n||0===n)&&n>t.max&&r.push(`Field must have maximum value of ${t.max}.`),"minLength"in t&&n&&n.trim().length<t.minLength&&r.push(`Field must have minimum length of ${t.minLength}.`),"maxLength"in t&&n&&n.trim().length>t.maxLength&&r.push(`Field must have maximum length of ${t.maxLength}.`),"validationType"in t&&n&&"phone"===t.validationType&&!CN.test(n)&&r.push("Field must be a valid  international phone number. (e.g. +4930664040900)"),"validationType"in t&&n&&"email"===t.validationType&&!EN.test(n)&&r.push("Field must be a valid email."),r}function FN(e,t,n){const r={...e};return TN.forEach((e=>{const i=e.split("."),o=Q(r,i),s=GF(t,o,n);W(r,i,null===s?void 0:s)})),r}function RN(e,t,n,r){const i={...e};return TN.forEach((e=>{const o=e.split("."),s=Q(i,o);if(!t||!t.isExpression(s))return s;const{initialData:a,data:l}=r._getState(),c=n?n.applyConditions(l,l):l,u={...a,...c},h=t.evaluate(s,u);h&&W(i,o,h)})),i}AN.$inject=["expressionLanguage","conditionChecker","form","formFieldRegistry"];class PN{constructor(e,t,n,r){this._formFieldRegistry=e,this._pathRegistry=t,this._fieldFactory=n,this._formLayouter=r}importSchema(e){const t=[];try{this._cleanup();const n=this.importFormField(UF(e));return this._formLayouter.calculateLayout(UF(n)),{schema:n,warnings:t}}catch(n){throw this._cleanup(),n.warnings=t,n}}_cleanup(){this._formLayouter.clear(),this._formFieldRegistry.clear(),this._pathRegistry.clear()}importFormField(e,t,n){const{components:r}=e;let i,o;t&&(i=this._formFieldRegistry.get(t)),o=i?[...i._path,"components",n]:[];const s=this._fieldFactory.create({...e,_path:o,_parent:t},!1);return this._formFieldRegistry.add(s),r&&(s.components=this.importFormFields(r,s.id)),s}importFormFields(e,t){return e.map(((e,n)=>this.importFormField(e,t,n)))}}PN.$inject=["formFieldRegistry","pathRegistry","fieldFactory","formLayouter"];class IN{constructor(e,t,n){this._formFieldRegistry=e,this._pathRegistry=t,this._formFields=n}create(e,t=!0){const{id:n,type:r,key:i,path:o,_parent:s}=e,a=this._formFields.get(r);if(!a)throw new Error(`form field of type <${r}> not supported`);const{config:l}=a;if(!l)throw new Error(`form field of type <${r}> has no config`);if(n&&this._formFieldRegistry._ids.assigned(n))throw new Error(`form field with id <${n}> already exists`);const c=s&&this._formFieldRegistry.get(s),u=c&&this._pathRegistry.getValuePath(c)||[],h=Z$(s,this._formFieldRegistry);if(l.keyed&&i&&!this._pathRegistry.canClaimPath([...u,...i.split(".")],{isClosed:!0,knownAncestorIds:h}))throw new Error(`binding path '${[...u,i].join(".")}' is already claimed`);if(l.pathed&&o&&!this._pathRegistry.canClaimPath([...u,...o.split(".")],{isRepeatable:l.repeatable,knownAncestorIds:h}))throw new Error(`binding path '${[...u,...o.split(".")].join(".")}' is already claimed`);const d=l.create({...l.label?{label:l.label}:{},...e},t);return this._ensureId(d),l.keyed&&(this._ensureKey(d),this._pathRegistry.claimPath(this._pathRegistry.getValuePath(d),{isClosed:!0,claimerId:d.id,knownAncestorIds:Z$(s,this._formFieldRegistry)})),l.pathed&&(l.repeatable&&this._enforceDefaultPath(d),this._pathRegistry.claimPath(this._pathRegistry.getValuePath(d),{isRepeatable:l.repeatable,claimerId:d.id,knownAncestorIds:Z$(s,this._formFieldRegistry)})),d}_ensureId(e){if(e.id)return void this._formFieldRegistry._ids.claim(e.id,e);let t="Field";"default"===e.type&&(t="Form"),e.id=this._formFieldRegistry._ids.nextPrefixed(`${t}_`,e)}_ensureKey(e){e.key||(e.key=this._getUniqueKeyPath(e))}_enforceDefaultPath(e){e.path||(e.path=this._getUniqueKeyPath(e))}_getUniqueKeyPath(e){let t;const n=this._formFieldRegistry.get(e._parent);do{t=Math.random().toString(36).substring(7)}while(n&&n.components.some((e=>e.key===t)));return`${e.type}_${t}`}}IN.$inject=["formFieldRegistry","pathRegistry","formFields"];class LN{constructor(e,t,n){this._formFieldRegistry=e,this._formFields=t,this._injector=n,this._dataPaths=[]}canClaimPath(e,t={}){const{isClosed:n=!1,isRepeatable:r=!1,skipAncestryCheck:i=!1,claimerId:o=null,knownAncestorIds:s=[]}=t;let a={children:this._dataPaths};for(const l of e){if(a=$N(a,l),!a)return!0;if(a.isRepeatable&&!i){if(!o&&!s.length)throw new Error("cannot claim a path that contains a repeater without specifying a claimerId or knownAncestorIds");const e=s.includes(a.repeaterId)||o&&Z$(o,this._formFieldRegistry).includes(a.repeaterId);if(!e)return!1}if(null===a.children)return!1}return!(n||r)}claimPath(e,t={}){const{isClosed:n=!1,isRepeatable:r=!1,claimerId:i=null,knownAncestorIds:o=[]}=t;if(!this.canClaimPath(e,{isClosed:n,isRepeatable:r,claimerId:i,knownAncestorIds:o}))throw new Error(`cannot claim path '${e.join(".")}'`);let s={children:this._dataPaths};for(const a of e){let e=$N(s,a);e?e.claimCount++:(e={segment:a,claimCount:1,children:[]},s.children.push(e)),s=e}n&&(s.children=null),r&&(s.isRepeatable=!0,s.repeaterId=i)}unclaimPath(e){let t={children:this._dataPaths};for(const n of e){const r=$N(t,n);if(!r)throw new Error(`no open path found for '${e.join(".")}'`);t=r}t={children:this._dataPaths};for(const n of e){const e=$N(t,n);if(e.claimCount--,0===e.claimCount){t.children.splice(t.children.indexOf(e),1);break}t=e}}executeRecursivelyOnFields(e,t,n={}){let r=!0;const i=this._formFields.get(e.type).config;if(i.keyed){const i=t({field:e,isClosed:!0,isRepeatable:!1,context:n});return r&&i}if(i.pathed){const o=t({field:e,isClosed:!1,isRepeatable:i.repeatable,context:n});r=r&&o}if(!1===r||n.preventRecursion)return r;if(Array.isArray(e.components))for(const o of e.components){const e=this.executeRecursivelyOnFields(o,t,UF(n));if(r=r&&e,!1===r)return r}return r}getValuePath(e,t={}){const{replacements:n={},indexes:r=null,cutoffNode:i=null}=t;let o=[];const s=Object.prototype.hasOwnProperty.call(n,e.id),a=this._formFields.get(e.type).config;if(s){const t=n[e.id];if(null===t||void 0===t||""===t)o=[];else if("string"===typeof t)o=t.split(".");else{if(!Array.isArray(t))throw new Error(`replacements for field ${e.id} must be a string, array or null/undefined`);o=t}}else a.keyed?o=e.key.split("."):a.pathed&&e.path&&(o=e.path.split("."));if(r&&(o=this._addIndexes(o,e,r)),e._parent&&e._parent!==i){const n=this._formFieldRegistry.get(e._parent);return[...this.getValuePath(n,t)||[],...o]}return o}clear(){this._dataPaths=[]}_addIndexes(e,t,n){const r=this._injector.get("repeatRenderManager",!1);return r&&r.isFieldRepeating(t._parent)?[n[t._parent],...e]:e}}const $N=(e,t)=>x(e.children)&&e.children.find((e=>e.segment===t))||null;LN.$inject=["formFieldRegistry","formFields","injector"];class NN{constructor(e){this._rows=[],this._ids=new g([32,36,1]),this._eventBus=e}addRow(e,t){let n=this._rows.find((t=>t.formFieldId===e));n||(n={formFieldId:e,rows:[]},this._rows.push(n)),n.rows.push(t)}getRow(e){const t=BN(this._rows);return t.find((t=>t.id===e))}getRowForField(e){return BN(this._rows).find((t=>{const{components:n}=t;return n.includes(e.id)}))}getRows(e){const t=this._rows.find((t=>e===t.formFieldId));return t?t.rows:[]}nextRowId(){return this._ids.nextPrefixed("Row_")}calculateLayout(e){const{type:t,components:n}=e;if(!["default","group","dynamiclist"].includes(t)||!n)return;const r=jN(n,this._ids);Object.entries(r).forEach((([t,n])=>{this.addRow(e.id,{id:t,components:n.map((e=>e.id))})})),n.forEach((e=>this.calculateLayout(e))),this._eventBus.fire("form.layoutCalculated",{rows:this._rows})}clear(){this._rows=[],this._ids.clear(),this._eventBus.fire("form.layoutCleared")}}function jN(e,t){return L(e,(e=>{const{layout:n}=e;return n&&n.row?n.row:t.nextPrefixed("Row_")}))}function BN(e){return e.map((e=>e.rows)).flat()}NN.$inject=["eventBus"];class VN{constructor(e){this._eventBus=e,this._formFields={},e.on("form.clear",(()=>this.clear())),this._ids=new g([32,36,1])}add(e){const{id:t}=e;if(this._formFields[t])throw new Error(`form field with ID ${t} already exists`);this._eventBus.fire("formField.add",{formField:e}),this._formFields[t]=e}remove(e){const{id:t}=e;this._formFields[t]&&(this._eventBus.fire("formField.remove",{formField:e}),delete this._formFields[t])}get(e){return this._formFields[e]}getAll(){return Object.values(this._formFields)}getForm(){return this.getAll().find((e=>"default"===e.type))}forEach(e){this.getAll().forEach((t=>e(t)))}clear(){this._formFields={},this._ids.clear()}}VN.$inject=["eventBus"];class qN{constructor(e,t,n){this._eventBus=e,this._formFieldRegistry=t,this._formFields=n,this._formFieldInstances={},e.on("form.clear",(()=>this.clear()))}syncInstance(e,t){const{hidden:n,...r}=t,i=!n,o=this._formFieldInstances[e];if(i&&!o)this._formFieldInstances[e]={instanceId:e,...r},this._eventBus.fire("formFieldInstance.added",{instanceId:e});else if(!i&&o)delete this._formFieldInstances[e],this._eventBus.fire("formFieldInstance.removed",{instanceId:e});else if(i&&o){const t=Object.keys(r).some((t=>this._formFieldInstances[e][t]!==r[t]));t&&(this._formFieldInstances[e]={instanceId:e,...r},this._eventBus.fire("formFieldInstance.changed",{instanceId:e}))}return e}cleanupInstance(e){this._formFieldInstances[e]&&(delete this._formFieldInstances[e],this._eventBus.fire("formFieldInstance.removed",{instanceId:e}))}get(e){return this._formFieldInstances[e]}getAll(){return Object.values(this._formFieldInstances)}getAllKeyed(){return this.getAll().filter((({id:e})=>{const t=this._formFieldRegistry.get(e);if(!t)return!1;const{type:n}=t,{config:r}=this._formFields.get(n);return r.keyed}))}clear(){this._formFieldInstances={}}}function zN(e,t,n,r){const i=()=>{const[e,i]=bt(n._getState()),o={getService(e,t=!0){return r.get(e,t)},formId:n._id};t.on("changed",(e=>{i(e)}));const s=St((e=>n._update(e)),[]),{properties:a}=e,{readOnly:l}=a,c=St((()=>{l||n.submit()}),[l]),u=St((()=>n.reset()),[]),{schema:h}=e;return h?it(WF.Provider,{value:o,children:it(H$,{onChange:s,onSubmit:c,onReset:u})}):null},{container:o}=e;t.on("form.init",(()=>{tt(it(i,{}),o)})),t.on("form.destroy",(()=>{tt(null,o)}))}qN.$inject=["eventBus","formFieldRegistry","formFields"],zN.$inject=["config.renderer","eventBus","form","injector"];const HN=e=>{const t=[];return null===e||Object.values(e).forEach((e=>{null!==e&&("object"===typeof e?t.push(...HN(e)):Array.isArray(e)?t.push(...e.map(HN).flat()):"string"===typeof e&&e.startsWith(R$)&&t.push(e))})),t},WN=Symbol("fileRegistry"),QN=Symbol("eventBus"),UN=Symbol("formFieldRegistry"),YN=Symbol("formFieldInstanceRegistry"),XN=[];class ZN{constructor(e,t,n){this[WN]=new Map,this[QN]=e,this[UN]=t,this[YN]=n;const r=({item:e})=>{const t=HN(e);t.forEach((e=>{this.deleteFiles(e)}))};e.on("form.clear",(()=>this.clear())),e.on("conditionChecker.remove",r),e.on("repeatRenderManager.remove",r)}setFiles(e,t){this[WN].set(e,t)}getFiles(e){return this[WN].get(e)||XN}getKeys(){return Array.from(this[WN].keys())}hasKey(e){return this[WN].has(e)}deleteFiles(e){this[WN].delete(e)}getAllFiles(){return new Map(this[WN])}clear(){this[WN].clear()}}ZN.$inject=["eventBus","formFieldRegistry","formFieldInstanceRegistry"];new g([32,36,1]);const GN=17;n(9848);function KN(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var JN,ej=function(e,t){return Array.prototype.slice.call(e,t)},tj="function"==typeof setImmediate;JN=tj?function(e){setImmediate(e)}:function(e){setTimeout(e,0)};var nj=JN,rj=nj,ij=function(e,t,n){e&&rj((function(){e.apply(n||null,t||[])}))},oj=ej,sj=ij,aj=function(e,t){var n=t||{},r={};return void 0===e&&(e={}),e.on=function(t,n){return r[t]?r[t].push(n):r[t]=[n],e},e.once=function(t,n){return n._once=!0,e.on(t,n),e},e.off=function(t,n){var i=arguments.length;if(1===i)delete r[t];else if(0===i)r={};else{var o=r[t];if(!o)return e;o.splice(o.indexOf(n),1)}return e},e.emit=function(){var t=oj(arguments);return e.emitterSnapshot(t.shift()).apply(this,t)},e.emitterSnapshot=function(t){var i=(r[t]||[]).slice(0);return function(){var r=oj(arguments),o=this||e;if("error"===t&&!1!==n.throws&&!i.length)throw 1===r.length?r[0]:r;return i.forEach((function(i){n.async?sj(i,r,o):i.apply(o,r),i._once&&e.off(t,i)})),e}},e};const lj=KN(aj),cj={},uj="(?:^|\\s)",hj="(?:\\s|$)";function dj(e){let t=cj[e];return t?t.lastIndex=0:cj[e]=t=new RegExp(uj+e+hj,"g"),t}function fj(e,t){const n=e.className;n.length?dj(t).test(n)||(e.className+=" "+t):e.className=t}function pj(e,t){e.className=e.className.replace(dj(t)," ").trim()}const gj=(e,t)=>({containers:t,moves:()=>!0,accepts:()=>!0,invalid:()=>!1,isContainer:()=>!1,transformOffset:e=>e,copy:!1,copySortSource:!1,revertOnSpill:!1,removeOnSpill:!1,direction:"vertical",ignoreInputTextSelection:!0,mirrorContainer:document.body,...e});function mj(e){if(void 0!==e.touches)return e.touches.length;if(void 0!==e.which&&0!==e.which)return e.which;if(void 0!==e.buttons)return e.buttons;const t=e.button;return void 0!==t?1&t?1:2&t?3:4&t?2:0:void 0}const vj=e=>{const t=e.getBoundingClientRect();return{left:t.left+yj("scrollLeft","pageXOffset"),top:t.top+yj("scrollTop","pageYOffset")}},yj=(e,t)=>typeof global[t]<"u"?global[t]:document.documentElement.clientHeight?document.documentElement[e]:document.body[e],bj=(e={},t,n)=>{const r=e.className||"";e.className+=" gu-hide";const i=document.elementFromPoint(t,n);return e.className=r,i},wj=e=>e.width||e.right-e.left,xj=e=>e.height||e.bottom-e.top,kj=e=>e.parentNode===document?null:e.parentNode,_j=e=>["INPUT","TEXTAREA","SELECT"].includes(e.tagName)||Oj(e),Oj=e=>!(!e||"false"===e.contentEditable)&&("true"===e.contentEditable||Oj(kj(e))),Sj=e=>{const t=()=>{let t=e;do{t=t.nextSibling}while(t&&1!==t.nodeType);return t};return e.nextElementSibling||t()};window.global||(window.global=window);const Ej=document,Cj=Ej.documentElement;function Tj(e=[],t={}){let n,r,i,o,s,a,l,c,u,h,d,f,p;Array.isArray(e)||(t=e,e=[]);const g=gj(t,e),m=lj({containers:g.containers,start:C,end:A,cancel:P,remove:R,destroy:x,canMove:E,dragging:!1});return g.removeOnSpill&&m.on("over",j).on("out",B),y(),m;function v(e){return-1!==m.containers.indexOf(e)||g.isContainer(e)}function y(e){const t=e?"removeEventListener":"addEventListener";Cj[t]("pointerdown",_,!0),Cj[t]("pointerup",M,!0)}function b(e){Cj[e?"removeEventListener":"addEventListener"]("pointermove",O,!0)}function w(e){Cj[e?"removeEventListener":"addEventListener"]("click",k,!0)}function x(){y(!0),M({})}function k(e){p&&e.preventDefault()}function _(e){if(a=e.clientX,l=e.clientY,1!==mj(e)||e.metaKey||e.ctrlKey)return;const t=e.target,n=S(t);n&&(p=n,b(),"pointerdown"===e.type&&(_j(t)?t.focus():e.preventDefault()))}function O(e){if(!p)return;if(0===mj(e))return void M({});if(void 0!==e.clientX&&Math.abs(e.clientX-a)<=(g.slideFactorX||0)&&void 0!==e.clientY&&Math.abs(e.clientY-l)<=(g.slideFactorY||0))return;if(g.ignoreInputTextSelection){const{clientX:t=0,clientY:n=0}=e,r=Ej.elementFromPoint(t,n);if(_j(r))return}const t=p;b(!0),w(),A(),T(t);const n=vj(i),r=g.transformOffset(n,e,i),{pageX:c=0,pageY:u=0}=e;o=c-r.left,s=u-r.top,fj(h||i,"gu-transit"),V(),N(e)}function S(e){if(m.dragging&&n||v(e))return;const t=e;for(;kj(e)&&!1===v(kj(e));)if(g.invalid(e,t)||(e=kj(e),!e))return;const r=kj(e);return r&&!g.invalid(e,t)&&g.moves(e,r,t,Sj(e))?{item:e,source:r}:void 0}function E(e){return!!S(e)}function C(e){const t=S(e);t&&T(t)}function T(e){W(e.item,e.source)&&(h=e.item.cloneNode(!0),m.emit("cloned",h,e.item,"copy")),r=e.source,i=e.item,c=u=Sj(e.item),m.dragging=!0,m.emit("drag",i,r)}function A(){if(!m.dragging)return;const e=h||i;F(e,kj(e))}function D(){p=!1,b(!0),w(!0)}function M(e){if(D(),!m.dragging)return;const t=h||i,{clientX:o=0,clientY:s=0}=e,a=bj(n,o,s),l=$(a,o,s);l&&(h&&g.copySortSource||!h||l!==r)?F(t,l):g.removeOnSpill?R():P()}function F(e,t){const n=kj(e);h&&g.copySortSource&&t===r&&n.removeChild(i),L(t)?m.emit("cancel",e,r,r):m.emit("drop",e,t,r,u),I()}function R(){if(!m.dragging)return;const e=h||i,t=kj(e);t&&t.removeChild(e),m.emit(h?"cancel":"remove",e,t,r),I()}function P(e){if(!m.dragging)return;const t=arguments.length>0?e:g.revertOnSpill,n=h||i,o=kj(n),s=L(o);!1===s&&t&&(h?o&&o.removeChild(h):r.insertBefore(n,c)),s||t?m.emit("cancel",n,r,r):m.emit("drop",n,o,r,u),I()}function I(){const e=h||i;D(),q(),e&&pj(e,"gu-transit"),d&&clearTimeout(d),m.dragging=!1,f&&m.emit("out",e,f,r),m.emit("dragend",e),r=i=h=c=u=d=f=null}function L(e,t){let o;return o=void 0!==t?t:n?u:Sj(h||i),e===r&&o===c}function $(e,t,n){let o=e;for(;o&&!s();)o=kj(o);return o;function s(){if(!1===v(o))return!1;const s=z(o,e),a=H(o,s,t,n);return!!L(o,a)||g.accepts(i,o,r,a)}}function N(e){if(!n)return;e.preventDefault();const{clientX:t=0,clientY:a=0}=e,l=t-o,d=a-s;n.style.left=l+"px",n.style.top=d+"px";const p=h||i,v=bj(n,t,a);let y=$(v,t,a);const b=null!==y&&y!==f;(b||null===y)&&(S(),f=y,O());const w=kj(p);if(y===r&&h&&!g.copySortSource)return void(w&&w.removeChild(p));let x;const k=z(y,v);if(null!==k)x=H(y,k,t,a);else{if(!0!==g.revertOnSpill||h)return void(h&&w&&w.removeChild(p));x=c,y=r}function _(e){m.emit(e,p,f,r)}function O(){b&&_("over")}function S(){f&&_("out")}(null===x&&b||x!==p&&x!==Sj(p))&&(u=x,y.insertBefore(p,x),m.emit("shadow",p,y,r))}function j(e){pj(e,"gu-hide")}function B(e){m.dragging&&fj(e,"gu-hide")}function V(){if(n)return;const e=i.getBoundingClientRect();n=i.cloneNode(!0),n.style.width=wj(e)+"px",n.style.height=xj(e)+"px",pj(n,"gu-transit"),fj(n,"gu-mirror"),g.mirrorContainer.appendChild(n),Cj.addEventListener("pointermove",N),fj(g.mirrorContainer,"gu-unselectable"),m.emit("cloned",n,i,"mirror")}function q(){n&&(pj(g.mirrorContainer,"gu-unselectable"),Cj.removeEventListener("pointermove",N),kj(n).removeChild(n),n=null)}function z(e,t){let n=t;for(;n!==e&&kj(n)!==e;)n=kj(n);return n===Cj?null:n}function H(e,t,n,o){const s="horizontal"===("function"==typeof g.direction?g.direction(i,e,r):g.direction);return t!==e?l():a();function a(){const t=e.children.length;let r,i,a;for(r=0;r<t;r++)if(i=e.children[r],a=i.getBoundingClientRect(),s&&a.left+a.width/2>n||!s&&a.top+a.height/2>o)return i;return null}function l(){const e=t.getBoundingClientRect();return c(s?n>e.left+wj(e)/2:o>e.top+xj(e)/2)}function c(e){return e?Sj(t):t}}function W(e,t){return"boolean"==typeof g.copy?g.copy:g.copy(e,t)}}function Aj(e,t){return t.forEach((function(t){t&&"string"!==typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}Object.prototype.toString,Object.prototype.hasOwnProperty;const Dj=Object.prototype.toString;function Mj(e){return new Fj(e)}function Fj(e){if(!e||!e.nodeType)throw new Error("A DOM element reference is required");this.el=e,this.list=e.classList}function Rj(e,t,n){var r=n?e:e.parentNode;return r&&"function"===typeof r.closest&&r.closest(t)||null}Fj.prototype.add=function(e){return this.list.add(e),this},Fj.prototype.remove=function(e){return"[object RegExp]"==Dj.call(e)?this.removeMatching(e):(this.list.remove(e),this)},Fj.prototype.removeMatching=function(e){const t=this.array();for(let n=0;n<t.length;n++)e.test(t[n])&&this.remove(t[n]);return this},Fj.prototype.toggle=function(e,t){return"undefined"!==typeof t?t!==this.list.toggle(e,t)&&this.list.toggle(e):this.list.toggle(e),this},Fj.prototype.array=function(){return Array.from(this.list)},Fj.prototype.has=Fj.prototype.contains=function(e){return this.list.contains(e)};var Pj,Ij,Lj,$j={};function Nj(){Pj=window.addEventListener?"addEventListener":"attachEvent",Ij=window.removeEventListener?"removeEventListener":"detachEvent",Lj="addEventListener"!==Pj?"on":""}var jj=$j.bind=function(e,t,n,r){return Pj||Nj(),e[Pj](Lj+t,n,r||!1),n},Bj=$j.unbind=function(e,t,n,r){return Ij||Nj(),e[Ij](Lj+t,n,r||!1),n},Vj=Aj({__proto__:null,bind:jj,unbind:Bj,default:$j},[$j]);var qj,zj=Qj,Hj=!1;"undefined"!==typeof document&&(qj=document.createElement("div"),qj.innerHTML='  <link/><table></table><a href="/a">a</a><input type="checkbox"/>',Hj=!qj.getElementsByTagName("link").length,qj=void 0);var Wj={legend:[1,"<fieldset>","</fieldset>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],_default:Hj?[1,"X<div>","</div>"]:[0,"",""]};function Qj(e,t){if("string"!=typeof e)throw new TypeError("String expected");t||(t=document);var n=/<([\w:]+)/.exec(e);if(!n)return t.createTextNode(e);e=e.replace(/^\s+|\s+$/g,"");var r=n[1];if("body"==r){var i=t.createElement("html");return i.innerHTML=e,i.removeChild(i.lastChild)}var o=Object.prototype.hasOwnProperty.call(Wj,r)?Wj[r]:Wj._default,s=o[0],a=o[1],l=o[2];i=t.createElement("div");i.innerHTML=a+e+l;while(s--)i=i.lastChild;if(i.firstChild==i.lastChild)return i.removeChild(i.firstChild);var c=t.createDocumentFragment();while(i.firstChild)c.appendChild(i.removeChild(i.firstChild));return c}Wj.td=Wj.th=[3,"<table><tbody><tr>","</tr></tbody></table>"],Wj.option=Wj.optgroup=[1,'<select multiple="multiple">',"</select>"],Wj.thead=Wj.tbody=Wj.colgroup=Wj.caption=Wj.tfoot=[1,"<table>","</table>"],Wj.polyline=Wj.ellipse=Wj.polygon=Wj.circle=Wj.text=Wj.line=Wj.path=Wj.rect=Wj.g=[1,'<svg xmlns="http://www.w3.org/2000/svg" version="1.1">',"</svg>"];var Uj=zj;function Yj(e,t){return e&&"function"===typeof e.matches&&e.matches(t)||!1}function Xj(e,t){return t=t||document,t.querySelector(e)}function Zj(e,t,n){const r=t<0?e.length+t:t;if(r>=0&&r<e.length){const r=n<0?e.length+n:n,[i]=e.splice(t,1);e.splice(r,0,i)}}const Gj=[sS("function(${params}) ${body}",{label:"function",detail:"definition",type:"keyword"}),sS("for ${var} in ${collection} return ${value}",{label:"for",detail:"expression",type:"keyword"}),sS("every ${var} in ${collection} satisfies ${condition}",{label:"every",detail:"quantified expression",type:"keyword"}),sS("some ${var} in ${collection} satisfies ${condition}",{label:"some",detail:"quantified expression",type:"keyword"}),sS("if ${condition} then ${value} else ${other value}",{label:"if",detail:"block",type:"keyword"}),sS("{ ${key}: ${value} }",{label:"context",detail:"block",type:"keyword"})];function Kj(){return Kj=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kj.apply(this,arguments)}function Jj(e){const{context:t,after:n,before:r,keyword:i}=e;return aB({nodes:t,before:r,after:n,keyword:i},Q_([{label:i,type:"keyword",boost:10}]))}const eB=[Jj({context:"InExpression",keyword:"in"}),Jj({context:"IfExpression",keyword:"then",after:"if",before:"else"}),Jj({context:"IfExpression",keyword:"else",after:"then"}),Jj({context:"QuantifiedExpression",keyword:"satisfies"}),Jj({context:"ForExpression",after:"InExpressions",keyword:"return"})],tB=["StringLiteral","Identifier","LineComment","BlockComment","PathExpression"];function nB(e){return U_(tB,Q_(e.map((e=>Kj({},e,{type:"text"})))))}function rB(e,t,n){return oB(e,t,n,-1)}function iB(e,t,n){return oB(e,t,n,1)}function oB(e,t,n,r){let i=e[r>0?"childAfter":"childBefore"](t);while(i){if(n.includes(i.name))return i;if(i.type.isError&&i.firstChild&&n.includes(i.firstChild.name))return i.firstChild;i=i[r>0?"nextSibling":"prevSibling"]}return null}function sB(e,t){for(Array.isArray(t)||(t=[t]);e;e=e.parent){if(t.includes(e.name))return e;if(e.type.isTop)break}return null}function aB(e,t){const{nodes:n,before:r,after:i,keyword:o}=e;return e=>{const{state:s,pos:a}=e,l=sB(Pk(s).resolveInner(a,-1),n);return l?rB(l,a,[o,r])||iB(l,a,[o,i])||i&&!rB(l,a,[i])?null:t(e):null}}const lB=Rk.define({parser:Yd.configure({props:[Gk.add({Context:s_({closing:"}"}),"List FilterExpression":s_({closing:"]"}),"ParenthesizedExpression FunctionInvocation":l_({except:/^\s*\)/}),"ForExpression QuantifiedExpression IfExpression":l_({except:/^\s*(then|else|return|satisfies)\b/}),FunctionDefinition:l_({except:/^\s*(\(|\))/})}),h_.add({Context:d_,List:d_,ParenthesizedExpression:d_,FunctionDefinition(e){const t=e.getChild(")");return t?{from:t.to,to:e.to}:null}})]}),languageData:{indentOnInput:/^\s*(\)|\}|\]|then|else|return|satisfies)$/,commentTokens:{line:"//",block:{open:"/*",close:"*/"}}}}),cB=lB.configure({top:"UnaryTests"},"FEEL unary tests"),uB=lB.configure({top:"Expression"},"FEEL expression");function hB(e={}){const t="unaryTests"===e.dialect?cB:uB,n=e.parserDialect,r=Vd(e.context),i=t.configure({contextTracker:r,dialect:n}),o=e.completions||[nB(Gj),eB].flat();return new Hk(i,[...o.map((e=>i.data.of({autocomplete:e})))])}var dB=[sT(jA())];const fB=px.theme({"& .cm-content":{padding:"0px"},"& .cm-line":{padding:"0px"},"&.cm-editor.cm-focused":{outline:"none"},"& .cm-completionInfo":{whiteSpace:"pre-wrap",overflow:"hidden",textOverflow:"ellipsis"},"&.cm-editor":{height:"100%"},"& .cm-completionInfo > *":{whiteSpace:"normal"},"& .cm-completionInfo ul":{margin:0,paddingLeft:"15px"},"& .cm-completionInfo pre":{marginBottom:0,whiteSpace:"pre-wrap"},"& .cm-completionInfo p":{marginTop:0},"& .cm-completionInfo p:not(:last-of-type)":{marginBottom:0}}),pB=px.baseTheme({"& .variableName":{color:"#10f"},"& .number":{color:"#164"},"& .string":{color:"#a11"},"& .bool":{color:"#219"},"& .function":{color:"#aa3731",fontWeight:"bold"},"& .control":{color:"#708"}}),gB=v_(f_.define([{tag:bh.variableName,class:"variableName"},{tag:bh.name,class:"variableName"},{tag:bh.number,class:"number"},{tag:bh.string,class:"string"},{tag:bh.bool,class:"bool"},{tag:bh.function(bh.variableName),class:"function"},{tag:bh.function(bh.special(bh.variableName)),class:"function"},{tag:bh.controlKeyword,class:"control"},{tag:bh.operatorKeyword,class:"control"}]));var mB=[fB,pB,gB];function vB(e){return e&&e.from===e.to}function yB(e,t){const n=e.nextSibling;return vB(e)||n&&n.from===t&&vB(n)}function bB(e){return e&&e.parent&&"VariableName"===e.parent.name}function wB(e){return!!e&&("PathExpression"===e.name||wB(e.parent))}function xB({variables:e}){return t=>{const n=Pk(t.state).resolve(t.pos,-1);if(!wB(n))return;const r=kB(n),i=n===r?t.pos:n.from,o=_B(r,t);let s=e;for(var a=0;a<o.length-1;a++){var l=s.find((e=>e.name===o[a].name));if(!l)return null;if("optional"!==l.isList&&!!l.isList!==o[a].isList)return;s=l.entries}if(!s)return;s=s.map((e=>({label:e.name,type:"variable",info:e.info,detail:e.detail})));const c={from:i,options:s};return c}}function kB(e){while(e){if("PathExpression"===e.name)return e;e=e.parent}}function _B(e,t){let n=[];for(let r=e.firstChild;r;r=r.nextSibling)"PathExpression"===r.name?n.push(..._B(r,t)):"FilterExpression"===r.name?n.push(...OB(r,t)):n.push({name:SB(r,t),isList:!1});return n}function OB(e,t){const n=e.firstChild;if("PathExpression"===n.name){const e=_B(n,t),r=e[e.length-1];return r.isList=!0,e}return[{name:SB(n,t),isList:!0}]}function SB(e,t){return t.state.sliceDoc(e.from,e.to)}function EB({variables:e=[],builtins:t=[]}){const n=CB(e,t);return n.length?e=>{const{pos:t,state:r}=e,i=Pk(r).resolve(t,-1);return yB(i,t)?e.explicit?{from:t,options:n}:null:!bB(i)||wB(i)?null:{from:i.from,options:n}}:e=>null}function CB(e,t){return[].concat(e.map((e=>TB(e))),t.map((e=>TB(e))))}function TB(e,t){return"function"===e.type?AB(e,t):{label:e.name,type:"variable",info:e.info,detail:e.detail,boost:t}}function AB(e,t){const{name:n,info:r,detail:i,params:o=[]}=e,s=o.map((({name:e,type:t},n)=>({name:e||`param ${n+1}`,type:t}))),a=`${n}(${s.map((e=>"${"+e.name+"}")).join(", ")})`,l=s.map((({name:e,type:t})=>t?`${e}: ${t}`:e)).join(", "),c=`${n}(${l})`;return sS(a,{label:c,type:"function",info:r,detail:i,boost:t})}function DB({variables:e=[],builtins:t=[]}){return[xB({variables:e}),EB({variables:e,builtins:t}),nB(Gj.map((e=>({...e,boost:-1})))),...eB]}function MB(e){return hB(e)}function FB(e,t){return e.slice().reverse().reduce(((e,t)=>(e[t.name]=()=>{},e)),{})}const RB=rg.define(),PB=rg.define(),IB=rg.define();function LB({dialect:e="expression",variables:t=[],builtins:n=[],completions:r=DB({builtins:n,variables:t})}){const i=FB([...t,...n]);return[IB.of(e),RB.of(n),PB.of(t),MB({dialect:e,context:i,completions:r})]}function $B(e){const t=e.facet(RB)[0],n=e.facet(PB)[0],r=e.facet(IB)[0];return{builtins:t,variables:n,dialect:r}}var NB=[{name:"not(negand)",description:'<p>Returns the logical negation of the given value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">not(negand: boolean): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">not(true)\n// false\n\nnot(null)\n// null\n</code></pre>\n'},{name:"is defined(value)",description:'<p><em>Camunda Extension</em></p>\n<p>Checks if a given value is not <code>null</code>. If the value is <code>null</code> then the function returns <code>false</code>.\nOtherwise, the function returns <code>true</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">is defined(value: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">is defined(1)\n// true\n\nis defined(null)\n// false\n\nis defined(x)\n// false - if no variable &quot;x&quot; exists\n\nis defined(x.y)\n// false - if no variable &quot;x&quot; exists or it doesn&#39;t have a property &quot;y&quot;\n</code></pre>\n<p>:::caution Breaking change</p>\n<p>This function worked differently in previous versions. It returned <code>true</code> if the value was <code>null</code>.\nSince this version, the function returns <code>false</code> if the value is <code>null</code>.</p>\n<p>:::</p>\n'},{name:"get or else(value, default)",description:'<p><em>Camunda Extension</em></p>\n<p>Return the provided value parameter if not <code>null</code>, otherwise return the default parameter</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">get or else(value: Any, default: Any): Any\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">get or else(&quot;this&quot;, &quot;default&quot;)\n// &quot;this&quot;\n\nget or else(null, &quot;default&quot;)\n// &quot;default&quot;\n\nget or else(null, null)\n// null\n</code></pre>\n'},{name:"assert(value, condition)",description:'<p><em>Camunda Extension</em></p>\n<p>Verify that the given condition is met. If the condition is <code>true</code>, the function returns the value.\nOtherwise, the evaluation fails with an error.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">assert(value: Any, condition: Any)\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">assert(x, x != null)\n// &quot;value&quot; - if x is &quot;value&quot;\n// error - if x is null or doesn&#39;t exist\n\nassert(x, x &gt;= 0)\n// 4 - if x is 4\n// error - if x is less than zero\n</code></pre>\n'},{name:"assert(value, condition, cause)",description:'<p><em>Camunda Extension</em></p>\n<p>Verify that the given condition is met. If the condition is <code>true</code>, the function returns the value.\nOtherwise, the evaluation fails with an error containing the given message.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">assert(value: Any, condition: Any, cause: String)\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">assert(x, x != null, &quot;&#39;x&#39; should not be null&quot;)\n// &quot;value&quot; - if x is &quot;value&quot;\n// error(&#39;x&#39; should not be null) - if x is null or doesn&#39;t exist\n\nassert(x, x &gt;= 0, &quot;&#39;x&#39; should be positive&quot;)\n// 4 - if x is 4\n// error(&#39;x&#39; should be positive) - if x is less than zero\n</code></pre>\n'},{name:"get value(context, key)",description:'<p>Returns the value of the context entry with the given key.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">get value(context: context, key: string): Any\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">get value({foo: 123}, &quot;foo&quot;)\n// 123\n\nget value({a: 1}, &quot;b&quot;)\n// null\n</code></pre>\n'},{name:"get value(context, keys)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns the value of the context entry for a context path defined by the given keys.</p>\n<p>If <code>keys</code> contains the keys <code>[k1, k2]</code> then it returns the value at the nested entry <code>k1.k2</code> of the context.</p>\n<p>If <code>keys</code> are empty or the nested entry defined by the keys doesn&#39;t exist in the context, it returns <code>null</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">get value(context: context, keys: list&lt;string&gt;): Any\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">get value({x:1, y: {z:0}}, [&quot;y&quot;, &quot;z&quot;])\n// 0\n\nget value({x: {y: {z:0}}}, [&quot;x&quot;, &quot;y&quot;])\n// {z:0}\n\nget value({a: {b: 3}}, [&quot;b&quot;])\n// null\n</code></pre>\n'},{name:"get entries(context)",description:'<p>Returns the entries of the context as a list of key-value-pairs.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">get entries(context: context): list&lt;context&gt;\n</code></pre>\n<p>The return value is a list of contexts. Each context contains two entries for &quot;key&quot; and &quot;value&quot;.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">get entries({foo: 123})\n// [{key: &quot;foo&quot;, value: 123}]\n</code></pre>\n'},{name:"context put(context, key, value)",description:'<p>Adds a new entry with the given key and value to the context. Returns a new context that includes the entry.</p>\n<p>If an entry for the same key already exists in the context, it overrides the value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">context put(context: context, key: string, value: Any): context\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">context put({x:1}, &quot;y&quot;, 2)\n// {x:1, y:2}\n</code></pre>\n<p>:::info\nThe function <code>context put()</code> replaced the previous function <code>put()</code> (Camunda Extension). The\nprevious function is deprecated and should not be used anymore.\n:::</p>\n'},{name:"context put(context, keys, value)",description:'<p>Adds a new entry with the given value to the context. The path of the entry is defined by the keys. Returns a new context that includes the entry.</p>\n<p>If <code>keys</code> contains the keys <code>[k1, k2]</code> then it adds the nested entry <code>k1.k2 = value</code> to the context.</p>\n<p>If an entry for the same keys already exists in the context, it overrides the value.</p>\n<p>If <code>keys</code> are empty, it returns <code>null</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">context put(context: context, keys: list&lt;string&gt;, value: Any): context\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">context put({x:1}, [&quot;y&quot;], 2)\n// {x:1, y:2}\n\ncontext put({x:1, y: {z:0}}, [&quot;y&quot;, &quot;z&quot;], 2)\n// {x:1, y: {z:2}}\n\ncontext put({x:1}, [&quot;y&quot;, &quot;z&quot;], 2)\n// {x:1, y: {z:2}}\n</code></pre>\n'},{name:"context merge(contexts)",description:'<p>Union the given contexts. Returns a new context that includes all entries of the given contexts.</p>\n<p>If an entry for the same key already exists in a context, it overrides the value. The entries are overridden in the same order as in the list of contexts.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">context merge(contexts: list&lt;context&gt;): context\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">context merge([{x:1}, {y:2}])\n// {x:1, y:2}\n\ncontext merge([{x:1, y: 0}, {y:2}])\n// {x:1, y:2}\n</code></pre>\n<p>:::info\nThe function <code>context merge()</code> replaced the previous function <code>put all()</code> (Camunda Extension). The\nprevious function is deprecated and should not be used anymore.\n:::</p>\n'},{name:"string(from)",description:'<p>Returns the given value as a string representation.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">string(from: Any): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">string(1.1)\n// &quot;1.1&quot;\n\nstring(date(&quot;2012-12-25&quot;))\n// &quot;2012-12-25&quot;\n</code></pre>\n'},{name:"number(from)",description:'<p>Parses the given string to a number.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">number(from: string): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">number(&quot;1500.5&quot;)\n// 1500.5\n</code></pre>\n'},{name:"context(entries)",description:'<p>Constructs a context of the given list of key-value pairs. It is the reverse function to <a href="feel-built-in-functions-context.md#get-entriescontext">get entries()</a>.</p>\n<p>Each key-value pair must be a context with two entries: <code>key</code> and <code>value</code>. The entry with name <code>key</code> must have a value of the type <code>string</code>.</p>\n<p>It might override context entries if the keys are equal. The entries are overridden in the same order as the contexts in the given list.</p>\n<p>Returns <code>null</code> if one of the entries is not a context or if a context doesn&#39;t contain the required entries.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">context(entries: list&lt;context&gt;): context\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">context([{&quot;key&quot;:&quot;a&quot;, &quot;value&quot;:1}, {&quot;key&quot;:&quot;b&quot;, &quot;value&quot;:2}])\n// {a:1, b:2}\n</code></pre>\n'},{name:"date(from)",description:'<p>Returns a date from the given value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">date(from: string): date\n</code></pre>\n<p>Parses the given string into a date.</p>\n<pre><code class="language-feel">date(from: date and time): date\n</code></pre>\n<p>Extracts the date component from the given date and time.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">date(&quot;2018-04-29&quot;)\n// date(&quot;2018-04-29&quot;)\n\ndate(date and time(&quot;2012-12-25T11:00:00&quot;))\n// date(&quot;2012-12-25&quot;)\n</code></pre>\n'},{name:"date(year, month, day)",description:'<p>Returns a date from the given components.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">date(year: number, month: number, day: number): date\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">date(2012, 12, 25)\n// date(&quot;2012-12-25&quot;)\n</code></pre>\n'},{name:"time(from)",description:'<p>Returns a time from the given value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">time(from: string): time\n</code></pre>\n<p>Parses the given string into a time.</p>\n<pre><code class="language-feel">time(from: date and time): time\n</code></pre>\n<p>Extracts the time component from the given date and time.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">time(&quot;12:00:00&quot;)\n// time(&quot;12:00:00&quot;)\n\ntime(date and time(&quot;2012-12-25T11:00:00&quot;))\n// time(&quot;11:00:00&quot;)\n</code></pre>\n'},{name:"time(hour, minute, second)",description:'<p>Returns a time from the given components.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">time(hour: number, minute: number, second: number): time\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">time(23, 59, 0)\n// time(&quot;23:59:00&quot;)\n</code></pre>\n'},{name:"time(hour, minute, second, offset)",description:'<p>Returns a time from the given components, including a timezone offset.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">time(hour: number, minute: number, second: number, offset: days and time duration): time\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">time(14, 30, 0, duration(&quot;PT1H&quot;))\n// time(&quot;14:30:00+01:00&quot;)\n</code></pre>\n'},{name:"date and time(from)",description:'<p>Parses the given string into a date and time.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">date and time(from: string): date and time\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">date and time(&quot;2018-04-29T09:30:00&quot;)\n// date and time(&quot;2018-04-29T09:30:00&quot;)\n</code></pre>\n'},{name:"date and time(date, time)",description:'<p>Returns a date and time from the given components.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">date and time(date: date, time: time): date and time\n</code></pre>\n<pre><code class="language-feel">date and time(date: date and time, time: time): date and time\n</code></pre>\n<p>Returns a date and time value that consists of the date component of <code>date</code> combined with <code>time</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">date and time(date(&quot;2012-12-24&quot;),time(&quot;T23:59:00&quot;))\n// date and time(&quot;2012-12-24T23:59:00&quot;)\n\ndate and time(date and time(&quot;2012-12-25T11:00:00&quot;),time(&quot;T23:59:00&quot;))\n// date and time(&quot;2012-12-25T23:59:00&quot;)\n</code></pre>\n'},{name:"date and time(date, timezone)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns the given date and time value at the given timezone.</p>\n<p>If <code>date</code> has a different timezone than <code>timezone</code> then it adjusts the time to match the local time of <code>timezone</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">date and time(date: date and time, timezone: string): date and time\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">date and time(@&quot;2020-07-31T14:27:30@Europe/Berlin&quot;, &quot;America/Los_Angeles&quot;)\n// date and time(&quot;2020-07-31T05:27:30@America/Los_Angeles&quot;)\n\ndate and time(@&quot;2020-07-31T14:27:30&quot;, &quot;Z&quot;)\n// date and time(&quot;2020-07-31T12:27:30Z&quot;)\n</code></pre>\n'},{name:"duration(from)",description:'<p>Parses the given string into a duration. The duration is either a days and time duration or a years and months duration.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">duration(from: string): days and time duration\n</code></pre>\n<pre><code class="language-feel">duration(from: string): years and months duration\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">duration(&quot;P5D&quot;)\n// duration(&quot;P5D&quot;)\n\nduration(&quot;P32Y&quot;)\n// duration(&quot;P32Y&quot;)\n</code></pre>\n'},{name:"years and months duration(from, to)",description:'<p>Returns the years and months duration between <code>from</code> and <code>to</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">years and months duration(from: date, to: date): years and months duration\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">years and months duration(date(&quot;2011-12-22&quot;), date(&quot;2013-08-24&quot;))\n// duration(&quot;P1Y8M&quot;)\n</code></pre>\n'},{name:"list contains(list, element)",description:'<p>Returns <code>true</code> if the given list contains the element. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">list contains(list: list, element: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">list contains([1,2,3], 2)\n// true\n</code></pre>\n'},{name:"count(list)",description:'<p>Returns the number of elements of the given list.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">count(list: list): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">count([1,2,3])\n// 3\n</code></pre>\n'},{name:"min(list)",description:'<p>Returns the minimum of the given list.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">min(list: list): Any\n</code></pre>\n<p>All elements in <code>list</code> should have the same type and be comparable.</p>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">min([1,2,3])\n// 1\n\nmin(1,2,3)\n// 1\n</code></pre>\n'},{name:"max(list)",description:'<p>Returns the maximum of the given list.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">max(list: list): Any\n</code></pre>\n<p>All elements in <code>list</code> should have the same type and be comparable.</p>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">max([1,2,3])\n// 3\n\nmax(1,2,3)\n// 3\n</code></pre>\n'},{name:"sum(list)",description:'<p>Returns the sum of the given list of numbers.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">sum(list: list&lt;number&gt;): number\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">sum([1,2,3])\n// 6\n\nsum(1,2,3)\n// 6\n</code></pre>\n'},{name:"product(list)",description:'<p>Returns the product of the given list of numbers.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">product(list: list&lt;number&gt;): number\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">product([2, 3, 4])\n// 24\n\nproduct(2, 3, 4)\n// 24\n</code></pre>\n'},{name:"mean(list)",description:'<p>Returns the arithmetic mean (i.e. average) of the given list of numbers.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">mean(list: list&lt;number&gt;): number\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">mean([1,2,3])\n// 2\n\nmean(1,2,3)\n// 2\n</code></pre>\n'},{name:"median(list)",description:'<p>Returns the median element of the given list of numbers.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">median(list: list&lt;number&gt;): number\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">median(8, 2, 5, 3, 4)\n// 4\n\nmedian([6, 1, 2, 3])\n// 2.5\n</code></pre>\n'},{name:"stddev(list)",description:'<p>Returns the standard deviation of the given list of numbers.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">stddev(list: list&lt;number&gt;): number\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">stddev(2, 4, 7, 5)\n// 2.0816659994661326\n\nstddev([2, 4, 7, 5])\n// 2.0816659994661326\n</code></pre>\n'},{name:"mode(list)",description:'<p>Returns the mode of the given list of numbers.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">mode(list: list&lt;number&gt;): number\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">mode(6, 3, 9, 6, 6)\n// [6]\n\nmode([6, 1, 9, 6, 1])\n// [1, 6]\n</code></pre>\n'},{name:"all(list)",description:'<p>Returns <code>false</code> if any element of the given list is <code>false</code>. Otherwise, returns <code>true</code>.</p>\n<p>If the given list is empty, it returns <code>true</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">all(list: list&lt;boolean&gt;): boolean\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">all([true,false])\n// false\n\nall(false,null,true)\n// false\n</code></pre>\n<p>:::info\nThe function <code>all()</code> replaced the previous function <code>and()</code>. The previous function is deprecated and\nshould not be used anymore.\n:::</p>\n'},{name:"any(list)",description:'<p>Returns <code>true</code> if any element of the given list is <code>true</code>. Otherwise, returns <code>false</code>.</p>\n<p>If the given list is empty, it returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">any(list: list&lt;boolean&gt;): boolean\n</code></pre>\n<p>The parameter <code>list</code> can be passed as a list or as a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">any([false,true])\n// true\n\nany(false,null,true)\n// true\n</code></pre>\n<p>:::info\nThe function <code>any()</code> replaced the previous function <code>or()</code>. The previous function is deprecated and\nshould not be used anymore.\n:::</p>\n'},{name:"sublist(list, start position)",description:'<p>Returns a partial list of the given value starting at <code>start position</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">sublist(list: list, start position: number): list\n</code></pre>\n<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">sublist([1,2,3], 2)\n// [2,3]\n</code></pre>\n'},{name:"sublist(list, start position, length)",description:'<p>Returns a partial list of the given value starting at <code>start position</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">sublist(list: list, start position: number, length: number): list\n</code></pre>\n<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">sublist([1,2,3], 1, 2)\n// [1,2]\n</code></pre>\n'},{name:"append(list, items)",description:'<p>Returns the given list with all <code>items</code> appended.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">append(list: list, items: Any): list\n</code></pre>\n<p>The parameter <code>items</code> can be a single element or a sequence of elements.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">append([1], 2, 3)\n// [1,2,3]\n</code></pre>\n'},{name:"concatenate(lists)",description:'<p>Returns a list that includes all elements of the given lists.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">concatenate(lists: list): list\n</code></pre>\n<p>The parameter <code>lists</code> is a sequence of lists.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">concatenate([1,2],[3])\n// [1,2,3]\n\nconcatenate([1],[2],[3])\n// [1,2,3]\n</code></pre>\n'},{name:"insert before(list, position, newItem)",description:'<p>Returns the given list with <code>newItem</code> inserted at <code>position</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">insert before(list: list, position: number, newItem: Any): list\n</code></pre>\n<p>The <code>position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">insert before([1,3],1,2)\n// [2,1,3]\n</code></pre>\n'},{name:"remove(list, position)",description:'<p>Returns the given list without the element at <code>position</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">remove(list: list, position: number): list\n</code></pre>\n<p>The <code>position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">remove([1,2,3], 2)\n// [1,3]\n</code></pre>\n'},{name:"reverse(list)",description:'<p>Returns the given list in revered order.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">reverse(list: list): list\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">reverse([1,2,3])\n// [3,2,1]\n</code></pre>\n'},{name:"index of(list, match)",description:'<p>Returns an ascending list of positions containing <code>match</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">index of(list: list, match: Any): list&lt;number&gt;\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">index of([1,2,3,2],2)\n// [2,4]\n</code></pre>\n'},{name:"union(list)",description:'<p>Returns a list that includes all elements of the given lists without duplicates.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">union(list: list): list\n</code></pre>\n<p>The parameter <code>list</code> is a sequence of lists.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">union([1,2],[2,3])\n// [1,2,3]\n</code></pre>\n'},{name:"distinct values(list)",description:'<p>Returns the given list without duplicates.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">distinct values(list: list): list\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">distinct values([1,2,3,2,1])\n// [1,2,3]\n</code></pre>\n'},{name:"duplicate values(list)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns all duplicate values of the given list.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">duplicate values(list: list): list\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">duplicate values([1,2,3,2,1])\n// [1,2]\n</code></pre>\n'},{name:"flatten(list)",description:'<p>Returns a list that includes all elements of the given list without nested lists.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">flatten(list: list): list\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">flatten([[1,2],[[3]], 4])\n// [1,2,3,4]\n</code></pre>\n'},{name:"sort(list, precedes)",description:'<p>Returns the given list sorted by the <code>precedes</code> function.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">sort(list: list, precedes: function&lt;(Any, Any) -&gt; boolean&gt;): list\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">sort(list: [3,1,4,5,2], precedes: function(x,y) x &lt; y)\n// [1,2,3,4,5]\n</code></pre>\n'},{name:"string join(list)",description:'<p>Joins a list of strings into a single string. This is similar to\nJava&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>\nfunction.</p>\n<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is\nneither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">string join(list: list&lt;string&gt;): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;])\n// &quot;abc&quot;\n\nstring join([&quot;a&quot;,null,&quot;c&quot;])\n// &quot;ac&quot;\n\nstring join([])\n// &quot;&quot;\n</code></pre>\n'},{name:"string join(list, delimiter)",description:'<p>Joins a list of strings into a single string. This is similar to\nJava&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>\nfunction.</p>\n<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is\nneither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>\n<p>The resulting string contains a <code>delimiter</code> between each element.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">string join(list: list&lt;string&gt;, delimiter: string): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">string join([&quot;a&quot;], &quot;X&quot;)\n// &quot;a&quot;\n\nstring join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;, &quot;)\n// &quot;a, b, c&quot;\n</code></pre>\n'},{name:"string join(list, delimiter, prefix, suffix)",description:'<p><em>Camunda Extension</em></p>\n<p>Joins a list of strings into a single string. This is similar to\nJava&#39;s <a href="https://docs.oracle.com/en/java/javase/11/docs/api/java.base/java/util/stream/Collectors.html#joining(java.lang.CharSequence,java.lang.CharSequence,java.lang.CharSequence)">joining</a>\nfunction.</p>\n<p>If an item of the list is <code>null</code>, the item is ignored for the result string. If an item is\nneither a string nor <code>null</code>, the function returns <code>null</code> instead of a string.</p>\n<p>The resulting string starts with <code>prefix</code>, contains a <code>delimiter</code> between each element, and ends\nwith <code>suffix</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">string join(list: list&lt;string&gt;, delimiter: string, prefix: string, suffix: string): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">string join([&quot;a&quot;,&quot;b&quot;,&quot;c&quot;], &quot;, &quot;, &quot;[&quot;, &quot;]&quot;)\n// &quot;[a, b, c]&quot;\n</code></pre>\n'},{name:"decimal(n, scale)",description:'<p>Rounds the given value at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">decimal(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">decimal(1/3, 2)\n// .33\n\ndecimal(1.5, 0)\n// 2\n</code></pre>\n'},{name:"floor(n)",description:'<p>Rounds the given value with rounding mode flooring.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">floor(n: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">floor(1.5)\n// 1\n\nfloor(-1.5)\n// -2\n</code></pre>\n'},{name:"floor(n, scale)",description:'<p>Rounds the given value with rounding mode flooring at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">floor(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">floor(-1.56, 1)\n// -1.6\n</code></pre>\n'},{name:"ceiling(n)",description:'<p>Rounds the given value with rounding mode ceiling.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">ceiling(n: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">ceiling(1.5)\n// 2\n\nceiling(-1.5)\n// -1\n</code></pre>\n'},{name:"ceiling(n, scale)",description:'<p>Rounds the given value with rounding mode ceiling at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">ceiling(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">ceiling(-1.56, 1)\n// -1.5\n</code></pre>\n'},{name:"round up(n, scale)",description:'<p>Rounds the given value with the rounding mode round-up at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">round up(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">round up(5.5)\n// 6\n\nround up(-5.5)\n// -6\n\nround up(1.121, 2)\n// 1.13\n\nround up(-1.126, 2)\n// -1.13\n</code></pre>\n'},{name:"round down(n, scale)",description:'<p>Rounds the given value with the rounding mode round-down at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">round down(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">round down(5.5, 0)\n// 5\n\nround down (-5.5, 0)\n// -5\n\nround down (1.121, 2)\n// 1.12\n\nround down (-1.126, 2)\n// -1.12\n</code></pre>\n'},{name:"round half up(n, scale)",description:'<p>Rounds the given value with the rounding mode round-half-up at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">round half up(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">round half up(5.5, 0)\n// 6\n\nround half up(-5.5, 0)\n// -6\n\nround half up(1.121, 2)\n// 1.12\n\nround half up(-1.126, 2)\n// -1.13\n</code></pre>\n'},{name:"round half down(n, scale)",description:'<p>Rounds the given value with the rounding mode round-half-down at the given scale.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">round half down(n: number, scale: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">round half down (5.5, 0)\n// 5\n\nround half down (-5.5, 0)\n// -5\n\nround half down (1.121, 2)\n// 1.12\n\nround half down (-1.126, 2)\n// -1.13\n</code></pre>\n'},{name:"abs(number)",description:'<p>Returns the absolute value of the given numeric value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">abs(number: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">abs(10)\n// 10\n\nabs(-10)\n// 10\n</code></pre>\n'},{name:"modulo(dividend, divisor)",description:'<p>Returns the remainder of the division of dividend by divisor.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">modulo(dividend: number, divisor: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">modulo(12, 5)\n// 2\n</code></pre>\n'},{name:"sqrt(number)",description:'<p>Returns the square root of the given value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">sqrt(number: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">sqrt(16)\n// 4\n</code></pre>\n'},{name:"log(number)",description:'<p>Returns the natural logarithm (base e) of the given value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">log(number: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">log(10)\n// 2.302585092994046\n</code></pre>\n'},{name:"exp(number)",description:'<p>Returns the Euler’s number e raised to the power of the given number .</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">exp(number: number): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">exp(5)\n// 148.4131591025766\n</code></pre>\n'},{name:"odd(number)",description:'<p>Returns <code>true</code> if the given value is odd. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">odd(number: number): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">odd(5)\n// true\n\nodd(2)\n// false\n</code></pre>\n'},{name:"even(number)",description:'<p>Returns <code>true</code> if the given is even. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">even(number: number): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">even(5)\n// false\n\neven(2)\n// true\n</code></pre>\n'},{name:"random number()",description:'<p><em>Camunda Extension</em></p>\n<p>Returns a random number between <code>0</code> and <code>1</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">random number(): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">random number()\n// 0.9701618132579795\n</code></pre>\n'},{name:"before(point1, point2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">before(point1: Any, point2: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">before(1, 10)\n// true\n\nbefore(10, 1)\n// false\n</code></pre>\n'},{name:"before(range, point)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">before(range: range, point: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">before([1..5], 10)\n// true\n</code></pre>\n'},{name:"before(point, range)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">before(point: Any, range: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">before(1, [2..5])\n// true\n</code></pre>\n'},{name:"before(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">before(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">before([1..5], [6..10])\n// true\n\nbefore([1..5),[5..10])\n// true\n</code></pre>\n'},{name:"after(point1, point2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">after(point1: Any, point2: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">after(10, 1)\n// true\n\nafter(1, 10)\n// false\n</code></pre>\n'},{name:"after(range, point)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">after(range: range, point: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">after([1..5], 10)\n// false\n</code></pre>\n'},{name:"after(point, range)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">after(point: Any, range: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">after(12, [2..5])\n// true\n</code></pre>\n'},{name:"after(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">after(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">after([6..10], [1..5])\n// true\n\nafter([5..10], [1..5))\n// true\n</code></pre>\n'},{name:"meets(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">meets(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">meets([1..5], [5..10])\n// true\n\nmeets([1..3], [4..6])\n// false\n\nmeets([1..3], [3..5])\n// true\n\nmeets([1..5], (5..8])\n// false\n</code></pre>\n'},{name:"met by(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">met by(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">met by([5..10], [1..5])\n// true\n\nmet by([3..4], [1..2])\n// false\n\nmet by([3..5], [1..3])\n// true\n\nmet by((5..8], [1..5))\n// false\n\nmet by([5..10], [1..5))\n// false\n</code></pre>\n'},{name:"overlaps(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">overlaps(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">overlaps([5..10], [1..6])\n// true\n\noverlaps((3..7], [1..4])\n// true\n\noverlaps([1..3], (3..6])\n// false\n\noverlaps((5..8], [1..5))\n// false\n\noverlaps([4..10], [1..5))\n// true\n</code></pre>\n'},{name:"overlaps before(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">overlaps before(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">overlaps before([1..5], [4..10])\n// true\n\noverlaps before([3..4], [1..2])\n// false\n\noverlaps before([1..3], (3..5])\n// false\n\noverlaps before([1..5), (3..8])\n// true\n\noverlaps before([1..5), [5..10])\n// false\n</code></pre>\n'},{name:"overlaps after(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">overlaps after(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">overlaps after([4..10], [1..5])\n// true\n\noverlaps after([3..4], [1..2])\n// false\n\noverlaps after([3..5], [1..3))\n// false\n\noverlaps after((5..8], [1..5))\n// false\n\noverlaps after([4..10], [1..5))\n// true\n</code></pre>\n'},{name:"finishes(point, range)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">finishes(point: Any, range: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">finishes(5, [1..5])\n// true\n\nfinishes(10, [1..7])\n// false\n</code></pre>\n'},{name:"finishes(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">finishes(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">finishes([3..5], [1..5])\n// true\n\nfinishes((1..5], [1..5))\n// false\n\nfinishes([5..10], [1..10))\n// false\n</code></pre>\n'},{name:"finished by(range, point)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">finished by(range: range, point: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">finished by([5..10], 10)\n// true\n\nfinished by([3..4], 2)\n// false\n</code></pre>\n'},{name:"finished by(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">finished by(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">finished by([1..5], [3..5])\n// true\n\nfinished by((5..8], [1..5))\n// false\n\nfinished by([5..10], (1..10))\n// false\n</code></pre>\n'},{name:"includes(range, point)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">includes(range: range, point: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">includes([5..10], 6)\n// true\n\nincludes([3..4], 5)\n// false\n</code></pre>\n'},{name:"includes(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">includes(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">includes([1..10], [4..6])\n// true\n\nincludes((5..8], [1..5))\n// false\n\nincludes([1..10], [1..5))\n// true\n</code></pre>\n'},{name:"during(point, range)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">during(point: Any, range: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">during(5, [1..10])\n// true\n\nduring(12, [1..10])\n// false\n\nduring(1, (1..10])\n// false\n</code></pre>\n'},{name:"during(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">during(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">during([4..6], [1..10))\n// true\n\nduring((1..5], (1..10])\n// true\n</code></pre>\n'},{name:"starts(point, range)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">starts(point: Any, range: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">starts(1, [1..5])\n// true\n\nstarts(1, (1..8])\n// false\n</code></pre>\n'},{name:"starts(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">starts(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">starts((1..5], [1..5])\n// false\n\nstarts([1..10], [1..5])\n// false\n\nstarts((1..5), (1..10))\n// true\n</code></pre>\n'},{name:"started by(range, point)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">started by(range: range, point: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">started by([1..10], 1)\n// true\n\nstarted by((1..10], 1)\n// false\n</code></pre>\n'},{name:"started by(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">started by(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">started by([1..10], [1..5])\n// true\n\nstarted by((1..10], [1..5))\n// false\n\nstarted by([1..10], [1..10))\n// true\n</code></pre>\n'},{name:"coincides(point1, point2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">coincides(point1: Any, point2: Any): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">coincides(5, 5)\n// true\n\ncoincides(3, 4)\n// false\n</code></pre>\n'},{name:"coincides(range1, range2)",description:'<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">coincides(range1: range, range2: range): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">coincides([1..5], [1..5])\n// true\n\ncoincides((1..5], [1..5))\n// false\n\ncoincides([1..5], [2..6])\n// false\n</code></pre>\n'},{name:"substring(string, start position)",description:'<p>Returns a substring of the given value starting at <code>start position</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">substring(string: string, start position: number): string\n</code></pre>\n<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">substring(&quot;foobar&quot;, 3)\n// &quot;obar&quot;\n</code></pre>\n'},{name:"substring(string, start position, length)",description:'<p>Returns a substring of the given value starting at <code>start position</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">substring(string: string, start position: number, length: number): string\n</code></pre>\n<p>The <code>start position</code> starts at the index <code>1</code>. The last position is <code>-1</code>.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">substring(&quot;foobar&quot;, 3, 3)\n// &quot;oba&quot;\n</code></pre>\n'},{name:"string length(string)",description:'<p>Returns the number of characters in the given value.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">string length(string: string): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">string length(&quot;foo&quot;)\n// 3\n</code></pre>\n'},{name:"upper case(string)",description:'<p>Returns the given value with all characters are uppercase.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">upper case(string: string): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">upper case(&quot;aBc4&quot;)\n// &quot;ABC4&quot;\n</code></pre>\n'},{name:"lower case(string)",description:'<p>Returns the given value with all characters are lowercase.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">lower case(string: string): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">lower case(&quot;aBc4&quot;)\n// &quot;abc4&quot;\n</code></pre>\n'},{name:"substring before(string, match)",description:'<p>Returns a substring of the given value that contains all characters before <code>match</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">substring before(string: string, match: string): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">substring before(&quot;foobar&quot;, &quot;bar&quot;)\n// &quot;foo&quot;\n</code></pre>\n'},{name:"substring after(string, match)",description:'<p>Returns a substring of the given value that contains all characters after <code>match</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">substring after(string: string, match: string): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">substring after(&quot;foobar&quot;, &quot;ob&quot;)\n// &quot;ar&quot;\n</code></pre>\n'},{name:"contains(string, match)",description:'<p>Returns <code>true</code> if the given value contains the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">contains(string: string, match: string): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">contains(&quot;foobar&quot;, &quot;of&quot;)\n// false\n</code></pre>\n'},{name:"starts with(string, match)",description:'<p>Returns <code>true</code> if the given value starts with the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">starts with(string: string, match: string): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">starts with(&quot;foobar&quot;, &quot;fo&quot;)\n// true\n</code></pre>\n'},{name:"ends with(string, match)",description:'<p>Returns <code>true</code> if the given value ends with the substring <code>match</code>. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">ends with(string: string, match: string): boolean\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">ends with(&quot;foobar&quot;, &quot;r&quot;)\n// true\n</code></pre>\n'},{name:"matches(input, pattern)",description:'<p>Returns <code>true</code> if the given value matches the <code>pattern</code>. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">matches(input: string, pattern: string): boolean\n</code></pre>\n<p>The <code>pattern</code> is a string that contains a regular expression.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">matches(&quot;foobar&quot;, &quot;^fo*bar&quot;)\n// true\n</code></pre>\n'},{name:"matches(input, pattern, flags)",description:'<p>Returns <code>true</code> if the given value matches the <code>pattern</code>. Otherwise, returns <code>false</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">matches(input: string, pattern: string, flags: string): boolean\n</code></pre>\n<p>The <code>pattern</code> is a string that contains a regular expression.</p>\n<p>The <code>flags</code> can contain one or more of the following characters:</p>\n<ul>\n<li><code>s</code> (dot-all)</li>\n<li><code>m</code> (multi-line)</li>\n<li><code>i</code> (case insensitive)</li>\n<li><code>x</code> (comments)</li>\n</ul>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">matches(&quot;FooBar&quot;, &quot;foo&quot;, &quot;i&quot;)\n// true\n</code></pre>\n'},{name:"replace(input, pattern, replacement)",description:'<p>Returns the resulting string after replacing all occurrences of <code>pattern</code> with <code>replacement</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">replace(input: string, pattern: string, replacement: string): string\n</code></pre>\n<p>The <code>pattern</code> is a string that contains a regular expression.</p>\n<p>The <code>replacement</code> can access the match groups by using <code>$</code> and the number of the group, for example,\n<code>$1</code> to access the first group.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">replace(&quot;abcd&quot;, &quot;(ab)|(a)&quot;, &quot;[1=$1][2=$2]&quot;)\n// &quot;[1=ab][2=]cd&quot;\n\nreplace(&quot;0123456789&quot;, &quot;(\\d{3})(\\d{3})(\\d{4})&quot;, &quot;($1) $2-$3&quot;)\n// &quot;(012) 345-6789&quot;\n</code></pre>\n'},{name:"replace(input, pattern, replacement, flags)",description:'<p>Returns the resulting string after replacing all occurrences of <code>pattern</code> with <code>replacement</code>.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">replace(input: string, pattern: string, replacement: string, flags: string): string\n</code></pre>\n<p>The <code>pattern</code> is a string that contains a regular expression.</p>\n<p>The <code>replacement</code> can access the match groups by using <code>$</code> and the number of the group, for example,\n<code>$1</code> to access the first group.</p>\n<p>The <code>flags</code> can contain one or more of the following characters:</p>\n<ul>\n<li><code>s</code> (dot-all)</li>\n<li><code>m</code> (multi-line)</li>\n<li><code>i</code> (case insensitive)</li>\n<li><code>x</code> (comments)</li>\n</ul>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">replace(&quot;How do you feel?&quot;, &quot;Feel&quot;, &quot;FEEL&quot;, &quot;i&quot;)\n// &quot;How do you FEEL?&quot;\n</code></pre>\n'},{name:"split(string, delimiter)",description:'<p>Splits the given value into a list of substrings, breaking at each occurrence of the <code>delimiter</code> pattern.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">split(string: string, delimiter: string): list&lt;string&gt;\n</code></pre>\n<p>The <code>delimiter</code> is a string that contains a regular expression.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">split(&quot;John Doe&quot;, &quot;\\s&quot; )\n// [&quot;John&quot;, &quot;Doe&quot;]\n\nsplit(&quot;a;b;c;;&quot;, &quot;;&quot;)\n// [&quot;a&quot;, &quot;b&quot;, &quot;c&quot;, &quot;&quot;, &quot;&quot;]\n</code></pre>\n'},{name:"extract(string, pattern)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns all matches of the pattern in the given string. Returns an empty list if the pattern doesn&#39;t\nmatch.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">extract(string: string, pattern: string): list&lt;string&gt;\n</code></pre>\n<p>The <code>pattern</code> is a string that contains a regular expression.</p>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">extract(&quot;references are 1234, 1256, 1378&quot;, &quot;12[0-9]*&quot;)\n// [&quot;1234&quot;,&quot;1256&quot;]\n</code></pre>\n'},{name:"now()",description:'<p>Returns the current date and time including the timezone.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">now(): date and time\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">now()\n// date and time(&quot;2020-07-31T14:27:30@Europe/Berlin&quot;)\n</code></pre>\n'},{name:"today()",description:'<p>Returns the current date.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">today(): date\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">today()\n// date(&quot;2020-07-31&quot;)\n</code></pre>\n'},{name:"day of week(date)",description:'<p>Returns the day of the week according to the Gregorian calendar. Note that it always returns the English name of the day.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">day of week(date: date): string\n</code></pre>\n<pre><code class="language-feel">day of week(date: date and time): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">day of week(date(&quot;2019-09-17&quot;))\n// &quot;Tuesday&quot;\n\nday of week(date and time(&quot;2019-09-17T12:00:00&quot;))\n// &quot;Tuesday&quot;\n</code></pre>\n'},{name:"day of year(date)",description:'<p>Returns the Gregorian number of the day within the year.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">day of year(date: date): number\n</code></pre>\n<pre><code class="language-feel">day of year(date: date and time): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">day of year(date(&quot;2019-09-17&quot;))\n// 260\n\nday of year(date and time(&quot;2019-09-17T12:00:00&quot;))\n// 260\n</code></pre>\n'},{name:"week of year(date)",description:'<p>Returns the Gregorian number of the week within the year, according to ISO 8601.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">week of year(date: date): number\n</code></pre>\n<pre><code class="language-feel">week of year(date: date and time): number\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">week of year(date(&quot;2019-09-17&quot;))\n// 38\n\nweek of year(date and time(&quot;2019-09-17T12:00:00&quot;))\n// 38\n</code></pre>\n'},{name:"month of year(date)",description:'<p>Returns the month of the year according to the Gregorian calendar. Note that it always returns the English name of the month.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">month of year(date: date): string\n</code></pre>\n<pre><code class="language-feel">month of year(date: date and time): string\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">month of year(date(&quot;2019-09-17&quot;))\n// &quot;September&quot;\n\nmonth of year(date and time(&quot;2019-09-17T12:00:00&quot;))\n// &quot;September&quot;\n</code></pre>\n'},{name:"abs(n)",description:'<p>Returns the absolute value of a given duration.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">abs(n: days and time duration): days and time duration\n</code></pre>\n<pre><code class="language-feel">abs(n: years and months duration): years and months duration\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">abs(duration(&quot;-PT5H&quot;))\n// &quot;duration(&quot;PT5H&quot;)&quot;\n\nabs(duration(&quot;PT5H&quot;))\n// &quot;duration(&quot;PT5H&quot;)&quot;\n\nabs(duration(&quot;-P2M&quot;))\n// duration(&quot;P2M&quot;)\n</code></pre>\n'},{name:"last day of month(date)",description:'<p><em>Camunda Extension</em></p>\n<p>Takes the month of the given date or date-time value and returns the last day of this month.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">last day of month(date: date): date\n</code></pre>\n<pre><code class="language-feel">last day of month(date: date and time): date\n</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">last day of month(date(&quot;2022-10-01&quot;))\n// date(&quot;2022-10-31&quot;))\n\nlast day of month(date and time(&quot;2022-10-16T12:00:00&quot;))\n// date(&quot;2022-10-31&quot;))\n</code></pre>\n'},{name:"is empty(list)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns true if the given list is empty. Otherwise, returns false.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">is empty(list: list): boolean</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">is empty([])\n// true\n\nis empty([1,2,3])\n// false\n</code></pre>'},{name:"trim(string)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns the given string without leading and trailing spaces.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">trim(string: string): string</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">trim("  hello world  ")\n// "hello world"\n\ntrim("hello   world ")\n// "hello   world"\n</code></pre>'},{name:"uuid()",description:'<p><em>Camunda Extension</em></p>\n<p>Returns a UUID (Universally Unique Identifier) with 36 characters.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">uuid(): string</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">uuid()\n// "7793aab1-d761-4d38-916b-b7270e309894"\n</code></pre>'},{name:"to base64(string)",description:'<p><em>Camunda Extension</em></p>\n<p>Returns the given string encoded in Base64 format.</p>\n<p><strong>Function signature</strong></p>\n<pre><code class="language-feel">to base64(value: string): string</code></pre>\n<p><strong>Examples</strong></p>\n<pre><code class="language-feel">to base64("FEEL")\n// "RkVFTA=="\n</code></pre>'}];function jB(e){return e.map(BB)}function BB(e){const{name:t,description:n}=e,r=t.match(/^([\w\s]+)\((.*)\)$/),i=r[1],o=r[2],s=o?o.split(", ").map((e=>({name:e}))):[];return{name:i,type:"function",params:s,info:()=>Uj(`<div class="description">${n}<div>`),boost:0}}const VB=jB(NB),qB=new gg,zB=new gg;function HB({extensions:e=[],dialect:t="expression",container:n,contentAttributes:r={},tooltipContainer:i,onChange:o=()=>{},onKeyDown:s=()=>{},onLint:a=()=>{},placeholder:l="",readOnly:c=!1,value:u="",builtins:h=VB,variables:d=[]}){const f=px.updateListener.of((e=>{e.docChanged&&o(e.state.doc.toString())})),p=px.updateListener.of((e=>{const t=e.transactions.flatMap((e=>e.effects)).filter((e=>e.is(XC)));if(!t.length)return;const n=t.flatMap((e=>e.value));a(n)})),g=px.domEventHandlers({keydown:s});"string"===typeof i&&(i=document.querySelector(i));const m=i?$x({tooltipSpace:function(){return i.getBoundingClientRect()}}):[],v=[CS(),qB.of(LB({dialect:t,builtins:h,variables:d})),A_(),u_(),dS(),px.contentAttributes.of(r),f,g,_x.of([...BC]),dB,p,m,zB.of(Px(l)),mB,...e];return c&&v.push(px.editable.of(!1)),this._cmEditor=new px({state:Qg.create({doc:u,extensions:v}),parent:n}),this}HB.prototype.setValue=function(e){this._cmEditor.dispatch({changes:{from:0,to:this._cmEditor.state.doc.length,insert:e}})},HB.prototype.focus=function(e){const t=this._cmEditor;if(t.contentDOM.focus(),t.focus(),"number"===typeof e){const n=t.state.doc.length;t.dispatch({selection:{anchor:e<=n?e:n}})}},HB.prototype.getSelection=function(){return this._cmEditor.state.selection},HB.prototype.setVariables=function(e){const{dialect:t,builtins:n}=$B(this._cmEditor.state);this._cmEditor.dispatch({effects:[qB.reconfigure(LB({dialect:t,builtins:n,variables:e}))]})},HB.prototype.setPlaceholder=function(e){this._cmEditor.dispatch({effects:zB.reconfigure(Px(e))})};
/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/
var WB=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],QB=WB.join(","),UB="undefined"===typeof Element,YB=UB?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,XB=!UB&&Element.prototype.getRootNode?function(e){var t;return null===e||void 0===e||null===(t=e.getRootNode)||void 0===t?void 0:t.call(e)}:function(e){return null===e||void 0===e?void 0:e.ownerDocument},ZB=function e(t,n){var r;void 0===n&&(n=!0);var i=null===t||void 0===t||null===(r=t.getAttribute)||void 0===r?void 0:r.call(t,"inert"),o=""===i||"true"===i,s=o||n&&t&&e(t.parentNode);return s},GB=function(e){var t,n=null===e||void 0===e||null===(t=e.getAttribute)||void 0===t?void 0:t.call(e,"contenteditable");return""===n||"true"===n},KB=function(e,t,n){if(ZB(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(QB));return t&&YB.call(e,QB)&&r.unshift(e),r=r.filter(n),r},JB=function e(t,n,r){var i=[],o=Array.from(t);while(o.length){var s=o.shift();if(!ZB(s,!1))if("SLOT"===s.tagName){var a=s.assignedElements(),l=a.length?a:s.children,c=e(l,!0,r);r.flatten?i.push.apply(i,c):i.push({scopeParent:s,candidates:c})}else{var u=YB.call(s,QB);u&&r.filter(s)&&(n||!t.includes(s))&&i.push(s);var h=s.shadowRoot||"function"===typeof r.getShadowRoot&&r.getShadowRoot(s),d=!ZB(h,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(s));if(h&&d){var f=e(!0===h?s.children:h.children,!0,r);r.flatten?i.push.apply(i,f):i.push({scopeParent:s,candidates:f})}else o.unshift.apply(o,s.children)}}return i},eV=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},tV=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||GB(e))&&!eV(e)?0:e.tabIndex},nV=function(e,t){var n=tV(e);return n<0&&t&&!eV(e)?0:n},rV=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},iV=function(e){return"INPUT"===e.tagName},oV=function(e){return iV(e)&&"hidden"===e.type},sV=function(e){var t="DETAILS"===e.tagName&&Array.prototype.slice.apply(e.children).some((function(e){return"SUMMARY"===e.tagName}));return t},aV=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},lV=function(e){if(!e.name)return!0;var t,n=e.form||XB(e),r=function(e){return n.querySelectorAll('input[type="radio"][name="'+e+'"]')};if("undefined"!==typeof window&&"undefined"!==typeof window.CSS&&"function"===typeof window.CSS.escape)t=r(window.CSS.escape(e.name));else try{t=r(e.name)}catch(o){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",o.message),!1}var i=aV(t,e.form);return!i||i===e},cV=function(e){return iV(e)&&"radio"===e.type},uV=function(e){return cV(e)&&!lV(e)},hV=function(e){var t,n=e&&XB(e),r=null===(t=n)||void 0===t?void 0:t.host,i=!1;if(n&&n!==e){var o,s,a;i=!!(null!==(o=r)&&void 0!==o&&null!==(s=o.ownerDocument)&&void 0!==s&&s.contains(r)||null!==e&&void 0!==e&&null!==(a=e.ownerDocument)&&void 0!==a&&a.contains(e));while(!i&&r){var l,c,u;n=XB(r),r=null===(l=n)||void 0===l?void 0:l.host,i=!(null===(c=r)||void 0===c||null===(u=c.ownerDocument)||void 0===u||!u.contains(r))}}return i},dV=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return 0===n&&0===r},fV=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if("hidden"===getComputedStyle(e).visibility)return!0;var i=YB.call(e,"details>summary:first-of-type"),o=i?e.parentElement:e;if(YB.call(o,"details:not([open]) *"))return!0;if(n&&"full"!==n&&"legacy-full"!==n){if("non-zero-area"===n)return dV(e)}else{if("function"===typeof r){var s=e;while(e){var a=e.parentElement,l=XB(e);if(a&&!a.shadowRoot&&!0===r(a))return dV(e);e=e.assignedSlot?e.assignedSlot:a||l===e.ownerDocument?a:l.host}e=s}if(hV(e))return!e.getClientRects().length;if("legacy-full"!==n)return!0}return!1},pV=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName)){var t=e.parentElement;while(t){if("FIELDSET"===t.tagName&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if("LEGEND"===r.tagName)return!!YB.call(t,"fieldset[disabled] *")||!r.contains(e)}return!0}t=t.parentElement}}return!1},gV=function(e,t){return!(t.disabled||ZB(t)||oV(t)||fV(t,e)||sV(t)||pV(t))},mV=function(e,t){return!(uV(t)||tV(t)<0||!gV(e,t))},vV=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},yV=function e(t){var n=[],r=[];return t.forEach((function(t,i){var o=!!t.scopeParent,s=o?t.scopeParent:t,a=nV(s,o),l=o?e(t.candidates):s;0===a?o?n.push.apply(n,l):n.push(s):r.push({documentOrder:i,tabIndex:a,item:t,isScope:o,content:l})})),r.sort(rV).reduce((function(e,t){return t.isScope?e.push.apply(e,t.content):e.push(t.content),e}),[]).concat(n)},bV=function(e,t){var n;return t=t||{},n=t.getShadowRoot?JB([e],t.includeContainer,{filter:mV.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:vV}):KB(e,t.includeContainer,mV.bind(null,t)),yV(n)},wV=function(e,t){var n;return t=t||{},n=t.getShadowRoot?JB([e],t.includeContainer,{filter:gV.bind(null,t),flatten:!0,getShadowRoot:t.getShadowRoot}):KB(e,t.includeContainer,gV.bind(null,t)),n},xV=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==YB.call(e,QB)&&mV(t,e)},kV=WB.concat("iframe").join(","),_V=function(e,t){if(t=t||{},!e)throw new Error("No node provided");return!1!==YB.call(e,kV)&&gV(t,e)};
/*!
* focus-trap 7.6.1
* @license MIT, https://github.com/focus-trap/focus-trap/blob/master/LICENSE
*/
function OV(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function SV(e){if(Array.isArray(e))return OV(e)}function EV(e,t,n){return(t=RV(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function CV(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function TV(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function AV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function DV(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?AV(Object(n),!0).forEach((function(t){EV(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):AV(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function MV(e){return SV(e)||CV(e)||PV(e)||TV()}function FV(e,t){if("object"!=typeof e||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var r=n.call(e,t||"default");if("object"!=typeof r)return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function RV(e){var t=FV(e,"string");return"symbol"==typeof t?t:t+""}function PV(e,t){if(e){if("string"==typeof e)return OV(e,t);var n={}.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?OV(e,t):void 0}}var IV={activateTrap:function(e,t){if(e.length>0){var n=e[e.length-1];n!==t&&n.pause()}var r=e.indexOf(t);-1===r||e.splice(r,1),e.push(t)},deactivateTrap:function(e,t){var n=e.indexOf(t);-1!==n&&e.splice(n,1),e.length>0&&e[e.length-1].unpause()}},LV=function(e){return e.tagName&&"input"===e.tagName.toLowerCase()&&"function"===typeof e.select},$V=function(e){return"Escape"===(null===e||void 0===e?void 0:e.key)||"Esc"===(null===e||void 0===e?void 0:e.key)||27===(null===e||void 0===e?void 0:e.keyCode)},NV=function(e){return"Tab"===(null===e||void 0===e?void 0:e.key)||9===(null===e||void 0===e?void 0:e.keyCode)},jV=function(e){return NV(e)&&!e.shiftKey},BV=function(e){return NV(e)&&e.shiftKey},VV=function(e){return setTimeout(e,0)},qV=function(e,t){var n=-1;return e.every((function(e,r){return!t(e)||(n=r,!1)})),n},zV=function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return"function"===typeof e?e.apply(void 0,n):e},HV=function(e){return e.target.shadowRoot&&"function"===typeof e.composedPath?e.composedPath()[0]:e.target},WV=[],QV=function(e,t){var n,r=(null===t||void 0===t?void 0:t.document)||document,i=(null===t||void 0===t?void 0:t.trapStack)||WV,o=DV({returnFocusOnDeactivate:!0,escapeDeactivates:!0,delayInitialFocus:!0,isKeyForward:jV,isKeyBackward:BV},t),s={containers:[],containerGroups:[],tabbableGroups:[],nodeFocusedBeforeActivation:null,mostRecentlyFocusedNode:null,active:!1,paused:!1,delayInitialFocusTimer:void 0,recentNavEvent:void 0},a=function(e,t,n){return e&&void 0!==e[t]?e[t]:o[n||t]},l=function(e,t){var n="function"===typeof(null===t||void 0===t?void 0:t.composedPath)?t.composedPath():void 0;return s.containerGroups.findIndex((function(t){var r=t.container,i=t.tabbableNodes;return r.contains(e)||(null===n||void 0===n?void 0:n.includes(r))||i.find((function(t){return t===e}))}))},c=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.hasFallback,i=void 0!==n&&n,s=t.params,a=void 0===s?[]:s,l=o[e];if("function"===typeof l&&(l=l.apply(void 0,MV(a))),!0===l&&(l=void 0),!l){if(void 0===l||!1===l)return l;throw new Error("`".concat(e,"` was specified but was not a node, or did not return a node"))}var c=l;if("string"===typeof l){try{c=r.querySelector(l)}catch(u){throw new Error("`".concat(e,'` appears to be an invalid selector; error="').concat(u.message,'"'))}if(!c&&!i)throw new Error("`".concat(e,"` as selector refers to no known node"))}return c},u=function(){var e=c("initialFocus",{hasFallback:!0});if(!1===e)return!1;if(void 0===e||e&&!_V(e,o.tabbableOptions))if(l(r.activeElement)>=0)e=r.activeElement;else{var t=s.tabbableGroups[0],n=t&&t.firstTabbableNode;e=n||c("fallbackFocus")}else null===e&&(e=c("fallbackFocus"));if(!e)throw new Error("Your focus-trap needs to have at least one focusable element");return e},h=function(){if(s.containerGroups=s.containers.map((function(e){var t=bV(e,o.tabbableOptions),n=wV(e,o.tabbableOptions),r=t.length>0?t[0]:void 0,i=t.length>0?t[t.length-1]:void 0,s=n.find((function(e){return xV(e)})),a=n.slice().reverse().find((function(e){return xV(e)})),l=!!t.find((function(e){return tV(e)>0}));return{container:e,tabbableNodes:t,focusableNodes:n,posTabIndexesFound:l,firstTabbableNode:r,lastTabbableNode:i,firstDomTabbableNode:s,lastDomTabbableNode:a,nextTabbableNode:function(e){var r=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],i=t.indexOf(e);return i<0?r?n.slice(n.indexOf(e)+1).find((function(e){return xV(e)})):n.slice(0,n.indexOf(e)).reverse().find((function(e){return xV(e)})):t[i+(r?1:-1)]}}})),s.tabbableGroups=s.containerGroups.filter((function(e){return e.tabbableNodes.length>0})),s.tabbableGroups.length<=0&&!c("fallbackFocus"))throw new Error("Your focus-trap must have at least one container with at least one tabbable node in it at all times");if(s.containerGroups.find((function(e){return e.posTabIndexesFound}))&&s.containerGroups.length>1)throw new Error("At least one node with a positive tabindex was found in one of your focus-trap's multiple containers. Positive tabindexes are only supported in single-container focus-traps.")},d=function(e){var t=e.activeElement;if(t)return t.shadowRoot&&null!==t.shadowRoot.activeElement?d(t.shadowRoot):t},f=function(e){!1!==e&&e!==d(document)&&(e&&e.focus?(e.focus({preventScroll:!!o.preventScroll}),s.mostRecentlyFocusedNode=e,LV(e)&&e.select()):f(u()))},p=function(e){var t=c("setReturnFocus",{params:[e]});return t||!1!==t&&e},g=function(e){var t=e.target,n=e.event,r=e.isBackward,i=void 0!==r&&r;t=t||HV(n),h();var a=null;if(s.tabbableGroups.length>0){var u=l(t,n),d=u>=0?s.containerGroups[u]:void 0;if(u<0)a=i?s.tabbableGroups[s.tabbableGroups.length-1].lastTabbableNode:s.tabbableGroups[0].firstTabbableNode;else if(i){var f=qV(s.tabbableGroups,(function(e){var n=e.firstTabbableNode;return t===n}));if(f<0&&(d.container===t||_V(t,o.tabbableOptions)&&!xV(t,o.tabbableOptions)&&!d.nextTabbableNode(t,!1))&&(f=u),f>=0){var p=0===f?s.tabbableGroups.length-1:f-1,g=s.tabbableGroups[p];a=tV(t)>=0?g.lastTabbableNode:g.lastDomTabbableNode}else NV(n)||(a=d.nextTabbableNode(t,!1))}else{var m=qV(s.tabbableGroups,(function(e){var n=e.lastTabbableNode;return t===n}));if(m<0&&(d.container===t||_V(t,o.tabbableOptions)&&!xV(t,o.tabbableOptions)&&!d.nextTabbableNode(t))&&(m=u),m>=0){var v=m===s.tabbableGroups.length-1?0:m+1,y=s.tabbableGroups[v];a=tV(t)>=0?y.firstTabbableNode:y.firstDomTabbableNode}else NV(n)||(a=d.nextTabbableNode(t))}}else a=c("fallbackFocus");return a},m=function(e){var t=HV(e);l(t,e)>=0||(zV(o.clickOutsideDeactivates,e)?n.deactivate({returnFocus:o.returnFocusOnDeactivate}):zV(o.allowOutsideClick,e)||e.preventDefault())},v=function(e){var t=HV(e),n=l(t,e)>=0;if(n||t instanceof Document)n&&(s.mostRecentlyFocusedNode=t);else{var r;e.stopImmediatePropagation();var i=!0;if(s.mostRecentlyFocusedNode)if(tV(s.mostRecentlyFocusedNode)>0){var a=l(s.mostRecentlyFocusedNode),c=s.containerGroups[a].tabbableNodes;if(c.length>0){var h=c.findIndex((function(e){return e===s.mostRecentlyFocusedNode}));h>=0&&(o.isKeyForward(s.recentNavEvent)?h+1<c.length&&(r=c[h+1],i=!1):h-1>=0&&(r=c[h-1],i=!1))}}else s.containerGroups.some((function(e){return e.tabbableNodes.some((function(e){return tV(e)>0}))}))||(i=!1);else i=!1;i&&(r=g({target:s.mostRecentlyFocusedNode,isBackward:o.isKeyBackward(s.recentNavEvent)})),f(r||(s.mostRecentlyFocusedNode||u()))}s.recentNavEvent=void 0},y=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];s.recentNavEvent=e;var n=g({event:e,isBackward:t});n&&(NV(e)&&e.preventDefault(),f(n))},b=function(e){(o.isKeyForward(e)||o.isKeyBackward(e))&&y(e,o.isKeyBackward(e))},w=function(e){$V(e)&&!1!==zV(o.escapeDeactivates,e)&&(e.preventDefault(),n.deactivate())},x=function(e){var t=HV(e);l(t,e)>=0||zV(o.clickOutsideDeactivates,e)||zV(o.allowOutsideClick,e)||(e.preventDefault(),e.stopImmediatePropagation())},k=function(){if(s.active)return IV.activateTrap(i,n),s.delayInitialFocusTimer=o.delayInitialFocus?VV((function(){f(u())})):f(u()),r.addEventListener("focusin",v,!0),r.addEventListener("mousedown",m,{capture:!0,passive:!1}),r.addEventListener("touchstart",m,{capture:!0,passive:!1}),r.addEventListener("click",x,{capture:!0,passive:!1}),r.addEventListener("keydown",b,{capture:!0,passive:!1}),r.addEventListener("keydown",w),n},_=function(){if(s.active)return r.removeEventListener("focusin",v,!0),r.removeEventListener("mousedown",m,!0),r.removeEventListener("touchstart",m,!0),r.removeEventListener("click",x,!0),r.removeEventListener("keydown",b,!0),r.removeEventListener("keydown",w),n},O=function(e){var t=e.some((function(e){var t=Array.from(e.removedNodes);return t.some((function(e){return e===s.mostRecentlyFocusedNode}))}));t&&f(u())},S="undefined"!==typeof window&&"MutationObserver"in window?new MutationObserver(O):void 0,E=function(){S&&(S.disconnect(),s.active&&!s.paused&&s.containers.map((function(e){S.observe(e,{subtree:!0,childList:!0})})))};return n={get active(){return s.active},get paused(){return s.paused},activate:function(e){if(s.active)return this;var t=a(e,"onActivate"),n=a(e,"onPostActivate"),i=a(e,"checkCanFocusTrap");i||h(),s.active=!0,s.paused=!1,s.nodeFocusedBeforeActivation=r.activeElement,null===t||void 0===t||t();var o=function(){i&&h(),k(),E(),null===n||void 0===n||n()};return i?(i(s.containers.concat()).then(o,o),this):(o(),this)},deactivate:function(e){if(!s.active)return this;var t=DV({onDeactivate:o.onDeactivate,onPostDeactivate:o.onPostDeactivate,checkCanReturnFocus:o.checkCanReturnFocus},e);clearTimeout(s.delayInitialFocusTimer),s.delayInitialFocusTimer=void 0,_(),s.active=!1,s.paused=!1,E(),IV.deactivateTrap(i,n);var r=a(t,"onDeactivate"),l=a(t,"onPostDeactivate"),c=a(t,"checkCanReturnFocus"),u=a(t,"returnFocus","returnFocusOnDeactivate");null===r||void 0===r||r();var h=function(){VV((function(){u&&f(p(s.nodeFocusedBeforeActivation)),null===l||void 0===l||l()}))};return u&&c?(c(p(s.nodeFocusedBeforeActivation)).then(h,h),this):(h(),this)},pause:function(e){if(s.paused||!s.active)return this;var t=a(e,"onPause"),n=a(e,"onPostPause");return s.paused=!0,null===t||void 0===t||t(),_(),E(),null===n||void 0===n||n(),this},unpause:function(e){if(!s.paused||!s.active)return this;var t=a(e,"onUnpause"),n=a(e,"onPostUnpause");return s.paused=!1,null===t||void 0===t||t(),h(),k(),E(),null===n||void 0===n||n(),this},updateContainerElements:function(e){var t=[].concat(e).filter(Boolean);return s.containers=t.map((function(e){return"string"===typeof e?r.querySelector(e):e})),s.active&&h(),E(),this}},n.updateContainerElements(e),n},UV=20,YV=1,XV=1e6,ZV=1e6,GV=-7,KV=21,JV=!1,eq="[big.js] ",tq=eq+"Invalid ",nq=tq+"decimal places",rq=tq+"rounding mode",iq=eq+"Division by zero",oq={},sq=void 0,aq=/^-?(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i;function lq(){function e(t){var n=this;if(!(n instanceof e))return t===sq?lq():new e(t);if(t instanceof e)n.s=t.s,n.e=t.e,n.c=t.c.slice();else{if("string"!==typeof t){if(!0===e.strict&&"bigint"!==typeof t)throw TypeError(tq+"value");t=0===t&&1/t<0?"-0":String(t)}cq(n,t)}n.constructor=e}return e.prototype=oq,e.DP=UV,e.RM=YV,e.NE=GV,e.PE=KV,e.strict=JV,e.roundDown=0,e.roundHalfUp=1,e.roundHalfEven=2,e.roundUp=3,e}function cq(e,t){var n,r,i;if(!aq.test(t))throw Error(tq+"number");for(e.s="-"==t.charAt(0)?(t=t.slice(1),-1):1,(n=t.indexOf("."))>-1&&(t=t.replace(".","")),(r=t.search(/e/i))>0?(n<0&&(n=r),n+=+t.slice(r+1),t=t.substring(0,r)):n<0&&(n=t.length),i=t.length,r=0;r<i&&"0"==t.charAt(r);)++r;if(r==i)e.c=[e.e=0];else{for(;i>0&&"0"==t.charAt(--i););for(e.e=n-r-1,e.c=[],n=0;r<=i;)e.c[n++]=+t.charAt(r++)}return e}function uq(e,t,n,r){var i=e.c;if(n===sq&&(n=e.constructor.RM),0!==n&&1!==n&&2!==n&&3!==n)throw Error(rq);if(t<1)r=3===n&&(r||!!i[0])||0===t&&(1===n&&i[0]>=5||2===n&&(i[0]>5||5===i[0]&&(r||i[1]!==sq))),i.length=1,r?(e.e=e.e-t+1,i[0]=1):i[0]=e.e=0;else if(t<i.length){if(r=1===n&&i[t]>=5||2===n&&(i[t]>5||5===i[t]&&(r||i[t+1]!==sq||1&i[t-1]))||3===n&&(r||!!i[0]),i.length=t,r)for(;++i[--t]>9;)if(i[t]=0,0===t){++e.e,i.unshift(1);break}for(t=i.length;!i[--t];)i.pop()}return e}function hq(e,t,n){var r=e.e,i=e.c.join(""),o=i.length;if(t)i=i.charAt(0)+(o>1?"."+i.slice(1):"")+(r<0?"e":"e+")+r;else if(r<0){for(;++r;)i="0"+i;i="0."+i}else if(r>0)if(++r>o)for(r-=o;r--;)i+="0";else r<o&&(i=i.slice(0,r)+"."+i.slice(r));else o>1&&(i=i.charAt(0)+"."+i.slice(1));return e.s<0&&n?"-"+i:i}oq.abs=function(){var e=new this.constructor(this);return e.s=1,e},oq.cmp=function(e){var t,n=this,r=n.c,i=(e=new n.constructor(e)).c,o=n.s,s=e.s,a=n.e,l=e.e;if(!r[0]||!i[0])return r[0]?o:i[0]?-s:0;if(o!=s)return o;if(t=o<0,a!=l)return a>l^t?1:-1;for(s=(a=r.length)<(l=i.length)?a:l,o=-1;++o<s;)if(r[o]!=i[o])return r[o]>i[o]^t?1:-1;return a==l?0:a>l^t?1:-1},oq.div=function(e){var t=this,n=t.constructor,r=t.c,i=(e=new n(e)).c,o=t.s==e.s?1:-1,s=n.DP;if(s!==~~s||s<0||s>XV)throw Error(nq);if(!i[0])throw Error(iq);if(!r[0])return e.s=o,e.c=[e.e=0],e;var a,l,c,u,h,d=i.slice(),f=a=i.length,p=r.length,g=r.slice(0,a),m=g.length,v=e,y=v.c=[],b=0,w=s+(v.e=t.e-e.e)+1;for(v.s=o,o=w<0?0:w,d.unshift(0);m++<a;)g.push(0);do{for(c=0;c<10;c++){if(a!=(m=g.length))u=a>m?1:-1;else for(h=-1,u=0;++h<a;)if(i[h]!=g[h]){u=i[h]>g[h]?1:-1;break}if(!(u<0))break;for(l=m==a?i:d;m;){if(g[--m]<l[m]){for(h=m;h&&!g[--h];)g[h]=9;--g[h],g[m]+=10}g[m]-=l[m]}for(;!g[0];)g.shift()}y[b++]=u?c:++c,g[0]&&u?g[m]=r[f]||0:g=[r[f]]}while((f++<p||g[0]!==sq)&&o--);return y[0]||1==b||(y.shift(),v.e--,w--),b>w&&uq(v,w,n.RM,g[0]!==sq),v},oq.eq=function(e){return 0===this.cmp(e)},oq.gt=function(e){return this.cmp(e)>0},oq.gte=function(e){return this.cmp(e)>-1},oq.lt=function(e){return this.cmp(e)<0},oq.lte=function(e){return this.cmp(e)<1},oq.minus=oq.sub=function(e){var t,n,r,i,o=this,s=o.constructor,a=o.s,l=(e=new s(e)).s;if(a!=l)return e.s=-l,o.plus(e);var c=o.c.slice(),u=o.e,h=e.c,d=e.e;if(!c[0]||!h[0])return h[0]?e.s=-l:c[0]?e=new s(o):e.s=1,e;if(a=u-d){for((i=a<0)?(a=-a,r=c):(d=u,r=h),r.reverse(),l=a;l--;)r.push(0);r.reverse()}else for(n=((i=c.length<h.length)?c:h).length,a=l=0;l<n;l++)if(c[l]!=h[l]){i=c[l]<h[l];break}if(i&&(r=c,c=h,h=r,e.s=-e.s),(l=(n=h.length)-(t=c.length))>0)for(;l--;)c[t++]=0;for(l=t;n>a;){if(c[--n]<h[n]){for(t=n;t&&!c[--t];)c[t]=9;--c[t],c[n]+=10}c[n]-=h[n]}for(;0===c[--l];)c.pop();for(;0===c[0];)c.shift(),--d;return c[0]||(e.s=1,c=[d=0]),e.c=c,e.e=d,e},oq.mod=function(e){var t,n=this,r=n.constructor,i=n.s,o=(e=new r(e)).s;if(!e.c[0])throw Error(iq);return n.s=e.s=1,t=1==e.cmp(n),n.s=i,e.s=o,t?new r(n):(i=r.DP,o=r.RM,r.DP=r.RM=0,n=n.div(e),r.DP=i,r.RM=o,this.minus(n.times(e)))},oq.neg=function(){var e=new this.constructor(this);return e.s=-e.s,e},oq.plus=oq.add=function(e){var t,n,r,i=this,o=i.constructor;if(e=new o(e),i.s!=e.s)return e.s=-e.s,i.minus(e);var s=i.e,a=i.c,l=e.e,c=e.c;if(!a[0]||!c[0])return c[0]||(a[0]?e=new o(i):e.s=i.s),e;if(a=a.slice(),t=s-l){for(t>0?(l=s,r=c):(t=-t,r=a),r.reverse();t--;)r.push(0);r.reverse()}for(a.length-c.length<0&&(r=c,c=a,a=r),t=c.length,n=0;t;a[t]%=10)n=(a[--t]=a[t]+c[t]+n)/10|0;for(n&&(a.unshift(n),++l),t=a.length;0===a[--t];)a.pop();return e.c=a,e.e=l,e},oq.pow=function(e){var t=this,n=new t.constructor("1"),r=n,i=e<0;if(e!==~~e||e<-ZV||e>ZV)throw Error(tq+"exponent");for(i&&(e=-e);;){if(1&e&&(r=r.times(t)),e>>=1,!e)break;t=t.times(t)}return i?n.div(r):r},oq.prec=function(e,t){if(e!==~~e||e<1||e>XV)throw Error(tq+"precision");return uq(new this.constructor(this),e,t)},oq.round=function(e,t){if(e===sq)e=0;else if(e!==~~e||e<-XV||e>XV)throw Error(nq);return uq(new this.constructor(this),e+this.e+1,t)},oq.sqrt=function(){var e,t,n,r=this,i=r.constructor,o=r.s,s=r.e,a=new i("0.5");if(!r.c[0])return new i(r);if(o<0)throw Error(eq+"No square root");o=Math.sqrt(+hq(r,!0,!0)),0===o||o===1/0?(t=r.c.join(""),t.length+s&1||(t+="0"),o=Math.sqrt(t),s=((s+1)/2|0)-(s<0||1&s),e=new i((o==1/0?"5e":(o=o.toExponential()).slice(0,o.indexOf("e")+1))+s)):e=new i(o+""),s=e.e+(i.DP+=4);do{n=e,e=a.times(n.plus(r.div(n)))}while(n.c.slice(0,s).join("")!==e.c.slice(0,s).join(""));return uq(e,(i.DP-=4)+e.e+1,i.RM)},oq.times=oq.mul=function(e){var t,n=this,r=n.constructor,i=n.c,o=(e=new r(e)).c,s=i.length,a=o.length,l=n.e,c=e.e;if(e.s=n.s==e.s?1:-1,!i[0]||!o[0])return e.c=[e.e=0],e;for(e.e=l+c,s<a&&(t=i,i=o,o=t,c=s,s=a,a=c),t=new Array(c=s+a);c--;)t[c]=0;for(l=a;l--;){for(a=0,c=s+l;c>l;)a=t[c]+o[l]*i[c-l-1]+a,t[c--]=a%10,a=a/10|0;t[c]=a}for(a?++e.e:t.shift(),l=t.length;!t[--l];)t.pop();return e.c=t,e},oq.toExponential=function(e,t){var n=this,r=n.c[0];if(e!==sq){if(e!==~~e||e<0||e>XV)throw Error(nq);for(n=uq(new n.constructor(n),++e,t);n.c.length<e;)n.c.push(0)}return hq(n,!0,!!r)},oq.toFixed=function(e,t){var n=this,r=n.c[0];if(e!==sq){if(e!==~~e||e<0||e>XV)throw Error(nq);for(n=uq(new n.constructor(n),e+n.e+1,t),e=e+n.e+1;n.c.length<e;)n.c.push(0)}return hq(n,!1,!!r)},oq[Symbol.for("nodejs.util.inspect.custom")]=oq.toJSON=oq.toString=function(){var e=this,t=e.constructor;return hq(e,e.e<=t.NE||e.e>=t.PE,!!e.c[0])},oq.toNumber=function(){var e=+hq(this,!0,!0);if(!0===this.constructor.strict&&!this.eq(e.toString()))throw Error(eq+"Imprecise conversion");return e},oq.toPrecision=function(e,t){var n=this,r=n.constructor,i=n.c[0];if(e!==sq){if(e!==~~e||e<1||e>XV)throw Error(tq+"precision");for(n=uq(new r(n),e,t);n.c.length<e;)n.c.push(0)}return hq(n,e<=n.e||n.e<=r.NE||n.e>=r.PE,!!i)},oq.valueOf=function(){var e=this,t=e.constructor;if(!0===t.strict)throw Error(eq+"valueOf disallowed");return hq(e,e.e<=t.NE||e.e>=t.PE,!0)};var dq=lq(),fq=dq,pq="__fn",gq=1e3,mq=Array.prototype.slice;function vq(){this._listeners={},this.on("diagram.destroy",1,this._destroy,this)}function yq(){}function bq(e,t){return e.apply(null,t)}function wq(e=!0){const t="number"===typeof e?e:e?300:0;return t?e=>q(e,t):e=>e}vq.prototype.on=function(e,t,n,r){if(e=x(e)?e:[e],O(t)&&(r=n,n=t,t=gq),!_(t))throw new Error("priority must be a number");var i=n;r&&(i=z(n,r),i[pq]=n[pq]||n);var o=this;e.forEach((function(e){o._addListener(e,{priority:t,callback:i,next:null})}))},vq.prototype.once=function(e,t,n,r){var i=this;if(O(t)&&(r=n,n=t,t=gq),!_(t))throw new Error("priority must be a number");function o(){o.__isTomb=!0;var t=n.apply(r,arguments);return i.off(e,o),t}o[pq]=n,this.on(e,t,o)},vq.prototype.off=function(e,t){e=x(e)?e:[e];var n=this;e.forEach((function(e){n._removeListener(e,t)}))},vq.prototype.createEvent=function(e){var t=new yq;return t.init(e),t},vq.prototype.fire=function(e,t){var n,r,i,o;if(o=mq.call(arguments),"object"===typeof e&&(t=e,e=t.type),!e)throw new Error("no event type specified");if(r=this._listeners[e],r){n=t instanceof yq?t:this.createEvent(t),o[0]=n;var s=n.type;e!==s&&(n.type=e);try{i=this._invokeListeners(n,o,r)}finally{e!==s&&(n.type=s)}return void 0===i&&n.defaultPrevented&&(i=!1),i}},vq.prototype.handleError=function(e){return!1===this.fire("error",{error:e})},vq.prototype._destroy=function(){this._listeners={}},vq.prototype._invokeListeners=function(e,t,n){var r;while(n){if(e.cancelBubble)break;r=this._invokeListener(e,t,n),n=n.next}return r},vq.prototype._invokeListener=function(e,t,n){var r;if(n.callback.__isTomb)return r;try{r=bq(n.callback,t),void 0!==r&&(e.returnValue=r,e.stopPropagation()),!1===r&&e.preventDefault()}catch(IH){if(!this.handleError(IH))throw console.error("unhandled error in event listener",IH),IH}return r},vq.prototype._addListener=function(e,t){var n,r=this._getListeners(e);if(r){while(r){if(r.priority<t.priority)return t.next=r,void(n?n.next=t:this._setListeners(e,t));n=r,r=r.next}n.next=t}else this._setListeners(e,t)},vq.prototype._getListeners=function(e){return this._listeners[e]},vq.prototype._setListeners=function(e,t){this._listeners[e]=t},vq.prototype._removeListener=function(e,t){var n,r,i,o=this._getListeners(e);if(t)while(o)n=o.next,i=o.callback,i!==t&&i[pq]!==t||(r?r.next=n:this._setListeners(e,n)),r=o,o=n;else this._setListeners(e,null)},yq.prototype.stopPropagation=function(){this.cancelBubble=!0},yq.prototype.preventDefault=function(){this.defaultPrevented=!0},yq.prototype.init=function(e){H(this,e||{})},wq.$inject=["config.debounce"];class xq extends VN{updateId(e,t){if(this._validateId(t),this._eventBus.fire("formField.updateId",{formField:e,newId:t}),this.remove(e),e.id=t,this.add(e),"components"in e)for(const n of e.components)n._parent=t}_validateId(e){if(!e)throw new Error("formField must have an id");if(this.get(e))throw new Error("formField with id "+e+" already added")}}const kq=16,_q=16,Oq=2,Sq=4;class Eq{constructor(e,t){this._formLayouter=e,this._formFieldRegistry=t}validateField(e={},t,n){if(Number.isInteger(t)){if(t<Oq)return`Minimum ${Oq} columns are allowed`;if(t>_q)return`Maximum ${_q} columns are allowed`}n||(n=this._formLayouter.getRowForField(e));let r=parseInt(t)||0,i=1,o=t?0:1;return n.components.forEach((t=>{if(e.id===t)return;const n=this._formFieldRegistry.get(t),s=(n.layout||{}).columns;s||o++,r+=parseInt(s)||0,i++})),r>kq||o>0&&r>Cq(o)||t===kq&&i>1?`New value exceeds the maximum of ${kq} columns per row`:i>Sq?`Maximum ${Sq} fields per row are allowed`:null}}function Cq(e){return kq-2*e}Eq.$inject=["formLayouter","formFieldRegistry"];const Tq=Rq();function Aq(e,{disabled:t=!1}={}){if(!e)throw new Error("type required");return Ee()("fjs-form-field",`fjs-form-field-${e}`,{"fjs-disabled":t})}function Dq(e){let t,n,r;function i(e){t=this,n=e.clientX,r=e.clientY,e.dataTransfer&&e.dataTransfer.setDragImage(Tq,0,0),document.addEventListener("dragover",o),document.addEventListener("dragend",s),document.addEventListener("drop",Fq)}function o(i){const o={x:i.clientX-n,y:i.clientY-r};return e.call(t,i,o)}function s(){document.removeEventListener("dragover",o),document.removeEventListener("dragend",s),document.removeEventListener("drop",Fq)}return i}function Mq(e){let t,n=!1,r=[];return function(...i){r=i,t=this,n||(n=!0,e.apply(t,r),window.requestAnimationFrame((function(){r=t=n=void 0})))}}function Fq(e){e.preventDefault(),e.stopPropagation()}function Rq(){const e=new Image;return e.src="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",e}function Pq(e){const{field:t,domId:n}=e,{label:r}=t,i=pL(t.type);return it("div",{class:Aq(t.type),children:[it(fP,{id:n,label:r}),it("div",{class:"fjs-iframe-placeholder",id:n,children:it("p",{class:"fjs-iframe-placeholder-text",children:[it(i,{width:"32",height:"24",viewBox:"0 0 56 56"}),"iFrame"]})})]})}Pq.config=YP.config;const Iq=nt({drake:null});function Lq(e,t){}const $q=nt({getService:Lq});function Nq(e,t){const{getService:n}=Et($q);return n(e,t)}var jq;function Bq(){return Bq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Bq.apply(null,arguments)}var Vq,qq,zq=function(e){return Re("svg",Bq({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"currentColor"},e),jq||(jq=Re("path",{fillRule:"evenodd",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8z",clipRule:"evenodd"})))};function Hq(){return Hq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Hq.apply(null,arguments)}var Wq,Qq=function(e){return Re("svg",Hq({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),Re("rect",{width:16,height:16,x:.536,fill:"#fff",rx:3,style:{mixBlendMode:"multiply"}}),Re("path",{fill:"#fff",d:"M0 0h16v16H0z",style:{mixBlendMode:"multiply"},transform:"translate(.536)"}),Vq||(Vq=Re("path",{fill:"currentcolor",d:"M7.536 6h-1v6h1zm3 0h-1v6h1z"})),qq||(qq=Re("path",{fill:"currentcolor",d:"M2.536 3v1h1v10a1 1 0 0 0 1 1h8a1 1 0 0 0 1-1V4h1V3zm2 11V4h8v10zm6-13h-4v1h4z"})))};function Uq(){return Uq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Uq.apply(null,arguments)}var Yq,Xq=function(e){return Re("svg",Uq({xmlns:"http://www.w3.org/2000/svg",xmlSpace:"preserve",width:16,height:16,fill:"currentcolor",viewBox:"0 0 32 32"},e),Wq||(Wq=Re("path",{d:"M10 6h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4zm-8 8h4v4h-4zm8 0h4v4h-4z"})),Re("path",{d:"M0 0h32v32H0z",style:{fill:"none"}}))};function Zq(){return Zq=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Zq.apply(null,arguments)}var Gq,Kq,Jq,ez,tz,nz,rz,iz,oz=function(e){return Re("svg",Zq({xmlns:"http://www.w3.org/2000/svg",width:15,height:15,fill:"none"},e),Yq||(Yq=Re("path",{fill:"currentColor",d:"m14.5 13.793-3.776-3.776a5.508 5.508 0 1 0-.707.707l3.776 3.776zM2 6.5a4.5 4.5 0 1 1 9 0 4.5 4.5 0 0 1-9 0"})))};function sz(){return sz=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},sz.apply(null,arguments)}var az=function(e){return Re("svg",sz({xmlns:"http://www.w3.org/2000/svg",width:126,height:96,fill:"none"},e),Gq||(Gq=Re("path",{fill:"#FF832B",fillRule:"evenodd",d:"M70 78v8a3 3 0 0 1-3 3h-8v-5h6v-6zm0-16h-5V46h5zm0-32h-5v-6h-6v-5h8a3 3 0 0 1 3 3zM43 19v5H27v-5zm-32 0v5H5v6H0v-8a3 3 0 0 1 3-3zM0 46h5v16H0zm0 32h5v6h6v5H3a3 3 0 0 1-3-3zm27 11v-5h16v5z",clipRule:"evenodd"})),Kq||(Kq=Re("rect",{width:70,height:70,fill:"#E5E5E5",rx:3,transform:"matrix(-1 0 0 1 94 0)"})),Jq||(Jq=Re("mask",{id:"EmptyForm_svg__a",fill:"#fff"},Re("path",{fillRule:"evenodd",d:"M87.085 88.684 75.43 45.185l43.499 11.656-11.044 8.072 8.557 8.556-12.728 12.728-8.557-8.556z",clipRule:"evenodd"}))),ez||(ez=Re("path",{fill:"#393939",fillRule:"evenodd",d:"M87.085 88.684 75.43 45.185l43.499 11.656-11.044 8.072 8.557 8.556-12.728 12.728-8.557-8.556z",clipRule:"evenodd"})),tz||(tz=Re("path",{fill:"#393939",d:"M75.43 45.185 70.6 46.48l-2.241-8.365 8.365 2.242zm11.655 43.499 4.037 2.95-6.163 8.432-2.704-10.088zm31.844-31.843 1.294-4.83 10.088 2.703-8.432 6.163zm-11.044 8.072-3.535 3.535-4.128-4.127 4.713-3.445zm8.557 8.556 3.535-3.535 3.536 3.535-3.536 3.536zm-12.728 12.728 3.536 3.536-3.536 3.535-3.536-3.535zm-8.557-8.556-4.036-2.951 3.444-4.713 4.128 4.128zM80.26 43.89 91.915 87.39l-9.66 2.588L70.6 46.48zm37.375 17.78L74.136 50.014l2.588-9.66 43.499 11.656zm-12.699-.795 11.043-8.072 5.901 8.073-11.043 8.072zm7.971 16.129-8.556-8.557 7.071-7.07 8.556 8.556zm-12.728 5.657 12.728-12.728 7.071 7.07-12.727 12.729zm-1.485-8.557 8.557 8.557-7.072 7.07-8.556-8.556zM83.049 85.733 91.12 74.69l8.073 5.901-8.072 11.044z",mask:"url(#EmptyForm_svg__a)"})),nz||(nz=Re("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"m69.431 39.163-9.192-9.192"})),rz||(rz=Re("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"M1.5-1.5h8",transform:"matrix(-1 0 0 1 68.213 50.123)"})),iz||(iz=Re("path",{stroke:"#000",strokeLinecap:"round",strokeWidth:3,d:"M78.969 36.367v-8"})))};function lz(e){const{type:t,text:n=""}=e.field,r=pL("text"),i=Nq("templating"),o=Nq("expressionLanguage");return n&&n.trim()?o.isExpression(n)?it("div",{class:Aq(t),children:it("div",{class:"fjs-form-field-placeholder",children:[it(r,{viewBox:"0 0 54 54"}),"Text view is populated by an expression"]})}):i.isTemplate(n)?it("div",{class:Aq(t),children:it("div",{class:"fjs-form-field-placeholder",children:[it(r,{viewBox:"0 0 54 54"}),"Text view is templated"]})}):it(i$,{...e,disableLinks:!0}):it("div",{class:Aq(t),children:it("div",{class:"fjs-form-field-placeholder",children:[it(r,{viewBox:"0 0 54 54"}),"Text view is empty"]})})}function cz(e){const{type:t,content:n=""}=e.field,r=pL(t),i=Nq("templating"),o=Nq("expressionLanguage");return n&&n.trim()?o.isExpression(n)?it("div",{class:Aq(t),children:it("div",{class:"fjs-form-field-placeholder",children:[it(r,{viewBox:"0 0 54 54"}),"Html view is populated by an expression"]})}):i.isTemplate(n)?it("div",{class:Aq(t),children:it("div",{class:"fjs-form-field-placeholder",children:[it(r,{viewBox:"0 0 54 54"}),"Html view is templated"]})}):it(s$,{...e,disableLinks:!0}):it("div",{class:Aq(t),children:it("div",{class:"fjs-form-field-placeholder",children:[it(r,{viewBox:"0 0 54 54"}),"Html view is empty"]})})}function uz(e){const{columnsExpression:t,columns:n,id:r,label:i}=e.field,o="string"===typeof t&&t.length>0||Array.isArray(n)&&0===n.length,s=o?[{key:"1",label:"Column 1"},{key:"2",label:"Column 2"},{key:"3",label:"Column 3"}]:n,a=`fjs-form-${r}`;return it("div",{class:Aq("table",{disabled:!0}),children:[it(fP,{id:a,label:i}),it("div",{class:"fjs-table-middle-container",children:it("div",{class:"fjs-table-inner-container",children:it("table",{class:Ee()("fjs-table","fjs-disabled"),id:a,children:[it("thead",{class:"fjs-table-head",children:it("tr",{class:"fjs-table-tr",children:s.map((({key:e,label:t})=>it("th",{class:"fjs-table-th",children:t},e)))})}),it("tbody",{class:"fjs-table-body",children:it("tr",{class:"fjs-table-tr",children:s.map((({key:e})=>it("td",{class:"fjs-table-td",children:"Content"},e)))})})]})})})]})}lz.config=i$.config,cz.config=s$.config,uz.config=C$.config;const hz="expression";function dz(e){const{field:t}=e,{expression:n="",key:r}=t,i=pL("expression"),o=Nq("expressionLanguage");let s="Expression is empty";return n.trim()&&o.isExpression(n)&&(s=`Expression for '${r}'`),it("div",{class:Aq(hz),children:it("div",{class:"fjs-form-field-placeholder",children:[it(i,{viewBox:"0 0 54 54"}),s]})})}dz.config={...l$.config,escapeGridRender:!1};const fz=[Pq,lz,cz,uz,dz];class pz extends Q${constructor(){super(),fz.forEach((e=>{this.register(e.config.type,e)}))}}const gz=e=>{const{rootClass:t,RootElement:n,section:r,children:i}=e,o=Nq("eventBus"),s=Nq(`config.${r}`),[a,l]=bt(s&&s.parent||null),[c,u]=bt(!0),h=Ot((()=>{if(null===a)return null;if("string"===typeof a){const e=document.querySelector(a);if(!e)throw new Error(`Target root element with selector '${a}' not found for section '${r}'`);return document.querySelector(a)}if(!(a instanceof Element))throw new Error(`Target root element for section '${r}' must be a valid selector or DOM element`);return a}),[r,a]);xt((()=>{const e=({container:e})=>{l(e),u(!0)},t=()=>{l(null),u(!1)},n=()=>{l(null),u(!0)};return o.on(`${r}.attach`,e),o.on(`${r}.detach`,t),o.on(`${r}.reset`,n),o.fire(`${r}.section.rendered`),()=>{o.off(`${r}.attach`,e),o.off(`${r}.detach`,t),o.off(`${r}.reset`,n),o.fire(`${r}.section.destroyed`)}}),[o,r]),xt((()=>{if(c)return o.fire(`${r}.rendered`,{element:h}),()=>{o.fire(`${r}.destroyed`,{element:h})}}),[o,r,c,h]);const d=St((({children:e})=>n?it(n,{children:e}):it("div",{className:t,children:e})),[t,n]);return c?a?Ya(it(d,{children:i}),h):it(d,{children:i}):null},mz=nt({addFill(e,t){throw new Error("FillContext.addFill() uninitialized")},removeFill(e){throw new Error("FillContext.addFill() uninitialized")}}),vz=e=>{const t=_t(Symbol("fill_uid")),n=Et(mz);return xt((()=>{if(n)return n.addFill({id:t,...e}),()=>{n.removeFill(t)}}),[n,e]),null},yz=nt({fills:[]}),bz=e=>{const{name:t,fillRoot:n=wz,groupFn:r=kz,separatorFn:i=e=>null,limit:o}=e,{fills:s}=Et(yz),a=Ot((()=>s.filter((e=>e.slot===t))),[s,t]),l=Ot((()=>o?a.slice(0,o):a),[a,o]),c=Ot((()=>r(l)),[l,r]),u=Ot((()=>xz(c,n,i)),[c,n,i]);return u},wz=e=>it(Ie,{children:e.children},e.id),xz=(e,t,n)=>{const r=[];return e.forEach(((e,i)=>{if(0!==i){const e=n(`__separator_${i}`);e&&r.push(e)}e.forEach((e=>{r.push(t(e))}))})),r},kz=e=>{const t=[],n={};return e.forEach((function(e){const{group:r="z_default"}=e;let i=n[r];i||(n[r]=i=[],t.push(i)),i.push(e)})),t.forEach((e=>e.sort(_z))),Object.keys(n).sort().map((e=>n[e]))},_z=(e,t)=>(t.priority||0)-(e.priority||0),Oz=()=>{},Sz=e=>{const[t,n]=bt([]),{onSetFill:r=Oz,onRemoveFill:i=Oz}=e,o=Ot((()=>({addFill:e=>{n((t=>[...t.filter((t=>t.id!==e.id)),e])),r(e)},removeFill:e=>{n((t=>t.filter((t=>t.id!==e)))),i(e)}})),[i,r]),s=Ot((()=>({fills:t})),[t]);return it(yz.Provider,{value:s,children:it(mz.Provider,{value:o,children:e.children})})};function Ez(e){const{type:t,label:n,icon:r,iconUrl:i,getPaletteIcon:o}=e,s=Nq("modeling"),a=Nq("formEditor"),l=o({icon:r,iconUrl:i,label:n,type:t}),c=e=>{if("Enter"===e.code){const{fieldType:t}=e.target.dataset,{schema:n}=a._getState();s.addFormField({type:t},n,n.components.length)}};return it("button",{type:"button",class:"fjs-palette-field fjs-drag-copy fjs-no-drop","data-field-type":t,title:`Create ${Cz(t)} ${n} element`,onKeyDown:c,children:[l?it(l,{class:"fjs-palette-field-icon",width:"36",height:"36",viewBox:"0 0 54 54"}):null,it("span",{class:"fjs-palette-field-text",children:n})]})}function Cz(e){return["image"].includes(e)?"an":"a"}const Tz=[{label:"Input",id:"basic-input"},{label:"Selection",id:"selection"},{label:"Presentation",id:"presentation"},{label:"Containers",id:"container"},{label:"Action",id:"action"}];function Az(e){const t=Nq("formFields"),n=_t(Fz(t)),[r,i]=bt(n.current),[o,s]=bt(""),a=_t(),l=Mz(r),c=St((e=>e.toLowerCase().replace(/\s+/g,"")),[]),u=St((e=>{const t=c(o);if(!t)return!0;const n=c(e.label),r=c(e.type);return n.includes(t)||r.includes(t)}),[o,c]);xt((()=>{const e=n.current.filter(u);i(e)}),[u,o]);const h=St((e=>{s((()=>e.target.value))}),[s]),d=St((e=>{s(""),a.current.focus()}),[a,s]);return it("div",{class:"fjs-palette",children:[it("div",{class:"fjs-palette-header",title:"Components",children:"Components"}),it("div",{class:"fjs-palette-search-container",children:[it("span",{class:"fjs-palette-search-icon",children:it(oz,{})}),it("input",{class:"fjs-palette-search",ref:a,type:"text",placeholder:"Search components",value:o,onInput:h}),o&&it("button",{type:"button",title:"Clear content",class:"fjs-palette-search-clear",onClick:d,children:it(zq,{})})]}),it("div",{class:"fjs-palette-entries",children:[l.map((({label:e,entries:t,id:n})=>it("div",{class:"fjs-palette-group","data-group-id":n,children:[it("span",{class:"fjs-palette-group-title",children:e}),it("div",{class:"fjs-palette-fields fjs-drag-container fjs-no-drop",children:t.map((e=>it(Ez,{getPaletteIcon:Rz,...e})))})]}))),0==l.length&&it("div",{class:"fjs-palette-no-entries",children:"No components found."})]}),it("div",{class:"fjs-palette-footer",children:it(bz,{name:"editor-palette__footer",fillRoot:Dz})})]})}const Dz=e=>it("div",{className:"fjs-palette-footer-fill",children:e.children});function Mz(e){const t=Tz.map((e=>({...e,entries:[]}))),n=e=>t.find((t=>e===t.id));return e.forEach((e=>{const{group:t}=e;n(t).entries.push(e)})),t.filter((e=>e.entries.length))}function Fz(e){return Object.entries(e._formFields).map((([e,t])=>{const{config:n}=t;return{label:n.name||n.label,type:e,group:n.group,icon:n.icon,iconUrl:n.iconUrl}})).filter((({type:e})=>"default"!==e))}function Rz(e){const{icon:t,iconUrl:n,type:r,label:i}=e;let o;return o=n?()=>it("img",{class:"fjs-field-icon-image",width:36,style:{margin:"auto"},alt:i,src:iP(n)}):t||pL(r),o}const Pz=()=>{const e=Nq("renderInjector"),t=e.fetchRenderers(),n=Ot((()=>({useService:Nq,components:{Fill:vz,Slot:bz}})),[]);return it(Ie,{children:t.map((({Renderer:e})=>it(e,{...n})))})},Iz=/^fjs-cursor-.*$/;function Lz(e){const t=Mj(document.body);t.removeMatching(Iz),e&&t.add("fjs-cursor-"+e)}function $z(){Lz(null)}const Nz="fjs-drag-container",jz="fjs-drop-container-vertical",Bz="fjs-drop-container-horizontal",Vz="fjs-drag-move",qz="fjs-drag-row-move",zz="fjs-drag-copy",Hz="fjs-no-drop",Wz="fjs-no-move",Qz="fjs-error-drop";class Uz{constructor(e,t,n,r,i,o){this._formFieldRegistry=e,this._formLayouter=t,this._formLayoutValidator=n,this._eventBus=r,this._modeling=i,this._pathRegistry=o}getTargetIndex(e,t,n){const r=n&&n.querySelector(".fjs-element"),i=r&&this._formFieldRegistry.get(r.dataset.id);return i?Yz(t,i):e?Yz(t,this._formFieldRegistry.get(e.components[e.components.length-1]))+1:t.components.length}validateDrop(e,t){const n=e.querySelector(".fjs-element"),r=this._formLayouter.getRow(t.dataset.rowId);let i,o,s;if(n){if(o=this._formFieldRegistry.get(n.dataset.id),!o)return"No associated form field in the registry";if(i=(o.layout||{}).columns,Xz(t)){s=Kz(t).dataset.id;const e=this._formLayoutValidator.validateField(o,i,r);if(e)return e}else s=t.dataset.id;if(!s)return"Drop is not a valid target";const e=this._formFieldRegistry.get(s),a=this._formFieldRegistry.get(o._parent);if(e!==a){const t=this._pathRegistry.getValuePath(e),n=this._pathRegistry.getValuePath(a);if(t.join(".")!==n.join(".")){const e=this._pathRegistry.executeRecursivelyOnFields(o,(({field:e,isClosed:n,isRepeatable:r})=>{const i={cutoffNode:a.id},o=this._pathRegistry.getValuePath(e,i);return this._pathRegistry.canClaimPath([...t,...o],{isClosed:n,isRepeatable:r,knownAncestorIds:Z$(s,this._formFieldRegistry)})}));if(!e)return"Drop not allowed by path registry"}}}}moveField(e,t,n,r,i){const o=e.querySelector(".fjs-element"),s=this._formFieldRegistry.get(o.dataset.id),a=Kz(t),l=this._formFieldRegistry.get(a.dataset.id),c=Yz(l,s),u=this._formLayouter.getRowForField(s);this._modeling.moveFormField(s,l,r,c,i,u,n)}createNewField(e,t,n,r){const i=e.dataset.fieldType;let o={type:i};o={...o,_parent:n.id,layout:{row:t?t.id:this._formLayouter.nextRowId(),columns:null}},this._modeling.addFormField(o,n,r)}handleRowDrop(e,t,n,r){const i=this._formFieldRegistry.get(t.dataset.id),o=e.querySelector(".fjs-layout-row"),s=this._formLayouter.getRow(o.dataset.rowId);s.components.forEach(((e,t)=>{const o=this._formFieldRegistry.get(e),a=Kz(n),l=this._formFieldRegistry.get(a.dataset.id),c=r&&r.querySelector(".fjs-layout-row"),u=c&&this._formLayouter.getRow(c.dataset.rowId),h=r&&this._formFieldRegistry.get(u.components[0]),d=Yz(l,o),f=(c?Yz(i,h):i.components.length)+t;this._modeling.moveFormField(o,l,i,d,f,s,s)}))}handleElementDrop(e,t,n,r,i){const o=this._formFieldRegistry.get(Kz(t).dataset.id);let s;Xz(t)&&(s=this._formLayouter.getRow(t.dataset.rowId));const a=this.validateDrop(e,t);if(a)return i.cancel(!0);i.remove();const l=this.getTargetIndex(s,o,r);Gz(n)?this.createNewField(e,s,o,l):this.moveField(e,n,s,o,l)}createDragulaInstance(e){const{container:t,mirrorContainer:n}=e||{};let r={direction:function(e,t){return Xz(t)?"horizontal":"vertical"},mirrorContainer:n,isContainer(e){return t.some((t=>e.classList.contains(t)))},moves(e,t,n){return!n.classList.contains(Wz)&&(e.classList.contains(Vz)||e.classList.contains(zz)||e.classList.contains(qz))},copy(e){return e.classList.contains(zz)},accepts:(e,t)=>{if(eH(t),e.classList.contains(qz))return!t.classList.contains(Bz);const n=this.validateDrop(e,t);return n&&Jz(t),!t.classList.contains(Hz)},transformOffset:(e,t,n)=>{if(n.classList.contains(qz)){const e={x:-5,y:-60};return{left:t.clientX+e.x,top:t.clientY+e.y}}if(n.classList.contains(Vz)){const e={x:-5,y:-15};return{left:t.clientX+e.x,top:t.clientY+e.y}}return e},slideFactorX:10,slideFactorY:5};const i=Tj(r);return i.on("drag",((e,t)=>{this.emit("drag.start",{element:e,source:t})})),i.on("dragend",(e=>{this.emit("drag.end",{element:e})})),i.on("drop",((e,t,n,r)=>{this.emit("drag.drop",{element:e,target:t,source:n,sibling:r})})),i.on("over",((e,t,n)=>{this.emit("drag.hover",{element:e,container:t,source:n})})),i.on("out",((e,t,n)=>{this.emit("drag.out",{element:e,container:t,source:n})})),i.on("cancel",((e,t,n)=>{this.emit("drag.cancel",{element:e,container:t,source:n})})),i.on("drop",((e,t,n,r)=>{t?Zz(e)?this.handleRowDrop(e,t,n,r):this.handleElementDrop(e,t,n,r,i):i.remove()})),this.emit("dragula.created",i),i}emit(e,t){this._eventBus.fire(e,t)}}function Yz(e,t){let n=e.components.length;return e.components.forEach((({id:e},r)=>{e===t.id&&(n=r)})),n}function Xz(e){return e.classList.contains("fjs-layout-row")}function Zz(e){return e.classList.contains(qz)}function Gz(e){return e.classList.contains("fjs-palette-fields")}function Kz(e){return e.closest(".fjs-element")}function Jz(e){e.classList.add(Qz),Lz("not-allowed")}function eH(e){e.classList.remove(Qz),Lz("grabbing")}function tH(e){const{class:t,Icon:n,label:r}=e;return it("div",{class:Ee()("fjs-field-preview",t),children:[it(n,{class:"fjs-field-preview-icon",width:"36",height:"36",viewBox:"0 0 54 54"}),it("span",{class:"fjs-field-preview-text",children:r})]})}Uz.$inject=["formFieldRegistry","formLayouter","formLayoutValidator","eventBus","modeling","pathRegistry"];const nH=/^cds--col(-lg)?/,rH="fjs-element-resizing",iH=16;function oH(e){const{field:t,position:n}=e,r=_t(null),i=Nq("formLayoutValidator"),o=Nq("modeling"),s=_t({startColumns:0,newColumns:0}),a=Mq(((e,o)=>{const{x:a}=o,{layout:l={}}=t,c=aH(r.current,l.columns||s.current.startColumns,a,n),u=i.validateField(t,c);if(!u){s.current.newColumns=c;const e=r.current.closest(".fjs-layout-column");cH(e,nH),e.classList.add(`cds--col-lg-${c}`)}})),l=e=>{const r=hH(t),i=lH(r),o=Dq(a);o(e);const l=uH(r),c=l.getBoundingClientRect().width+iH;s.current.startColumns=sH(c,i),dH(r,n)},c=()=>{const{layout:e={}}=t;s.current.newColumns&&o.editFormField(t,"layout",{...e,columns:s.current.newColumns});const r=hH(t);fH(r,n),s.current.newColumns=null};return"default"===t.type?null:it("div",{ref:r,class:Ee()("fjs-field-resize-handle","fjs-field-resize-handle-"+n,Wz),draggable:!0,onDragStart:l,onDragEnd:c})}function sH(e,t){const n=t.getBoundingClientRect().width,r=1/16*n;return Math.round(e/r)}function aH(e,t,n,r){const i=lH(e);"left"===r&&(n*=-1);const o=sH(n,i);return t+o}function lH(e){return e.closest(".fjs-layout-row")}function cH(e,t){return Mj(e).removeMatching(t)}function uH(e){return e.closest(".fjs-layout-column")}function hH(e){return Xj('.fjs-element[data-id="'+e.id+'"]')}function dH(e,t){Mj(e).add(rH+"-"+t)}function fH(e,t){Mj(e).remove(rH+"-"+t)}function pH(e){return e.children?it("div",{class:"fjs-context-pad",children:e.children}):null}function gH(){return it("div",{class:"fjs-empty-component",children:it("span",{class:"fjs-empty-component-text",children:"Drag and drop components here."})})}function mH(){return it("div",{class:"fjs-empty-editor",children:it("div",{class:"fjs-empty-editor-card",children:[it(az,{}),it("h2",{children:"Build your form"}),it("span",{children:"Drag and drop components here to start designing."}),it("span",{children:"Use the preview window to test your form."})]})})}function vH(e){return["group","dynamiclist"].includes(e.field.type)?it(gH,{}):"default"===e.field.type?it(mH,{}):null}function yH(e){const t=Nq("eventBus"),n=Nq("formFieldRegistry"),r=Nq("formFields"),i=Nq("modeling"),o=Nq("selection"),{hoverInfo:s}=Et(qF),{field:a}=e,{id:l,type:c,showOutline:u}=a,h=_t(),[d,f]=bt(!1);function p(e){e.stopPropagation(),o.toggle(a),h.current.focus()}xt((()=>{function e({selection:e}){const t=xR(h.current);if(!e||"default"===e.type||e.id!==l||!t||!h.current)return;const n=h.current.getBoundingClientRect(),r=t.getBoundingClientRect(),i=n.height>r.height,o=n.bottom>r.bottom||n.top<r.top;o&&!i&&h.current.scrollIntoView({behavior:"auto",block:"nearest"})}return t.on("selection.changed",e),()=>t.off("selection.changed",e)}),[t,l]),kt((()=>{o.isSelected(a)&&h.current.focus()}),[o,a]);const g=o.isSelected(a),m=Ot((()=>{const t=[];e.class&&t.push(...e.class.split(" ")),g&&t.push("fjs-editor-selected");const n=["group","dynamiclist"].includes(c);return n&&t.push(u?"fjs-outlined":"fjs-dashed-outlined"),d&&t.push("fjs-editor-hovered"),t.join(" ")}),[d,g,e.class,u,c]),v=e=>{e.stopPropagation();const t=n.get(a._parent),r=OH(t,a);i.removeFormField(a,t,r)},y=e=>{"Enter"===e.key&&(e.stopPropagation(),o.toggle(a))};return it("div",{class:m,"data-id":l,"data-field-type":c,tabIndex:"default"===c?-1:0,onClick:p,onKeyPress:y,onMouseOver:e=>{s.cleanup&&s.cleanup(),f(!0),s.cleanup=()=>f(!1),e.stopPropagation()},ref:h,children:[it(bH,{field:a}),it(pH,{children:o.isSelected(a)&&"default"!==a.type?it("button",{type:"button",title:TH(a,r),class:"fjs-context-pad-item",onClick:v,children:it(Qq,{})}):null}),e.children,it(oH,{position:"left",field:a}),it(oH,{position:"right",field:a})]})}function bH(e){const{field:t}=e,n=Nq("config.debugColumns");return n&&"default"!=t.type?it("div",{style:"width: fit-content; padding: 2px 6px; height: 16px; background: var(--color-blue-205-100-95); display: flex; justify-content: center; align-items: center; position: absolute; bottom: -2px; z-index: 2; font-size: 10px; right: 3px;",class:"fjs-debug-columns",children:(t.layout||{}).columns||"auto"}):null}function wH(e){const{field:t}=e,{id:n}=t,r=["fjs-children",jz];return e.class&&r.push(...e.class.split(" ")),it("div",{class:r.join(" "),"data-id":n,children:e.children})}function xH(e){const{row:t}=e,{id:n}=t,r=[Bz];return e.class&&r.push(...e.class.split(" ")),it("div",{class:Ee()(qz),children:[it("span",{class:"fjs-row-dragger",children:it(Xq,{})}),it("div",{class:r.join(" "),style:e.style,"data-row-id":n,children:e.children})]})}function kH(e){const{field:t}=e,n=[Vz];return"default"===t.type?e.children:(e.class&&n.push(...e.class.split(" ")),it("div",{"data-field-type":t.type,class:n.join(" "),children:e.children}))}function _H(){const e=Nq("dragging"),t=Nq("eventBus"),n=Nq("formEditor"),r=Nq("injector"),i=Nq("selection"),o=Nq("propertiesPanel"),s=Nq("config.propertiesPanel"),{schema:a,properties:l}=n._getState(),{ariaLabel:c}=l,u=_t(null),h=_t(null),[,d]=bt(a),[f,p]=bt(!1);xt((()=>{function e(e){d(e.selection||a)}return t.on("selection.changed",e),()=>{t.off("selection.changed",e)}}),[t,a]),xt((()=>{d(i.get()||a)}),[i,a]);const[g,m]=bt(null),v={drake:g};xt((()=>{let n=e.createDragulaInstance({container:[Nz,jz,Bz],mirrorContainer:u.current});m(n);const r=()=>{n&&(n.destroy(),t.fire("dragula.destroyed"))},i=()=>{r(),n=e.createDragulaInstance({container:[Nz,jz,Bz],mirrorContainer:u.current}),m(n)},o=e=>{m(e)},s=()=>{Lz("grabbing")},a=()=>{$z()};return t.on("attach",i),t.on("detach",r),t.on("dragula.created",o),t.on("drag.start",s),t.on("drag.end",a),()=>{r(),t.off("attach",i),t.off("detach",r),t.off("dragula.created",o),t.off("drag.start",s),t.off("drag.end",a)}}),[e,t]),xt((()=>{f||(p(!0),t.fire("rendered"),t.fire("formEditor.rendered"))}),[t,f]);const y=Ot((()=>({Children:wH,Column:kH,Element:yH,Empty:vH,Row:xH,hoverInfo:{}})),[]),b=Ot((()=>({getService(e,t=!0){return"form"===e?{_getState(){return{data:{},errors:{},properties:{ariaLabel:c,disabled:!0},schema:a}}}:r.get(e,t)},formId:n._id})),[c,n,r,a]),w=St((()=>{}),[]),x=St((()=>{}),[]),k=CH(s);return xt((()=>{k&&o.attachTo(h.current)}),[h,o,k]),it("div",{class:"fjs-form-editor",children:it(Sz,{children:[it(Iq.Provider,{value:v,children:[it(gz,{rootClass:"fjs-palette-container",section:"palette",children:it(Az,{})}),it("div",{ref:u,class:"fjs-form-container",children:it(WF.Provider,{value:b,children:it(qF.Provider,{value:y,children:it(H$,{onSubmit:w,onReset:x})})})}),it(SH,{})]}),k&&it("div",{class:"fjs-editor-properties-container",ref:h}),it(gz,{rootClass:"fjs-render-injector-container",section:"renderInjector",children:it(Pz,{})})]})})}function OH(e,t){let n=e.components.length;return e.components.forEach((({id:e},r)=>{e===t.id&&(n=r)})),n}function SH(e){const{drake:t}=Et(Iq),n=Nq("formFields");return xt((()=>{if(t)return t.on("cloned",e),()=>t.off("cloned",e);function e(e,t,r){const i=e.dataset.fieldType;if(i){const r=EH(i,n);if(!r)return;const{label:o}=r,s=Rz(r);e.innerHTML="",e.class="gu-mirror",e.classList.add("fjs-field-preview-container"),t.classList.contains("fjs-palette-field")&&e.classList.add("cds--col"),tt(it(tH,{label:o,Icon:s}),e)}else["fjs-context-pad","fjs-row-dragger","fjs-debug-columns"].forEach((t=>{const n=e.querySelectorAll("."+t);n.length&&n.forEach((e=>e.remove()))})),e.classList.add("cds--grid"),e.classList.add("cds--grid--condensed")}}),[t,n]),null}function EH(e,t){return Fz(t).find((t=>t.type===e))}function CH(e){return!(e&&e.parent)}function TH(e,t){const n=EH(e.type,t);return n?`Remove ${n.label}`:"Remove form field"}class AH{constructor(e,t,n,r){const{container:i,compact:o=!1}=e,s=()=>{const[e,t]=bt(n._getState()),i={getService(e,t=!0){return r.get(e,t)}};n.on("changed",(e=>{t(e)}));const{schema:s}=e;return s?it("div",{class:"fjs-container fjs-editor-container "+(o?"fjs-editor-compact":""),children:it($q.Provider,{value:i,children:it(_H,{})})}):null};t.on("form.init",(()=>{tt(it(s,{}),i)})),t.on("form.destroy",(()=>{tt(null,i)}))}}AH.$inject=["config.renderer","eventBus","formEditor","injector"];const DH={__init__:["formFields","renderer"],formFields:["type",pz],renderer:["type",AH]},MH={__depends__:[DH],debounce:["factory",wq],eventBus:["type",vq],importer:["type",PN],formFieldRegistry:["type",xq],pathRegistry:["type",LN],formLayouter:["type",NN],formLayoutValidator:["type",Eq],fieldFactory:["type",IN]};var FH="is not a registered action",RH="is already registered";function PH(e,t){this._actions={};var n=this;e.on("diagram.init",(function(){n._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:n})}))}function IH(e,t){return new Error(e+" "+t)}PH.$inject=["eventBus","injector"],PH.prototype._registerDefaultActions=function(e){var t=e.get("commandStack",!1),n=e.get("modeling",!1),r=e.get("selection",!1),i=e.get("zoomScroll",!1),o=e.get("copyPaste",!1),s=e.get("canvas",!1),a=e.get("rules",!1),l=e.get("keyboardMove",!1),c=e.get("keyboardMoveSelection",!1);t&&(this.register("undo",(function(){t.undo()})),this.register("redo",(function(){t.redo()}))),o&&r&&this.register("copy",(function(){var e=r.get();if(e.length)return o.copy(e)})),o&&this.register("paste",(function(){o.paste()})),i&&this.register("stepZoom",(function(e){i.stepZoom(e.value)})),s&&this.register("zoom",(function(e){s.zoom(e.value)})),n&&r&&a&&this.register("removeSelection",(function(){var e=r.get();if(e.length){var t,i=a.allowed("elements.delete",{elements:e});!1!==i&&(t=x(i)?i:e,t.length&&n.removeElements(t.slice()))}})),l&&this.register("moveCanvas",(function(e){l.moveCanvas(e)})),c&&this.register("moveSelection",(function(e){c.moveSelection(e.direction,e.accelerated)}))},PH.prototype.trigger=function(e,t){if(!this._actions[e])throw IH(e,FH);return this._actions[e](t)},PH.prototype.register=function(e,t){var n=this;if("string"===typeof e)return this._registerAction(e,t);D(e,(function(e,t){n._registerAction(t,e)}))},PH.prototype._registerAction=function(e,t){if(this.isRegistered(e))throw IH(e,RH);this._actions[e]=t},PH.prototype.unregister=function(e){if(!this.isRegistered(e))throw IH(e,FH);this._actions[e]=void 0},PH.prototype.getActions=function(){return Object.keys(this._actions)},PH.prototype.isRegistered=function(e){return!!this._actions[e]};var LH={__init__:["editorActions"],editorActions:["type",PH]};class $H extends PH{constructor(e,t){super(e,t),e.on("form.init",(()=>{this._registerDefaultActions(t),e.fire("editorActions.init",{editorActions:this})}))}_registerDefaultActions(e){const t=e.get("commandStack",!1),n=e.get("formFieldRegistry",!1),r=e.get("selection",!1);t&&(this.register("undo",(()=>{t.undo()})),this.register("redo",(()=>{t.redo()}))),n&&r&&this.register("selectFormField",((e={})=>{const{id:t}=e;if(!t)return;const i=n.get(t);i&&r.set(i)}))}}$H.$inject=["eventBus","injector"];const NH={__depends__:[LH],editorActions:["type",$H]};class jH{isTemplate(e){return S(e)&&(e.startsWith("=")||/{{/.test(e))}evaluate(e){return e}}jH.$inject=[];const BH={__init__:["expressionLanguage","templating"],expressionLanguage:["type",fF],templating:["type",jH]};var VH=["c","C"],qH=["v","V"],zH=["y","Y"],HH=["z","Z"];function WH(e){return e.ctrlKey||e.metaKey||e.shiftKey||e.altKey}function QH(e){return!e.altKey&&(e.ctrlKey||e.metaKey)}function UH(e,t){return e=x(e)?e:[e],-1!==e.indexOf(t.key)||-1!==e.indexOf(t.code)}function YH(e){return e.shiftKey}function XH(e){return QH(e)&&UH(VH,e)}function ZH(e){return QH(e)&&UH(qH,e)}function GH(e){return QH(e)&&!YH(e)&&UH(HH,e)}function KH(e){return QH(e)&&(UH(zH,e)||UH(HH,e)&&YH(e))}var JH="keyboard.keydown",eW="keyboard.keyup",tW="input-handle-modified-keys",nW=1e3;function rW(e,t){var n=this;this._config=e||{},this._eventBus=t,this._keydownHandler=this._keydownHandler.bind(this),this._keyupHandler=this._keyupHandler.bind(this),t.on("diagram.destroy",(function(){n._fire("destroy"),n.unbind()})),t.on("diagram.init",(function(){n._fire("init")})),t.on("attach",(function(){e&&e.bindTo&&n.bind(e.bindTo)})),t.on("detach",(function(){n.unbind()}))}function iW(e){return e&&(Yj(e,"input, textarea")||"true"===e.contentEditable)}function oW(e){return e&&Yj(e,"button, input[type=submit], input[type=button], a[href], [aria-role=button]")}rW.$inject=["config.keyboard","eventBus"],rW.prototype._keydownHandler=function(e){this._keyHandler(e,JH)},rW.prototype._keyupHandler=function(e){this._keyHandler(e,eW)},rW.prototype._keyHandler=function(e,t){var n;if(!this._isEventIgnored(e)){var r={keyEvent:e};n=this._eventBus.fire(t||JH,r),n&&e.preventDefault()}},rW.prototype._isEventIgnored=function(e){return!!e.defaultPrevented||(iW(e.target)||oW(e.target)&&UH([" ","Enter"],e))&&this._isModifiedKeyIgnored(e)},rW.prototype._isModifiedKeyIgnored=function(e){if(!QH(e))return!0;var t=this._getAllowedModifiers(e.target);return-1===t.indexOf(e.key)},rW.prototype._getAllowedModifiers=function(e){var t=Rj(e,"["+tW+"]",!0);return!t||this._node&&!this._node.contains(t)?[]:t.getAttribute(tW).split(",")},rW.prototype.bind=function(e){this.unbind(),this._node=e,Vj.bind(e,"keydown",this._keydownHandler),Vj.bind(e,"keyup",this._keyupHandler),this._fire("bind")},rW.prototype.getBinding=function(){return this._node},rW.prototype.unbind=function(){var e=this._node;e&&(this._fire("unbind"),Vj.unbind(e,"keydown",this._keydownHandler),Vj.unbind(e,"keyup",this._keyupHandler)),this._node=null},rW.prototype._fire=function(e){this._eventBus.fire("keyboard."+e,{node:this._node})},rW.prototype.addListener=function(e,t,n){O(e)&&(n=t,t=e,e=nW),this._eventBus.on(n||JH,e,t)},rW.prototype.removeListener=function(e,t){this._eventBus.off(t||JH,e)},rW.prototype.hasModifier=WH,rW.prototype.isCmd=QH,rW.prototype.isShift=YH,rW.prototype.isKey=UH;var sW=500;function aW(e,t){var n=this;e.on("editorActions.init",sW,(function(e){var r=e.editorActions;n.registerBindings(t,r)}))}aW.$inject=["eventBus","keyboard"],aW.prototype.registerBindings=function(e,t){function n(n,r){t.isRegistered(n)&&e.addListener(r)}n("undo",(function(e){var n=e.keyEvent;if(GH(n))return t.trigger("undo"),!0})),n("redo",(function(e){var n=e.keyEvent;if(KH(n))return t.trigger("redo"),!0})),n("copy",(function(e){var n=e.keyEvent;if(XH(n))return t.trigger("copy"),!0})),n("paste",(function(e){var n=e.keyEvent;if(ZH(n))return t.trigger("paste"),!0})),n("stepZoom",(function(e){var n=e.keyEvent;if(UH(["+","Add","="],n)&&QH(n))return t.trigger("stepZoom",{value:1}),!0})),n("stepZoom",(function(e){var n=e.keyEvent;if(UH(["-","Subtract"],n)&&QH(n))return t.trigger("stepZoom",{value:-1}),!0})),n("zoom",(function(e){var n=e.keyEvent;if(UH("0",n)&&QH(n))return t.trigger("zoom",{value:1}),!0})),n("removeSelection",(function(e){var n=e.keyEvent;if(UH(["Backspace","Delete","Del"],n))return t.trigger("removeSelection"),!0}))};var lW={__init__:["keyboard","keyboardBindings"],keyboard:["type",rW],keyboardBindings:["type",aW]};const cW=500;class uW{constructor(e,t){e.on("editorActions.init",cW,(e=>{const{editorActions:n}=e;this.registerBindings(t,n)}))}registerBindings(e,t){function n(n,r){t.isRegistered(n)&&e.addListener(r)}n("undo",(e=>{const{keyEvent:n}=e;if(QH(n)&&!YH(n)&&UH(HH,n))return t.trigger("undo"),!0})),n("redo",(e=>{const{keyEvent:n}=e;if(QH(n)&&(UH(zH,n)||UH(HH,n)&&YH(n)))return t.trigger("redo"),!0}))}}uW.$inject=["eventBus","keyboard"];const hW={__depends__:[lW],__init__:["keyboardBindings"],keyboardBindings:["type",uW]},dW={__init__:["dragging"],dragging:["type",Uz]};function fW(e,t){this._handlerMap={},this._stack=[],this._stackIdx=-1,this._currentExecution={actions:[],dirty:[],trigger:null},this._injector=t,this._eventBus=e,this._uid=1,e.on(["diagram.destroy","diagram.clear"],(function(){this.clear(!1)}),this)}fW.$inject=["eventBus","injector"],fW.prototype.execute=function(e,t){if(!e)throw new Error("command required");this._currentExecution.trigger="execute";const n={command:e,context:t};this._pushAction(n),this._internalExecute(n),this._popAction()},fW.prototype.canExecute=function(e,t){const n={command:e,context:t},r=this._getHandler(e);let i=this._fire(e,"canExecute",n);if(void 0===i){if(!r)return!1;r.canExecute&&(i=r.canExecute(t))}return i},fW.prototype.clear=function(e){this._stack.length=0,this._stackIdx=-1,!1!==e&&this._fire("changed",{trigger:"clear"})},fW.prototype.undo=function(){let e,t=this._getUndoAction();if(t){this._currentExecution.trigger="undo",this._pushAction(t);while(t){if(this._internalUndo(t),e=this._getUndoAction(),!e||e.id!==t.id)break;t=e}this._popAction()}},fW.prototype.redo=function(){let e,t=this._getRedoAction();if(t){this._currentExecution.trigger="redo",this._pushAction(t);while(t){if(this._internalExecute(t,!0),e=this._getRedoAction(),!e||e.id!==t.id)break;t=e}this._popAction()}},fW.prototype.register=function(e,t){this._setHandler(e,t)},fW.prototype.registerHandler=function(e,t){if(!e||!t)throw new Error("command and handlerCls must be defined");const n=this._injector.instantiate(t);this.register(e,n)},fW.prototype.canUndo=function(){return!!this._getUndoAction()},fW.prototype.canRedo=function(){return!!this._getRedoAction()},fW.prototype._getRedoAction=function(){return this._stack[this._stackIdx+1]},fW.prototype._getUndoAction=function(){return this._stack[this._stackIdx]},fW.prototype._internalUndo=function(e){const t=e.command,n=e.context,r=this._getHandler(t);this._atomicDo((()=>{this._fire(t,"revert",e),r.revert&&this._markDirty(r.revert(n)),this._revertedAction(e),this._fire(t,"reverted",e)}))},fW.prototype._fire=function(e,t,n){arguments.length<3&&(n=t,t=null);const r=t?[e+"."+t,t]:[e];let i;n=this._eventBus.createEvent(n);for(const o of r)if(i=this._eventBus.fire("commandStack."+o,n),n.cancelBubble)break;return i},fW.prototype._createId=function(){return this._uid++},fW.prototype._atomicDo=function(e){const t=this._currentExecution;t.atomic=!0;try{e()}finally{t.atomic=!1}},fW.prototype._internalExecute=function(e,t){const n=e.command,r=e.context,i=this._getHandler(n);if(!i)throw new Error("no command handler registered for <"+n+">");this._pushAction(e),t||(this._fire(n,"preExecute",e),i.preExecute&&i.preExecute(r),this._fire(n,"preExecuted",e)),this._atomicDo((()=>{this._fire(n,"execute",e),i.execute&&this._markDirty(i.execute(r)),this._executedAction(e,t),this._fire(n,"executed",e)})),t||(this._fire(n,"postExecute",e),i.postExecute&&i.postExecute(r),this._fire(n,"postExecuted",e)),this._popAction()},fW.prototype._pushAction=function(e){const t=this._currentExecution,n=t.actions,r=n[0];if(t.atomic)throw new Error("illegal invocation in <execute> or <revert> phase (action: "+e.command+")");e.id||(e.id=r&&r.id||this._createId()),n.push(e)},fW.prototype._popAction=function(){const e=this._currentExecution,t=e.trigger,n=e.actions,r=e.dirty;n.pop(),n.length||(this._eventBus.fire("elements.changed",{elements:$("id",r.reverse())}),r.length=0,this._fire("changed",{trigger:t}),e.trigger=null)},fW.prototype._markDirty=function(e){const t=this._currentExecution;e&&(e=x(e)?e:[e],t.dirty=t.dirty.concat(e))},fW.prototype._executedAction=function(e,t){const n=++this._stackIdx;t||this._stack.splice(n,this._stack.length,e)},fW.prototype._revertedAction=function(e){this._stackIdx--},fW.prototype._getHandler=function(e){return this._handlerMap[e]},fW.prototype._setHandler=function(e,t){if(!e||!t)throw new Error("command and handler required");if(this._handlerMap[e])throw new Error("overriding handler for command <"+e+">");this._handlerMap[e]=t};var pW={commandStack:["type",fW]},gW=1e3;function mW(e){this._eventBus=e}function vW(e,t){return function(n){return e.call(t||null,n.context,n.command,n)}}function yW(e){const t=function(t,n,r,i,o){(O(t)||_(t))&&(o=i,i=r,r=n,n=t,t=null),this.on(t,e,n,r,i,o)};return t}mW.$inject=["eventBus"],mW.prototype.on=function(e,t,n,r,i,o){if((O(t)||_(t))&&(o=i,i=r,r=n,n=t,t=null),O(n)&&(o=i,i=r,r=n,n=gW),k(i)&&(o=i,i=!1),!O(r))throw new Error("handlerFn must be a function");x(e)||(e=[e]);var s=this._eventBus;D(e,(function(e){var a=["commandStack",e,t].filter((function(e){return e})).join(".");s.on(a,n,i?vW(r,o):r,o)}))},mW.prototype.canExecute=yW("canExecute"),mW.prototype.preExecute=yW("preExecute"),mW.prototype.preExecuted=yW("preExecuted"),mW.prototype.execute=yW("execute"),mW.prototype.executed=yW("executed"),mW.prototype.postExecute=yW("postExecute"),mW.prototype.postExecuted=yW("postExecuted"),mW.prototype.revert=yW("revert"),mW.prototype.reverted=yW("reverted");class bW extends mW{constructor(e,t){super(e),this.preExecute("formField.remove",(function(e){const{formField:n}=e,{id:r}=n;t.unclaimId(n,r)}),!0),this.preExecute("formField.edit",(function(e){const{formField:n,properties:r}=e;"id"in r&&(t.unclaimId(n,n.id),t.claimId(n,r.id))}),!0)}}bW.$inject=["eventBus","modeling"];class wW extends mW{constructor(e,t,n){super(e),this.preExecute("formField.remove",(function(e){const{formField:r}=e,{key:i,type:o}=r,{config:s}=n.get(o);s.keyed&&t.unclaimKey(r,i)}),!0),this.preExecute("formField.edit",(function(e){const{formField:r,properties:i}=e,{key:o,type:s}=r,{config:a}=n.get(s);a.keyed&&"key"in i&&(t.unclaimKey(r,o),t.claimKey(r,i.key))}),!0)}}wW.$inject=["eventBus","modeling","formFields"];class xW extends mW{constructor(e,t,n){super(e),this.preExecute("formField.remove",(function(e){const{formField:r}=e,{path:i,type:o}=r,{config:s}=n.get(o);s.pathed&&t.unclaimPath(r,i)}),!0),this.preExecute("formField.edit",(function(e){const{formField:r,properties:i}=e,{path:o,type:s}=r,{config:a}=n.get(s);a.pathed&&"path"in i&&(t.unclaimPath(r,o),t.claimPath(r,i.path))}),!0)}}xW.$inject=["eventBus","modeling","formFields"];class kW extends mW{constructor(e){super(e),this.preExecute("formField.edit",(function(e){const{properties:t}=e,{validate:n={}}=t;if(n.validationType){const e={...n};delete e.minLength,delete e.maxLength,delete e.pattern,t["validate"]=e}}),!0)}}kW.$inject=["eventBus"];class _W extends mW{constructor(e){super(e),this.preExecute("formField.edit",(function(e){const{properties:t}=e,n={};OW(t)&&(Object.values(CF).forEach((e=>{const r=DF[e];void 0==Q(t,r)&&(n[DF[e]]=void 0)})),void 0===Q(t,DF[CF.EXPRESSION])&&void 0===Q(t,DF[CF.INPUT])||(n["defaultValue"]=void 0),e.properties={...t,...n})}),!0)}}function OW(e){return Object.values(DF).some((t=>void 0!==Q(e,t)))}_W.$inject=["eventBus"];const SW={columns:"columns",columnsExpression:"columnsExpression"};class EW extends mW{constructor(e){super(e),this.preExecute("formField.edit",(function(e){const{properties:t,oldProperties:n}=e,r=Object.values(SW).some((e=>void 0!==Q(t,[e])));if(!r)return;const i=Q(t,[SW.columns]),o=Q(n,[SW.columns]),s=Q(t,[SW.columnsExpression]),a=Q(n,[SW.columnsExpression]);!x(i)||b(o)?!S(s)||S(a)||(e.properties={...t,columns:void 0}):e.properties={...t,columnsExpression:void 0}}),!0)}}EW.$inject=["eventBus"];class CW extends mW{constructor(e){super(e),this.preExecute("formField.add",(function(e){const{formField:t}=e;"table"===Q(t,["type"])&&(e.formField={...t,dataSource:`=${t.id}`})}),!0)}}CW.$inject=["eventBus"];const TW={__init__:["idBehavior","keyBehavior","pathBehavior","validateBehavior","optionsSourceBehavior","columnsSourceBehavior","tableDataSourceBehavior"],idBehavior:["type",bW],keyBehavior:["type",wW],pathBehavior:["type",xW],validateBehavior:["type",kW],optionsSourceBehavior:["type",_W],columnsSourceBehavior:["type",EW],tableDataSourceBehavior:["type",CW]};function AW(e,t,n){return e.splice(t,0,n),e}function DW(e,t){return e.splice(t,1),e}function MW(e,t,n){const r=e.get(t._parent);return FW(t,[...r._path,"components",n]),t}function FW(e,t){e._path=t;const n=e.components||[];n.forEach(((e,n)=>{FW(e,[...t,"components",n])}))}function RW(e,t){return e.layout={...e.layout||{},row:t},e}class PW extends mW{constructor(e,t,n,r){super(e),this._eventBus=e,this._formLayouter=t,this._modeling=n,this._formEditor=r,this.preExecute(["formField.add","formField.remove","formField.move","id.updateClaim"],(e=>this.updateRowIds(e))),e.on("changed",(e=>{const{schema:t}=e;this.updateLayout(t)}))}updateLayout(e){this._formLayouter.clear(),this._formLayouter.calculateLayout(UF(e))}updateRowIds(e){const{schema:t}=this._formEditor._getState(),n=e=>{e.components&&e.components.length&&e.components.forEach((e=>{const t=this._formLayouter.getRowForField(e);RW(e,t.id),n(e)}))};n(t)}}PW.$inject=["eventBus","formLayouter","modeling","formEditor"];class IW{constructor(e,t){this._formEditor=e,this._formFieldRegistry=t}execute(e){const{formField:t,targetFormField:n,targetIndex:r}=e,{schema:i}=this._formEditor._getState(),o=[...n._path,"components"];t._parent=n.id,AW(Q(i,o),r,t),Q(i,o).forEach(((e,t)=>MW(this._formFieldRegistry,e,t))),this._formFieldRegistry.add(t),this._formEditor._setState({schema:i})}revert(e){const{formField:t,targetFormField:n,targetIndex:r}=e,{schema:i}=this._formEditor._getState(),o=[...n._path,"components"];DW(Q(i,o),r),Q(i,o).forEach(((e,t)=>MW(this._formFieldRegistry,e,t))),this._formFieldRegistry.remove(t),this._formEditor._setState({schema:i})}}IW.$inject=["formEditor","formFieldRegistry"];class LW{constructor(e,t){this._formEditor=e,this._formFieldRegistry=t}execute(e){const{formField:t,properties:n}=e;let{schema:r}=this._formEditor._getState();const i={};for(let o in n){i[o]=t[o];const e=n[o];"id"===o?e!==t.id&&this._formFieldRegistry.updateId(t,e):t[o]=e}return e.oldProperties=i,this._formEditor._setState({schema:r}),t}revert(e){const{formField:t,oldProperties:n}=e;let{schema:r}=this._formEditor._getState();for(let i in n){const e=n[i];"id"===i?e!==t.id&&this._formFieldRegistry.updateId(t,e):t[i]=e}return this._formEditor._setState({schema:r}),t}}LW.$inject=["formEditor","formFieldRegistry"];class $W{constructor(e,t,n,r){this._formEditor=e,this._formFieldRegistry=t,this._pathRegistry=n,this._formLayouter=r}execute(e){this.moveFormField(e)}revert(e){let{sourceFormField:t,targetFormField:n,sourceIndex:r,targetIndex:i,sourceRow:o,targetRow:s}=e;this.moveFormField({sourceFormField:n,targetFormField:t,sourceIndex:i,targetIndex:r,sourceRow:s,targetRow:o},!0)}moveFormField(e,t){let{sourceFormField:n,targetFormField:r,sourceIndex:i,targetIndex:o,targetRow:s}=e,{schema:a}=this._formEditor._getState();const l=[...n._path,"components"];if(n.id===r.id){t?i>o&&i--:i<o&&o--;const e=Q(a,[...l,i]);RW(e,s?s.id:this._formLayouter.nextRowId()),Zj(Q(a,l),i,o),Q(a,l).forEach(((e,t)=>MW(this._formFieldRegistry,e,t)))}else{const e=Q(a,[...l,i]);this._pathRegistry.executeRecursivelyOnFields(e,(({field:e})=>{this._pathRegistry.unclaimPath(this._pathRegistry.getValuePath(e))})),e._parent=r.id,DW(Q(a,l),i),Q(a,l).forEach(((e,t)=>MW(this._formFieldRegistry,e,t)));const t=[...r._path,"components"];RW(e,s?s.id:this._formLayouter.nextRowId()),AW(Q(a,t),o,e),Q(a,t).forEach(((e,t)=>MW(this._formFieldRegistry,e,t))),this._pathRegistry.executeRecursivelyOnFields(e,(({field:e,isClosed:t,isRepeatable:n})=>{this._pathRegistry.claimPath(this._pathRegistry.getValuePath(e),{isClosed:t,isRepeatable:n,claimerId:e.id})}))}this._formEditor._setState({schema:a})}}$W.$inject=["formEditor","formFieldRegistry","pathRegistry","formLayouter"];class NW{constructor(e,t){this._formEditor=e,this._formFieldRegistry=t}execute(e){const{sourceFormField:t,sourceIndex:n}=e;let{schema:r}=this._formEditor._getState();const i=[...t._path,"components"],o=e.formField=Q(r,[...i,n]);DW(Q(r,i),n),Q(r,i).forEach(((e,t)=>MW(this._formFieldRegistry,e,t))),YF(o,(e=>this._formFieldRegistry.remove(e))),this._formEditor._setState({schema:r})}revert(e){const{formField:t,sourceFormField:n,sourceIndex:r}=e;let{schema:i}=this._formEditor._getState();const o=[...n._path,"components"];AW(Q(i,o),r,t),Q(i,o).forEach(((e,t)=>MW(this._formFieldRegistry,e,t))),YF(t,(e=>this._formFieldRegistry.add(e))),this._formEditor._setState({schema:i})}}NW.$inject=["formEditor","formFieldRegistry"];class jW{constructor(e){this._formFieldRegistry=e}execute(e){const{claiming:t,formField:n,id:r}=e;t?this._formFieldRegistry._ids.claim(r,n):this._formFieldRegistry._ids.unclaim(r)}revert(e){const{claiming:t,formField:n,id:r}=e;t?this._formFieldRegistry._ids.unclaim(r):this._formFieldRegistry._ids.claim(r,n)}}jW.$inject=["formFieldRegistry"];class BW{constructor(e){this._pathRegistry=e}execute(e){const{claiming:t,formField:n,key:r}=e,i={replacements:{[n.id]:r}},o=this._pathRegistry.getValuePath(n,i);t?this._pathRegistry.claimPath(o,{isClosed:!0,claimerId:n.id}):this._pathRegistry.unclaimPath(o),e.valuePath=o}revert(e){const{claiming:t,formField:n,valuePath:r}=e;t?this._pathRegistry.unclaimPath(r):this._pathRegistry.claimPath(r,{isClosed:!0,claimerId:n.id})}}BW.$inject=["pathRegistry"];class VW{constructor(e){this._pathRegistry=e}execute(e){const{claiming:t,formField:n,path:r}=e,i={replacements:{[n.id]:r}},o=[];t?this._pathRegistry.executeRecursivelyOnFields(n,(({field:e,isClosed:t,isRepeatable:n})=>{const r=this._pathRegistry.getValuePath(e,i);o.push({valuePath:r,isClosed:t,isRepeatable:n,claimerId:e.id}),this._pathRegistry.claimPath(r,{isClosed:t,isRepeatable:n,claimerId:e.id})})):this._pathRegistry.executeRecursivelyOnFields(n,(({field:e,isClosed:t,isRepeatable:n})=>{const r=this._pathRegistry.getValuePath(e,i);o.push({valuePath:r,isClosed:t,isRepeatable:n,claimerId:e.id}),this._pathRegistry.unclaimPath(r)})),e.valuePaths=o}revert(e){const{claiming:t,valuePaths:n}=e;t?n.forEach((({valuePath:e})=>{this._pathRegistry.unclaimPath(e)})):n.forEach((({valuePath:e,isClosed:t,isRepeatable:n,claimerId:r})=>{this._pathRegistry.claimPath(e,{isClosed:t,isRepeatable:n,claimerId:r})}))}}VW.$inject=["pathRegistry"];class qW{constructor(e,t,n,r,i){this._commandStack=e,this._formEditor=n,this._formFieldRegistry=r,this._fieldFactory=i,t.on("form.init",(()=>{this.registerHandlers()}))}registerHandlers(){Object.entries(this.getHandlers()).forEach((([e,t])=>{this._commandStack.registerHandler(e,t)}))}getHandlers(){return{"formField.add":IW,"formField.edit":LW,"formField.move":$W,"formField.remove":NW,"id.updateClaim":jW,"key.updateClaim":BW,"path.updateClaim":VW}}addFormField(e,t,n){const r=this._fieldFactory.create(e),i={formField:r,targetFormField:t,targetIndex:n};return this._commandStack.execute("formField.add",i),r}editFormField(e,t,n){k(t)||(t={[t]:n});const r={formField:e,properties:t};this._commandStack.execute("formField.edit",r)}moveFormField(e,t,n,r,i,o,s){const a={formField:e,sourceFormField:t,targetFormField:n,sourceIndex:r,targetIndex:i,sourceRow:o,targetRow:s};this._commandStack.execute("formField.move",a)}removeFormField(e,t,n){const r={formField:e,sourceFormField:t,sourceIndex:n};this._commandStack.execute("formField.remove",r)}claimId(e,t){const n={formField:e,id:t,claiming:!0};this._commandStack.execute("id.updateClaim",n)}unclaimId(e,t){const n={formField:e,id:t,claiming:!1};this._commandStack.execute("id.updateClaim",n)}claimKey(e,t){const n={formField:e,key:t,claiming:!0};this._commandStack.execute("key.updateClaim",n)}unclaimKey(e,t){const n={formField:e,key:t,claiming:!1};this._commandStack.execute("key.updateClaim",n)}claimPath(e,t){const n={formField:e,path:t,claiming:!0};this._commandStack.execute("path.updateClaim",n)}unclaimPath(e,t){const n={formField:e,path:t,claiming:!1};this._commandStack.execute("path.updateClaim",n)}}qW.$inject=["commandStack","eventBus","formEditor","formFieldRegistry","fieldFactory"];const zW={__depends__:[TW,pW],__init__:["formLayoutUpdater","modeling"],formLayoutUpdater:["type",PW],modeling:["type",qW]};class HW{constructor(e){this._eventBus=e,this._selection=null}get(){return this._selection}set(e){this._selection!==e&&(this._selection=e,this._eventBus.fire("selection.changed",{selection:this._selection}))}toggle(e){const t=this._selection===e?null:e;this.set(t)}clear(){this.set(null)}isSelected(e){return this._selection===e}}HW.$inject=["eventBus"];class WW{constructor(e,t){e.on(["commandStack.formField.add.postExecuted","commandStack.formField.move.postExecuted"],(({context:e})=>{const{formField:n}=e;t.set(n)})),e.on("commandStack.formField.remove.postExecuted",(({context:e})=>{const{sourceFormField:n,sourceIndex:r}=e,i=n.components[r]||n.components[r-1];i?t.set(i):t.clear()})),e.on("formField.remove",(({formField:e})=>{t.isSelected(e)&&t.clear()}))}}WW.$inject=["eventBus","selection"];const QW={__init__:["selection","selectionBehavior"],selection:["type",HW],selectionBehavior:["type",WW]};class UW{constructor(e,t){this._eventBus=e,this._sectionKey=t,this._eventBus.on(`${this._sectionKey}.section.rendered`,(()=>{this.isSectionRendered=!0})),this._eventBus.on(`${this._sectionKey}.section.destroyed`,(()=>{this.isSectionRendered=!1}))}attachTo(e){this._onceSectionRendered((()=>this._eventBus.fire(`${this._sectionKey}.attach`,{container:e})))}detach(){this._onceSectionRendered((()=>this._eventBus.fire(`${this._sectionKey}.detach`)))}reset(){this._onceSectionRendered((()=>this._eventBus.fire(`${this._sectionKey}.reset`)))}_onceSectionRendered(e){this.isSectionRendered?e():this._eventBus.once(`${this._sectionKey}.section.rendered`,e)}}class YW extends UW{constructor(e){super(e,"palette")}}YW.$inject=["eventBus"];const XW={__init__:["palette"],palette:["type",YW]};var ZW=function(e){return it("svg",{...e,children:it("path",{fillRule:"evenodd",d:"m11.657 8-4.95 4.95a1 1 0 0 1-1.414-1.414L8.828 8 5.293 4.464A1 1 0 1 1 6.707 3.05L11.657 8Z"})})};ZW.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var GW=function(e){return it("svg",{...e,children:it("path",{fillRule:"evenodd",d:"M9 13V9h4a1 1 0 0 0 0-2H9V3a1 1 0 1 0-2 0v4H3a1 1 0 1 0 0 2h4v4a1 1 0 0 0 2 0Z"})})};GW.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var KW=function(e){return it("svg",{...e,children:it("path",{fillRule:"evenodd",d:"M12 6v7c0 1.1-.4 1.55-1.5 1.55h-5C4.4 14.55 4 14.1 4 13V6h8Zm-1.5 1.5h-5v4.3c0 .66.5 1.2 1.111 1.2H9.39c.611 0 1.111-.54 1.111-1.2V7.5ZM13 3h-2l-1-1H6L5 3H3v1.5h10V3Z"})})};KW.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};var JW=function(e){return it("svg",{...e,children:[it("path",{fill:"#fff",style:{mixBlendMode:"multiply"},d:"M0 0h16v16H0z"}),it("path",{fill:"#fff",style:{mixBlendMode:"multiply"},d:"M0 0h16v16H0z"}),it("path",{d:"M7 3H5v2h2V3zm4 0H9v2h2V3zM7 7H5v2h2V7zm4 0H9v2h2V7zm-4 4H5v2h2v-2zm4 0H9v2h2v-2z",fill:"#161616"})]})};JW.defaultProps={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var eQ=function(e){return it("svg",{...e,children:it("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M12.637 12.637v-4.72h1.362v4.721c0 .36-.137.676-.411.95-.275.275-.591.412-.95.412H3.362c-.38 0-.703-.132-.967-.396A1.315 1.315 0 0 1 2 12.638V3.362c0-.38.132-.703.396-.967S2.982 2 3.363 2h4.553v1.363H3.363v9.274h9.274ZM14 2H9.28l-.001 1.362h2.408L5.065 9.984l.95.95 6.622-6.622v2.409H14V2Z",fill:"currentcolor"})})};eQ.defaultProps={width:"16",height:"16",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var tQ=function(e){return it("svg",{...e,children:it("path",{d:"M3.617 11.99c-.137.684-.392 1.19-.765 1.518-.362.328-.882.492-1.558.492H0l.309-1.579h1.264l1.515-7.64h-.912l.309-1.579h.911l.236-1.191c.137-.685.387-1.192.75-1.52C4.753.164 5.277 0 5.953 0h1.294L6.94 1.579H5.675l-.323 1.623h1.264l-.309 1.579H5.043l-1.426 7.208ZM5.605 11.021l3.029-4.155L7.28 3.202h2.073l.706 2.547h.176l1.691-2.547H14l-3.014 4.051 1.338 3.768H10.25l-.706-2.606H9.37L7.678 11.02H5.605Z",fill:"currentcolor"})})};tQ.defaultProps={width:"14",height:"14",fill:"none",xmlns:"http://www.w3.org/2000/svg"};var nQ=function(e){return it("svg",{...e,children:[it("path",{d:"M16 2a14 14 0 1 0 14 14A14 14 0 0 0 16 2Zm0 26a12 12 0 1 1 12-12 12 12 0 0 1-12 12Z"}),it("circle",{cx:"16",cy:"23.5",r:"1.5"}),it("path",{d:"M17 8h-1.5a4.49 4.49 0 0 0-4.5 4.5v.5h2v-.5a2.5 2.5 0 0 1 2.5-2.5H17a2.5 2.5 0 0 1 0 5h-2v4.5h2V17a4.5 4.5 0 0 0 0-9Z"}),it("path",{style:{fill:"none"},d:"M0 0h32v32H0z"})]})};nQ.defaultProps={xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 32 32"};var rQ=function(e){return it("svg",{...e,children:[it("path",{fill:"currentColor",d:"M28 4H10a2.006 2.006 0 0 0-2 2v14a2.006 2.006 0 0 0 2 2h18a2.006 2.006 0 0 0 2-2V6a2.006 2.006 0 0 0-2-2Zm0 16H10V6h18Z"}),it("path",{fill:"currentColor",d:"M18 26H4V16h2v-2H4a2.006 2.006 0 0 0-2 2v10a2.006 2.006 0 0 0 2 2h14a2.006 2.006 0 0 0 2-2v-2h-2Z"})]})};rQ.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16",viewBox:"0 0 32 32"};var iQ=function(e){return it("svg",{...e,children:it("path",{fillRule:"evenodd",d:"m12 4.7-.7-.7L8 7.3 4.7 4l-.7.7L7.3 8 4 11.3l.7.7L8 8.7l3.3 3.3.7-.7L8.7 8 12 4.7Z",fill:"currentColor"})})};function oQ(e){const{element:t,headerProvider:n}=e,{getElementIcon:r,getDocumentationRef:i,getElementLabel:o,getTypeLabel:s}=n,a=o(t),l=s(t),c=i&&i(t),u=r(t);return it("div",{class:"bio-properties-panel-header",children:[it("div",{class:"bio-properties-panel-header-icon",children:u&&it(u,{width:"32",height:"32",viewBox:"0 0 32 32"})}),it("div",{class:"bio-properties-panel-header-labels",children:[it("div",{title:l,class:"bio-properties-panel-header-type",children:l}),a?it("div",{title:a,class:"bio-properties-panel-header-label",children:a}):null]}),it("div",{class:"bio-properties-panel-header-actions",children:c?it("a",{rel:"noopener",class:"bio-properties-panel-header-link",href:c,title:"Open documentation",target:"_blank",children:it(eQ,{})}):null})]})}iQ.defaultProps={xmlns:"http://www.w3.org/2000/svg",width:"16",height:"16"};const sQ=nt({description:{},getDescriptionForId:()=>{}}),aQ=nt({errors:{}}),lQ=nt({eventBus:null}),cQ=nt({layout:{},setLayout:()=>{},getLayoutForKey:()=>{},setLayoutForKey:()=>{}}),uQ=nt({tooltip:{},getTooltipForId:()=>{}});function hQ(e,t){const{getTooltipForId:n}=Et(uQ);return n(e,t)}function dQ(e){const{forId:t,element:n}=e,r=hQ(t,n),i=e.value||r;return i?it(fQ,{...e,value:i,forId:vQ(t)}):e.children}function fQ(e){const{forId:t,value:n,parent:r,direction:i="right",position:o}=e,[s,a]=bt(!1),[l,c]=bt(!1);let u=null;const h=_t(null),d=_t(null),f=async e=>{const t=()=>a(!0);s||u||(e instanceof MouseEvent?u=setTimeout(t,200):(t(),c(!0)))},p=()=>{a(!1),c(!1)},g=e=>{"Escape"===e.code&&p()},m=({x:e,y:t})=>{const n=d.current,r=h.current;return n&&(pQ(e,t,r.getBoundingClientRect())||pQ(e,t,n.getBoundingClientRect()))};xt((()=>{const{current:e}=h;if(!e)return;const t=e=>{const t=document.activeElement===h.current||document.activeElement.closest(".bio-properties-panel-tooltip");!s||m({x:e.x,y:e.y})||t&&l||p()},n=e=>{const{relatedTarget:t}=e,n=e=>!!e.closest(".bio-properties-panel-tooltip");s&&!mQ(h.current)&&t&&!n(t)&&p()};return document.addEventListener("wheel",t),document.addEventListener("focusout",n),document.addEventListener("mousemove",t),()=>{document.removeEventListener("wheel",t),document.removeEventListener("mousemove",t),document.removeEventListener("focusout",n)}}),[h.current,s,l]);const v=()=>it("div",{class:`bio-properties-panel-tooltip ${i}`,role:"tooltip",id:"bio-properties-panel-tooltip","aria-labelledby":t,style:o||gQ(h.current),ref:d,onClick:e=>e.stopPropagation(),children:[it("div",{class:"bio-properties-panel-tooltip-content",children:n}),it("div",{class:"bio-properties-panel-tooltip-arrow"})]});return it("div",{class:"bio-properties-panel-tooltip-wrapper",tabIndex:"0",ref:h,onMouseEnter:f,onMouseLeave:()=>{clearTimeout(u),u=null},onFocus:f,onKeyDown:g,children:[e.children,s?r?Ya(v(),r.current):v():null]})}function pQ(e,t,n){const{top:r,right:i,bottom:o,left:s}=n;return e>=s&&e<=i&&t>=r&&t<=o}function gQ(e){const t=e.getBoundingClientRect(),n=`calc(100% - ${t.x}px)`,r=t.top-10+"px";return`right: ${n}; top: ${r};`}function mQ(e){return e.matches(":hover")}function vQ(e){return`bio-properties-panel-${e}`}function yQ(e,t){const{getDescriptionForId:n}=Et(sQ);return n(e,t)}function bQ(e){const{errors:t}=Et(aQ);return t[e]}function wQ(){const{errors:e}=Et(aQ);return e}function xQ(e,t,n){const r=Et(lQ);n||({eventBus:n}=r);const i=_t(!1);n&&!i.current&&n.on(e,t),xt((()=>(n&&i.current&&n.on(e,t),i.current=!0,()=>{n&&n.off(e,t)})),[t,e,n])}function kQ(e,t){const{getLayoutForKey:n,setLayoutForKey:r}=Et(cQ),i=n(e,t),o=St((t=>{r(e,t)}),[r]);return[i,o]}function _Q(e){const t=_t();return xt((()=>{t.current=e})),t.current}function OQ(e){const{onShow:t}=Et(cQ),n=_t(),r=_t(!1),i=St((n=>{n.id===e&&(t(),r.current||(r.current=!0))}),[e]);return xt((()=>{r.current&&n.current&&(O(n.current.focus)&&n.current.focus(),O(n.current.select)&&n.current.select(),r.current=!1)})),xQ("propertiesPanel.showEntry",i),n}function SQ(e,t,n){const[r,i]=bt(Xj(t)),o=St((()=>{const e=Xj(t);e!==r&&i(e)}),[t,r]);xt((()=>{o()}),[o]),xQ("propertiesPanel.attach",o),xQ("propertiesPanel.detach",o),xt((()=>{const t=IntersectionObserver;if(!t)return;if(!e.current||!r)return;const i=new t((e=>{0!==r.scrollHeight&&e.forEach((e=>{e.intersectionRatio<1?n(!0):1===e.intersectionRatio&&n(!1)}))}),{root:r,rootMargin:"0px 0px 999999% 0px",threshold:[1]});return i.observe(e.current),()=>{i.unobserve(e.current)}}),[e.current,r,n])}function EQ(e){const t=_t(e);return t.current=e,St(((...e)=>t.current(...e)),[])}function CQ(e){const[t,n]=bt(!!e&&!!e.clientHeight);return kt((()=>{if(!e)return;const r=new ResizeObserver((([e])=>{requestAnimationFrame((()=>{const r=!!e.contentRect.height;r!==t&&n(r)}))}));return r.observe(e),()=>r.disconnect()}),[e,t]),t}function TQ(e){const{element:t,entries:n=[],id:r,label:i,shouldOpen:o=!1}=e,s=_t(null),[a,l]=kQ(["groups",r,"open"],o),c=St((()=>l(!0)),[l]),u=()=>l(!a),[h,d]=bt(!1),[f,p]=bt(!1);xt((()=>{const e=requestAnimationFrame((()=>{const e=n.find((e=>{const{id:t,isEdited:n}=e,r=Xj(`[data-entry-id="${t}"]`);if(!O(n)||!r)return!1;const i=Xj(".bio-properties-panel-input",r);return n(i)}));d(e)}));return()=>cancelAnimationFrame(e)}),[n,d]);const g=wQ(),m=n.some((e=>g[e.id]));SQ(s,"div.bio-properties-panel-scroll-container",p);const v={...Et(cQ),onShow:c};return it("div",{class:"bio-properties-panel-group","data-group-id":"group-"+r,ref:s,children:[it("div",{class:Ee()("bio-properties-panel-group-header",h?"":"empty",a?"open":"",f&&a?"sticky":""),onClick:u,children:[it("div",{title:e.tooltip?null:i,"data-title":i,class:"bio-properties-panel-group-header-title",children:it(dQ,{value:e.tooltip,forId:"group-"+r,element:t,parent:s,children:i})}),it("div",{class:"bio-properties-panel-group-header-buttons",children:[it(AQ,{edited:h,hasErrors:m}),it("button",{type:"button",title:"Toggle section",class:"bio-properties-panel-group-header-button bio-properties-panel-arrow",children:it(ZW,{class:a?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})})]})]}),it("div",{class:Ee()("bio-properties-panel-group-entries",a?"open":""),children:it(cQ.Provider,{value:v,children:n.map((e=>{const{component:n,id:r}=e;return Re(n,{...e,element:t,key:r})}))})})]})}function AQ(e){const{edited:t,hasErrors:n}=e;return n?it("div",{title:"Section contains an error",class:"bio-properties-panel-dot bio-properties-panel-dot--error"}):t?it("div",{title:"Section contains data",class:"bio-properties-panel-dot"}):null}function DQ(e){const{text:t,icon:n}=e;return it("div",{class:"bio-properties-panel open",children:it("section",{class:"bio-properties-panel-placeholder",children:[n&&it(n,{class:"bio-properties-panel-placeholder-icon"}),it("p",{class:"bio-properties-panel-placeholder-text",children:t})]})})}function MQ(e){const{element:t,forId:n,value:r}=e,i=yQ(n,t),o=r||i;if(o)return it("div",{class:"bio-properties-panel-description",children:o})}const FQ=()=>{},RQ=function(e,t){const[n,r]=bt(void 0);t.current=Ot((()=>({focus:t=>{e?e.focus(t):("undefined"===typeof t&&(t=1/0),r(t))}})),[e]),xt((()=>{"undefined"!==typeof n&&e&&(e.focus(n),r(!1))}),[e,n])},PQ=$a(((e,t)=>{const{onInput:n,disabled:r,tooltipContainer:i,enableGutters:o,value:s,onLint:a=FQ,onPopupOpen:l=FQ,popupOpen:c,contentAttributes:u={},hostLanguage:h=null,singleLine:d=!1}=e,f=_t(),[p,g]=bt(),[m,v]=bt(s||"");RQ(p,t);const y=EQ((e=>{n(e),v(e)}));xt((()=>{let e;return e=new jD({container:f.current,onChange:y,value:m,onLint:a,contentAttributes:u,tooltipContainer:i,enableGutters:o,hostLanguage:h,singleLine:d,lineWrap:!0}),g(e),()=>{a([]),f.current.innerHTML="",g(null)}}),[]),xt((()=>{p&&s!==m&&(p.setValue(s),v(s))}),[s]);const b=()=>{t.current.focus()};return it("div",{class:Ee()("bio-properties-panel-feelers-editor-container",c?"popupOpen":null),children:[it("div",{class:"bio-properties-panel-feelers-editor__open-popup-placeholder",children:"Opened in editor"}),it("div",{name:e.name,class:Ee()("bio-properties-panel-feelers-editor bio-properties-panel-input",m?"edited":null,r?"disabled":null),ref:f,onClick:b}),it("button",{type:"button",title:"Open pop-up editor",class:"bio-properties-panel-open-feel-popup",onClick:()=>l("feelers"),children:it(rQ,{})})]})})),IQ=()=>{},LQ=function(e,t){const[n,r]=bt(void 0);t.current=Ot((()=>({focus:t=>{e?e.focus(t):("undefined"===typeof t&&(t=1/0),r(t))}})),[e]),xt((()=>{"undefined"!==typeof n&&e&&(e.focus(n),r(!1))}),[e,n])},$Q=$a(((e,t)=>{const{contentAttributes:n,enableGutters:r,value:i,onInput:o,onFeelToggle:s=IQ,onLint:a=IQ,onPopupOpen:l=IQ,placeholder:c,popupOpen:u,disabled:h,tooltipContainer:d,variables:f}=e,p=_t(),[g,m]=bt(),[v,y]=bt(i||"");LQ(g,t);const b=EQ((e=>{o(e),y(e)}));xt((()=>{let e;const t=t=>{if("Backspace"!==t.key||!e)return;const n=e.getSelection(),r=n.ranges[n.mainIndex];0===r.from&&0===r.to&&s()};return e=new HB({container:p.current,onChange:b,onKeyDown:t,onLint:a,placeholder:c,tooltipContainer:d,value:v,variables:f,extensions:[...r?[Sk()]:[],px.lineWrapping],contentAttributes:n}),m(e),()=>{a([]),p.current.innerHTML="",m(null)}}),[]),xt((()=>{g&&i!==v&&(g.setValue(i),y(i))}),[i]),xt((()=>{g&&g.setVariables(f)}),[f]),xt((()=>{g&&g.setPlaceholder(c)}),[c]);const w=()=>{t.current.focus()};return it("div",{class:Ee()("bio-properties-panel-feel-editor-container",h?"disabled":null,u?"popupOpen":null),children:[it("div",{class:"bio-properties-panel-feel-editor__open-popup-placeholder",children:"Opened in editor"}),it("div",{name:e.name,class:Ee()("bio-properties-panel-input",v?"edited":null),ref:p,onClick:w}),it("button",{type:"button",title:"Open pop-up editor",class:"bio-properties-panel-open-feel-popup",onClick:()=>l(),children:it(rQ,{})})]})}));function NQ(e){const{active:t}=e;return t?it("span",{class:"bio-properties-panel-feel-indicator",children:"="}):null}const jQ=()=>{};function BQ(e){const{feel:t=!1,active:n,disabled:r=!1,onClick:i=jQ}=e,o="FEEL expression is mandatory",s=`Click to ${n?"remove":"set a"} dynamic value with FEEL expression`,a=e=>{i(e),e.pointerType||e.stopPropagation()};return it("button",{type:"button",class:Ee()("bio-properties-panel-feel-icon",n?"active":null,"required"===t?"required":"optional"),onClick:a,disabled:"required"===t||r,title:"required"===t?o:s,children:it(tQ,{})})}const VQ=nt({open:()=>{},close:()=>{},source:null});function qQ(e,t){let n,r,i;function o(e){n=this,r=e.clientX,i=e.clientY,e.dataTransfer&&e.dataTransfer.setDragImage(t||HQ(),0,0),document.addEventListener("dragover",s,!0),document.addEventListener("dragenter",zQ,!0),document.addEventListener("dragend",a),document.addEventListener("drop",zQ)}function s(t){const o={x:t.clientX-r,y:t.clientY-i};return e.call(n,t,o)}function a(){document.removeEventListener("dragover",s,!0),document.removeEventListener("dragenter",zQ,!0),document.removeEventListener("dragend",a),document.removeEventListener("drop",zQ)}return o}function zQ(e){e.preventDefault(),e.stopPropagation()}function HQ(){return Uj('<canvas width="0" height="0" />')}const WQ=()=>{};function QQ(e,t){const{container:n,className:r,delayInitialFocus:i,position:o,width:s,height:a,onClose:l,onPostActivate:c=WQ,onPostDeactivate:u=WQ,returnFocus:h=!0,closeOnEscape:d=!0,title:f}=e,p=_t(null),g=_t(null),m=t||g,v=Ot((()=>JQ(n)),[n]),y=e=>{e.stopPropagation(),d&&"Escape"===e.key&&l()},b=()=>{p.current&&p.current.activate()};let w={};return o&&(w={...w,top:o.top+"px",left:o.left+"px"}),s&&(w.width=s+"px"),a&&(w.height=a+"px"),xt((()=>(m.current&&m.current.addEventListener("focusin",b),()=>{m.current.removeEventListener("focusin",b)})),[m]),xt((()=>(m.current&&(p.current=QV(m.current,{clickOutsideDeactivates:!0,delayInitialFocus:i,fallbackFocus:m.current,onPostActivate:c,onPostDeactivate:u,returnFocusOnDeactivate:h}),p.current.activate()),()=>p.current&&p.current.deactivate())),[m]),xQ("propertiesPanel.detach",l),Ya(it("div",{"aria-label":f,tabIndex:-1,ref:m,onKeyDown:y,role:"dialog",class:Ee()("bio-properties-panel-popup",r),style:w,children:e.children}),v||document.body)}const UQ=$a(QQ);function YQ(e){const{children:t,className:n,draggable:r,emit:i=()=>{},title:o,showCloseButton:s=!1,closeButtonTooltip:a="Close popup",onClose:l,...c}=e,u=_t({startPosition:null,newPosition:null}),h=_t(),d=_t(),f=(e,t)=>{KQ(e);const{x:n,y:r}=t,o={x:u.current.startPosition.x+n,y:u.current.startPosition.y+r},s=GQ(d.current);s.style.top=o.y+"px",s.style.left=o.x+"px",i("dragover",{newPosition:o,delta:t})},p=e=>{const t=qQ(f,h.current);t(e),e.stopPropagation();const n=GQ(d.current),r=n.getBoundingClientRect();u.current.startPosition={x:r.left,y:r.top},i("dragstart")},g=()=>{u.current.newPosition=null,i("dragend")};return it("div",{class:Ee()("bio-properties-panel-popup__header",r&&"draggable",n),ref:d,draggable:r,onDragStart:p,onDragEnd:g,...c,children:[r&&it(Ie,{children:[it("div",{ref:h,class:"bio-properties-panel-popup__drag-preview"}),it("div",{class:"bio-properties-panel-popup__drag-handle",children:it(JW,{})})]}),it("div",{class:"bio-properties-panel-popup__title",children:o}),t,s&&it("button",{title:a,class:"bio-properties-panel-popup__close",onClick:l,children:it(iQ,{})})]})}function XQ(e){const{children:t,className:n,...r}=e;return it("div",{class:Ee()("bio-properties-panel-popup__body",n),...r,children:t})}function ZQ(e){const{children:t,className:n,...r}=e;return it("div",{class:Ee()("bio-properties-panel-popup__footer",n),...r,children:e.children})}function GQ(e){return e.closest(".bio-properties-panel-popup")}function KQ(e){e.preventDefault(),e.stopPropagation()}function JQ(e){return"string"===typeof e?Xj(e):e}UQ.Title=YQ,UQ.Body=XQ,UQ.Footer=ZQ;const eU=700,tU=250;function nU(e){const{element:t,eventBus:n={fire(){},on(){},off(){}},popupContainer:r}=e,i=_Q(t),[o,s]=bt({}),[a,l]=bt(!1),[c,u]=bt(null),[h,d]=bt(null),f=(e,t)=>{n.fire("feelPopup."+e,t)},p=St((()=>!!a),[a]);sU((()=>{a||f("closed")}),[a]);const g=(e,t,n)=>{u(e),s(t),l(!0),d(n),f("open")},m=(e={})=>{const{id:t}=e;t&&t!==c||(l(!1),u(null))},v={open:g,close:m,source:c};return xt((()=>{t&&i&&t!==i&&m()}),[t]),xt((()=>{const e=e=>{const{entryId:t,popupConfig:n,sourceElement:r}=e;g(t,n,r)},t=()=>p();return n.on("feelPopup._close",m),n.on("feelPopup._open",e),n.on("feelPopup._isOpen",t),()=>{n.off("feelPopup._close",m),n.off("feelPopup._open",g),n.off("feelPopup._isOpen",t)}}),[n,p]),it(VQ.Provider,{value:v,children:[a&&it(rU,{onClose:m,container:r,sourceElement:h,emit:f,...o}),e.children]})}function rU(e){const{container:t,id:n,hostLanguage:r,onInput:i,onClose:o,position:s,singleLine:a,sourceElement:l,title:c,tooltipContainer:u,type:h,value:d,variables:f,emit:p}=e,g=_t(),m=_t(),v=_t(!1),y=()=>{l&&l.focus()},b=e=>{"Escape"===e.key&&(v.current=oU(e.target))},w=e=>{"Escape"===e.key&&(v.current||(o(),v.current=!1))};return xt((()=>(p("opened",{domNode:m.current}),()=>p("close",{domNode:m.current}))),[]),xt((()=>{g.current&&g.current.focus()}),[g]),it(UQ,{container:t,className:"bio-properties-panel-feel-popup",emit:p,position:s,title:c,onClose:o,returnFocus:!1,closeOnEscape:!1,delayInitialFocus:!1,onPostDeactivate:y,height:tU,width:eU,ref:m,children:[it(UQ.Title,{title:c,emit:p,showCloseButton:!0,closeButtonTooltip:"Save and close",onClose:o,draggable:!0,children:["feel"===h&&it("a",{href:"https://docs.camunda.io/docs/components/modeler/feel/what-is-feel/",target:"_blank",class:"bio-properties-panel-feel-popup__title-link",children:["Learn FEEL expressions",it(nQ,{})]}),"feelers"===h&&it("a",{href:"https://docs.camunda.io/docs/components/modeler/forms/configuration/forms-config-templating-syntax/",target:"_blank",class:"bio-properties-panel-feel-popup__title-link",children:["Learn templating",it(nQ,{})]})]}),it(UQ.Body,{children:it("div",{onKeyDownCapture:b,onKeyDown:w,class:"bio-properties-panel-feel-popup__body",children:["feel"===h&&it($Q,{enableGutters:!0,id:iU(n),name:n,onInput:i,value:d,variables:f,ref:g,tooltipContainer:u}),"feelers"===h&&it(PQ,{id:iU(n),contentAttributes:{"aria-label":c},enableGutters:!0,hostLanguage:r,name:n,onInput:i,value:d,ref:g,singleLine:a,tooltipContainer:u})]})})]})}function iU(e){return`bio-properties-panel-${e}`}function oU(e){return e.closest(".cm-editor").querySelector(".cm-tooltip-autocomplete")}function sU(e,t){const n=_t(!1);xt((()=>{if(n.current)return e();n.current=!0}),t)}function aU(e){const{id:t,label:n,onInput:r,value:i,switcherLabel:o,inline:s,onFocus:a,onBlur:l,inputRef:c,tooltip:u}=e,[h,d]=bt(i),f=async()=>{r(!i)},p=e=>{f(),d(e.target.value)};return xt((()=>{i!==h&&d(i)}),[i]),it("div",{class:Ee()("bio-properties-panel-toggle-switch",{inline:s}),children:[it("label",{class:"bio-properties-panel-label",for:uU(t),children:it(dQ,{value:u,forId:t,element:e.element,children:n})}),it("div",{class:"bio-properties-panel-field-wrapper",children:[it("label",{class:"bio-properties-panel-toggle-switch__switcher",children:[it("input",{ref:c,id:uU(t),class:"bio-properties-panel-input",type:"checkbox",onFocus:a,onBlur:l,name:t,onInput:p,checked:!!h}),it("span",{class:"bio-properties-panel-toggle-switch__slider"})]}),o&&it("p",{class:"bio-properties-panel-toggle-switch__label",children:o})]})]})}function lU(e){const{element:t,id:n,description:r,label:i,switcherLabel:o,inline:s,getValue:a,setValue:l,onFocus:c,onBlur:u,tooltip:h}=e,d=a(t);return it("div",{class:"bio-properties-panel-entry bio-properties-panel-toggle-switch-entry","data-entry-id":n,children:[it(aU,{id:n,label:i,value:d,onInput:l,onFocus:c,onBlur:u,switcherLabel:o,inline:s,tooltip:h,element:t}),it(MQ,{forId:n,element:t,value:r})]})}function cU(e){return e&&!!e.checked}function uU(e){return`bio-properties-panel-${e}`}function hU(e){const{debounce:t,disabled:n,displayLabel:r=!0,id:i,inputRef:o,label:s,max:a,min:l,onInput:c,step:u,value:h="",onFocus:d,onBlur:f}=e,[p,g]=bt(h),m=Ot((()=>t((e=>{e.validity.valid&&c(e.value?parseFloat(e.value):void 0)}))),[c,t]),v=e=>{m(e.target),g(e.target.value)};return xt((()=>{h!==p&&g(h)}),[h]),it("div",{class:"bio-properties-panel-numberfield",children:[r&&it("label",{for:pU(i),class:"bio-properties-panel-label",children:s}),it("input",{id:pU(i),ref:o,type:"number",name:i,spellCheck:"false",autoComplete:"off",disabled:n,class:"bio-properties-panel-input",max:a,min:l,onInput:v,onFocus:d,onBlur:f,step:u,value:p})]})}function dU(e){const{debounce:t,description:n,disabled:r,element:i,getValue:o,id:s,label:a,max:l,min:c,setValue:u,step:h,onFocus:d,onBlur:f,validate:p}=e,g=bQ(s),[m,v]=bt(null);let y=o(i);xt((()=>{if(O(p)){const e=p(y)||null;v(e)}}),[y,p]);const b=e=>{let t=null;O(p)&&(t=p(e)||null),u(e,t),v(t)},w=g||m;return it("div",{class:Ee()("bio-properties-panel-entry",w?"has-error":""),"data-entry-id":s,children:[it(hU,{debounce:t,disabled:r,id:s,label:a,onFocus:d,onBlur:f,onInput:b,max:l,min:c,step:h,value:y},i),w&&it("div",{class:"bio-properties-panel-error",children:w}),it(MQ,{forId:s,element:i,value:n})]})}function fU(e){return e&&!!e.value}function pU(e){return`bio-properties-panel-${e}`}const gU=()=>{};function mU(e){const{debounce:t,id:n,element:r,label:i,hostLanguage:o,onInput:s,onError:a,placeholder:l,feel:c,value:u="",disabled:h=!1,variables:d,singleLine:f,tooltipContainer:p,OptionalComponent:g=yU,tooltip:m}=e,[v,y]=bt(u),b=OQ(n),w=_t(),x=S(v)&&v.startsWith("=")||"required"===c,k=S(v)&&v.startsWith("=")?v.substring(1):v,[_,O]=bt(void 0),{open:E,source:C}=Et(VQ),T=C===n,A=(e=0)=>{const t=w.current.contains(document.activeElement),n=t?document.activeElement.selectionStart:1/0;O(n+e)},D=Ot((()=>t((e=>{s(e)}))),[s,t]),M=e=>{y(e),D("undefined"===typeof e||""===e||"="===e?void 0:e)},F=EQ((()=>{"required"!==c&&M(x?k:"="+v)})),R=e=>{x&&(e="="+e),e!==v&&(M(e),!x&&S(e)&&e.startsWith("=")&&A(-1))},P=EQ(((e=[])=>{const t=e.some((e=>"Syntax Error"===e.type));a(t?"Unparsable FEEL expression.":void 0)})),I=(e="feel")=>{const t={id:n,hostLanguage:o,onInput:R,position:CU(w.current),singleLine:f,title:TU(r,i),tooltipContainer:p,type:e,value:k,variables:d};E(n,t,b.current)};return xt((()=>{"undefined"!==typeof _&&(b.current.focus(_),O(void 0))}),[_]),xt((()=>{u!==v&&M(u||(x?"=":""))}),[u]),xt((()=>{const e=e=>{x&&e.clipboardData.setData("application/FEEL",e.clipboardData.getData("text"))},t=e=>{if(x||T)return;const t=e.clipboardData.getData("application/FEEL");t&&setTimeout((()=>{F(),A()}))};return w.current.addEventListener("copy",e),w.current.addEventListener("cut",e),w.current.addEventListener("paste",t),()=>{w.current.removeEventListener("copy",e),w.current.removeEventListener("cut",e),w.current.removeEventListener("paste",t)}}),[w,x,F,A]),it("div",{class:Ee()("bio-properties-panel-feel-entry",{"feel-active":x}),children:[it("label",{for:EU(n),class:"bio-properties-panel-label",onClick:()=>A(),children:[it(dQ,{value:m,forId:n,element:e.element,children:i}),it(BQ,{label:i,feel:c,onClick:F,active:x})]}),it("div",{class:"bio-properties-panel-feel-container",ref:w,children:[it(NQ,{active:x,disabled:"optional"!==c||h,onClick:F}),x?it($Q,{name:n,onInput:R,contentAttributes:{id:EU(n),"aria-label":i},disabled:h,popupOpen:T,onFeelToggle:()=>{F(),A(!0)},onLint:P,onPopupOpen:I,placeholder:l,value:k,variables:d,ref:b,tooltipContainer:p}):it(g,{...e,popupOpen:T,onInput:R,contentAttributes:{id:EU(n),"aria-label":i},value:v,ref:b,onPopupOpen:I,containerRef:w})]})]})}const vU=AU(mU),yU=$a(((e,t)=>{const{id:n,disabled:r,onInput:i,value:o,onFocus:s,onBlur:a,placeholder:l}=e,c=_t();return t.current={focus:e=>{const t=c.current;t&&(t.focus(),"number"===typeof e&&(e>o.length&&(e=o.length),t.setSelectionRange(e,e)))}},it("input",{id:EU(n),type:"text",ref:c,name:n,spellCheck:"false",autoComplete:"off",disabled:r,class:"bio-properties-panel-input",onInput:e=>i(e.target.value),onFocus:s,onBlur:a,placeholder:l,value:o||""})})),bU=$a(((e,t)=>{const{id:n,debounce:r,disabled:i,onInput:o,value:s,min:a,max:l,step:c,onFocus:u,onBlur:h}=e,d=_t();return t.current={focus:e=>{const t=d.current;t&&(t.focus(),"number"===typeof e&&e!==1/0&&(e>s.length&&(e=s.length),t.setSelectionRange(e,e)))}},it(hU,{id:n,debounce:r,disabled:i,displayLabel:!1,inputRef:d,max:l,min:a,onInput:o,step:c,value:s,onFocus:u,onBlur:h})}));$a(((e,t)=>{const{id:n,disabled:r,onInput:i,value:o,onFocus:s,onBlur:a,placeholder:l}=e,c=_t();return t.current={focus:()=>{const e=c.current;e&&(e.focus(),e.setSelectionRange(0,0))}},it("textarea",{id:EU(n),type:"text",ref:c,name:n,spellCheck:"false",autoComplete:"off",disabled:r,class:"bio-properties-panel-input",onInput:e=>i(e.target.value),onFocus:s,onBlur:a,placeholder:l,value:o||"","data-gramm":"false"})}));const wU=$a(((e,t)=>{const{id:n,onInput:r,value:i,onFocus:o,onBlur:s,switcherLabel:a}=e,l=_t();return t.current={focus:()=>{const e=l.current;e&&e.focus()}},it(aU,{id:n,value:i,inputRef:l,onInput:r,onFocus:o,onBlur:s,switcherLabel:a})}));function xU(e){const{element:t,id:n,description:r,debounce:i,disabled:o,feel:s,label:a,getValue:l,setValue:c,tooltipContainer:u,hostLanguage:h,singleLine:d,validate:f,show:p=gU,example:g,variables:m,onFocus:v,onBlur:y,placeholder:b,tooltip:w}=e,[x,k]=bt(null),[_,S]=bt(null);let E=l(t);xt((()=>{if(O(f)){const e=f(E)||null;k(e)}}),[E,f]);const C=EQ((e=>{let t=null;O(f)&&(t=f(e)||null),e!==E&&c(e,t),k(t)})),T=St((e=>{S(e)}),[]),A=bQ(n),D=A||_||x;return it("div",{class:Ee()(e.class,"bio-properties-panel-entry",D?"has-error":""),"data-entry-id":n,children:[Re(vU,{...e,debounce:i,disabled:o,feel:s,id:n,key:t,label:a,onInput:C,onError:T,onFocus:v,onBlur:y,placeholder:b,example:g,hostLanguage:h,singleLine:d,show:p,value:E,variables:m,tooltipContainer:u,OptionalComponent:e.OptionalComponent,tooltip:w}),D&&it("div",{class:"bio-properties-panel-error",children:D}),it(MQ,{forId:n,element:t,value:r})]})}function kU(e){return it(xU,{class:"bio-properties-panel-feel-number",OptionalComponent:bU,...e})}function _U(e){return it(xU,{class:"bio-properties-panel-feel-toggle-switch",OptionalComponent:wU,...e})}function OU(e){return it(xU,{class:"bio-properties-panel-feel-templating",OptionalComponent:PQ,...e})}function SU(e){return!!e&&("checkbox"===e.type?!!e.checked||e.classList.contains("edited"):!!e.value||e.classList.contains("edited"))}function EU(e){return`bio-properties-panel-${e}`}function CU(e){const{top:t,left:n}=e.getBoundingClientRect();return{left:n-eU-20,top:t}}function TU(e,t){let n="";return e&&e.type&&(n=`${e.type} / `),`${n}${t}`}function AU(e){return function(t){const{id:n}=t,{close:r}=Et(VQ),i=EQ(r);return xt((()=>()=>{i({id:n})}),[]),it(e,{...t})}}$a(((e,t)=>{const{id:n,disabled:r,onInput:i,value:o,onFocus:s,onBlur:a}=e,l=_t(),c=({target:e})=>{i(e.checked)};return t.current={focus:()=>{const e=l.current;e&&e.focus()}},it("input",{ref:l,id:EU(n),name:n,onFocus:s,onBlur:a,type:"checkbox",class:"bio-properties-panel-input",onChange:c,checked:o,disabled:r})}));const DU={},MU={},FU={};function RU(e){const{element:t,headerProvider:n,placeholderProvider:r,groups:i,layoutConfig:o,layoutChanged:s,descriptionConfig:a,descriptionLoaded:l,tooltipConfig:c,tooltipLoaded:u,feelPopupContainer:h,eventBus:d}=e,[f,p]=bt(PU(o));$U((()=>{const e=PU(o);p(e)}),[o]),xt((()=>{"function"===typeof s&&s(f)}),[f,s]);const g=(e,t)=>Q(f,e,t),m=(e,t)=>{const n=H({},f);W(n,e,t),p(n)},v={layout:f,setLayout:p,getLayoutForKey:g,setLayoutForKey:m},y=Ot((()=>IU(a)),[a]);xt((()=>{"function"===typeof l&&l(y)}),[y,l]);const b=(e,t)=>y[e]&&y[e](t),w={description:y,getDescriptionForId:b},k=Ot((()=>LU(c)),[c]);xt((()=>{"function"===typeof u&&u(k)}),[k,u]);const _=(e,t)=>k[e]&&k[e](t),O={tooltip:k,getTooltipForId:_},[S,E]=bt({}),C=({errors:e})=>E(e);xQ("propertiesPanel.setErrors",C,d);const T={errors:S},A={eventBus:d},D={element:t};return r&&!t?it(DQ,{...r.getEmpty()}):r&&x(t)?it(DQ,{...r.getMultiple()}):it(cQ.Provider,{value:D,children:it(aQ.Provider,{value:T,children:it(sQ.Provider,{value:w,children:it(uQ.Provider,{value:O,children:it(cQ.Provider,{value:v,children:it(lQ.Provider,{value:A,children:it(nU,{element:t,eventBus:d,popupContainer:h,children:it("div",{class:"bio-properties-panel",children:[it(oQ,{element:t,headerProvider:n}),it("div",{class:"bio-properties-panel-scroll-container",children:i.map((e=>{const{component:n=TQ,id:r}=e;return Re(n,{...e,key:r,element:t})}))})]})})})})})})})})}function PU(e={},t=DU){return{...t,...e}}function IU(e={}){return{...MU,...e}}function LU(e={}){return{...FU,...e}}function $U(e,t){const n=_t(!1);kt((()=>{if(n.current)return e();n.current=!0}),t)}function NU(e,t){return t=t||{},e.replace(/{([^}]+)}/g,(function(e,n){return t[n]||"{"+n+"}"}))}function jU(e){const{element:t,entries:n=[],id:r,label:i,open:o,remove:s,translate:a=NU}=e,[l,c]=bt(o),u=()=>c(!l),{onShow:h}=Et(cQ),d={...Et(cQ),onShow:St((()=>{c(!0),O(h)&&h()}),[h,c])},f=a("<empty>");return it("div",{"data-entry-id":r,class:Ee()("bio-properties-panel-collapsible-entry",l?"open":""),children:[it("div",{class:"bio-properties-panel-collapsible-entry-header",onClick:u,children:[it("div",{title:i||f,class:Ee()("bio-properties-panel-collapsible-entry-header-title",!i&&"empty"),children:i||f}),it("button",{type:"button",title:a("Toggle list item"),class:"bio-properties-panel-arrow  bio-properties-panel-collapsible-entry-arrow",children:it(ZW,{class:l?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})}),s?it("button",{type:"button",title:a("Delete item"),class:"bio-properties-panel-remove-entry",onClick:s,children:it(KW,{})}):null]}),it("div",{class:Ee()("bio-properties-panel-collapsible-entry-entries",l?"open":""),children:it(cQ.Provider,{value:d,children:n.map((e=>{const{component:n,id:r}=e;return Re(n,{...e,element:t,key:r})}))})})]})}function BU(e){const{autoFocusEntry:t,autoOpen:n,translate:r=NU}=e;return xt((()=>{if(n&&t){const e=Xj(`[data-entry-id="${t}"]`),n=Xj(".bio-properties-panel-input",e);n&&(O(n.select)?n.select():O(n.focus)&&n.focus(),n.scrollIntoView())}}),[n,t]),it("div",{class:"bio-properties-panel-list-item",children:it(jU,{...e,open:n,translate:r})})}const VU=()=>{};function qU(e){const{add:t,element:n,id:r,items:i,label:o,shouldOpen:s=!1,translate:a=NU}=e;xt((()=>{void 0!=e.shouldSort&&console.warn("the property 'shouldSort' is no longer supported")}),[e.shouldSort]);const l=_t(null),[c,u]=kQ(["groups",r,"open"],s),[h,d]=bt(!1),f=St((()=>u(!0)),[u]),[p,g]=bt([]),[m,v]=bt(!1),y=_Q(n),b=St((()=>u(!c)),[c]),w=n===y&&c&&m?zU(i,p):[];xt((()=>{g(i),v(!1)}),[i]),SQ(l,"div.bio-properties-panel-scroll-container",d);const x=!!i.length,k={...Et(cQ),onShow:f},_=e=>{v(!0),u(!0),t(e)},O=wQ(),S=i.some((e=>!!O[e.id]||(e.entries?e.entries.some((e=>O[e.id])):void 0)));return it("div",{class:"bio-properties-panel-group","data-group-id":"group-"+r,ref:l,children:[it("div",{class:Ee()("bio-properties-panel-group-header",x?"":"empty",x&&c?"open":"",h&&c?"sticky":""),onClick:x?b:VU,children:[it("div",{title:e.tooltip?null:o,"data-title":o,class:"bio-properties-panel-group-header-title",children:it(dQ,{value:e.tooltip,forId:"group-"+r,element:n,parent:l,children:o})}),it("div",{class:"bio-properties-panel-group-header-buttons",children:[t?it("button",{type:"button",title:a("Create new list item"),class:"bio-properties-panel-group-header-button bio-properties-panel-add-entry",onClick:_,children:[it(GW,{}),x?null:it("span",{class:"bio-properties-panel-add-entry-label",children:a("Create")})]}):null,x?it("div",{title:a("List contains {numOfItems} item"+(1!=i.length?"s":""),{numOfItems:i.length}),class:Ee()("bio-properties-panel-list-badge",S?"bio-properties-panel-list-badge--error":""),children:i.length}):null,x?it("button",{type:"button",title:a("Toggle section"),class:"bio-properties-panel-group-header-button bio-properties-panel-arrow",children:it(ZW,{class:c?"bio-properties-panel-arrow-down":"bio-properties-panel-arrow-right"})}):null]})]}),it("div",{class:Ee()("bio-properties-panel-list",c&&x?"open":""),children:it(cQ.Provider,{value:k,children:i.map(((e,t)=>{if(!e)return;const{id:r}=e,i=w.includes(e.id);return Re(BU,{...e,autoOpen:i,element:n,index:t,key:r,translate:a})}))})})]})}function zU(e,t){const n=e.map((e=>e.id)),r=t.map((e=>e.id));return n.filter((e=>!r.includes(e)))}function HU(e){const{id:t,label:n,onChange:r,disabled:i,value:o=!1,onFocus:s,onBlur:a,tooltip:l}=e,[c,u]=bt(o),h=({target:e})=>{r(e.checked)},d=e=>{h(e),u(e.target.value)};xt((()=>{o!==c&&u(o)}),[o]);const f=OQ(t);return it("div",{class:"bio-properties-panel-checkbox",children:[it("input",{ref:f,id:UU(t),name:t,onFocus:s,onBlur:a,type:"checkbox",class:"bio-properties-panel-input",onChange:d,checked:c,disabled:i}),it("label",{for:UU(t),class:"bio-properties-panel-label",children:it(dQ,{value:l,forId:t,element:e.element,children:n})})]})}function WU(e){const{element:t,id:n,description:r,label:i,getValue:o,setValue:s,disabled:a,onFocus:l,onBlur:c,tooltip:u}=e,h=o(t),d=bQ(n);return it("div",{class:"bio-properties-panel-entry bio-properties-panel-checkbox-entry","data-entry-id":n,children:[it(HU,{disabled:a,id:n,label:i,onChange:s,onFocus:l,onBlur:c,value:h,tooltip:u,element:t},t),d&&it("div",{class:"bio-properties-panel-error",children:d}),it(MQ,{forId:n,element:t,value:r})]})}function QU(e){return e&&!!e.checked}function UU(e){return`bio-properties-panel-${e}`}function YU(e){const{id:t,label:n,onChange:r,options:i=[],value:o="",disabled:s,onFocus:a,onBlur:l,tooltip:c}=e,u=OQ(t),[h,d]=bt(o),f=({target:e})=>{r(e.value)},p=e=>{f(e),d(e.target.value)};return xt((()=>{o!==h&&d(o)}),[o]),it("div",{class:"bio-properties-panel-select",children:[it("label",{for:GU(t),class:"bio-properties-panel-label",children:it(dQ,{value:c,forId:t,element:e.element,children:n})}),it("select",{ref:u,id:GU(t),name:t,class:"bio-properties-panel-input",onInput:p,onFocus:a,onBlur:l,value:h,disabled:s,children:i.map(((e,t)=>e.children?it("optgroup",{label:e.label,children:e.children.map(((e,t)=>it("option",{value:e.value,disabled:e.disabled,children:e.label},t)))},t):it("option",{value:e.value,disabled:e.disabled,children:e.label},t)))})]})}function XU(e){const{element:t,id:n,description:r,label:i,getValue:o,setValue:s,getOptions:a,disabled:l,onFocus:c,onBlur:u,validate:h,tooltip:d}=e,f=a(t),p=bQ(n),[g,m]=bt(null);let v=o(t);xt((()=>{if(O(h)){const e=h(v)||null;m(e)}}),[v,h]);const y=e=>{let t=null;O(h)&&(t=h(e)||null),s(e,t),m(t)},b=p||g;return it("div",{class:Ee()("bio-properties-panel-entry",b?"has-error":""),"data-entry-id":n,children:[it(YU,{id:n,label:i,value:v,onChange:y,onFocus:c,onBlur:u,options:f,disabled:l,tooltip:d,element:t},t),b&&it("div",{class:"bio-properties-panel-error",children:b}),it(MQ,{forId:n,element:t,value:r})]})}function ZU(e){return e&&!!e.value}function GU(e){return`bio-properties-panel-${e}`}function KU(e){e.style.height="auto",e.style.height=`${e.scrollHeight+2}px`}function JU(e){const{id:t,label:n,debounce:r,onInput:i,value:o="",disabled:s,monospace:a,onFocus:l,onBlur:c,autoResize:u=!0,placeholder:h,rows:d=(u?1:2),tooltip:f}=e,[p,g]=bt(o),m=OQ(t),v=CQ(m.current),y=Ot((()=>r((e=>i(e.value.length?e.value:void 0)))),[i,r]),b=e=>{y(e.target),u&&KU(e.target),g(e.target.value)};return kt((()=>{u&&KU(m.current)}),[]),kt((()=>{v&&u&&KU(m.current)}),[v]),xt((()=>{o!==p&&g(o)}),[o]),it("div",{class:"bio-properties-panel-textarea",children:[it("label",{for:nY(t),class:"bio-properties-panel-label",children:it(dQ,{value:f,forId:t,element:e.element,children:n})}),it("textarea",{ref:m,id:nY(t),name:t,spellCheck:"false",class:Ee()("bio-properties-panel-input",a?"bio-properties-panel-input-monospace":"",u?"auto-resize":""),onInput:b,onFocus:l,onBlur:c,placeholder:h,rows:d,value:p,disabled:s,"data-gramm":"false"})]})}function eY(e){const{element:t,id:n,description:r,debounce:i,label:o,getValue:s,setValue:a,rows:l,monospace:c,disabled:u,validate:h,onFocus:d,onBlur:f,placeholder:p,autoResize:g,tooltip:m}=e,v=bQ(n),[y,b]=bt(null);let w=s(t);xt((()=>{if(O(h)){const e=h(w)||null;b(e)}}),[w,h]);const x=e=>{let t=null;O(h)&&(t=h(e)||null),a(e,t),b(t)},k=v||y;return it("div",{class:Ee()("bio-properties-panel-entry",k?"has-error":""),"data-entry-id":n,children:[it(JU,{id:n,label:o,value:w,onInput:x,onFocus:d,onBlur:f,rows:l,debounce:i,monospace:c,disabled:u,placeholder:p,autoResize:g,tooltip:m,element:t},t),k&&it("div",{class:"bio-properties-panel-error",children:k}),it(MQ,{forId:n,element:t,value:r})]})}function tY(e){return e&&!!e.value}function nY(e){return`bio-properties-panel-${e}`}function rY(e){const{debounce:t,disabled:n=!1,id:r,label:i,onInput:o,onFocus:s,onBlur:a,placeholder:l,value:c="",tooltip:u}=e,[h,d]=bt(c||""),f=OQ(r),p=Ot((()=>t((e=>o(e.value.length?e.value:void 0)))),[o,t]),g=e=>{p(e.target),d(e.target.value)};return xt((()=>{c!==h&&d(c)}),[c]),it("div",{class:"bio-properties-panel-textfield",children:[it("label",{for:sY(r),class:"bio-properties-panel-label",children:it(dQ,{value:u,forId:r,element:e.element,children:i})}),it("input",{ref:f,id:sY(r),type:"text",name:r,spellCheck:"false",autoComplete:"off",disabled:n,class:"bio-properties-panel-input",onInput:g,onFocus:s,onBlur:a,placeholder:l,value:h})]})}function iY(e){const{element:t,id:n,description:r,debounce:i,disabled:o,label:s,getValue:a,setValue:l,validate:c,onFocus:u,onBlur:h,placeholder:d,tooltip:f}=e,p=bQ(n),[g,m]=bt(null);let v=a(t);xt((()=>{if(O(c)){const e=c(v)||null;m(e)}}),[v,c]);const y=e=>{let t=null;O(c)&&(t=c(e)||null),l(e,t),m(t)},b=p||g;return it("div",{class:Ee()("bio-properties-panel-entry",b?"has-error":""),"data-entry-id":n,children:[it(rY,{debounce:i,disabled:o,id:n,label:s,onInput:y,onFocus:u,onBlur:h,placeholder:d,value:v,tooltip:f,element:t},t),b&&it("div",{class:"bio-properties-panel-error",children:b}),it(MQ,{forId:n,element:t,value:r})]})}function oY(e){return e&&!!e.value}function sY(e){return`bio-properties-panel-${e}`}class aY{constructor(e){this._eventBus=e}isOpen(){return this._eventBus.fire("feelPopup._isOpen")}open(e,t,n){return this._eventBus.fire("feelPopup._open",{entryId:e,popupConfig:t,sourceElement:n})}close(){return this._eventBus.fire("feelPopup._close")}}aY.$inject=["eventBus"];var lY={feelPopup:["type",aY]};function cY(e,t){}const uY=nt({getService:cY});function hY(e={}){const{getDocumentationRef:t,formFields:n}=e;return{getElementLabel:e=>{const{type:t}=e,r=n.get(t).config;return r.getSubheading?r.getSubheading(e):e.label},getElementIcon:e=>{const{type:t}=e,r=n.get(t).config,i=r.icon||pL(t);return i?()=>it(i,{width:"36",height:"36",viewBox:"0 0 54 54"}):r.iconUrl?Rz({iconUrl:r.iconUrl,label:r.label}):void 0},getTypeLabel:e=>{const{type:t}=e;if("default"===t)return"Form";const r=n.get(t).config;return r.name||r.label||t},getDocumentationRef:t}}const dY={getEmpty:()=>({text:"Select a form field to edit its properties."}),getMultiple:()=>({text:"Multiple form fields are selected. Select a single form field to edit its properties."})},fY={};function pY(e){const{eventBus:t,getProviders:n,injector:r}=e,i=r.get("formEditor"),o=r.get("modeling"),s=r.get("selection"),a=r.get("config.propertiesPanel")||fY,{feelPopupContainer:l}=a,[c,u]=bt({selectedFormField:s.get()||i._getState().schema}),h=c.selectedFormField,d=St((e=>{u({selectedFormField:s.get()||i._getState().schema}),t.fire("propertiesPanel.updated",{formField:e})}),[t,i,s]);kt((()=>(t.on("changed",d),t.on("import.done",d),t.on("selection.changed",d),()=>{t.off("changed",d),t.off("import.done",d),t.off("selection.changed",d)})),[t,d]);const f=(e,t=!0)=>r.get(e,t),p={getService:f},g=()=>t.fire("propertiesPanel.focusin"),m=()=>t.fire("propertiesPanel.focusout"),v=St(((e,t,n)=>o.editFormField(e,t,n)),[o]),y=n(h),b=Ot((()=>F(y,(function(e,t){if(x(h))return[];const n=t.getGroups(h,v);return n(e)}),[])),[y,h,v]),w=f("formFields"),k=Ot((()=>hY({getDocumentationRef:a.getDocumentationRef,formFields:w})),[w,a]);return it("div",{class:"fjs-properties-panel","data-field":h&&h.id,onFocusCapture:g,onBlurCapture:m,children:it(uY.Provider,{value:p,children:it(RU,{element:h,eventBus:t,groups:b,headerProvider:k,placeholderProvider:dY,feelPopupContainer:l})})})}const gY=1e3;class mY{constructor(e,t,n){const{parent:r}=e||{};this._eventBus=n,this._injector=t,this._container=Uj('<div class="fjs-properties-container" input-handle-modified-keys="y,z"></div>'),r&&this.attachTo(r),this._eventBus.once("formEditor.rendered",500,(()=>{this._render()}))}attachTo(e){if(!e)throw new Error("container required");"string"===typeof e&&(e=Xj(e)),this.detach(),e.appendChild(this._container),this._eventBus.fire("propertiesPanel.attach")}detach(){const e=this._container.parentNode;e&&(e.removeChild(this._container),this._eventBus.fire("propertiesPanel.detach"))}_render(){tt(it(pY,{getProviders:this._getProviders.bind(this),eventBus:this._eventBus,injector:this._injector}),this._container),this._eventBus.fire("propertiesPanel.rendered")}_destroy(){this._container&&(tt(null,this._container),this._eventBus.fire("propertiesPanel.destroyed"))}registerProvider(e,t){t||(t=gY),"function"===typeof e.getGroups?(this._eventBus.on("propertiesPanel.getProviders",t,(function(t){t.providers.push(e)})),this._eventBus.fire("propertiesPanel.providersChanged")):console.error("Properties provider does not implement #getGroups(element) API")}_getProviders(){const e=this._eventBus.createEvent({type:"propertiesPanel.getProviders",providers:[]});return this._eventBus.fire(e),e.providers}}function vY(e){const{editField:t,field:n}=e,r=[];return r.push({id:"action",component:yY,editField:t,field:n,isEdited:ZU,isDefaultVisible:e=>"button"===e.type}),r}function yY(e){const{editField:t,field:n,id:r}=e,i=["action"],o=()=>Q(n,i,""),s=e=>t(n,i,e),a=()=>[{label:"Submit",value:"submit"},{label:"Reset",value:"reset"}];return XU({element:n,getOptions:a,getValue:o,id:r,label:"Action",setValue:s})}function bY(e,t){const{getService:n}=Et(uY);return n(e,t)}function wY(){const e=bY("formEditor"),t=e.getSchema();return X$(t)}function xY(e){const{editField:t,field:n}=e,r=[];return r.push({id:"alt",component:kY,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>["image"].includes(e.type)}),r}function kY(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["alt"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return OU({debounce:i,element:n,feel:"optional",getValue:a,id:r,label:"Alternative text",tooltip:"Descriptive text for screen reader accessibility.",setValue:l,singleLine:!0,variables:o})}mY.$inject=["config.propertiesPanel","injector","eventBus"];const _Y="";function OY(e){const{editField:t,field:n}=e,r=[{id:"columns",component:SY,field:n,editField:t,isEdited:ZU}];return r}function SY(e){const{field:t,editField:n,id:r}=e,i=bY("debounce"),o=bY("formLayoutValidator"),s=St((e=>o.validateField(t,e?parseInt(e):null)),[t,o]),a=(e,r)=>{if(r)return;const i=Q(t,["layout"],{}),o=e?parseInt(e):null;n(t,["layout"],W(i,["columns"],o))},l=()=>Q(t,["layout","columns"]),c=()=>[{label:"Auto",value:_Y},...CY(16).filter((e=>e>=Oq)).map(EY)];return XU({debounce:i,element:t,id:r,label:"Columns",getOptions:c,getValue:l,setValue:a,validate:s})}function EY(e){return{value:e,label:e.toString()}}function CY(e){return Array.from({length:e}).map(((e,t)=>t+1))}function TY(e,t,n){const r=[...e];return r.splice(t,0,n),r}function AY(e){const t=fq(e);return t.toString()===t.toFixed(0)?0:t.toFixed().split(".")[1].length||0}function DY(e){return("number"===typeof e||"string"===typeof e)&&""!==e&&!isNaN(Number(e))}function MY(e){return/^\w+(\.\w+)*$/.test(e)}function FY(e){const t=["__proto__","prototype","constructor"];return e.split(".").some((e=>t.includes(e)))}const RY=["button","group","dynamiclist","iframe","table"],PY=["checkbox","checklist","datetime","number","radio","select","taglist","textfield","textarea","filepicker"],IY=["checklist","radio","select","taglist"];function LY(e,t){const{propertiesPanelEntries:n=[]}=e;return!!n.length&&n.some((e=>e===t))}function $Y(e){const{propertiesPanelEntries:t=[]}=e;return!!t.length&&t.some((e=>"values"===e))}function NY(e){return e.split(".").some((e=>/^\d+$/.test(e)))}function jY(e){const{editField:t,field:n}=e,r=[];return r.push({id:"description",component:BY,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"filepicker"!==e.type&&PY.includes(e.type)}),r}function BY(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["description"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return OU({debounce:i,element:n,getValue:a,id:r,label:"Field description",singleLine:!0,setValue:l,variables:o})}const VY="";function qY(e){const{editField:t,field:n}=e,{type:r}=n,i=[];function o(e){return t=>!(!PY.includes(r)||IY.includes(r)&&!t.values)&&e(t)}const s={editField:t,field:n,id:"defaultValue",label:"Default value"};return i.push({...s,component:zY,isEdited:ZU,isDefaultVisible:o((e=>"checkbox"===e.type))}),i.push({...s,component:HY,isEdited:oY,isDefaultVisible:o((e=>"number"===e.type))}),i.push({...s,component:WY,isEdited:ZU,isDefaultVisible:o((e=>"radio"===e.type||"select"===e.type))}),i.push({...s,component:QY,isEdited:oY,isDefaultVisible:o((e=>"textfield"===e.type))}),i.push({...s,component:UY,isEdited:tY,isDefaultVisible:o((e=>"textarea"===e.type))}),i}function zY(e){const{editField:t,field:n,id:r,label:i}=e,{defaultValue:o}=n,s=["defaultValue"],a=()=>[{label:"Checked",value:"true"},{label:"Not checked",value:"false"}],l=e=>t(n,s,YY(e)),c=()=>XY(o);return XU({element:n,getOptions:a,getValue:c,id:r,label:i,setValue:l})}function HY(e){const{editField:t,field:n,id:r,label:i}=e,{decimalDigits:o,serializeToString:s=!1}=n,a=bY("debounce"),l=["defaultValue"],c=e=>{let t=Q(n,l);if(DY(t))return s?fq(t).toFixed():t},u=(e,r)=>{if(r)return;let i;return DY(e)&&(i=s?e:Number(e)),t(n,l,i)},h=o||0===o,d=St((e=>{if(void 0!==e&&null!==e)return DY(e)?h&&AY(e)>o?`Should not contain more than ${o} decimal digits`:void 0:"Should be a valid number"}),[h,o]);return iY({debounce:a,label:i,element:n,getValue:c,id:r,setValue:u,validate:d})}function WY(e){const{editField:t,field:n,id:r,label:i}=e,{defaultValue:o=VY,values:s=[]}=n,a=["defaultValue"],l=()=>[{label:"<none>",value:VY},...s],c=e=>t(n,a,e.length?e:void 0),u=()=>o;return XU({element:n,getOptions:l,getValue:u,id:r,label:i,setValue:c})}function QY(e){const{editField:t,field:n,id:r,label:i}=e,o=bY("debounce"),s=["defaultValue"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return iY({debounce:o,element:n,getValue:a,id:r,label:i,setValue:l})}function UY(e){const{editField:t,field:n,id:r,label:i}=e,o=bY("debounce"),s=["defaultValue"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return eY({debounce:o,element:n,getValue:a,id:r,label:i,setValue:l})}function YY(e){return"true"===e}function XY(e){return!0===e?"true":"false"}function ZY(e){const{editField:t,field:n}=e,r=[];return r.push({id:"disabled",component:GY,editField:t,field:n,isEdited:cU,isDefaultVisible:e=>PY.includes(e.type)}),r}function GY(e){const{editField:t,field:n,id:r}=e,i=["disabled"],o=()=>Q(n,i,""),s=e=>t(n,i,e);return lU({element:n,getValue:o,id:r,label:"Disabled",tooltip:"Field cannot be edited by the end-user, and the data is not submitted. Takes precedence over read only.",inline:!0,setValue:s})}function KY(e){const{editField:t,field:n}=e,r=[];return r.push({id:"id",component:JY,editField:t,field:n,isEdited:oY,isDefaultVisible:e=>"default"===e.type}),r}function JY(e){const{editField:t,field:n,id:r}=e,i=bY("formFieldRegistry"),o=bY("debounce"),s=["id"],a=()=>Q(n,s,""),l=(e,r)=>{if(!r)return t(n,s,e)},c=St((e=>{if("string"!==typeof e||0===e.length)return"Must not be empty.";const t=i._ids.assigned(e);return t&&t!==n?"Must be unique.":rX(e)||null}),[i,n]);return iY({debounce:o,element:n,getValue:a,id:r,label:"ID",setValue:l,validate:c})}const eX=/\s/,tX=/^([a-z][\w-.]*:)?[a-z_][\w-.]*$/i,nX=/^[a-z_][\w-.]*$/i;function rX(e){return iX(e)?"Must not contain spaces.":nX.test(e)?void 0:tX.test(e)?"Must not contain prefix.":"Must be a valid QName."}function iX(e){return eX.test(e)}function oX(e){const{editField:t,field:n,getService:r}=e,i=[];return i.push({id:"key",component:sX,editField:t,field:n,isEdited:oY,isDefaultVisible:e=>{const t=r("formFields"),{config:n}=t.get(e.type);return n.keyed}}),i}function sX(e){const{editField:t,field:n,id:r}=e,i=bY("pathRegistry"),o=bY("debounce"),s=["key"],a=()=>Q(n,s,""),l=(e,r)=>{if(!r)return t(n,s,e)},c=St((e=>{if(e===n.key)return null;if(!S(e)||0===e.length)return"Must not be empty.";if(!MY(e))return"Must be a variable or a dot separated path.";if(NY(e))return"Must not contain numerical path segments.";if(FY(e))return"Must not be a prohibited path.";const t={[n.id]:e.split(".")},r=i.getValuePath(n),o=i.getValuePath(n,{replacements:t});i.unclaimPath(r);const s=i.canClaimPath(o,{isClosed:!0,claimerId:n.id});return i.claimPath(r,{isClosed:!0,claimerId:n.id}),s?null:"Must not conflict with other key/path assignments."}),[n,i]);return iY({debounce:o,description:"Binds to a form variable",element:n,getValue:a,id:r,label:"Key",tooltip:'Use a unique "key" to link the form element and the related input/output data. When dealing with nested data, break it down in the user task\'s input mapping before using it.',setValue:l,validate:c})}function aX(e){const{editField:t,field:n,getService:r}=e,{type:i}=n,o=[],s=r("formFields").get(i);return s&&s.config.pathed&&o.push({id:"path",component:lX,editField:t,field:n,isEdited:oY}),o}function lX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=bY("pathRegistry"),s=bY("formFields").get(n.type).config,a=s.repeatable&&n.isRepeating,l=["path"],c=()=>Q(n,l,""),u=(e,r)=>{if(!r)return t(n,l,e)},h=St((e=>{if(!e&&a)return"Must not be empty";if(!e&&!a||e===n.path)return null;if(!MY(e)){const e=a?"Must be a variable or a dot-separated path":"Must be empty, a variable or a dot-separated path";return e}if(NY(e))return"Must not contain numerical path segments.";if(FY(e))return"Must not be a prohibited path.";const t={replacements:{[n.id]:e.split(".")}},r=o.executeRecursivelyOnFields(n,(({field:e,isClosed:n,isRepeatable:r})=>{const i=o.getValuePath(e,t);return o.canClaimPath(i,{isClosed:n,isRepeatable:r,claimerId:e.id})}));return r?null:"Must not cause two binding paths to collide"}),[n,a,o]),d=a?"Routes the children of this component into a form variable, may be left empty to route at the root level.":"Routes the children of this component into a form variable.";return iY({debounce:i,description:"Where the child variables of this component are pathed to.",element:n,getValue:c,id:r,label:"Path",tooltip:d,setValue:u,validate:h})}function cX(e){const{id:t,label:n,description:r,path:i,props:o,getValue:s,setValue:a,isDefaultVisible:l}=e,{editField:c,field:u}=o;return{id:t,label:n,path:i,field:u,editField:c,description:r,component:uX,isEdited:cU,isDefaultVisible:l,getValue:s,setValue:a}}const uX=e=>{const{id:t,label:n,path:r,field:i,editField:o,getValue:s=()=>Q(i,r,""),setValue:a=e=>o(i,r,e||!1),description:l}=e;return lU({element:i,getValue:s,id:t,label:n,setValue:a,inline:!0,description:l})};function hX(e){const{id:t,label:n,path:r,props:i,optionsArray:o}=e,{editField:s,field:a}=i;return{id:t,label:n,path:r,field:a,editField:s,optionsArray:o,component:dX,isEdited:ZU}}const dX=e=>{const{id:t,label:n,path:r,field:i,editField:o,optionsArray:s}=e,a=()=>Q(i,r,""),l=e=>o(i,r,e),c=()=>s;return XU({label:n,element:i,getOptions:c,getValue:a,id:t,setValue:l})};function fX(e){const{id:t,label:n,path:r,props:i,min:o,max:s}=e,{editField:a,field:l}=i;return{id:t,label:n,path:r,field:l,editField:a,min:o,max:s,component:pX,isEdited:oY}}const pX=e=>{const{id:t,label:n,path:r,field:i,editField:o,min:s=Number.MIN_SAFE_INTEGER,max:a=Number.MAX_SAFE_INTEGER}=e,l=bY("debounce"),c=()=>{const e=Q(i,r),t=DY(e)&&Number.isInteger(e);return t?e:null},u=(e,t)=>{t||o(i,r,Number(e))},h=St((e=>{if(void 0!==e&&null!==e&&""!==e)return Number.isInteger(Number(e))?fq(e).cmp(s)<0?`Should be at least ${s}.`:fq(e).cmp(a)>0?`Should be at most ${a}.`:void 0:"Should be an integer."}),[s,a]);return iY({debounce:l,label:n,element:i,getValue:c,id:t,setValue:u,validate:h})};function gX(e){const{field:t}=e,{type:n}=t;if(!["group","dynamiclist"].includes(n))return[];const r=[cX({id:"showOutline",path:["showOutline"],label:"Show outline",props:e})];return r}function mX(e){const{field:t,editField:n}=e,r=[];r.push({id:"date-label",component:yX,editField:n,field:t,isEdited:SU,isDefaultVisible:function(e){return"datetime"===e.type&&(e.subtype===mF.DATE||e.subtype===mF.DATETIME)}}),r.push({id:"time-label",component:bX,editField:n,field:t,isEdited:SU,isDefaultVisible:function(e){return"datetime"===e.type&&(e.subtype===mF.TIME||e.subtype===mF.DATETIME)}});const i=e=>[...PY.filter((e=>"datetime"!==e)),...RY].includes(e.type);return r.push({id:"label",component:vX,editField:n,field:t,isEdited:SU,isDefaultVisible:i}),r}function vX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["label"],a=()=>Q(n,s,""),l=e=>t(n,s,e||""),c=wX(n.type);return OU({debounce:i,element:n,getValue:a,id:r,label:c,singleLine:!0,setValue:l,variables:o})}function yX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=xF,a=()=>Q(n,s,""),l=e=>t(n,s,e||"");return OU({debounce:i,element:n,getValue:a,id:r,label:"Date label",singleLine:!0,setValue:l,variables:o})}function bX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=_F,a=()=>Q(n,s,""),l=e=>t(n,s,e||"");return OU({debounce:i,element:n,getValue:a,id:r,label:"Time label",singleLine:!0,setValue:l,variables:o})}function wX(e){switch(e){case"group":case"dynamiclist":return"Group label";case"table":return"Table label";case"iframe":return"Title";default:return"Field label"}}function xX(e){const{editField:t,field:n,id:r,description:i,isDefaultVisible:o,defaultValue:s}=e,a=[];return a.push({id:r+"-height",component:kX,description:i,isEdited:fU,editField:t,field:n,defaultValue:s,isDefaultVisible:e=>O(o)?o(e):"spacer"===e.type}),a}function kX(e){const{description:t,editField:n,field:r,id:i}=e,o=bY("debounce"),s=e=>Q(r,["height"],null),a=(e,t)=>{t||n(r,["height"],e)};return dU({debounce:o,description:t,label:"Height",element:r,id:i,getValue:s,setValue:a,validate:_X})}const _X=e=>"number"!==typeof e?"A number is required.":Number.isInteger(e)?e<1?"Should be greater than zero.":void 0:"Should be an integer.";function OX(e){return[...xX({...e,description:"Height of the container in pixels.",isDefaultVisible:e=>"iframe"===e.type})]}const SX=/^(https):\/\/*/i;function EX(e){const{editField:t,field:n}=e,r=[];return r.push({id:"url",component:CX,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"iframe"===e.type}),r}function CX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["url"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return OU({debounce:i,element:n,feel:"optional",getValue:a,id:r,label:"URL",setValue:l,singleLine:!0,tooltip:TX(),validate:AX,variables:o})}function TX(){return it(Ie,{children:[it("p",{children:"Enter a HTTPS URL to a source or populate it dynamically via a template or an expression (e.g., to pass a value from the variable)."}),it("p",{children:"Please make sure that the URL is safe as it might impose security risks."}),it("p",{children:["Not all external sources can be displayed in the iFrame. Read more about it in the"," ",it("a",{target:"_blank",href:"https://developer.mozilla.org/en-US/docs/Web/HTTP/Headers/X-Frame-Options",children:"X-FRAME-OPTIONS documentation"}),"."]})]})}const AX=e=>{if(e&&!e.startsWith("="))return SX.test(e)?void 0:'For security reasons the URL must start with "https".'};function DX(e){const{editField:t,field:n}=e,r=[];return r.push({id:"source",component:MX,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"image"===e.type}),r}function MX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["source"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return OU({debounce:i,description:"Expression or static value (link/data URI)",element:n,feel:"optional",getValue:a,id:r,label:"Image source",tooltip:"Link referring to a hosted image, or use a data URI directly to embed image data into the form.",setValue:l,singleLine:!0,variables:o})}function FX(e){const{editField:t,field:n}=e,r=[{id:"text",component:RX,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"text"===e.type}];return r}function RX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["text"],a=()=>Q(n,s,""),l=e=>t(n,s,e||"");return OU({debounce:i,description:PX,element:n,getValue:a,id:r,label:"Text",hostLanguage:"markdown",setValue:l,variables:o})}const PX=it(Ie,{children:["Supports markdown and templating."," ",it("a",{href:"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-text/",target:"_blank",children:"Learn more"})]});function IX(e){const{editField:t,field:n}=e,r=[{id:"content",component:LX,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"html"===e.type}];return r}function LX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["content"],a=()=>Q(n,s,""),l=e=>t(n,s,e||"");return OU({debounce:i,description:$X,element:n,getValue:a,id:r,label:"Content",hostLanguage:"html",validate:NX,setValue:l,variables:o})}const $X=it(Ie,{children:["Supports HTML, styling, and templating. Styles are automatically scoped to the HTML component."," ",it("a",{href:"https://docs.camunda.io/docs/components/modeler/forms/form-element-library/forms-element-library-html/",target:"_blank",children:"Learn more"})]}),NX=e=>"string"!==typeof e||""===e||e.startsWith("=")?null:void 0;function jX(e){const{editField:t,field:n,id:r}=e,i=[];return i.push({id:r+"-decimalDigits",component:BX,isEdited:fU,editField:t,field:n,isDefaultVisible:e=>"number"===e.type}),i.push({id:r+"-step",component:VX,isEdited:oY,editField:t,field:n,isDefaultVisible:e=>"number"===e.type}),i}function BX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=e=>Q(n,["decimalDigits"]),s=(e,r)=>{r||t(n,["decimalDigits"],e)};return dU({debounce:i,label:"Decimal digits",element:n,step:"any",getValue:o,id:r,setValue:s,validate:qX})}function VX(e){const{editField:t,field:n,id:r}=e,{decimalDigits:i}=n,o=bY("debounce"),s=e=>{let t=Q(n,["increment"]);return DY(t)?t:null},a=e=>{if(!e)return e;const t=e.replace(/^0+/g,"");return(t.startsWith(".")?"0":"")+t},l=(e,r)=>{r||t(n,["increment"],a(e))},c=i||0===i,u=St((e=>{if(void 0!==e&&null!==e){if(!DY(e))return"Should be a valid number.";if(fq(e).cmp(0)<=0)return"Should be greater than zero.";if(c){const t=fq(`1e-${i}`);if(fq(e).cmp(t)<0)return`Should be at least ${t.toString()}.`;if(AY(e)>i)return`Should not contain more than ${i} decimal digits.`}}}),[c,i]);return iY({debounce:o,label:"Increment",element:n,getValue:s,id:r,setValue:l,validate:u})}const qX=e=>{if("number"===typeof e)return Number.isInteger(e)?e<0?"Should be greater than or equal to zero.":void 0:"Should be an integer."};function zX(e){const{editField:t,field:n,id:r}=e,i=[];return i.push({id:`${r}-expression`,component:HX,isEdited:SU,editField:t,field:n,isDefaultVisible:e=>"expression"===e.type}),i.push({id:`${r}-computeOn`,component:WX,isEdited:ZU,editField:t,field:n,isDefaultVisible:e=>"expression"===e.type}),i}function HX(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=()=>n.expression||"",a=e=>{t(n,["expression"],e)};return xU({debounce:i,description:"Define an expression to calculate the value of this field",element:n,feel:"required",getValue:s,id:r,label:"Target value",setValue:a,variables:o})}function WX(e){const{editField:t,field:n,id:r}=e,i=()=>n.computeOn||"",o=e=>{t(n,["computeOn"],e)},s=()=>[{value:"change",label:"Value changes"},{value:"presubmit",label:"Form submission"}];return XU({id:r,label:"Compute on",getValue:i,setValue:o,getOptions:s})}function QX(e){const{editField:t,field:n}=e,r=[];return r.push({id:"serialize-to-string",component:UX,isEdited:QU,editField:t,field:n,isDefaultVisible:e=>"number"===e.type}),r}function UX(e){const{editField:t,field:n,id:r}=e,{defaultValue:i}=n,o=["serializeToString"],s=()=>Q(n,o,""),a=e=>((i||0===i)&&t(n,["defaultValue"],e?fq(i).toFixed():Number(i)),t(n,o,e));return WU({element:n,getValue:s,id:r,label:"Output as string",description:"Allows arbitrary precision values",setValue:a})}function YX(e){const{editField:t,field:n}=e,r=[{id:"subtype",component:XX,isEdited:ZU,editField:t,field:n,isDefaultVisible:e=>"datetime"===e.type}];return r.push({id:"use24h",component:ZX,isEdited:QU,editField:t,field:n,isDefaultVisible:e=>"datetime"===e.type&&(e.subtype===mF.TIME||e.subtype===mF.DATETIME)}),r}function XX(e){const{editField:t,field:n,id:r}=e,i=e=>Q(n,wF),o=()=>{const e=[_F,OF,SF,EF];for(const r of e)t(n,r,void 0)},s=()=>{t(n,_F,"Time"),t(n,EF,vF.UTC_OFFSET),t(n,SF,15)},a=()=>{const e=[xF,kF];for(const r of e)t(n,r,void 0)},l=()=>{t(n,xF,"Date")},c=e=>{const r=i();if(r!==e)return e===mF.DATE?(o(),r===mF.TIME&&l()):e===mF.TIME?(a(),r===mF.DATE&&s()):e===mF.DATETIME&&(r===mF.DATE&&s(),r===mF.TIME&&l()),t(n,wF,e)},u=()=>Object.values(mF).map((e=>({label:yF[e],value:e})));return XU({label:"Subtype",element:n,getOptions:u,getValue:i,id:r,setValue:c})}function ZX(e){const{editField:t,field:n,id:r}=e,i=OF,o=()=>Q(n,i,""),s=e=>t(n,i,e);return WU({element:n,getValue:o,id:r,label:"Use 24h",setValue:s})}function GX(e){const{editField:t,field:n,id:r}=e;function i(e){return t=>"datetime"===t.type&&e.includes(t.subtype)}const o=[];return o.push({id:r+"-timeInterval",component:JX,isEdited:ZU,editField:t,field:n,isDefaultVisible:i([mF.TIME,mF.DATETIME])}),o.push({id:r+"-disallowPassedDates",component:KX,isEdited:QU,editField:t,field:n,isDefaultVisible:i([mF.DATE,mF.DATETIME])}),o}function KX(e){const{editField:t,field:n,id:r}=e,i=kF,o=()=>Q(n,i,""),s=e=>t(n,i,e);return WU({element:n,getValue:o,id:r,label:"Disallow past dates",setValue:s})}function JX(e){const{editField:t,field:n,id:r}=e,i=[1,5,10,15,30,60],o=e=>Q(n,SF),s=e=>t(n,SF,parseInt(e)),a=()=>i.map((e=>({label:60===e?"1h":e+"m",value:e})));return XU({label:"Time interval",element:n,getOptions:a,getValue:o,id:r,setValue:s})}function eZ(e){const{editField:t,field:n}=e,r=[];return r.push({id:"time-format",component:tZ,isEdited:ZU,editField:t,field:n,isDefaultVisible:e=>"datetime"===e.type&&(e.subtype===mF.TIME||e.subtype===mF.DATETIME)}),r}function tZ(e){const{editField:t,field:n,id:r}=e,i=e=>Q(n,EF),o=e=>t(n,EF,e),s=()=>Object.values(vF).map((e=>({label:bF[e],value:e})));return XU({label:"Time format",element:n,getOptions:s,getValue:i,id:r,setValue:o})}function nZ(e){const t=[cX({id:"searchable",path:["searchable"],label:"Searchable",props:e,isDefaultVisible:e=>"select"===e.type})];return t}function rZ(e){const{editField:t,field:n,idPrefix:r,index:i,validateFactory:o}=e,s=[{component:iZ,editField:t,field:n,id:r+"-label",idPrefix:r,index:i,validateFactory:o},{component:oZ,editField:t,field:n,id:r+"-value",idPrefix:r,index:i,validateFactory:o}];return s}function iZ(e){const{editField:t,field:n,id:r,index:i,validateFactory:o}=e,s=bY("debounce"),a=(e,r)=>{if(r)return;const o=Q(n,["values"]);return t(n,"values",W(o,[i,"label"],e))},l=()=>Q(n,["values",i,"label"]),c=Ot((()=>o(Q(n,["values",i,"label"]),(e=>e.label))),[n,i,o]);return iY({debounce:s,element:n,getValue:l,id:r,label:"Label",setValue:a,validate:c})}function oZ(e){const{editField:t,field:n,id:r,index:i,validateFactory:o}=e,s=bY("debounce"),a=(e,r)=>{if(r)return;const o=Q(n,["values"]);return t(n,"values",W(o,[i,"value"],e))},l=()=>Q(n,["values",i,"value"]),c=Ot((()=>o(Q(n,["values",i,"value"]),(e=>e.value))),[n,i,o]);return iY({debounce:s,element:n,getValue:l,id:r,label:"Value",setValue:a,validate:c})}function sZ(e){const{editField:t,field:n,idPrefix:r,index:i,validateFactory:o}=e,s=[{component:aZ,editField:t,field:n,id:r+"-key",idPrefix:r,index:i,validateFactory:o},{component:lZ,editField:t,field:n,id:r+"-value",idPrefix:r,index:i,validateFactory:o}];return s}function aZ(e){const{editField:t,field:n,id:r,index:i,validateFactory:o}=e,s=bY("debounce"),a=(e,r)=>{if(r)return;const o=Q(n,["properties"]),s=Object.keys(o)[i];return t(n,"properties",uZ(o,s,e))},l=()=>Object.keys(Q(n,["properties"]))[i],c=Ot((()=>o(Object.keys(Q(n,["properties"]))[i])),[o,n,i]);return iY({debounce:s,element:n,getValue:l,id:r,label:"Key",setValue:a,validate:c})}function lZ(e){const{editField:t,field:n,id:r,index:i,validateFactory:o}=e,s=bY("debounce"),a=e=>{const r=Q(n,["properties"]),o=Object.keys(r)[i];t(n,"properties",cZ(r,o,e))},l=()=>{const e=Q(n,["properties"]),t=Object.keys(e)[i];return Q(n,["properties",t])};return iY({debounce:s,element:n,getValue:l,id:r,label:"Value",setValue:a,validate:o(l())})}function cZ(e,t,n){return{...e,[t]:n}}function uZ(e,t,n){return Object.entries(e).reduce(((e,r)=>{const[i,o]=r;return{...e,[i===t?n:i]:o}}),{})}function hZ(e){const{autoFocusEntry:t,element:n,getValue:r}=e,i=r(n),o=_Q(i),s=bY("eventBus");return xt((()=>{t&&o&&i!==o&&setTimeout((()=>{s.fire("propertiesPanel.showEntry",{id:t})}))}),[i,t,o,s]),it(XU,{...e})}function dZ(e){const{editField:t,field:n,id:r}=e;return[{id:r+"-select",component:fZ,isEdited:ZU,editField:t,field:n}]}function fZ(e){const{editField:t,field:n,id:r}=e,i=FF,o=e=>{let r=n;const i={};return i[DF[e]]=MF[e],r=t(n,i),r},s=()=>Object.values(CF).map((e=>({label:AF[e],value:e})));return hZ({autoFocusEntry:pZ(n),label:"Type",element:n,getOptions:s,getValue:i,id:r,setValue:o})}function pZ(e){const t=FF(e);return t===CF.EXPRESSION?"optionsExpression-expression":t===CF.INPUT?"dynamicOptions-key":t===CF.STATIC?"staticOptions-0-label":null}function gZ(e){const{editField:t,field:n,id:r}=e;return[{id:r+"-key",component:mZ,isEdited:oY,editField:t,field:n}]}function mZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=DF[CF.INPUT],s='[\n  {\n    "label": "dollar",\n    "value": "$"\n  }\n]',a=it("div",{children:["The input property may be an array of simple values or alternatively follow this schema:",it("pre",{children:it("code",{children:s})})]}),l=()=>Q(n,o,""),c=(e,r)=>{r||t(n,o,e||"")};return iY({debounce:i,description:"Define which input property to populate the values from",tooltip:a,element:n,getValue:l,id:r,label:"Input values key",setValue:c,validate:vZ})}const vZ=e=>"string"!==typeof e||0===e.length?"Must not be empty.":/\s/.test(e)?"Must not contain spaces.":null;function yZ(e){const{editField:t,field:n,id:r}=e,{values:i}=n,o=e=>{e.stopPropagation();const r=i.length+1,o=bZ(r,i);t(n,DF[CF.STATIC],TY(i,i.length,o))},s=e=>{t(n,DF[CF.STATIC],M(i,e))},a=(e,t)=>n=>{if(n===e)return;if("string"!==typeof n||0===n.length)return"Must not be empty.";const r=i.find((e=>t(e)===n));return r?"Must be unique.":void 0},l=i.map(((e,i)=>{const o=r+"-"+i;return{id:o,label:e.label,entries:rZ({editField:t,field:n,idPrefix:o,index:i,validateFactory:a}),autoFocusEntry:o+"-label",remove:()=>s(e)}}));return{items:l,add:o}}function bZ(e,t){const n={label:"Value",value:"value"};while(wZ(e,t))e++;return e>1&&(n.label+=` ${e}`,n.value+=`${e}`),n}function wZ(e,t){return t.some((t=>t.label===`Value ${e}`||t.value===`value${e}`))}function xZ(e){const{editField:t,field:n}=e,r=[],i=e=>r=>{const i=Q(n,["appearance"],{});t(n,["appearance"],W(i,[e],r))},o=e=>()=>Q(n,["appearance",e]);return r.push({id:"prefix-adorner",component:kZ,isEdited:SU,editField:t,field:n,onChange:i,getValue:o,isDefaultVisible:e=>["number","textfield"].includes(e.type)}),r.push({id:"suffix-adorner",component:_Z,isEdited:SU,editField:t,field:n,onChange:i,getValue:o,isDefaultVisible:e=>["number","textfield"].includes(e.type)}),r}function kZ(e){const{field:t,id:n,onChange:r,getValue:i}=e,o=bY("debounce"),s=wY().map((e=>({name:e})));return OU({debounce:o,element:t,feel:"optional",getValue:i("prefixAdorner"),id:n,label:"Prefix",setValue:r("prefixAdorner"),singleLine:!0,variables:s})}function _Z(e){const{field:t,id:n,onChange:r,getValue:i}=e,o=bY("debounce"),s=wY().map((e=>({name:e})));return OU({debounce:o,element:t,getValue:i("suffixAdorner"),id:n,label:"Suffix",setValue:r("suffixAdorner"),singleLine:!0,variables:s})}function OZ(e){const{editField:t,field:n}=e,{disabled:r}=n,i=[];return r||i.push({id:"readonly",component:SZ,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>PY.includes(e.type)}),i}function SZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["readonly"],a=()=>Q(n,s,""),l=e=>t(n,s,e||!1);return _U({debounce:i,element:n,feel:"optional",getValue:a,id:r,label:"Read only",tooltip:"Field cannot be edited by the end-user, but the data will still be submitted.",setValue:l,variables:o})}function EZ(e){const{field:t}=e;if(!["group","dynamiclist"].includes(t.type))return[];const n=[hX({id:"verticalAlignment",path:["verticalAlignment"],label:"Vertical alignment",optionsArray:[{value:"start",label:"Top"},{value:"center",label:"Center"},{value:"end",label:"Bottom"}],props:e})];return n}function CZ(e){const{field:t,getService:n}=e,{type:r}=t,i=n("formFields").get(r);if(!i||!i.config.repeatable)return[];const o=[fX({id:"defaultRepetitions",path:["defaultRepetitions"],label:"Default number of items",min:1,max:20,props:e}),cX({id:"allowAddRemove",path:["allowAddRemove"],label:"Allow add/delete items",props:e}),cX({id:"disableCollapse",path:["disableCollapse"],label:"Disable collapse",props:e})];if(!t.disableCollapse){const t=fX({id:"nonCollapsedItems",path:["nonCollapsedItems"],label:"Number of non-collapsing items",min:1,defaultValue:5,props:e});o.push(t)}return o}function TZ(e){const{editField:t,field:n}=e;return[{id:"conditional-hide",component:AZ,editField:t,field:n,isEdited:SU}]}function AZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["conditional","hide"],a=()=>Q(n,s,""),l=e=>t(n,"conditional",e?{hide:e}:void 0);let c="Hide if",u="Condition under which the field is hidden";return"expression"===n.type&&(c="Deactivate if",u="Condition under which the field is deactivated"),xU({debounce:i,description:u,element:n,feel:"required",getValue:a,id:r,label:c,setValue:l,variables:o})}function DZ(e){const{editField:t,field:n,id:r}=e;return[{id:r+"-expression",component:MZ,isEdited:SU,editField:t,field:n}]}function MZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=DF[CF.EXPRESSION],a='[\n  {\n    "label": "dollar",\n    "value": "$"\n  }\n]',l=it("div",{children:["The expression may result in an array of simple values or alternatively follow this schema:",it("pre",{children:it("code",{children:a})})]}),c=()=>Q(n,s,""),u=e=>t(n,s,e||"");return xU({debounce:i,description:"Define an expression to populate the options from.",tooltip:l,element:n,feel:"required",getValue:c,id:r,label:"Options expression",setValue:u,variables:o})}function FZ(e){const{editField:t,field:n}=e,r=[];return r.push({id:"dataSource",component:RZ,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"table"===e.type}),r}function RZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["dataSource"],a=()=>Q(n,s,n.id),l=(e,r)=>{r||t(n,s,e)};return OU({debounce:i,description:"Specify the source from which to populate the table",element:n,feel:"required",getValue:a,id:r,label:"Data source",tooltip:"Enter a form input variable that contains the data for the table or define an expression to populate the data dynamically.",setValue:l,singleLine:!0,variables:o,validate:PZ})}const PZ=e=>S(e)&&0!==e.length?e.startsWith("=")?null:MY(e)?NY(e)?"Must not contain numerical path segments.":null:"Must be a variable or a dot separated path.":"Must not be empty.";function IZ(e){const{editField:t,field:n}=e,r=[];return r.push({id:"pagination",component:LZ,editField:t,field:n,isEdited:cU,isDefaultVisible:e=>"table"===e.type}),r}function LZ(e){const{editField:t,field:n,id:r}=e,i=10,o=["rowCount"],s=()=>_(Q(n,o)),a=e=>{t(n,o,e?i:void 0)};return lU({element:n,getValue:s,id:r,label:"Pagination",inline:!0,setValue:a})}const $Z=["rowCount"];function NZ(e){const{editField:t,field:n}=e,r=[];return r.push({id:"rowCount",component:jZ,isEdited:fU,editField:t,field:n,isDefaultVisible:e=>"table"===e.type&&_(Q(e,$Z))}),r}function jZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=()=>Q(n,$Z),s=(e,r)=>{r||t(n,$Z,e)};return dU({debounce:i,label:"Number of rows per page",element:n,id:r,getValue:o,setValue:s,validate:BZ})}const BZ=e=>w(e)?null:_(e)?Number.isInteger(e)?e<1?"Should be greater than zero.":null:"Should be an integer.":"Must be number",VZ={static:{label:"List of items",value:"static"},expression:{label:"Expression",value:"expression"}},qZ=Object.values(VZ),zZ=["columns"],HZ=["columnsExpression"];function WZ(e){const{editField:t,field:n,id:r}=e;return[{id:r+"-select",component:QZ,isEdited:ZU,editField:t,field:n}]}function QZ(e){const{editField:t,field:n,id:r}=e,i=()=>{const e=Q(n,zZ),t=Q(n,HZ);return S(t)?VZ.expression.value:x(e)?VZ.static.value:void 0},o=e=>{switch(e){case VZ.static.value:t(n,{columns:[{label:"Column",key:"inputVariable"}]});break;case VZ.expression.value:t(n,{columnsExpression:"="});break}},s=()=>qZ;return hZ({autoFocusEntry:UZ(n),label:"Type",element:n,getOptions:s,getValue:i,id:r,setValue:o})}function UZ(e){const t=Q(e,zZ),n=Q(e,HZ);return S(n)?`${e.id}-columnsExpression`:x(t)?`${e.id}-columns-0-label`:null}const YZ=["columnsExpression"];function XZ(e){const{editField:t,field:n}=e,r=[];return r.push({id:`${n.id}-columnsExpression`,component:ZZ,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"table"===e.type&&S(Q(e,YZ))}),r}function ZZ(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=()=>Q(n,YZ),a=(e,r)=>{r||t(n,YZ,e)},l='[\n  {\n    "key": "column_1",\n    "label": "Column 1"\n  }\n]',c=it("div",{children:["The expression may result in an array of simple values or alternatively follow this schema:",it("pre",{children:it("code",{children:l})})]});return OU({debounce:i,description:"Specify an expression to populate column items",element:n,feel:"required",getValue:s,id:r,label:"Expression",tooltip:c,setValue:a,singleLine:!0,variables:o,validate:GZ})}const GZ=e=>S(e)&&0!==e.length&&"="!==e?null:"Must not be empty.",KZ="columns",JZ="label",eG="key";function tG(e){const{editField:t,field:n,idPrefix:r,index:i}=e,o=[{component:nG,editField:t,field:n,id:r+"-label",idPrefix:r,index:i},{component:rG,editField:t,field:n,id:r+"-key",idPrefix:r,index:i}];return o}function nG(e){const{editField:t,field:n,id:r,index:i}=e,o=bY("debounce"),s=(e,r)=>{if(r)return;const o=Q(n,[KZ]);t(n,KZ,W(o,[i,JZ],e))},a=()=>Q(n,[KZ,i,JZ]);return iY({debounce:o,element:n,getValue:a,id:r,label:"Label",setValue:s})}function rG(e){const{editField:t,field:n,id:r,index:i}=e,o=bY("debounce"),s=(e,r)=>{if(r)return;const o=Q(n,[KZ]);t(n,KZ,W(o,[i,eG],e))},a=()=>Q(n,[KZ,i,eG]);return iY({debounce:o,element:n,getValue:a,id:r,label:"Key",setValue:s,validate:iG})}function iG(e){return S(e)&&0!==e.length?null:"Must not be empty."}const oG=["columns"];function sG(e){const{editField:t,field:n,id:r}=e,{columns:i}=n,o=e=>{e.stopPropagation();const r={label:"Column",key:"inputVariable"};t(n,oG,TY(i,i.length,r))},s=e=>{t(n,oG,M(i,e))},a=i.map(((e,i)=>{const o=`${r}-${i}`;return{id:o,label:e.label||e.key,entries:tG({editField:t,field:n,idPrefix:o,index:i}),autoFocusEntry:`${o}-label`,remove:()=>s(e)}}));return{items:a,add:o}}function aG(e){const{editField:t,field:n}=e,r=[];return r.push({id:"versionTag",component:lG,editField:t,field:n,isEdited:oY,isDefaultVisible:e=>"default"===e.type}),r}function lG(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=["versionTag"],s=()=>Q(n,o,""),a=(e,r)=>{if(!r)return t(n,o,e)},l=it("div",{children:"Version tag by which this form can be referenced."});return iY({debounce:i,element:n,getValue:s,id:r,label:"Version tag",setValue:a,tooltip:l})}function cG(e){const{editField:t,field:n}=e,r=[];return r.push({id:"accept",component:uG,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"filepicker"===e.type}),r}function uG(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["accept"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return OU({debounce:i,element:n,getValue:a,id:r,label:"Supported file formats",singleLine:!0,setValue:l,variables:o,description:hG})}const hG=it(Ie,{children:["A comma-separated list of"," ",it("a",{href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/input/file#unique_file_type_specifiers",target:"_blank",children:"file type specifiers"})]});function dG(e){const{editField:t,field:n}=e,r=[];return r.push({id:"multiple",component:fG,editField:t,field:n,isEdited:SU,isDefaultVisible:e=>"filepicker"===e.type}),r}function fG(e){const{editField:t,field:n,id:r}=e,i=bY("debounce"),o=wY().map((e=>({name:e}))),s=["multiple"],a=()=>Q(n,s,""),l=e=>t(n,s,e);return _U({debounce:i,element:n,feel:"optional",getValue:a,id:r,label:"Upload multiple files",inline:!0,setValue:l,variables:o})}function pG(e,t,n){const r=[...KY({field:e,editField:t}),...aG({field:e,editField:t}),...mX({field:e,editField:t}),...jY({field:e,editField:t}),...oX({field:e,editField:t,getService:n}),...aX({field:e,editField:t,getService:n}),...CZ({field:e,editField:t,getService:n}),...qY({field:e,editField:t}),...vY({field:e,editField:t}),...YX({field:e,editField:t}),...FX({field:e,editField:t,getService:n}),...IX({field:e,editField:t,getService:n}),...EX({field:e,editField:t}),...OX({field:e,editField:t}),...xX({field:e,editField:t}),...jX({field:e,editField:t}),...zX({field:e,editField:t}),...DX({field:e,editField:t}),...xY({field:e,editField:t}),...nZ({field:e,editField:t}),...cG({field:e,editField:t}),...dG({field:e,editField:t}),...ZY({field:e,editField:t}),...OZ({field:e,editField:t}),...FZ({field:e,editField:t}),...IZ({field:e,editField:t}),...NZ({field:e,editField:t})];return 0===r.length?null:{id:"general",label:"General",entries:r}}function gG(e,t){const n=[...QX({field:e,editField:t}),...eZ({field:e,editField:t})];return n.length?{id:"serialization",label:"Serialization",entries:n}:null}function mG(e,t){const n=[...GX({field:e,editField:t})];return n.length?{id:"constraints",label:"Constraints",entries:n}:null}const vG={custom:{value:"",label:"Custom"},email:{value:"email",label:"Email"},phone:{value:"phone",label:"Phone"}};function yG(e,t){const{type:n}=e,r=Q(e,["validate"],{}),i=[void 0,vG.custom.value].includes(r.validationType),o=n=>r=>{const i=Q(e,["validate"],{});t(e,["validate"],W(i,[n],r))},s=t=>()=>Q(e,["validate",t]);let a=[{id:"required",component:bG,getValue:s,field:e,isEdited:QU,onChange:o,isDefaultVisible:e=>PY.includes(e.type)}];return a.push({id:"validationType",component:SG,getValue:s,field:e,editField:t,isEdited:oY,onChange:o,isDefaultVisible:e=>"textfield"===e.type}),a.push({id:"minLength",component:wG,getValue:s,field:e,isEdited:SU,onChange:o,isDefaultVisible:e=>PY.includes(e.type)&&("textarea"===n||"textfield"===n&&i)},{id:"maxLength",component:xG,getValue:s,field:e,isEdited:SU,onChange:o,isDefaultVisible:e=>PY.includes(e.type)&&("textarea"===n||"textfield"===n&&i)}),a.push({id:"pattern",component:kG,getValue:s,field:e,isEdited:oY,onChange:o,isDefaultVisible:e=>PY.includes(e.type)&&"textfield"===n&&i}),a.push({id:"min",component:_G,getValue:s,field:e,isEdited:SU,onChange:o,isDefaultVisible:e=>"number"===e.type},{id:"max",component:OG,getValue:s,field:e,isEdited:SU,onChange:o,isDefaultVisible:e=>"number"===e.type}),{id:"validation",label:"Validation",entries:a}}function bG(e){const{field:t,getValue:n,id:r,onChange:i}=e;return WU({element:t,getValue:n("required"),id:r,label:"Required",setValue:i("required")})}function wG(e){const{field:t,getValue:n,id:r,onChange:i}=e,o=bY("debounce"),s=wY().map((e=>({name:e})));return kU({debounce:o,element:t,feel:"optional",getValue:n("minLength"),id:r,label:"Minimum length",min:0,setValue:i("minLength"),variables:s})}function xG(e){const{field:t,getValue:n,id:r,onChange:i}=e,o=bY("debounce"),s=wY().map((e=>({name:e})));return kU({debounce:o,element:t,feel:"optional",getValue:n("maxLength"),id:r,label:"Maximum length",min:0,setValue:i("maxLength"),variables:s})}function kG(e){const{field:t,getValue:n,id:r,onChange:i}=e,o=bY("debounce");return iY({debounce:o,element:t,getValue:n("pattern"),id:r,label:"Custom regular expression",setValue:i("pattern")})}function _G(e){const{field:t,getValue:n,id:r,onChange:i}=e,o=bY("debounce"),s=wY().map((e=>({name:e})));return kU({debounce:o,element:t,feel:"optional",id:r,label:"Minimum",step:"any",getValue:n("min"),setValue:i("min"),variables:s})}function OG(e){const{field:t,getValue:n,id:r,onChange:i}=e,o=bY("debounce"),s=wY().map((e=>({name:e})));return kU({debounce:o,element:t,feel:"optional",id:r,label:"Maximum",step:"any",getValue:n("max"),setValue:i("max"),variables:s})}function SG(e){const{field:t,getValue:n,id:r,onChange:i}=e,o=bY("debounce"),s=e=>{i("validationType")(e||void 0)};return XU({debounce:o,element:t,getValue:n("validationType"),id:r,label:"Validation pattern",setValue:s,getOptions:()=>Object.values(vG),tooltip:n("validationType")()===vG.phone.value?"The built-in phone validation pattern is based on the E.164 standard with no spaces. Ex: +491234567890":void 0})}function EG(e,t,n){const{type:r}=e,i=n("formFields"),o=i.get(r).config;if(!IY.includes(r)&&!$Y(o))return[];const s={editField:t,field:e},a="valuesSource",l=[{id:a,label:"Options source",tooltip:CG(),component:TQ,entries:dZ({...s,id:a})}],c=FF(e);if(c===CF.INPUT){const e="dynamicOptions";l.push({id:e,label:"Dynamic options",component:TQ,entries:gZ({...s,id:e})})}else if(c===CF.STATIC){const e="staticOptions";l.push({id:e,label:"Static options",component:qU,...yZ({...s,id:e})})}else if(c===CF.EXPRESSION){const e="optionsExpression";l.push({id:e,label:"Options expression",component:TQ,entries:DZ({...s,id:e})})}return l}function CG(){return'"Static" defines a constant, predefined set of form options.\n\n"Input data" defines options that are populated dynamically, adjusting based on variable data for flexible responses to different conditions or inputs.\n\n"Expression" defines options that are populated from a FEEL expression.'}function TG(e,t){const{properties:n={},type:r}=e;if("default"===r)return null;const i=r=>{r.stopPropagation();let i=Object.keys(n).length+1;while(`key${i}`in n)i++;t(e,["properties"],{...n,[`key${i}`]:"value"})},o=e=>t=>{if(t!==e)return"string"!==typeof t||0===t.length?"Must not be empty.":C(n,t)?"Must be unique.":void 0},s=Object.keys(n).map(((r,i)=>{const s=i=>(i.stopPropagation(),t(e,["properties"],AG(n,r))),a=`property-${i}`;return{autoFocusEntry:a+"-key",entries:sZ({editField:t,field:e,idPrefix:a,index:i,validateFactory:o}),id:a,label:r||"",remove:s}}));return{add:i,component:qU,id:"custom-values",items:s,label:"Custom properties",tooltip:"Add properties directly to the form schema, useful to configure functionality in custom-built task applications and form renderers."}}function AG(e,t){return Object.entries(e).reduce(((e,n)=>{const[r,i]=n;return r===t?e:{...e,[r]:i}}),{})}function DG(e,t,n){const r=[...xZ({field:e,editField:t}),...gX({field:e,editField:t}),...EZ({field:e,editField:t})];return r.length?{id:"appearance",label:"Appearance",entries:r}:null}function MG(e,t){const{type:n}=e;if("default"===n)return null;const r=[...OY({field:e,editField:t})];return 0===r.length?null:{id:"layout",label:"Layout",entries:r}}function FG(e,t){const{type:n}=e;if("iframe"!==n)return null;const r=RG({field:e,editField:t});return r.length?{id:"securityAttributes",label:"Security attributes",entries:r,tooltip:IG()}:null}function RG(e){const{editField:t,field:n}=e,r=IF.map((r=>{const{label:i,property:o}=r;return cX({id:o,label:i,isDefaultVisible:e=>"iframe"===e.type,path:["security",o],props:e,getValue:()=>Q(n,["security",o]),setValue:e=>{const r=Q(n,["security"],{});t(n,["security"],W(r,[o],e))}})}));return[{component:PG},...r]}const PG=e=>it("div",{class:"bio-properties-panel-description fjs-properties-panel-detached-description",children:"These options can incur security risks, especially if used in combination with dynamic links. Ensure that you are aware of them, that you trust the source url and only enable what your use case requires."});function IG(){return it(Ie,{children:it("p",{children:["Allow the iframe to access more functionality of your browser, details regarding the various options can be found in the"," ",it("a",{target:"_blank",href:"https://developer.mozilla.org/en-US/docs/Web/HTML/Element/iframe",children:"MDN iFrame documentation."})]})})}function LG(e,t){const{type:n}=e;if("default"===n)return null;const r=[...TZ({field:e,editField:t})];return{id:"condition",label:"Condition",entries:r}}function $G(e,t){const{type:n,id:r}=e;if("table"!==n)return[];const i=x(Q(e,["columns"])),o=[{id:`${r}-columnsSource`,label:"Headers source",tooltip:NG,component:TQ,entries:[...WZ({field:e,editField:t}),...XZ({field:e,editField:t})]}];if(i){const n=`${r}-columns`;o.push({id:n,label:"Header items",component:qU,...sG({field:e,editField:t,id:n})})}return o}const NG='"List of items" defines a constant, predefined set of form options.\n\n"Expression" defines options that are populated from a FEEL expression.\n';class jG{constructor(e,t){this._injector=t,e.registerProvider(this)}_filterVisibleEntries(e,t,n){return e.forEach((e=>{const{entries:r}=e,{type:i}=t,o=n("formFields"),s=o.get(i).config;r&&(e.entries=r.filter((e=>{const{isDefaultVisible:n}=e;return!n||(n(t)||LY(s,e.id))})))}))}getGroups(e,t){return n=>{if(!e)return n;const r=(e,t=!0)=>this._injector.get(e,t);return n=[...n,pG(e,t,r),...EG(e,t,r),...$G(e,t),FG(e,t),LG(e,t),MG(e,t),DG(e,t),gG(e,t),mG(e,t),yG(e,t),TG(e,t)].filter((e=>null!=e)),this._filterVisibleEntries(n,e,r),n.filter((e=>e.items||e.entries&&e.entries.length))}}}jG.$inject=["propertiesPanel","injector"];const BG={__depends__:[lY],__init__:["propertiesPanel","propertiesProvider"],propertiesPanel:["type",mY],propertiesProvider:["type",jG]};class VG extends UW{constructor(e){super(e,"renderInjector"),this._eventBus=e,this.registeredRenderers=[]}attachRenderer(e,t){this.registeredRenderers=[...this.registeredRenderers,{identifier:e,Renderer:t}]}detachRenderer(e){this.registeredRenderers=this.registeredRenderers.filter((t=>t.identifier!==e))}fetchRenderers(){return this.registeredRenderers}}VG.$inject=["eventBus"];const qG={__init__:["renderInjector"],renderInjector:["type",VG]};var zG;function HG(){return HG=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},HG.apply(null,arguments)}var WG=function(e){return Re("svg",HG({xmlns:"http://www.w3.org/2000/svg",width:16,height:16,fill:"none"},e),zG||(zG=Re("path",{fill:"currentColor",d:"M3 3h10.086l-1.793-1.793L12 .5l3 3-3 3-.707-.707L13.086 4H3v3.5H2V4a1 1 0 0 1 1-1M4.707 10.207 2.914 12H13V8.5h1V12a1 1 0 0 1-1 1H2.914l1.793 1.793L4 15.5l-3-3 3-3z"})))};class QG{constructor(e,t){this._formFields=e,this._formFieldRegistry=t,this.RepeatFooter=this.RepeatFooter.bind(this)}isFieldRepeating(e){if(!e)return!1;const t=this._formFieldRegistry.get(e),n=this._formFields.get(t.type);return n.config.repeatable&&t.isRepeating}RepeatFooter(){return it("div",{className:"fjs-repeat-render-footer",children:[it(WG,{}),it("span",{children:"Repeatable"})]})}}QG.$inject=["formFields","formFieldRegistry"];const UG={__init__:["repeatRenderManager"],repeatRenderManager:["type",QG]},YG=new g([32,36,1]);class XG{constructor(e={}){this.on=this._onEvent,this._id=YG.next(),this._container=$F(),this._container.setAttribute("input-handle-modified-keys","z,y");const{container:t,exporter:n,injector:r=this._createInjector(e,this._container),properties:i={}}=e;this.exporter=n,this._state={properties:i,schema:null},this.get=r.get,this.invoke=r.invoke,this.get("eventBus").fire("form.init"),t&&this.attachTo(t)}clear(){this._emit("diagram.clear"),this._emit("form.clear")}destroy(){this.get("eventBus").fire("form.destroy"),this.get("eventBus").fire("diagram.destroy"),this._detach(!1)}importSchema(e){return new Promise(((t,n)=>{try{this.clear();const{schema:n,warnings:r}=this.get("importer").importSchema(e);return this._setState({schema:n}),this._emit("import.done",{warnings:r}),t({warnings:r})}catch(IH){return this._emit("import.done",{error:IH,warnings:IH.warnings||[]}),n(IH)}}))}saveSchema(){return this.getSchema()}getSchema(){const{schema:e}=this._getState();return ZG(e,this.exporter,GN)}attachTo(e){if(!e)throw new Error("parentNode required");this.detach(),S(e)&&(e=document.querySelector(e));const t=this._container;e.appendChild(t),this._emit("attach")}detach(){this._detach()}_detach(e=!0){const t=this._container,n=t.parentNode;n&&(e&&this._emit("detach"),n.removeChild(t))}setProperty(e,t){const n=W(this._getState().properties,[e],t);this._setState({properties:n})}off(e,t){this.get("eventBus").off(e,t)}_createInjector(e,t){const{modules:n=this._getModules(),additionalModules:r=[],renderer:i={},...o}=e,s={...o,renderer:{...i,container:t}};return LF([{config:["value",s]},{formEditor:["value",this]},MH,...n,...r])}_emit(e,t){this.get("eventBus").fire(e,t)}_getState(){return this._state}_setState(e){this._state={...this._state,...e},this._emit("changed",this._getState())}_getModules(){return[zW,NH,hW,dW,QW,XW,BH,eN,BG,qG,UG]}_onEvent(e,t,n){this.get("eventBus").on(e,t,n)}}function ZG(e,t,n){const r=t?{exporter:t}:{},i=UF(e,((e,t)=>{if(!["_parent","_path"].includes(e))return t}));return{...i,...r,schemaVersion:n}}var GG={name:"FormEditor",props:{schema:{type:Object,required:!1,default:()=>({type:"default",components:[]})}},data(){return{editor:null}},mounted(){this.initializeEditor()},beforeUnmount(){this.editor&&this.editor.destroy()},methods:{initializeEditor(){const e=this.$refs.formEditorContainer;this.editor=new XG({container:e}),this.editor.importSchema(this.schema).catch((e=>{console.error("Erro ao importar schema:",e)}))},async getSchema(){return this.editor?await this.editor.saveSchema():null}}},KG=n(1241);const JG=(0,KG.A)(GG,[["render",h]]);var eK=JG,tK={components:{editarFichaComponent:eK},data(){return{initialSchema:{type:"default",components:[{text:"# Teste Criação de Formulário\n\nAdicione os campos abaixo",type:"text"},{key:"textField",type:"textfield",label:"Seu Nome",description:"Digite seu nome completo"}]}}},methods:{async saveSchema(){const e=await this.$refs.formEditor.getSchema();console.log("Schema exportado:",e)}}};const nK=(0,KG.A)(tK,[["render",l]]);var rK=nK},5719:function(e,t){var n,r;
/*!
	Copyright (c) 2018 Jed Watson.
	Licensed under the MIT License (MIT), see
	http://jedwatson.github.io/classnames
*/(function(){"use strict";var i={}.hasOwnProperty;function o(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=a(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return o.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)i.call(e,n)&&e[n]&&(t=a(t,n));return t}function a(e,t){return t?e?e+" "+t:e+t:e}e.exports?(o.default=o,e.exports=o):(n=[],r=function(){return o}.apply(t,n),void 0===r||(e.exports=r))})()},1114:function(e,t,n){"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}function i(e,t){if("object"!=r(e)||!e)return e;var n=e[Symbol.toPrimitive];if(void 0!==n){var i=n.call(e,t||"default");if("object"!=r(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===t?String:Number)(e)}function o(e){var t=i(e,"string");return"symbol"==r(t)?t:t+""}function s(e,t,n){return(t=o(t))in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{A:function(){return s}})}}]);
//# sourceMappingURL=1781.9b5d1c67.js.map